/*! For license information please see onix.js.LICENSE.txt */
(()=>{var t,e,n,r,i={8716:(t,e,n)=>{"use strict";var r=n(9998),i=n(1134),o=n(1635),a=n(1625),s=n(2477);function u(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var c,l=u(r),h=((c={})["already-activated"]="You are trying to activate AppCheck for FirebaseApp {$appName}, while it is already activated. AppCheck can only be activated once.",c["use-before-activation"]="AppCheck is being used before activate() is called for FirebaseApp {$appName}. Please make sure you call activate() before instantiating other Firebase services.",c["fetch-network-error"]="Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",c["fetch-parse-error"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",c["fetch-status-error"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",c["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",c["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",c["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",c["recaptcha-error"]="ReCAPTCHA error.",c),d=new a.ErrorFactory("appCheck","AppCheck",h),f=new Map,p={activated:!1,tokenObservers:[]},g={enabled:!1};function m(t){return f.get(t)||p}function v(t,e){f.set(t,e)}function y(){return g}var b="https://content-firebaseappcheck.googleapis.com/v1beta",_="exchangeDebugToken",w={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4},S=function(){function t(t,e,n,r,i){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=r,r>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}return t.prototype.start=function(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch((function(){}))},t.prototype.stop=function(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)},t.prototype.isRunning=function(){return!!this.pending},t.prototype.process=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e;return o.__generator(this,(function(n){switch(n.label){case 0:this.stop(),n.label=1;case 1:return n.trys.push([1,6,,7]),this.pending=new a.Deferred,[4,(r=this.getNextRun(t),new Promise((function(t){setTimeout(t,r)})))];case 2:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 3:return n.sent(),this.pending=new a.Deferred,[4,this.operation()];case 4:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 5:return n.sent(),this.process(!0).catch((function(){})),[3,7];case 6:return e=n.sent(),this.retryPolicy(e)?this.process(!1).catch((function(){})):this.stop(),[3,7];case 7:return[2]}var r}))}))},t.prototype.getNextRun=function(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();var e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e},t}();function T(){return self.grecaptcha}function x(t){if(!m(t).activated)throw d.create("use-before-activation",{appName:t.name})}function I(t){return a.base64.encodeString(JSON.stringify(t),!1)}function k(t,e){var n=t.url,r=t.body;return o.__awaiter(this,void 0,void 0,(function(){var t,i,a,s,u,c,l,h,f,p;return o.__generator(this,(function(o){switch(o.label){case 0:t={"Content-Type":"application/json"},(i=e.getImmediate({optional:!0}))&&(t["X-Firebase-Client"]=i.getPlatformInfoString()),a={method:"POST",body:JSON.stringify(r),headers:t},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,fetch(n,a)];case 2:return s=o.sent(),[3,4];case 3:throw u=o.sent(),d.create("fetch-network-error",{originalErrorMessage:u.message});case 4:if(200!==s.status)throw d.create("fetch-status-error",{httpStatus:s.status});o.label=5;case 5:return o.trys.push([5,7,,8]),[4,s.json()];case 6:return c=o.sent(),[3,8];case 7:throw l=o.sent(),d.create("fetch-parse-error",{originalErrorMessage:l.message});case 8:if(!(h=c.ttl.match(/^([\d.]+)(s)$/))||!h[2]||isNaN(Number(h[1])))throw d.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration format: "+c.ttl});return f=1e3*Number(h[1]),p=Date.now(),[2,{token:c.attestationToken,expireTimeMillis:p+f,issuedAtTimeMillis:p}]}}))}))}function E(t,e){var n=t.options,r=n.projectId,i=n.appId,o=n.apiKey;return{url:b+"/projects/"+r+"/apps/"+i+":exchangeRecaptchaToken?key="+o,body:{recaptcha_token:e}}}function C(t,e){var n=t.options,r=n.projectId,i=n.appId,o=n.apiKey;return{url:b+"/projects/"+r+"/apps/"+i+":"+_+"?key="+o,body:{debug_token:e}}}var N="firebase-app-check-database",A=1,P="firebase-app-check-store",R="debug-token",D=null;function M(){return D||(D=new Promise((function(t,e){try{var n=indexedDB.open(N,A);n.onsuccess=function(e){t(e.target.result)},n.onerror=function(t){var n;e(d.create("storage-open",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))},n.onupgradeneeded=function(t){var e=t.target.result;if(0===t.oldVersion)e.createObjectStore(P,{keyPath:"compositeKey"})}}catch(t){e(d.create("storage-open",{originalErrorMessage:t.message}))}})),D)}function O(t){return F(j(t))}function L(t,e){return o.__awaiter(this,void 0,void 0,(function(){var n,r,i,a;return o.__generator(this,(function(o){switch(o.label){case 0:return[4,M()];case 1:return n=o.sent(),r=n.transaction(P,"readwrite"),i=r.objectStore(P),a=i.put({compositeKey:t,value:e}),[2,new Promise((function(t,e){a.onsuccess=function(e){t()},r.onerror=function(t){var n;e(d.create("storage-set",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))}}))]}}))}))}function F(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n,r,i;return o.__generator(this,(function(o){switch(o.label){case 0:return[4,M()];case 1:return e=o.sent(),n=e.transaction(P,"readonly"),r=n.objectStore(P),i=r.get(t),[2,new Promise((function(t,e){i.onsuccess=function(e){var n=e.target.result;t(n?n.value:void 0)},n.onerror=function(t){var n;e(d.create("storage-get",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))}}))]}}))}))}function j(t){return t.options.appId+"-"+t.name}var B=new s.Logger("@firebase/app-check");function G(t,e){return a.isIndexedDBAvailable()?function(t,e){return L(j(t),e)}(t,e).catch((function(t){B.warn("Failed to write token to indexeddb. Error: "+t)})):Promise.resolve()}function U(){return o.__awaiter(this,void 0,void 0,(function(){var t,e;return o.__generator(this,(function(n){switch(n.label){case 0:t=void 0,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,F(R)];case 2:return t=n.sent(),[3,4];case 3:return n.sent(),[3,4];case 4:return t?[2,t]:(e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})),(r=e,L(R,r)).catch((function(t){return B.warn("Failed to persist debug token to indexeddb. Error: "+t)})),console.log("AppCheck debug token: "+e+". You will need to whitelist it in the Firebase console for it to work"),[2,e])}var r}))}))}function V(){return o.__awaiter(this,void 0,void 0,(function(){var t;return o.__generator(this,(function(e){if((t=y()).enabled&&t.token)return[2,t.token.promise];throw Error("\n            Can't get debug token in production mode.\n        ")}))}))}var q={error:"UNKNOWN_ERROR"};function z(t,e,n){return void 0===n&&(n=!1),o.__awaiter(this,void 0,void 0,(function(){var r,i,a,s,u,c,l,h,d,f;return o.__generator(this,(function(p){switch(p.label){case 0:return x(t),r=m(t),i=r.token,a=void 0,i?[3,2]:[4,r.cachedTokenPromise];case 1:(s=p.sent())&&K(s)&&(i=s,v(t,o.__assign(o.__assign({},r),{token:i})),W(t,{token:i.token})),p.label=2;case 2:return!n&&i&&K(i)?[2,{token:i.token}]:y().enabled?(c=k,l=C,h=[t],[4,V()]):[3,6];case 3:return[4,c.apply(void 0,[l.apply(void 0,h.concat([p.sent()])),e])];case 4:return u=p.sent(),[4,G(t,u)];case 5:return p.sent(),v(t,o.__assign(o.__assign({},r),{token:u})),[2,{token:u.token}];case 6:return p.trys.push([6,8,,9]),[4,r.provider.getToken()];case 7:return i=p.sent(),[3,9];case 8:return d=p.sent(),B.error(d),a=d,[3,9];case 9:return i?[3,10]:(f=function(t){return{token:I(q),error:t}}(a),[3,12]);case 10:return f={token:i.token},v(t,o.__assign(o.__assign({},r),{token:i})),[4,G(t,i)];case 11:p.sent(),p.label=12;case 12:return W(t,f),[2,f]}}))}))}function H(t,e,n,r,i){var a=m(t),s={next:r,error:i,type:n},u=o.__assign(o.__assign({},a),{tokenObservers:o.__spreadArray(o.__spreadArray([],a.tokenObservers),[s])});if(!u.tokenRefresher){var c=function(t,e){var n=this;return new S((function(){return o.__awaiter(n,void 0,void 0,(function(){var n;return o.__generator(this,(function(r){switch(r.label){case 0:return m(t).token?[3,2]:[4,z(t,e)];case 1:return n=r.sent(),[3,4];case 2:return[4,z(t,e,!0)];case 3:n=r.sent(),r.label=4;case 4:if(n.error)throw n.error;return[2]}}))}))}),(function(){return!0}),(function(){var e=m(t);if(e.token){var n=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5,r=e.token.expireTimeMillis-3e5;return n=Math.min(n,r),Math.max(0,n-Date.now())}return 0}),w.RETRIAL_MIN_WAIT,w.RETRIAL_MAX_WAIT)}(t,e);u.tokenRefresher=c}if(!u.tokenRefresher.isRunning()&&a.isTokenAutoRefreshEnabled&&u.tokenRefresher.start(),a.token&&K(a.token)){var l=a.token;Promise.resolve().then((function(){return r({token:l.token})})).catch((function(){}))}else null==a.token&&a.cachedTokenPromise.then((function(t){t&&K(t)&&r({token:t.token})})).catch((function(){}));v(t,u)}function $(t,e){var n=m(t),r=n.tokenObservers.filter((function(t){return t.next!==e}));0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),v(t,o.__assign(o.__assign({},n),{tokenObservers:r}))}function W(t,e){for(var n=0,r=m(t).tokenObservers;n<r.length;n++){var i=r[n];try{"EXTERNAL"===i.type&&null!=e.error?i.error(e.error):i.next(e)}catch(t){}}}function K(t){return t.expireTimeMillis-Date.now()>0}var Y="https://www.google.com/recaptcha/api.js";function X(t,e){var n=m(t),r=new a.Deferred;v(t,o.__assign(o.__assign({},n),{reCAPTCHAState:{initialized:r}}));var i="fire_app_check_"+t.name,s=document.createElement("div");s.id=i,s.style.display="none",document.body.appendChild(s);var u,c,l=T();return l?l.ready((function(){J(t,e,l,i),r.resolve(l)})):(u=function(){var n=T();if(!n)throw new Error("no recaptcha");n.ready((function(){J(t,e,n,i),r.resolve(n)}))},(c=document.createElement("script")).src=""+Y,c.onload=u,document.head.appendChild(c)),r.promise}function Q(t){return o.__awaiter(this,void 0,void 0,(function(){var e;return o.__generator(this,(function(n){switch(n.label){case 0:return x(t),[4,m(t).reCAPTCHAState.initialized.promise];case 1:return e=n.sent(),[2,new Promise((function(n,r){var i=m(t).reCAPTCHAState;e.ready((function(){n(e.execute(i.widgetId,{action:"fire_app_check"}))}))}))]}}))}))}function J(t,e,n,r){var i=n.render(r,{sitekey:e,size:"invisible"}),a=m(t);v(t,o.__assign(o.__assign({},a),{reCAPTCHAState:o.__assign(o.__assign({},a.reCAPTCHAState),{widgetId:i})}))}var Z=function(){function t(t){this._siteKey=t}return t.prototype.getToken=function(){return o.__awaiter(this,void 0,void 0,(function(){var t;return o.__generator(this,(function(e){switch(e.label){case 0:if(!this._app||!this._platformLoggerProvider)throw d.create("use-before-activation",{appName:""});e.label=1;case 1:return e.trys.push([1,3,,4]),[4,Q(this._app)];case 2:return t=e.sent(),[3,4];case 3:throw e.sent(),d.create("recaptcha-error");case 4:return[2,k(E(this._app,t),this._platformLoggerProvider)]}}))}))},t.prototype.initialize=function(t,e){this._app=t,this._platformLoggerProvider=e,X(t,this._siteKey).catch((function(){}))},t}(),tt=function(){function t(t){this._customProviderOptions=t}return t.prototype.getToken=function(){return o.__awaiter(this,void 0,void 0,(function(){var t,e,n;return o.__generator(this,(function(r){switch(r.label){case 0:if(!this._app)throw d.create("use-before-activation",{appName:""});return[4,this._customProviderOptions.getToken()];case 1:return t=r.sent(),e=a.issuedAtTime(t.token),n=null!==e&&e<Date.now()&&e>0?1e3*e:Date.now(),[2,o.__assign(o.__assign({},t),{issuedAtTimeMillis:n})]}}))}))},t.prototype.initialize=function(t){this._app=t},t}();function et(t,e,n,r){var i=m(t);if(i.activated)throw d.create("already-activated",{appName:t.name});var s=o.__assign(o.__assign({},i),{activated:!0});s.cachedTokenPromise=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n;return o.__generator(this,(function(r){switch(r.label){case 0:if(!a.isIndexedDBAvailable())return[3,5];e=void 0,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,O(t)];case 2:return e=r.sent(),[3,4];case 3:return n=r.sent(),B.warn("Failed to read token from indexeddb. Error: "+n),[3,4];case 4:return[2,e];case 5:return[2,void 0]}}))}))}(t).then((function(e){return e&&K(e)&&v(t,o.__assign(o.__assign({},m(t)),{token:e})),e})),s.provider="string"==typeof e?new Z(e):e instanceof Z||e instanceof tt?e:new tt({getToken:e.getToken}),s.isTokenAutoRefreshEnabled=void 0===r?t.automaticDataCollectionEnabled:r,v(t,s),s.provider.initialize(t,n)}function nt(t,e){return{app:t,activate:function(n,r){return et(t,n,e,r)},setTokenAutoRefreshEnabled:function(e){return function(t,e){var n=m(t);n.tokenRefresher&&(!0===e?n.tokenRefresher.start():n.tokenRefresher.stop()),v(t,o.__assign(o.__assign({},n),{isTokenAutoRefreshEnabled:e}))}(t,e)},getToken:function(n){return function(t,e,n){return o.__awaiter(this,void 0,void 0,(function(){var r;return o.__generator(this,(function(i){switch(i.label){case 0:return[4,z(t,e,n)];case 1:if((r=i.sent()).error)throw r.error;return[2,{token:r.token}]}}))}))}(t,e,n)},onTokenChanged:function(n,r,i){return function(t,e,n,r,i){var o=function(){},a=function(){};return o=null!=n.next?n.next.bind(n):n,null!=n.error?a=n.error.bind(n):r&&(a=r),H(t,e,"EXTERNAL",o,a),function(){return $(t,o)}}(t,e,n,r)},INTERNAL:{delete:function(){for(var e=0,n=m(t).tokenObservers;e<n.length;e++){var r=n[e];$(t,r.next)}return Promise.resolve()}}}}var rt="app-check-internal";!function(t){t.INTERNAL.registerComponent(new i.Component("appCheck",(function(t){return nt(t.getProvider("app").getImmediate(),t.getProvider("platform-logger"))}),"PUBLIC").setServiceProps({ReCaptchaV3Provider:Z,CustomProvider:tt}).setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(t,e,n){t.getProvider(rt).initialize()}))),t.INTERNAL.registerComponent(new i.Component(rt,(function(t){return function(t,e){return{getToken:function(n){return z(t,e,n)},addTokenListener:function(n){return H(t,e,"INTERNAL",n)},removeTokenListener:function(e){return $(t,e)}}}(t.getProvider("app").getImmediate(),t.getProvider("platform-logger"))}),"PUBLIC").setInstantiationMode("EXPLICIT")),t.registerVersion("@firebase/app-check","0.3.2")}(l.default),function(){var t=a.getGlobal();if("string"==typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN||!0===t.FIREBASE_APPCHECK_DEBUG_TOKEN){var e=y();e.enabled=!0;var n=new a.Deferred;e.token=n,"string"==typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN?n.resolve(t.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(U())}}()},9998:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>S,firebase:()=>w});var r,i,o=n(1635),a=n(1625),s=n(1134),u=n(2477),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new a.ErrorFactory("app","Firebase",c),h="@firebase/app",d="[DEFAULT]",f=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/app-check"]="fire-app-check",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.Logger("@firebase/app"),g=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=(0,a.deepCopy)(t),this.container=new s.ComponentContainer(e.name),this._addComponent(new s.Component("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){var n;void 0===e&&(e=d),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=d),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var m="8.10.0";var v=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=d);var s=o.name;if("string"!=typeof s||!s)throw l.create("bad-app-name",{appName:String(s)});if((0,a.contains)(e,s))throw l.create("duplicate-app",{appName:s});var u=new t(n,o,r);return e[s]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=f[t])&&void 0!==r?r:t;n&&(i+="-"+n);var a=i.match(/\s|\//),u=e.match(/\s|\//);if(a||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return a&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),a&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new s.Component(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:u.setLogLevel,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");(0,u.setUserLogHandler)(t,e)},apps:null,SDK_VERSION:m,INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||d,!(0,a.contains)(e,t))throw l.create("no-app",{appName:t});return e[t]}function o(o){var s=o.name;if(n.has(s))return p.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===o.type?r[s]:null;if(n.set(s,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[s])throw l.create("invalid-app-argument",{appName:s});return t[s]()};void 0!==o.serviceProps&&(0,a.deepExtend)(u,o.serviceProps),r[s]=u,t.prototype[s]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,s).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++){var d=h[c];e[d]._addComponent(o)}return"PUBLIC"===o.type?r[s]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(g);return e.INTERNAL=(0,o.__assign)((0,o.__assign)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){(0,a.deepExtend)(e,t)},createSubscribe:a.createSubscribe,ErrorFactory:a.ErrorFactory,deepExtend:a.deepExtend}),e}(),y=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if((0,a.isBrowser)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var b=self.firebase.SDK_VERSION;b&&b.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var _=v.initializeApp;v.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,a.isNode)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),_.apply(void 0,t)};var w=v;!function(t,e){t.INTERNAL.registerComponent(new s.Component("platform-logger",(function(t){return new y(t)}),"PRIVATE")),t.registerVersion(h,"0.6.30",e),t.registerVersion("fire-js","")}(w);const S=w},1134:(t,e,n)=>{"use strict";n.r(e),n.d(e,{Component:()=>o,ComponentContainer:()=>u,Provider:()=>s});var r=n(1635),i=n(1625),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),a="[DEFAULT]",s=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.Deferred;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(r)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:a})}catch(t){}try{for(var i=(0,r.__values)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var s=(0,r.__read)(o.value,2),u=s[0],c=s[1],l=this.normalizeInstanceIdentifier(u);try{var h=this.getOrInitializeService({instanceIdentifier:l});c.resolve(h)}catch(t){}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=a),this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return(0,r.__awaiter)(this,void 0,void 0,(function(){var t;return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all((0,r.__spreadArray)((0,r.__spreadArray)([],(0,r.__read)(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),(0,r.__read)(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=a),this.instances.has(t)},t.prototype.getOptions=function(t){return void 0===t&&(t=a),this.instancesOptions.get(t)||{}},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.options,o=void 0===i?{}:i,a=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(a))throw Error(this.name+"("+a+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var s=this.getOrInitializeService({instanceIdentifier:a,options:o});try{for(var u=(0,r.__values)(this.instancesDeferred.entries()),c=u.next();!c.done;c=u.next()){var l=(0,r.__read)(c.value,2),h=l[0],d=l[1];a===this.normalizeInstanceIdentifier(h)&&d.resolve(s)}}catch(t){e={error:t}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return s},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&t(o,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i,o=this.onInitCallbacks.get(e);if(o)try{for(var a=(0,r.__values)(o),s=a.next();!s.done;s=a.next()){var u=s.value;try{u(t,e)}catch(t){}}}catch(t){n={error:t}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===a?void 0:e),options:i}),this.instances.set(n,o),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(t){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=a),this.component?this.component.multipleInstances?t:a:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}();var u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new s(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},7566:(t,e,n)=>{"use strict";var r=n(9998),i=n(1134),o=n(1625),a=n(1635),s=n(2477);t=n.hmd(t);var u="";function c(t){u=t}var l,h=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,o.stringify)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,o.jsonEval)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),d=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return(0,o.contains)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),f=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new h(e)}}catch(t){}return new d},p=f("localStorage"),g=f("sessionStorage"),m=new s.Logger("@firebase/database"),v=(l=1,function(){return l++}),y=function(t){var e=(0,o.stringToByteArray)(t),n=new o.Sha1;n.update(e);var r=n.digest();return o.base64.encodeByteArray(r)},b=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=b.apply(null,i):n+="object"==typeof i?(0,o.stringify)(i):i,n+=" "}return n},_=null,w=!0,S=function(t,e){(0,o.assert)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(m.logLevel=s.LogLevel.VERBOSE,_=m.log.bind(m),e&&g.set("logging_enabled",!0)):"function"==typeof t?_=t:(_=null,g.remove("logging_enabled"))},T=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===w&&(w=!1,null===_&&!0===g.get("logging_enabled")&&S(!0)),_){var n=b.apply(null,t);_(n)}},x=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];T.apply(void 0,(0,a.__spreadArray)([t],(0,a.__read)(e)))}},I=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+b.apply(void 0,(0,a.__spreadArray)([],(0,a.__read)(t)));m.error(n)},k=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+b.apply(void 0,(0,a.__spreadArray)([],(0,a.__read)(t)));throw m.error(n),new Error(n)},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+b.apply(void 0,(0,a.__spreadArray)([],(0,a.__read)(t)));m.warn(n)},C=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},N="[MIN_NAME]",A="[MAX_NAME]",P=function(t,e){if(t===e)return 0;if(t===N||e===A)return-1;if(e===N||t===A)return 1;var n=U(t),r=U(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},R=function(t,e){return t===e?0:t<e?-1:1},D=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+(0,o.stringify)(e))},M=function(t){if("object"!=typeof t||null===t)return(0,o.stringify)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=(0,o.stringify)(e[i]),r+=":",r+=M(t[e[i]]);return r+="}"},O=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function L(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var F=function(t){(0,o.assert)(!C(t),"Invalid JSON number");var e,n,r,i,a,s=1023;0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),s))+s,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var u=[];for(a=52;a;a-=1)u.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)u.push(n%2?1:0),n=Math.floor(n/2);u.push(e?1:0),u.reverse();var c=u.join(""),l="";for(a=0;a<64;a+=8){var h=parseInt(c.substr(a,8),2).toString(16);1===h.length&&(h="0"+h),l+=h}return l.toLowerCase()};var j=new RegExp("^-?(0*)\\d{1,10}$"),B=-2147483648,G=2147483647,U=function(t){if(j.test(t)){var e=Number(t);if(e>=B&&e<=G)return e}return null},V=function(t){try{t()}catch(t){setTimeout((function(){var e=t.stack||"";throw E("Exception was thrown by user callback.",e),t}),Math.floor(0))}},q=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},z=function(){function t(t,e){var n=this;this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then((function(t){return n.appCheck=t}))}return t.prototype.getToken=function(t){var e=this;return this.appCheck?this.appCheck.getToken(t):new Promise((function(n,r){setTimeout((function(){e.appCheck?e.getToken(t).then(n,r):n(null)}),0)}))},t.prototype.addTokenChangeListener=function(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then((function(e){return e.addTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){E('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},t}(),H=function(){function t(t,e,n){var r=this;this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((function(t){return r.auth_=t}))}return t.prototype.getToken=function(t){var e=this;return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(T("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):new Promise((function(n,r){setTimeout((function(){e.auth_?e.getToken(t).then(n,r):n(null)}),0)}))},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)}))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',E(t)},t}(),$=function(){function t(t){this.accessToken=t}return t.prototype.getToken=function(t){return Promise.resolve({accessToken:this.accessToken})},t.prototype.addTokenChangeListener=function(t){t(this.accessToken)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.OWNER="owner",t}(),W="5",K=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Y="ac",X="websocket",Q="long_polling",J=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===a&&(a=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=p.get("host:"+t)||this._host}return t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&p.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){var t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return""+t+this.host+"/"+e},t}();function Z(t,e,n){var r;if((0,o.assert)("string"==typeof e,"typeof type must == string"),(0,o.assert)("object"==typeof n,"typeof params must == object"),e===X)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==Q)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);var i=[];return L(n,(function(t,e){i.push(t+"="+e)})),r+i.join("&")}var tt=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),(0,o.contains)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return(0,o.deepCopy)(this.counters_)},t}(),et={},nt={};function rt(t){var e=t.toString();return et[e]||(et[e]=new tt),et[e]}var it=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&V((function(){n.onMessage_(t[e])}))},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum];){if("break"===r())break}},t}(),ot="start",at=function(){function t(t,e,n,r,i,o,a){var s=this;this.connId=t,this.repoInfo=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=x(t),this.stats_=rt(e),this.urlFn=function(t){return s.appCheckToken&&(t[Y]=s.appCheckToken),Z(e,Q,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new it(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if((0,o.isNodeSdk)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new st((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=(0,a.__read)(t,5),i=r[0],o=r[1],s=r[2];if(r[3],r[4],n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===ot)n.id=o,n.password=s;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=(0,a.__read)(t,2),i=r[0],o=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)}),(function(){n.onClosed_()}),n.urlFn);var t={};t[ot]="t",t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v=W,n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),n.appCheckToken&&(t[Y]=n.appCheckToken),"undefined"!=typeof location&&location.hostname&&K.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(0,o.isNodeSdk)()&&(!!t.forceAllow_||!(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=(0,o.stringify)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=(0,o.base64Encode)(e),r=O(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!(0,o.isNodeSdk)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=(0,o.stringify)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),st=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,o.isNodeSdk)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=v(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11))a='<script>document.domain="'+document.domain+'";<\/script>';var s="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(t){T("frame writing exception"),t.stack&&T(t.stack),T(t)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||T("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(i),r()}))},t.prototype.addTag=function(t,e){var n=this;(0,o.isNodeSdk)()?this.doNodeLongPoll(t,e):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){T("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(t){}}),Math.floor(1))},t}(),ut=null;"undefined"!=typeof MozWebSocket?ut=MozWebSocket:"undefined"!=typeof WebSocket&&(ut=WebSocket);var ct=function(){function t(e,n,r,i,o,a,s){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=x(this.connId),this.stats_=rt(n),this.connURL=t.connectionURL_(n,a,s,i),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n,r){var i={};return i.v=W,!(0,o.isNodeSdk)()&&"undefined"!=typeof location&&location.hostname&&K.test(location.hostname)&&(i.r="f"),e&&(i.s=e),n&&(i.ls=n),r&&(i[Y]=r),Z(t,X,i)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,p.set("previous_websocket_failure",!0);try{if((0,o.isNodeSdk)()){var r=this.nodeAdmin?"AdminNode":"Node",i={headers:{"User-Agent":"Firebase/5/"+u+"/"+process.platform+"/"+r,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(i.headers.Authorization="Bearer "+this.authToken),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a=process.env,s=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;s&&(i.proxy={origin:s}),this.mySock=new ut(this.connURL,[],i)}else{i={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new ut(this.connURL,[],i)}}catch(t){this.log_("Error instantiating WebSocket.");var c=t.message||t.data;return c&&this.log_(c),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==ut&&!t.forceDisallow_},t.previouslyFailed=function(){return p.isInMemoryStorage||!0===p.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){p.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=(0,o.jsonEval)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if((0,o.assert)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=(0,o.stringify)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=O(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),lt=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[at,ct]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=ct&&ct.isAvailable(),o=i&&!ct.previouslyFailed();if(e.webSocketOnly&&(i||E("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[ct];else{var s=this.transports_=[];try{for(var u=(0,a.__values)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&s.push(l)}}catch(t){n={error:t}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),ht=function(){function t(t,e,n,r,i,o,a,s,u,c){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=s,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=x("c:"+this.id+":"),this.transportManager_=new lt(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=q((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=D("t",t),n=D("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=D("t",t),n=D("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=D("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?I("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):I("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),W!==n&&E("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),q((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):q((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(p.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),dt=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.refreshAppCheckToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),ft=function(){function t(t){this.allowedEvents_=t,this.listeners_={},(0,o.assert)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=(0,a.__spreadArray)([],(0,a.__read)(this.listeners_[t])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){(0,o.assert)(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},t}(),pt=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||(0,o.isMobileCordova)()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return(0,a.__extends)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return(0,o.assert)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(ft),gt=32,mt=768,vt=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();function yt(){return new vt("")}function bt(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function _t(t){return t.pieces_.length-t.pieceNum_}function wt(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new vt(t.pieces_,e)}function St(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Tt(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function xt(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new vt(e,0)}function It(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof vt)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new vt(n,0)}function kt(t){return t.pieceNum_>=t.pieces_.length}function Et(t,e){var n=bt(t),r=bt(e);if(null===n)return e;if(n===r)return Et(wt(t),wt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Ct(t,e){for(var n=Tt(t,0),r=Tt(e,0),i=0;i<n.length&&i<r.length;i++){var o=P(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function Nt(t,e){if(_t(t)!==_t(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function At(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(_t(t)>_t(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var Pt=function(t,e){this.errorPrefix_=e,this.parts_=Tt(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=(0,o.stringLength)(this.parts_[n]);Rt(this)};function Rt(t){if(t.byteLength_>mt)throw new Error(t.errorPrefix_+"has a key path longer than "+mt+" bytes ("+t.byteLength_+").");if(t.parts_.length>gt)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+gt+") or object contains a cycle "+Dt(t))}function Dt(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}var Mt,Ot,Lt=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))}),!1),r}return(0,a.__extends)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return(0,o.assert)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(ft),Ft=1e3,jt=function(t){function e(n,r,i,a,s,u,c,l){var h=t.call(this)||this;if(h.repoInfo_=n,h.applicationId_=r,h.onDataUpdate_=i,h.onConnectStatus_=a,h.onServerInfoUpdate_=s,h.authTokenProvider_=u,h.appCheckTokenProvider_=c,h.authOverride_=l,h.id=e.nextPersistentConnectionId_++,h.log_=x("p:"+h.id+":"),h.interruptReasons_={},h.listens=new Map,h.outstandingPuts_=[],h.outstandingGets_=[],h.outstandingPutCount_=0,h.outstandingGetCount_=0,h.onDisconnectRequestQueue_=[],h.connected_=!1,h.reconnectDelay_=Ft,h.maxReconnectDelay_=3e5,h.securityDebugCallback_=null,h.lastSessionId=null,h.establishConnectionTimer_=null,h.visible_=!1,h.requestCBHash_={},h.requestNumber_=0,h.realtime_=null,h.authToken_=null,h.appCheckToken_=null,h.forceTokenRefresh_=!1,h.invalidAuthTokenCount_=0,h.invalidAppCheckTokenCount_=0,h.firstConnection_=!0,h.lastConnectionAttemptTime_=null,h.lastConnectionEstablishedTime_=null,l&&!(0,o.isNodeSdk)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Lt.getInstance().on("visible",h.onVisible_,h),-1===n.host.indexOf("fblocal")&&pt.getInstance().on("online",h.onOnline_,h),h}return(0,a.__extends)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r,a:t,b:e};this.log_((0,o.stringify)(i)),(0,o.assert)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this;this.initConnection_();var n=new o.Deferred,r={p:t._path.toString(),q:t._queryObject},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var a=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var t=e.outstandingGets_[a];void 0!==t&&i===t&&(delete e.outstandingGets_[a],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+a+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(a),n.promise},e.prototype.listen=function(t,e,n,r){this.initConnection_();var i=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),(0,o.assert)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,o.assert)(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var s={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(a).set(i,s),this.connected_&&this.sendListen_(s)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,(function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);var a={p:i};t.tag&&(a.q=r._queryObject,a.t=t.tag),a.h=t.hashFn(),this.sendRequest("q",a,(function(a){var s=a.d,u=a.s;e.warnOnListenWarnings_(s,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",a),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,s))}))},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&(0,o.contains)(t,"w")){var n=(0,o.safeGet)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e._queryParams.getIndex().toString()+'"',i=e._path.toString();E("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||(0,o.isAdmin)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.refreshAppCheckToken=function(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=(0,o.isValidFormat)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))}))}},e.prototype.tryAppCheck=function(){var t=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(e){var n=e.s,r=e.d||"error";"ok"===n?t.invalidAppCheckTokenCount_=0:t.onAppCheckRevoked_(n,r)}))},e.prototype.unlisten=function(t,e){var n=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),(0,o.assert)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t._queryObject,e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(function(t){r&&setTimeout((function(){r(t.s,t.d)}),Math.floor(0))}))},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){this.initConnection_();var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;var a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){if("ok"!==t.s){var n=t.d;e.log_("reportStats","Error sending stats: "+n)}}))}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+(0,o.stringify)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"apc"===t?this.onAppCheckRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):I("Unrecognized action received from server: "+(0,o.stringify)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;(0,o.assert)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ft,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Ft,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Ft),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){return(0,a.__awaiter)(this,void 0,void 0,(function(){var t,n,r,i,s,u,c,l,h,d,f,p,g,m,v=this;return(0,a.__generator)(this,(function(y){switch(y.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+e.nextConnectionId_++,s=this.lastSessionId,u=!1,c=null,l=function(){c?c.close():(u=!0,r())},h=function(t){(0,o.assert)(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(t)},this.realtime_={close:l,sendRequest:h},d=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,y.label=1;case 1:return y.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)])];case 2:return f=a.__read.apply(void 0,[y.sent(),2]),p=f[0],g=f[1],u?T("getToken() completed but was canceled"):(T("getToken() completed. Creating connection."),this.authToken_=p&&p.accessToken,this.appCheckToken_=g&&g.token,c=new ht(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,r,(function(t){E(t+" ("+v.repoInfo_.toString()+")"),v.interrupt("server_kill")}),s)),[3,4];case 3:return m=y.sent(),this.log_("Failed to get token: "+m),u||(this.repoInfo_.nodeAdmin&&E(m),l()),[3,4];case 4:return[2]}}))}))},e.prototype.interrupt=function(t){T("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){T("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,o.isEmpty)(this.interruptReasons_)&&(this.reconnectDelay_=Ft,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return M(t)})).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new vt(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){T("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onAppCheckRevoked_=function(t,e){T("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth(),this.tryAppCheck();try{for(var i=(0,a.__values)(this.listens.values()),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var u=(n=void 0,(0,a.__values)(s.values())),c=u.next();!c.done;c=u.next()){var l=c.value;this.sendListen_(l)}}catch(t){n={error:t}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var h=0;h<this.outstandingPuts_.length;h++)this.outstandingPuts_[h]&&this.sendPut_(h);for(;this.onDisconnectRequestQueue_.length;){var d=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(d.action,d.pathString,d.data,d.onComplete)}for(h=0;h<this.outstandingGets_.length;h++)this.outstandingGets_[h]&&this.sendGet_(h)},e.prototype.sendConnectStats_=function(){var t={},e="js";(0,o.isNodeSdk)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+u.replace(/\./g,"-")]=1,(0,o.isMobileCordova)()?t["framework.cordova"]=1:(0,o.isReactNative)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=pt.getInstance().currentlyOnline();return(0,o.isEmpty)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(dt),Bt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Gt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Bt(N,t),r=new Bt(N,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Bt.MIN},t}(),Ut=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,a.__extends)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return Mt},set:function(t){Mt=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return P(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw(0,o.assertionError)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Bt.MIN},e.prototype.maxPost=function(){return new Bt(A,Mt)},e.prototype.makePost=function(t,e){return(0,o.assert)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Bt(t,Mt)},e.prototype.toString=function(){return".key"},e}(Gt),Vt=new Ut,qt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),zt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:$t.EMPTY_NODE,this.right=null!=o?o:$t.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return $t.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return $t.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Ht=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new zt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),$t=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,zt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,zt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new qt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new qt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new qt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new qt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Ht,t}();function Wt(t,e){return P(t.name,e.name)}function Kt(t,e){return P(t,e)}var Yt,Xt,Qt,Jt=function(t){return"number"==typeof t?"number:"+F(t):"string:"+t},Zt=function(t){if(t.isLeafNode()){var e=t.val();(0,o.assert)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,o.contains)(e,".sv"),"Priority must be a string or number.")}else(0,o.assert)(t===Ot||t.isEmpty(),"priority of unexpected type.");(0,o.assert)(t===Ot||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},te=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,(0,o.assert)(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Zt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return Yt},set:function(t){Yt=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return kt(e)?this:".priority"===bt(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=bt(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:((0,o.assert)(".priority"!==r||1===_t(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(wt(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Jt(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?F(this.value_):this.value_,this.lazyHash_=y(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:((0,o.assert)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),a=t.VALUE_TYPE_ORDER.indexOf(r);return(0,o.assert)(i>=0,"Unknown leaf type: "+n),(0,o.assert)(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:a-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}();var ee,ne,re=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,a.__extends)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?P(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Bt.MIN},e.prototype.maxPost=function(){return new Bt(A,new te("[PRIORITY-POST]",Qt))},e.prototype.makePost=function(t,e){var n=Xt(t);return new Bt(e,new te("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Gt),ie=new re,oe=Math.log(2),ae=function(){function t(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/oe,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),se=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,a,s=r-e;if(0===s)return null;if(1===s)return o=t[e],a=n?n(o):o,new zt(a,o.node,zt.BLACK,null,null);var u=parseInt(s/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],a=n?n(o):o,new zt(a,o.node,zt.BLACK,c,l)},o=function(e){for(var r=null,o=null,a=t.length,s=function(e,r){var o=a-e,s=a;a-=e;var c=i(o+1,s),l=t[o],h=n?n(l):l;u(new zt(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?s(h,zt.BLACK):(s(h,zt.BLACK),s(h,zt.RED))}return o}(new ae(t.length));return new $t(r||e,o)},ue={},ce=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return(0,o.assert)(ue&&ie,"ChildrenNode.ts has not been loaded"),ee=ee||new t({".priority":ue},{".priority":ie})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=(0,o.safeGet)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof $t?e:null},t.prototype.hasIndex=function(t){return(0,o.contains)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){(0,o.assert)(e!==Vt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],s=!1,u=n.getIterator(Bt.Wrap),c=u.getNext();c;)s=s||e.isDefinedOn(c.node),i.push(c),c=u.getNext();r=s?se(i,e.getCompare()):ue;var l=e.toString(),h=(0,a.__assign)({},this.indexSet_);h[l]=e;var d=(0,a.__assign)({},this.indexes_);return d[l]=r,new t(d,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t((0,o.map)(this.indexes_,(function(t,i){var a=(0,o.safeGet)(r.indexSet_,i);if((0,o.assert)(a,"Missing index implementation for "+i),t===ue){if(a.isDefinedOn(e.node)){for(var s=[],u=n.getIterator(Bt.Wrap),c=u.getNext();c;)c.name!==e.name&&s.push(c),c=u.getNext();return s.push(e),se(s,a.getCompare())}return ue}var l=n.get(e.name),h=t;return l&&(h=h.remove(new Bt(e.name,l))),h.insert(e,e.node)})),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t((0,o.map)(this.indexes_,(function(t){if(t===ue)return t;var r=n.get(e.name);return r?t.remove(new Bt(e.name,r)):t})),this.indexSet_)},t}(),le=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Zt(this.priorityNode_),this.children_.isEmpty()&&(0,o.assert)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return ne||(ne=new t(new $t(Kt),null,ce.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||ne},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?ne:e},t.prototype.getChild=function(t){var e=bt(t);return null===e?this:this.getImmediateChild(e).getChild(wt(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if((0,o.assert)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Bt(e,n),i=void 0,a=void 0;n.isEmpty()?(i=this.children_.remove(e),a=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),a=this.indexMap_.addToIndexes(r,this.children_));var s=i.isEmpty()?ne:this.priorityNode_;return new t(i,s,a)},t.prototype.updateChild=function(t,e){var n=bt(t);if(null===n)return e;(0,o.assert)(".priority"!==bt(t)||1===_t(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(wt(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(ie,(function(a,s){n[a]=s.val(e),r++,o&&t.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):o=!1})),!e&&o&&i<2*r){var a=[];for(var s in n)a[s]=n[s];return a}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Jt(this.getPriority().val())+":"),this.forEachChild(ie,(function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":y(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Bt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Bt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Bt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getIteratorFrom(t.name,Bt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getReverseIteratorFrom(t.name,Bt.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===he?-1:0},t.prototype.withIndex=function(e){if(e===Vt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Vt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(ie),r=e.getIterator(ie),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Vt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),he=new(function(t){function e(){return t.call(this,new $t(Kt),le.EMPTY_NODE,ce.Default)||this}return(0,a.__extends)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return le.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(le));Object.defineProperties(Bt,{MIN:{value:new Bt(N,le.EMPTY_NODE)},MAX:{value:new Bt(A,he)}}),Ut.__EMPTY_NODE=le.EMPTY_NODE,te.__childrenNodeConstructor=le,Ot=he,function(t){Qt=t}(he);var de=!0;function fe(t,e){if(void 0===e&&(e=null),null===t)return le.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),(0,o.assert)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new te(t,fe(e));if(t instanceof Array||!de){var n=le.EMPTY_NODE;return L(t,(function(e,r){if((0,o.contains)(t,e)&&"."!==e.substring(0,1)){var i=fe(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}})),n.updatePriority(fe(e))}var r=[],i=!1;if(L(t,(function(t,e){if("."!==t.substring(0,1)){var n=fe(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Bt(t,n)))}})),0===r.length)return le.EMPTY_NODE;var a=se(r,Wt,(function(t){return t.name}),Kt);if(i){var s=se(r,ie.getCompare());return new le(a,fe(e),new ce({".priority":s},{".priority":ie}))}return new le(a,fe(e),ce.Default)}!function(t){Xt=t}(fe);var pe,ge,me=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,(0,o.assert)(!kt(e)&&".priority"!==bt(e),"Can't create PathIndex with empty path or .priority key"),n}return(0,a.__extends)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?P(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=fe(t),r=le.EMPTY_NODE.updateChild(this.indexPath_,n);return new Bt(e,r)},e.prototype.maxPost=function(){var t=le.EMPTY_NODE.updateChild(this.indexPath_,he);return new Bt(A,t)},e.prototype.toString=function(){return Tt(this.indexPath_,0).join("/")},e}(Gt),ve=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,a.__extends)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?P(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Bt.MIN},e.prototype.maxPost=function(){return Bt.MAX},e.prototype.makePost=function(t,e){var n=fe(t);return new Bt(e,n)},e.prototype.toString=function(){return".value"},e}(Gt),ye=new ve,be="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",_e=(pe=0,ge=[],function(t){var e,n=t===pe;pe=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=be.charAt(t%64),t=Math.floor(t/64);(0,o.assert)(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===ge[e];e--)ge[e]=0;ge[e]++}else for(e=0;e<12;e++)ge[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=be.charAt(ge[e]);return(0,o.assert)(20===i.length,"nextPushId: Length should be 20."),i}),we=function(t){if(t===""+G)return"-";var e=U(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return A;var o=n[i],a=be.charAt(be.indexOf(o)+1);return n[i]=a,n.slice(0,i+1).join("")},Se=function(t){if(t===""+B)return N;var e=U(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?""+G:(delete n[n.length-1],n.join("")):(n[n.length-1]=be.charAt(be.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function Te(t){return{type:"value",snapshotNode:t}}function xe(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Ie(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function ke(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var Ee=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,a){(0,o.assert)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=t.getImmediateChild(e);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?t:(null!=a&&(n.isEmpty()?t.hasChild(e)?a.trackChildChange(Ie(e,s)):(0,o.assert)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?a.trackChildChange(xe(e,n)):a.trackChildChange(ke(e,n,s))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(ie,(function(t,r){e.hasChild(t)||n.trackChildChange(Ie(t,r))})),e.isLeafNode()||e.forEachChild(ie,(function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(ke(e,r,i))}else n.trackChildChange(xe(e,r))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?le.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),Ce=function(){function t(e){this.indexedFilter_=new Ee(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Bt(e,n))||(n=le.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=le.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(le.EMPTY_NODE);var i=this;return e.forEachChild(ie,(function(t,e){i.matches(new Bt(t,e))||(r=r.updateImmediateChild(t,le.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),Ne=function(){function t(t){this.rangedFilter_=new Ce(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Bt(e,n))||(n=le.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=le.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=le.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(le.EMPTY_NODE);var s=void 0,u=void 0,c=void 0;i=void 0;if(this.reverse_){i=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();){a=i.getNext();!h&&c(s,a)<=0&&(h=!0),h&&o<this.limit_&&c(a,u)<=0?o++:r=r.updateImmediateChild(a.name,le.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var a;if(this.reverse_){var s=this.index_.getCompare();a=function(t,e){return s(e,t)}}else a=this.index_.getCompare();var u=t;(0,o.assert)(u.numChildren()===this.limit_,"");var c=new Bt(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var d=u.getImmediateChild(e),f=r.getChildAfterChild(this.index_,l,this.reverse_);null!=f&&(f.name===e||u.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:a(f,c);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(ke(e,n,d)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(Ie(e,d));var g=u.updateImmediateChild(e,le.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(xe(f.name,f.node)),g.updateImmediateChild(f.name,f.node)):g}return n.isEmpty()?t:h&&a(l,c)>=0?(null!=i&&(i.trackChildChange(Ie(l.name,l.node)),i.trackChildChange(xe(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,le.EMPTY_NODE)):t},t}(),Ae=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ie}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return(0,o.assert)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return(0,o.assert)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:N},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return(0,o.assert)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return(0,o.assert)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:A},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return(0,o.assert)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===ie},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();function Pe(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Re(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function De(t,e){var n=t.copy();return n.index_=e,n}function Me(t){var e,n={};return t.isDefault()||(t.index_===ie?e="$priority":t.index_===ye?e="$value":t.index_===Vt?e="$key":((0,o.assert)(t.index_ instanceof me,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=(0,o.stringify)(e),t.startSet_&&(n.startAt=(0,o.stringify)(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+(0,o.stringify)(t.indexStartName_))),t.endSet_&&(n.endAt=(0,o.stringify)(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+(0,o.stringify)(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}function Oe(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==ie&&(e.i=t.index_.toString()),e}var Le=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.repoInfo_=e,o.onDataUpdate_=n,o.authTokenProvider_=r,o.appCheckTokenProvider_=i,o.log_=x("p:rest:"),o.listens_={},o}return(0,a.__extends)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:((0,o.assert)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())},e.prototype.listen=function(t,n,r,i){var a=this,s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=Me(t._queryParams);this.restRequest_(s+".json",l,(function(t,e){var n=e;(404===t&&(n=null,t=null),null===t&&a.onDataUpdate_(s,n,!1,r),(0,o.safeGet)(a.listens_,u)===c)&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=Me(t._queryParams),r=t._path.toString(),i=new o.Deferred;return this.restRequest_(r+".json",n,(function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))})),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;return void 0===e&&(e={}),e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var s=(0,a.__read)(i,2),u=s[0],c=s[1];u&&u.accessToken&&(e.auth=u.accessToken),c&&c.token&&(e.ac=c.token);var l=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+(0,o.querystring)(e);r.log_("Sending REST request for "+l);var h=new XMLHttpRequest;h.onreadystatechange=function(){if(n&&4===h.readyState){r.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);var t=null;if(h.status>=200&&h.status<300){try{t=(0,o.jsonEval)(h.responseText)}catch(t){E("Failed to parse JSON response for "+l+": "+h.responseText)}n(null,t)}else 401!==h.status&&404!==h.status&&E("Got unsuccessful REST response for "+l+" Status: "+h.status),n(h.status);n=null}},h.open("GET",l,!0),h.send()}))},e}(dt),Fe=function(){function t(){this.rootNode_=le.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}();function je(){return{value:null,children:new Map}}function Be(t,e,n){if(kt(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{var r=bt(e);t.children.has(r)||t.children.set(r,je()),Be(t.children.get(r),e=wt(e),n)}}function Ge(t,e){if(kt(e))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;var n=t.value;return t.value=null,n.forEachChild(ie,(function(e,n){Be(t,new vt(e),n)})),Ge(t,e)}if(t.children.size>0){var r=bt(e);if(e=wt(e),t.children.has(r))Ge(t.children.get(r),e)&&t.children.delete(r);return 0===t.children.size}return!0}function Ue(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach((function(t,n){e(n,t)}))}(t,(function(t,r){Ue(r,new vt(e.toString()+"/"+t),n)}))}var Ve,qe=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=(0,a.__assign)({},t);return this.last_&&L(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),ze=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new qe(t);var n=1e4+2e4*Math.random();q(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;L(e,(function(e,i){i>0&&(0,o.contains)(t.statsToReport_,e)&&(n[e]=i,r=!0)})),r&&this.server_.reportStats(n),q(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}();function He(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}!function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Ve||(Ve={}));var $e,We=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Ve.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if(kt(this.path)){if(null!=this.affectedTree.value)return(0,o.assert)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new vt(e));return new t(yt(),n,this.revert)}return(0,o.assert)(bt(this.path)===e,"operationForChild called for unrelated child."),new t(wt(this.path),this.affectedTree,this.revert)},t}(),Ke=function(){function t(t,e){this.source=t,this.path=e,this.type=Ve.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return kt(this.path)?new t(this.source,yt()):new t(this.source,wt(this.path))},t}(),Ye=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Ve.OVERWRITE}return t.prototype.operationForChild=function(e){return kt(this.path)?new t(this.source,yt(),this.snap.getImmediateChild(e)):new t(this.source,wt(this.path),this.snap)},t}(),Xe=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Ve.MERGE}return t.prototype.operationForChild=function(e){if(kt(this.path)){var n=this.children.subtree(new vt(e));return n.isEmpty()?null:n.value?new Ye(this.source,yt(),n.value):new t(this.source,yt(),n)}return(0,o.assert)(bt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,wt(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),Qe=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(kt(t))return this.isFullyInitialized()&&!this.filtered_;var e=bt(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),Je=function(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()};function Ze(t,e,n,r,i,a){var s=r.filter((function(t){return t.type===n}));s.sort((function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw(0,o.assertionError)("Should only compare child_ events.");var r=new Bt(e.childName,e.snapshotNode),i=new Bt(n.childName,n.snapshotNode);return t.index_.compare(r,i)}(t,e,n)})),s.forEach((function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,a);i.forEach((function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))}))}))}function tn(t,e){return{eventCache:t,serverCache:e}}function en(t,e,n,r){return tn(new Qe(e,n,r),t.serverCache)}function nn(t,e,n,r){return tn(t.eventCache,new Qe(e,n,r))}function rn(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function on(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var an=function(){function t(t,e){void 0===e&&($e||($e=new $t(R)),e=$e),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return L(e,(function(t,e){n=n.set(new vt(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:yt(),value:this.value};if(kt(t))return null;var n=bt(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(wt(t),e);return null!=i?{path:It(new vt(n),i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if(kt(e))return this;var n=bt(e),r=this.children.get(n);return null!==r?r.subtree(wt(e)):new t(null)},t.prototype.set=function(e,n){if(kt(e))return new t(n,this.children);var r=bt(e),i=(this.children.get(r)||new t(null)).set(wt(e),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(kt(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=bt(e),r=this.children.get(n);if(r){var i=r.remove(wt(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(kt(t))return this.value;var e=bt(t),n=this.children.get(e);return n?n.get(wt(t)):null},t.prototype.setTree=function(e,n){if(kt(e))return n;var r=bt(e),i=(this.children.get(r)||new t(null)).setTree(wt(e),n),o=void 0;return o=i.isEmpty()?this.children.remove(r):this.children.insert(r,i),new t(this.value,o)},t.prototype.fold=function(t){return this.fold_(yt(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(It(t,r),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,yt(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(kt(t))return null;var i=bt(t),o=this.children.get(i);return o?o.findOnPath_(wt(t),It(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,yt(),e)},t.prototype.foreachOnPath_=function(e,n,r){if(kt(e))return this;this.value&&r(n,this.value);var i=bt(e),o=this.children.get(i);return o?o.foreachOnPath_(wt(e),It(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(yt(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(It(t,n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t}(),sn=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new an(null))},t}();function un(t,e,n){if(kt(e))return new sn(new an(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,a=Et(i,e);return o=o.updateChild(a,n),new sn(t.writeTree_.set(i,o))}var s=new an(n),u=t.writeTree_.setTree(e,s);return new sn(u)}function cn(t,e,n){var r=t;return L(n,(function(t,n){r=un(r,It(e,t),n)})),r}function ln(t,e){if(kt(e))return sn.empty();var n=t.writeTree_.setTree(e,new an(null));return new sn(n)}function hn(t,e){return null!=dn(t,e)}function dn(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(Et(n.path,e)):null}function fn(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(ie,(function(t,n){e.push(new Bt(t,n))})):t.writeTree_.children.inorderTraversal((function(t,n){null!=n.value&&e.push(new Bt(t,n.value))})),e}function pn(t,e){if(kt(e))return t;var n=dn(t,e);return new sn(null!=n?new an(n):t.writeTree_.subtree(e))}function gn(t){return t.writeTree_.isEmpty()}function mn(t,e){return vn(yt(),t.writeTree_,e)}function vn(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal((function(e,i){".priority"===e?((0,o.assert)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=vn(It(t,e),i,n)})),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(It(t,".priority"),r)),n}function yn(t,e){return Pn(e,t)}function bn(t,e){var n=t.allWrites.findIndex((function(t){return t.writeId===e}));(0,o.assert)(n>=0,"removeWrite called with nonexistent writeId.");var r=t.allWrites[n];t.allWrites.splice(n,1);for(var i=r.visible,a=!1,s=t.allWrites.length-1;i&&s>=0;){var u=t.allWrites[s];u.visible&&(s>=n&&_n(u,r.path)?i=!1:At(r.path,u.path)&&(a=!0)),s--}if(i){if(a)return function(t){t.visibleWrites=Sn(t.allWrites,wn,yt()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}(t),!0;r.snap?t.visibleWrites=ln(t.visibleWrites,r.path):L(r.children,(function(e){t.visibleWrites=ln(t.visibleWrites,It(r.path,e))}));return!0}return!1}function _n(t,e){if(t.snap)return At(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&At(It(t.path,n),e))return!0;return!1}function wn(t){return t.visible}function Sn(t,e,n){for(var r=sn.empty(),i=0;i<t.length;++i){var a=t[i];if(e(a)){var s=a.path,u=void 0;if(a.snap)At(n,s)?r=un(r,u=Et(n,s),a.snap):At(s,n)&&(u=Et(s,n),r=un(r,yt(),a.snap.getChild(u)));else{if(!a.children)throw(0,o.assertionError)("WriteRecord should have .snap or .children");if(At(n,s))r=cn(r,u=Et(n,s),a.children);else if(At(s,n))if(kt(u=Et(s,n)))r=cn(r,yt(),a.children);else{var c=(0,o.safeGet)(a.children,bt(u));if(c){var l=c.getChild(wt(u));r=un(r,yt(),l)}}}}}return r}function Tn(t,e,n,r,i){if(r||i){var o=pn(t.visibleWrites,e);if(!i&&gn(o))return n;if(i||null!=n||hn(o,yt())){return mn(Sn(t.allWrites,(function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(At(t.path,e)||At(e,t.path))}),e),n||le.EMPTY_NODE)}return null}var a=dn(t.visibleWrites,e);if(null!=a)return a;var s=pn(t.visibleWrites,e);return gn(s)?n:null!=n||hn(s,yt())?mn(s,n||le.EMPTY_NODE):null}function xn(t,e,n,r){return Tn(t.writeTree,t.treePath,e,n,r)}function In(t,e){return function(t,e,n){var r=le.EMPTY_NODE,i=dn(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(ie,(function(t,e){r=r.updateImmediateChild(t,e)})),r;if(n){var o=pn(t.visibleWrites,e);return n.forEachChild(ie,(function(t,e){var n=mn(pn(o,new vt(t)),e);r=r.updateImmediateChild(t,n)})),fn(o).forEach((function(t){r=r.updateImmediateChild(t.name,t.node)})),r}return fn(pn(t.visibleWrites,e)).forEach((function(t){r=r.updateImmediateChild(t.name,t.node)})),r}(t.writeTree,t.treePath,e)}function kn(t,e,n,r){return function(t,e,n,r,i){(0,o.assert)(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=It(e,n);if(hn(t.visibleWrites,a))return null;var s=pn(t.visibleWrites,a);return gn(s)?i.getChild(n):mn(s,i.getChild(n))}(t.writeTree,t.treePath,e,n,r)}function En(t,e){return function(t,e){return dn(t.visibleWrites,e)}(t.writeTree,It(t.treePath,e))}function Cn(t,e,n,r,i,o){return function(t,e,n,r,i,o,a){var s,u=pn(t.visibleWrites,e),c=dn(u,yt());if(null!=c)s=c;else{if(null==n)return[];s=mn(u,n)}if((s=s.withIndex(a)).isEmpty()||s.isLeafNode())return[];for(var l=[],h=a.getCompare(),d=o?s.getReverseIteratorFrom(r,a):s.getIteratorFrom(r,a),f=d.getNext();f&&l.length<i;)0!==h(f,r)&&l.push(f),f=d.getNext();return l}(t.writeTree,t.treePath,e,n,r,i,o)}function Nn(t,e,n){return function(t,e,n,r){var i=It(e,n),o=dn(t.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?mn(pn(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function An(t,e){return Pn(It(t.treePath,e),t.writeTree)}function Pn(t,e){return{treePath:t,writeTree:e}}var Rn=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;(0,o.assert)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,o.assert)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,ke(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,Ie(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,xe(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw(0,o.assertionError)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,ke(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),Dn=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),Mn=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new Qe(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Nn(this.writes_,t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:on(this.viewCache_),i=Cn(this.writes_,r,e,1,n,t);return 0===i.length?null:i[0]},t}();function On(t,e,n,r,i){var a,s,u=new Rn;if(n.type===Ve.OVERWRITE){var c=n;c.source.fromUser?a=jn(t,e,c.path,c.snap,r,i,u):((0,o.assert)(c.source.fromServer,"Unknown source."),s=c.source.tagged||e.serverCache.isFiltered()&&!kt(c.path),a=Fn(t,e,c.path,c.snap,r,i,s,u))}else if(n.type===Ve.MERGE){var l=n;l.source.fromUser?a=function(t,e,n,r,i,o,a){var s=e;return r.foreach((function(r,u){var c=It(n,r);Bn(e,bt(c))&&(s=jn(t,s,c,u,i,o,a))})),r.foreach((function(r,u){var c=It(n,r);Bn(e,bt(c))||(s=jn(t,s,c,u,i,o,a))})),s}(t,e,l.path,l.children,r,i,u):((0,o.assert)(l.source.fromServer,"Unknown source."),s=l.source.tagged||e.serverCache.isFiltered(),a=Un(t,e,l.path,l.children,r,i,s,u))}else if(n.type===Ve.ACK_USER_WRITE){var h=n;a=h.revert?function(t,e,n,r,i,a){var s;if(null!=En(r,n))return e;var u=new Mn(r,e,i),c=e.eventCache.getNode(),l=void 0;if(kt(n)||".priority"===bt(n)){var h=void 0;if(e.serverCache.isFullyInitialized())h=xn(r,on(e));else{var d=e.serverCache.getNode();(0,o.assert)(d instanceof le,"serverChildren would be complete if leaf node"),h=In(r,d)}l=t.filter.updateFullNode(c,h,a)}else{var f=bt(n),p=Nn(r,f,e.serverCache);null==p&&e.serverCache.isCompleteForChild(f)&&(p=c.getImmediateChild(f)),(l=null!=p?t.filter.updateChild(c,f,p,wt(n),u,a):e.eventCache.getNode().hasChild(f)?t.filter.updateChild(c,f,le.EMPTY_NODE,wt(n),u,a):c).isEmpty()&&e.serverCache.isFullyInitialized()&&(s=xn(r,on(e))).isLeafNode()&&(l=t.filter.updateFullNode(l,s,a))}return s=e.serverCache.isFullyInitialized()||null!=En(r,yt()),en(e,l,s,t.filter.filtersNodes())}(t,e,h.path,r,i,u):function(t,e,n,r,i,o,a){if(null!=En(i,n))return e;var s=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(kt(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return Fn(t,e,n,u.getNode().getChild(n),i,o,s,a);if(kt(n)){var c=new an(null);return u.getNode().forEachChild(Vt,(function(t,e){c=c.set(new vt(t),e)})),Un(t,e,n,c,i,o,s,a)}return e}var l=new an(null);return r.foreach((function(t,e){var r=It(n,t);u.isCompleteForPath(r)&&(l=l.set(t,u.getNode().getChild(r)))})),Un(t,e,n,l,i,o,s,a)}(t,e,h.path,h.affectedTree,r,i,u)}else{if(n.type!==Ve.LISTEN_COMPLETE)throw(0,o.assertionError)("Unknown operation type: "+n.type);a=function(t,e,n,r,i){var o=e.serverCache,a=nn(e,o.getNode(),o.isFullyInitialized()||kt(n),o.isFiltered());return Ln(t,a,n,r,Dn,i)}(t,e,n.path,r,u)}var d=u.getChanges();return function(t,e,n){var r=e.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=rn(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(Te(rn(e)))}}(e,a,d),{viewCache:a,changes:d}}function Ln(t,e,n,r,i,a){var s=e.eventCache;if(null!=En(r,n))return e;var u=void 0,c=void 0;if(kt(n))if((0,o.assert)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){var l=on(e),h=In(r,l instanceof le?l:le.EMPTY_NODE);u=t.filter.updateFullNode(e.eventCache.getNode(),h,a)}else{var d=xn(r,on(e));u=t.filter.updateFullNode(e.eventCache.getNode(),d,a)}else{var f=bt(n);if(".priority"===f){(0,o.assert)(1===_t(n),"Can't have a priority with additional path components");var p=s.getNode(),g=kn(r,n,p,c=e.serverCache.getNode());u=null!=g?t.filter.updatePriority(p,g):s.getNode()}else{var m=wt(n),v=void 0;if(s.isCompleteForChild(f)){c=e.serverCache.getNode();var y=kn(r,n,s.getNode(),c);v=null!=y?s.getNode().getImmediateChild(f).updateChild(m,y):s.getNode().getImmediateChild(f)}else v=Nn(r,f,e.serverCache);u=null!=v?t.filter.updateChild(s.getNode(),f,v,m,i,a):s.getNode()}}return en(e,u,s.isFullyInitialized()||kt(n),t.filter.filtersNodes())}function Fn(t,e,n,r,i,o,a,s){var u,c=e.serverCache,l=a?t.filter:t.filter.getIndexedFilter();if(kt(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var d=bt(n);if(!c.isCompleteForPath(n)&&_t(n)>1)return e;var f=wt(n),p=c.getNode().getImmediateChild(d).updateChild(f,r);u=".priority"===d?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),d,p,f,Dn,null)}var g=nn(e,u,c.isFullyInitialized()||kt(n),l.filtersNodes());return Ln(t,g,n,i,new Mn(i,g,o),s)}function jn(t,e,n,r,i,o,a){var s,u,c=e.eventCache,l=new Mn(i,e,o);if(kt(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,a),s=en(e,u,!0,t.filter.filtersNodes());else{var h=bt(n);if(".priority"===h)u=t.filter.updatePriority(e.eventCache.getNode(),r),s=en(e,u,c.isFullyInitialized(),c.isFiltered());else{var d=wt(n),f=c.getNode().getImmediateChild(h),p=void 0;if(kt(d))p=r;else{var g=l.getCompleteChild(h);p=null!=g?".priority"===St(d)&&g.getChild(xt(d)).isEmpty()?g:g.updateChild(d,r):le.EMPTY_NODE}if(f.equals(p))s=e;else s=en(e,t.filter.updateChild(c.getNode(),h,p,d,l,a),c.isFullyInitialized(),t.filter.filtersNodes())}}return s}function Bn(t,e){return t.eventCache.isCompleteForChild(e)}function Gn(t,e,n){return n.foreach((function(t,n){e=e.updateChild(t,n)})),e}function Un(t,e,n,r,i,o,a,s){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;var u,c=e;u=kt(n)?r:new an(null).setTree(n,r);var l=e.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var u=Gn(0,e.serverCache.getNode().getImmediateChild(n),r);c=Fn(t,c,new vt(n),u,i,o,a,s)}})),u.children.inorderTraversal((function(n,r){var u=!e.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=Gn(0,e.serverCache.getNode().getImmediateChild(n),r);c=Fn(t,c,new vt(n),h,i,o,a,s)}})),c}var Vn,qn=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_._queryParams,i=new Ee(r.getIndex()),o=(n=r).loadsAllData()?new Ee(n.getIndex()):n.hasLimit()?new Ne(n):new Ce(n);this.processor_=function(t){return{filter:t}}(o);var a=e.serverCache,s=e.eventCache,u=i.updateFullNode(le.EMPTY_NODE,a.getNode(),null),c=o.updateFullNode(le.EMPTY_NODE,s.getNode(),null),l=new Qe(u,a.isFullyInitialized(),i.filtersNodes()),h=new Qe(c,s.isFullyInitialized(),o.filtersNodes());this.viewCache_=tn(h,l),this.eventGenerator_=new Je(this.query_)}return Object.defineProperty(t.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),t}();function zn(t,e){var n=on(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!kt(e)&&!n.getImmediateChild(bt(e)).isEmpty())?n.getChild(e):null}function Hn(t){return 0===t.eventRegistrations_.length}function $n(t,e,n){var r=[];if(n){(0,o.assert)(null==e,"A cancel should cancel all event registrations.");var i=t.query._path;t.eventRegistrations_.forEach((function(t){var e=t.createCancelEvent(n,i);e&&r.push(e)}))}if(e){for(var a=[],s=0;s<t.eventRegistrations_.length;++s){var u=t.eventRegistrations_[s];if(u.matches(e)){if(e.hasAnyCallback()){a=a.concat(t.eventRegistrations_.slice(s+1));break}}else a.push(u)}t.eventRegistrations_=a}else t.eventRegistrations_=[];return r}function Wn(t,e,n,r){e.type===Ve.MERGE&&null!==e.source.queryId&&((0,o.assert)(on(t.viewCache_),"We should always have a full cache before handling merges"),(0,o.assert)(rn(t.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,s=t.viewCache_,u=On(t.processor_,s,e,n,r);return i=t.processor_,a=u.viewCache,(0,o.assert)(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),(0,o.assert)(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),(0,o.assert)(u.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=u.viewCache,Kn(t,u.changes,u.viewCache.eventCache.getNode(),null)}function Kn(t,e,n,r){var i=r?[r]:t.eventRegistrations_;return function(t,e,n,r){var i=[],o=[];return e.forEach((function(e){var n;"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push((n=e.childName,{type:"child_moved",snapshotNode:e.snapshotNode,childName:n}))})),Ze(t,i,"child_removed",e,r,n),Ze(t,i,"child_added",e,r,n),Ze(t,i,"child_moved",o,r,n),Ze(t,i,"child_changed",e,r,n),Ze(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,i)}var Yn,Xn=function(){this.views=new Map};function Qn(t,e,n,r){var i,s,u=e.source.queryId;if(null!==u){var c=t.views.get(u);return(0,o.assert)(null!=c,"SyncTree gave us an op for an invalid query."),Wn(c,e,n,r)}var l=[];try{for(var h=(0,a.__values)(t.views.values()),d=h.next();!d.done;d=h.next()){c=d.value;l=l.concat(Wn(c,e,n,r))}}catch(t){i={error:t}}finally{try{d&&!d.done&&(s=h.return)&&s.call(h)}finally{if(i)throw i.error}}return l}function Jn(t,e,n,r,i){var o=e._queryIdentifier,a=t.views.get(o);if(!a){var s=xn(n,i?r:null),u=!1;s?u=!0:r instanceof le?(s=In(n,r),u=!1):(s=le.EMPTY_NODE,u=!1);var c=tn(new Qe(s,u,!1),new Qe(r,i,!1));return new qn(e,c)}return a}function Zn(t,e,n,r,i,o){var a=Jn(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,a),function(t,e){t.eventRegistrations_.push(e)}(a,n),function(t,e){var n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ie,(function(t,e){r.push(xe(t,e))})),n.isFullyInitialized()&&r.push(Te(n.getNode())),Kn(t,r,n.getNode(),e)}(a,n)}function tr(t,e,n,r){var i,s,u=e._queryIdentifier,c=[],l=[],h=or(t);if("default"===u)try{for(var d=(0,a.__values)(t.views.entries()),f=d.next();!f.done;f=d.next()){var p=(0,a.__read)(f.value,2),g=p[0],m=p[1];l=l.concat($n(m,n,r)),Hn(m)&&(t.views.delete(g),m.query._queryParams.loadsAllData()||c.push(m.query))}}catch(t){i={error:t}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(i)throw i.error}}else(m=t.views.get(u))&&(l=l.concat($n(m,n,r)),Hn(m)&&(t.views.delete(u),m.query._queryParams.loadsAllData()||c.push(m.query)));return h&&!or(t)&&c.push(new((0,o.assert)(Vn,"Reference.ts has not been loaded"),Vn)(e._repo,e._path)),{removed:c,events:l}}function er(t){var e,n,r=[];try{for(var i=(0,a.__values)(t.views.values()),o=i.next();!o.done;o=i.next()){var s=o.value;s.query._queryParams.loadsAllData()||r.push(s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function nr(t,e){var n,r,i=null;try{for(var o=(0,a.__values)(t.views.values()),s=o.next();!s.done;s=o.next()){var u=s.value;i=i||zn(u,e)}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}function rr(t,e){if(e._queryParams.loadsAllData())return ar(t);var n=e._queryIdentifier;return t.views.get(n)}function ir(t,e){return null!=rr(t,e)}function or(t){return null!=ar(t)}function ar(t){var e,n;try{for(var r=(0,a.__values)(t.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.query._queryParams.loadsAllData())return o}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}var sr=1,ur=function(t){this.listenProvider_=t,this.syncPointTree_=new an(null),this.pendingWriteTree_={visibleWrites:sn.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map};function cr(t,e,n,r,i){return function(t,e,n,r,i){(0,o.assert)(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=un(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,i),i?vr(t,new Ye({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function lr(t,e,n,r){!function(t,e,n,r){(0,o.assert)(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=cn(t.visibleWrites,e,n),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r);var i=an.fromObject(n);return vr(t,new Xe({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}function hr(t,e,n){void 0===n&&(n=!1);var r=function(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(bn(t.pendingWriteTree_,e)){var i=new an(null);return null!=r.snap?i=i.set(yt(),!0):L(r.children,(function(t){i=i.set(new vt(t),!0)})),vr(t,new We(r.path,i,n))}return[]}function dr(t,e,n){return vr(t,new Ye({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function fr(t,e,n,r){var i=e._path,o=t.syncPointTree_.get(i),a=[];if(o&&("default"===e._queryIdentifier||ir(o,e))){var s=tr(o,e,n,r);0===o.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(i));var u=s.removed;a=s.events;var c=-1!==u.findIndex((function(t){return t._queryParams.loadsAllData()})),l=t.syncPointTree_.findOnPath(i,(function(t,e){return or(e)}));if(c&&!l){var h=t.syncPointTree_.subtree(i);if(!h.isEmpty())for(var d=function(t){return t.fold((function(t,e,n){if(e&&or(e))return[ar(e)];var r=[];return e&&(r=er(e)),L(n,(function(t,e){r=r.concat(e)})),r}))}(h),f=0;f<d.length;++f){var p=d[f],g=p.query,m=_r(t,p);t.listenProvider_.startListening(kr(g),wr(t,g),m.hashFn,m.onComplete)}}if(!l&&u.length>0&&!r)if(c){t.listenProvider_.stopListening(kr(e),null)}else u.forEach((function(e){var n=t.queryToTagMap.get(Sr(e));t.listenProvider_.stopListening(kr(e),n)}));!function(t,e){for(var n=0;n<e.length;++n){var r=e[n];if(!r._queryParams.loadsAllData()){var i=Sr(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}(t,u)}return a}function pr(t,e,n){var r=e._path,i=null,a=!1;t.syncPointTree_.foreachOnPath(r,(function(t,e){var n=Et(t,r);i=i||nr(e,n),a=a||or(e)}));var s,u=t.syncPointTree_.get(r);(u?(a=a||or(u),i=i||nr(u,yt())):(u=new Xn,t.syncPointTree_=t.syncPointTree_.set(r,u)),null!=i)?s=!0:(s=!1,i=le.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((function(t,e){var n=nr(e,yt());n&&(i=i.updateImmediateChild(t,n))})));var c=ir(u,e);if(!c&&!e._queryParams.loadsAllData()){var l=Sr(e);(0,o.assert)(!t.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=sr++;t.queryToTagMap.set(l,h),t.tagToQueryMap.set(h,l)}var d=Zn(u,e,n,yn(t.pendingWriteTree_,r),i,s);if(!c&&!a){var f=rr(u,e);d=d.concat(function(t,e,n){var r=e._path,i=wr(t,e),a=_r(t,n),s=t.listenProvider_.startListening(kr(e),i,a.hashFn,a.onComplete),u=t.syncPointTree_.subtree(r);if(i)(0,o.assert)(!or(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold((function(t,e,n){if(!kt(t)&&e&&or(e))return[ar(e).query];var r=[];return e&&(r=r.concat(er(e).map((function(t){return t.query})))),L(n,(function(t,e){r=r.concat(e)})),r})),l=0;l<c.length;++l){var h=c[l];t.listenProvider_.stopListening(kr(h),wr(t,h))}return s}(t,e,f))}return d}function gr(t,e,n){var r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(function(t,n){var r=nr(n,Et(t,e));if(r)return r}));return Tn(r,e,i,n,!0)}function mr(t,e){var n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,(function(t,e){var i=Et(t,n);r=r||nr(e,i)}));var i=t.syncPointTree_.get(n);i?r=r||nr(i,yt()):(i=new Xn,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,a=o?new Qe(r,!0,!1):null;return function(t){return rn(t.viewCache_)}(Jn(i,e,yn(t.pendingWriteTree_,e._path),o?a.getNode():le.EMPTY_NODE,o))}function vr(t,e){return yr(e,t.syncPointTree_,null,yn(t.pendingWriteTree_,yt()))}function yr(t,e,n,r){if(kt(t.path))return br(t,e,n,r);var i=e.get(yt());null==n&&null!=i&&(n=nr(i,yt()));var o=[],a=bt(t.path),s=t.operationForChild(a),u=e.children.get(a);if(u&&s){var c=n?n.getImmediateChild(a):null,l=An(r,a);o=o.concat(yr(s,u,c,l))}return i&&(o=o.concat(Qn(i,t,r,n))),o}function br(t,e,n,r){var i=e.get(yt());null==n&&null!=i&&(n=nr(i,yt()));var o=[];return e.children.inorderTraversal((function(e,i){var a=n?n.getImmediateChild(e):null,s=An(r,e),u=t.operationForChild(e);u&&(o=o.concat(br(u,i,a,s)))})),i&&(o=o.concat(Qn(i,t,r,n))),o}function _r(t,e){var n=e.query,r=wr(t,n);return{hashFn:function(){var t=function(t){return t.viewCache_.serverCache.getNode()}(e)||le.EMPTY_NODE;return t.hash()},onComplete:function(e){if("ok"===e)return r?function(t,e,n){var r=Tr(t,n);if(r){var i=xr(r),o=i.path,a=i.queryId,s=Et(o,e);return Ir(t,o,new Ke(He(a),s))}return[]}(t,n._path,r):function(t,e){return vr(t,new Ke({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n._path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}(e,n);return fr(t,n,null,i)}}}function wr(t,e){var n=Sr(e);return t.queryToTagMap.get(n)}function Sr(t){return t._path.toString()+"$"+t._queryIdentifier}function Tr(t,e){return t.tagToQueryMap.get(e)}function xr(t){var e=t.indexOf("$");return(0,o.assert)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new vt(t.substr(0,e))}}function Ir(t,e,n){var r=t.syncPointTree_.get(e);return(0,o.assert)(r,"Missing sync point for query tag that we're tracking"),Qn(r,n,yn(t.pendingWriteTree_,e),null)}function kr(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new((0,o.assert)(Yn,"Reference.ts has not been loaded"),Yn)(t._repo,t._path):t}var Er=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),Cr=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=It(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return gr(this.syncTree_,this.path_)},t}(),Nr=function(t){return(t=t||{}).timestamp=t.timestamp||(new Date).getTime(),t},Ar=function(t,e,n){return t&&"object"==typeof t?((0,o.assert)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?Pr(t[".sv"],e,n):"object"==typeof t[".sv"]?Rr(t[".sv"],e):void(0,o.assert)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},Pr=function(t,e,n){if("timestamp"===t)return n.timestamp;(0,o.assert)(!1,"Unexpected server value: "+t)},Rr=function(t,e,n){t.hasOwnProperty("increment")||(0,o.assert)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&(0,o.assert)(!1,"Unexpected increment value: "+r);var i=e.node();if((0,o.assert)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!=typeof a?r:a+r},Dr=function(t,e,n,r){return Or(e,new Cr(n,t),r)},Mr=function(t,e,n){return Or(t,new Er(e),n)};function Or(t,e,n){var r,i=t.getPriority().val(),o=Ar(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var a=t,s=Ar(a.getValue(),e,n);return s!==a.getValue()||o!==a.getPriority().val()?new te(s,fe(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new te(o))),u.forEachChild(ie,(function(t,i){var o=Or(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))})),r}var Lr=function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n};function Fr(t,e){for(var n=e instanceof vt?e:new vt(e),r=t,i=bt(n);null!==i;){var a=(0,o.safeGet)(r.node.children,i)||{children:{},childCount:0};r=new Lr(i,r,a),i=bt(n=wt(n))}return r}function jr(t){return t.node.value}function Br(t,e){t.node.value=e,zr(t)}function Gr(t){return t.node.childCount>0}function Ur(t,e){L(t.node.children,(function(n,r){e(new Lr(n,t,r))}))}function Vr(t,e,n,r){n&&!r&&e(t),Ur(t,(function(t){Vr(t,e,!0,r)})),n&&r&&e(t)}function qr(t){return new vt(null===t.parent?t.name:qr(t.parent)+"/"+t.name)}function zr(t){null!==t.parent&&function(t,e,n){var r=function(t){return void 0===jr(t)&&!Gr(t)}(n),i=(0,o.contains)(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,zr(t)):r||i||(t.node.children[e]=n.node,t.node.childCount++,zr(t))}(t.parent,t.name,t)}var Hr=/[\[\].#$\/\u0000-\u001F\u007F]/,$r=/[\[\].#$\u0000-\u001F\u007F]/,Wr=10485760,Kr=function(t){return"string"==typeof t&&0!==t.length&&!Hr.test(t)},Yr=function(t){return"string"==typeof t&&0!==t.length&&!$r.test(t)},Xr=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!C(t)||t&&"object"==typeof t&&(0,o.contains)(t,".sv")},Qr=function(t,e,n,r){r&&void 0===e||Jr((0,o.errorPrefix)(t,"value"),e,n)},Jr=function(t,e,n){var r=n instanceof vt?new Pt(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+Dt(r));if("function"==typeof e)throw new Error(t+"contains a function "+Dt(r)+" with contents = "+e.toString());if(C(e))throw new Error(t+"contains "+e.toString()+" "+Dt(r));if("string"==typeof e&&e.length>Wr/3&&(0,o.stringLength)(e)>Wr)throw new Error(t+"contains a string greater than "+Wr+" utf8 bytes "+Dt(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,a=!1;if(L(e,(function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(a=!0,!Kr(e)))throw new Error(t+" contains an invalid key ("+e+") "+Dt(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var s,u;!function(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=(0,o.stringLength)(e),Rt(t)}(r,e),Jr(t,n,r),u=(s=r).parts_.pop(),s.byteLength_-=(0,o.stringLength)(u),s.parts_.length>0&&(s.byteLength_-=1)})),i&&a)throw new Error(t+' contains ".value" child '+Dt(r)+" in addition to actual children.")}},Zr=function(t,e,n,r){if(!r||void 0!==e){var i=(0,o.errorPrefix)(t,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");var a=[];L(e,(function(t,e){var r=new vt(t);if(Jr(i,e,It(n,r)),".priority"===St(r)&&!Xr(e))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(r)})),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=Tt(r=e[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!Kr(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(Ct);var a=null;for(n=0;n<e.length;n++){if(r=e[n],null!==a&&At(a,r))throw new Error(t+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}}(i,a)}},ti=function(t,e,n){if(!n||void 0!==e){if(C(e))throw new Error((0,o.errorPrefix)(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Xr(e))throw new Error((0,o.errorPrefix)(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},ei=function(t,e,n,r){if(!(r&&void 0===n||Kr(n)))throw new Error((0,o.errorPrefix)(t,e)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},ni=function(t,e,n,r){if(!(r&&void 0===n||Yr(n)))throw new Error((0,o.errorPrefix)(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},ri=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),ni(t,e,n,r)},ii=function(t,e){if(".info"===bt(e))throw new Error(t+" failed = Can't modify data under /.info/")},oi=function(t,e){var n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Kr(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Yr(t)}(n))throw new Error((0,o.errorPrefix)(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},ai=function(){this.eventLists_=[],this.recursionDepth_=0};function si(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||Nt(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function ui(t,e,n){si(t,n),li(t,(function(t){return Nt(t,e)}))}function ci(t,e,n){si(t,n),li(t,(function(t){return At(t,e)||At(e,t)}))}function li(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];if(i)e(i.path)?(hi(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}n&&(t.eventLists_=[]),t.recursionDepth_--}function hi(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();_&&T("event: "+n.toString()),V(r)}}}var di="repo_interrupt",fi=25,pi=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ai,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=je(),this.transactionQueueTree_=new Lr,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t}();function gi(t,e,n){if(t.stats_=rt(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new Le(t.repoInfo_,(function(e,n,r,i){yi(t,e,n,r,i)}),t.authTokenProvider_,t.appCheckProvider_),setTimeout((function(){return bi(t,!0)}),0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,o.stringify)(n)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}t.persistentConnection_=new jt(t.repoInfo_,e,(function(e,n,r,i){yi(t,e,n,r,i)}),(function(e){bi(t,e)}),(function(e){!function(t,e){L(e,(function(e,n){_i(t,e,n)}))}(t,e)}),t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}var r,i,a;t.authTokenProvider_.addTokenChangeListener((function(e){t.server_.refreshAuthToken(e)})),t.appCheckProvider_.addTokenChangeListener((function(e){t.server_.refreshAppCheckToken(e.token)})),t.statsReporter_=(r=t.repoInfo_,i=function(){return new ze(t.stats_,t.server_)},a=r.toString(),nt[a]||(nt[a]=i()),nt[a]),t.infoData_=new Fe,t.infoSyncTree_=new ur({startListening:function(e,n,r,i){var o=[],a=t.infoData_.getNode(e._path);return a.isEmpty()||(o=dr(t.infoSyncTree_,e._path,a),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),_i(t,"connected",!1),t.serverSyncTree_=new ur({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,(function(n,r){var o=i(n,r);ci(t.eventQueue_,e._path,o)})),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}function mi(t){var e=t.infoData_.getNode(new vt(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function vi(t){return Nr({timestamp:mi(t)})}function yi(t,e,n,r,i){t.dataUpdateCount++;var a=new vt(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var s=[];if(i)if(r){var u=(0,o.map)(n,(function(t){return fe(t)}));s=function(t,e,n,r){var i=Tr(t,r);if(i){var o=xr(i),a=o.path,s=o.queryId,u=Et(a,e),c=an.fromObject(n);return Ir(t,a,new Xe(He(s),u,c))}return[]}(t.serverSyncTree_,a,u,i)}else{var c=fe(n);s=function(t,e,n,r){var i=Tr(t,r);if(null!=i){var o=xr(i),a=o.path,s=o.queryId,u=Et(a,e);return Ir(t,a,new Ye(He(s),u,n))}return[]}(t.serverSyncTree_,a,c,i)}else if(r){var l=(0,o.map)(n,(function(t){return fe(t)}));s=function(t,e,n){var r=an.fromObject(n);return vr(t,new Xe({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,a,l)}else{var h=fe(n);s=dr(t.serverSyncTree_,a,h)}var d=a;s.length>0&&(d=Pi(t,a)),ci(t.eventQueue_,d,s)}function bi(t,e){_i(t,"connected",e),!1===e&&function(t){Ei(t,"onDisconnectEvents");var e=vi(t),n=je();Ue(t.onDisconnect_,yt(),(function(r,i){var o=Dr(r,i,t.serverSyncTree_,e);Be(n,r,o)}));var r=[];Ue(n,yt(),(function(e,n){r=r.concat(dr(t.serverSyncTree_,e,n));var i=Li(t,e);Pi(t,i)})),t.onDisconnect_=je(),ci(t.eventQueue_,yt(),r)}(t)}function _i(t,e,n){var r=new vt("/.info/"+e),i=fe(n);t.infoData_.updateSnapshot(r,i);var o=dr(t.infoSyncTree_,r,i);ci(t.eventQueue_,r,o)}function wi(t){return t.nextWriteId_++}function Si(t,e,n,r,i){Ei(t,"set",{path:e.toString(),value:n,priority:r});var o=vi(t),a=fe(n,r),s=gr(t.serverSyncTree_,e),u=Mr(a,s,o),c=wi(t),l=cr(t.serverSyncTree_,e,u,c,!0);si(t.eventQueue_,l),t.server_.put(e.toString(),a.val(!0),(function(n,r){var o="ok"===n;o||E("set at "+e+" failed: "+n);var a=hr(t.serverSyncTree_,c,!o);ci(t.eventQueue_,e,a),Ci(t,i,n,r)}));var h=Li(t,e);Pi(t,h),ci(t.eventQueue_,h,[])}function Ti(t,e,n){t.server_.onDisconnectCancel(e.toString(),(function(r,i){"ok"===r&&Ge(t.onDisconnect_,e),Ci(t,n,r,i)}))}function xi(t,e,n,r){var i=fe(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(function(n,o){"ok"===n&&Be(t.onDisconnect_,e,i),Ci(t,r,n,o)}))}function Ii(t,e,n){var r;r=".info"===bt(e._path)?fr(t.infoSyncTree_,e,n):fr(t.serverSyncTree_,e,n),ui(t.eventQueue_,e._path,r)}function ki(t){t.persistentConnection_&&t.persistentConnection_.interrupt(di)}function Ei(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),T.apply(void 0,(0,a.__spreadArray)([r],(0,a.__read)(e)))}function Ci(t,e,n,r){e&&V((function(){if("ok"===n)e(null);else{var t=(n||"error").toUpperCase(),i=t;r&&(i+=": "+r);var o=new Error(i);o.code=t,e(o)}}))}function Ni(t,e,n){return gr(t.serverSyncTree_,e,n)||le.EMPTY_NODE}function Ai(t,e){if(void 0===e&&(e=t.transactionQueueTree_),e||Oi(t,e),jr(e)){var n=Di(t,e);(0,o.assert)(n.length>0,"Sending zero length transaction queue"),n.every((function(t){return 0===t.status}))&&function(t,e,n){for(var r=n.map((function(t){return t.currentWriteId})),i=Ni(t,e,r),a=i,s=i.hash(),u=0;u<n.length;u++){var c=n[u];(0,o.assert)(0===c.status,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;var l=Et(e,c.path);a=a.updateChild(l,c.currentOutputSnapshotRaw)}var h=a.val(!0),d=e;t.server_.put(d.toString(),h,(function(r){Ei(t,"transaction put response",{path:d.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=function(e){n[e].status=2,i=i.concat(hr(t.serverSyncTree_,n[e].currentWriteId)),n[e].onComplete&&o.push((function(){return n[e].onComplete(null,!0,n[e].currentOutputSnapshotResolved)})),n[e].unwatcher()},s=0;s<n.length;s++)a(s);Oi(t,Fr(t.transactionQueueTree_,e)),Ai(t,t.transactionQueueTree_),ci(t.eventQueue_,e,i);for(s=0;s<o.length;s++)V(o[s])}else{if("datastale"===r)for(s=0;s<n.length;s++)3===n[s].status?n[s].status=4:n[s].status=0;else{E("transaction at "+d.toString()+" failed: "+r);for(s=0;s<n.length;s++)n[s].status=4,n[s].abortReason=r}Pi(t,e)}}),s)}(t,qr(e),n)}else Gr(e)&&Ur(e,(function(e){Ai(t,e)}))}function Pi(t,e){var n=Ri(t,e),r=qr(n);return function(t,e,n){if(0===e.length)return;for(var r=[],i=[],a=e.filter((function(t){return 0===t.status})).map((function(t){return t.currentWriteId})),s=function(s){var u,c,l=e[s],h=Et(n,l.path),d=!1;if((0,o.assert)(null!==h,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)d=!0,u=l.abortReason,i=i.concat(hr(t.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=fi)d=!0,u="maxretry",i=i.concat(hr(t.serverSyncTree_,l.currentWriteId,!0));else{var f=Ni(t,l.path,a);l.currentInputSnapshot=f;var p=e[s].update(f.val());if(void 0!==p){Jr("transaction failed: Data returned ",p,l.path);var g=fe(p);"object"==typeof p&&null!=p&&(0,o.contains)(p,".priority")||(g=g.updatePriority(f.getPriority()));var m=l.currentWriteId,v=vi(t),y=Mr(g,f,v);l.currentOutputSnapshotRaw=g,l.currentOutputSnapshotResolved=y,l.currentWriteId=wi(t),a.splice(a.indexOf(m),1),i=(i=i.concat(cr(t.serverSyncTree_,l.path,y,l.currentWriteId,l.applyLocally))).concat(hr(t.serverSyncTree_,m,!0))}else d=!0,u="nodata",i=i.concat(hr(t.serverSyncTree_,l.currentWriteId,!0))}ci(t.eventQueue_,n,i),i=[],d&&(e[s].status=2,c=e[s].unwatcher,setTimeout(c,Math.floor(0)),e[s].onComplete&&("nodata"===u?r.push((function(){return e[s].onComplete(null,!1,e[s].currentInputSnapshot)})):r.push((function(){return e[s].onComplete(new Error(u),!1,null)}))))},u=0;u<e.length;u++)s(u);Oi(t,t.transactionQueueTree_);for(u=0;u<r.length;u++)V(r[u]);Ai(t,t.transactionQueueTree_)}(t,Di(t,n),r),r}function Ri(t,e){var n,r=t.transactionQueueTree_;for(n=bt(e);null!==n&&void 0===jr(r);)r=Fr(r,n),n=bt(e=wt(e));return r}function Di(t,e){var n=[];return Mi(t,e,n),n.sort((function(t,e){return t.order-e.order})),n}function Mi(t,e,n){var r=jr(e);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Ur(e,(function(e){Mi(t,e,n)}))}function Oi(t,e){var n=jr(e);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Br(e,n.length>0?n:void 0)}Ur(e,(function(e){Oi(t,e)}))}function Li(t,e){var n=qr(Ri(t,e)),r=Fr(t.transactionQueueTree_,e);return function(t,e,n){for(var r=n?t:t.parent;null!==r;){if(e(r))return!0;r=r.parent}}(r,(function(e){Fi(t,e)})),Fi(t,r),Vr(r,(function(e){Fi(t,e)})),n}function Fi(t,e){var n=jr(e);if(n){for(var r=[],i=[],a=-1,s=0;s<n.length;s++)3===n[s].status||(1===n[s].status?((0,o.assert)(a===s-1,"All SENT items should be at beginning of queue."),a=s,n[s].status=3,n[s].abortReason="set"):((0,o.assert)(0===n[s].status,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(hr(t.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));-1===a?Br(e,void 0):n.length=a+1,ci(t.eventQueue_,qr(e),i);for(s=0;s<r.length;s++)V(r[s])}}var ji=function(t,e){var n=Bi(t),r=n.namespace;"firebase.com"===n.domain&&k(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||k("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&E("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new J(n.host,n.secure,r,e,i,"",r!==n.subdomain),path:new vt(n.pathString)}},Bi=function(t){var e="",n="",r="",i="",o="",s=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var d=t.indexOf("?");-1===d&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}(t.substring(h,d)));var f=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=(0,a.__values)(t.split("&")),o=i.next();!o.done;o=i.next()){var s=o.value;if(0!==s.length){var u=s.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):E("Invalid query segment '"+s+"' in query '"+t+"'")}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,d)));(l=e.indexOf(":"))>=0?(s="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var p=e.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),o=r}"ns"in f&&(o=f.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:s,scheme:u,pathString:i,namespace:o}},Gi=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+(0,o.stringify)(this.snapshot.exportVal())},t}(),Ui=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Vi=function(){function t(t,e){this.snapshotCallback=t,this.cancelCallback=e}return t.prototype.onValue=function(t,e){this.snapshotCallback.call(null,t,e)},t.prototype.onCancel=function(t){return(0,o.assert)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)},Object.defineProperty(t.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),t.prototype.matches=function(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context},t}(),qi=function(){function t(t,e){this._repo=t,this._path=e}return t.prototype.cancel=function(){var t=new o.Deferred;return Ti(this._repo,this._path,t.wrapCallback((function(){}))),t.promise},t.prototype.remove=function(){ii("OnDisconnect.remove",this._path);var t=new o.Deferred;return xi(this._repo,this._path,null,t.wrapCallback((function(){}))),t.promise},t.prototype.set=function(t){ii("OnDisconnect.set",this._path),Qr("OnDisconnect.set",t,this._path,!1);var e=new o.Deferred;return xi(this._repo,this._path,t,e.wrapCallback((function(){}))),e.promise},t.prototype.setWithPriority=function(t,e){ii("OnDisconnect.setWithPriority",this._path),Qr("OnDisconnect.setWithPriority",t,this._path,!1),ti("OnDisconnect.setWithPriority",e,!1);var n=new o.Deferred;return function(t,e,n,r,i){var o=fe(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),(function(n,r){"ok"===n&&Be(t.onDisconnect_,e,o),Ci(0,i,n,r)}))}(this._repo,this._path,t,e,n.wrapCallback((function(){}))),n.promise},t.prototype.update=function(t){ii("OnDisconnect.update",this._path),Zr("OnDisconnect.update",t,this._path,!1);var e=new o.Deferred;return function(t,e,n,r){if((0,o.isEmpty)(n))return T("onDisconnect().update() called with empty data.  Don't do anything."),void Ci(0,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,(function(i,o){"ok"===i&&L(n,(function(n,r){var i=fe(r);Be(t.onDisconnect_,It(e,n),i)})),Ci(0,r,i,o)}))}(this._repo,this._path,t,e.wrapCallback((function(){}))),e.promise},t}(),zi=function(){function t(t,e,n,r){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=r}return Object.defineProperty(t.prototype,"key",{get:function(){return kt(this._path)?null:St(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Ki(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryIdentifier",{get:function(){var t=Oe(this._queryParams),e=M(t);return"{}"===e?"default":e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryObject",{get:function(){return Oe(this._queryParams)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!((e=(0,o.getModularInstance)(e))instanceof t))return!1;var n=this._repo===e._repo,r=Nt(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i},t.prototype.toJSON=function(){return this.toString()},t.prototype.toString=function(){return this._repo.toString()+function(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)},t}();function Hi(t,e){if(!0===t._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function $i(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Vt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==N)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==A)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===ie){if(null!=e&&!Xr(e)||null!=n&&!Xr(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,o.assert)(t.getIndex()instanceof me||t.getIndex()===ye,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Wi(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Ki=function(t){function e(e,n){return t.call(this,e,n,new Ae,!1)||this}return(0,a.__extends)(e,t),Object.defineProperty(e.prototype,"parent",{get:function(){var t=xt(this._path);return null===t?null:new e(this._repo,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t},enumerable:!1,configurable:!0}),e}(zi),Yi=function(){function t(t,e,n){this._node=t,this.ref=e,this._index=n}return Object.defineProperty(t.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),t.prototype.child=function(e){var n=new vt(e),r=Ji(this.ref,e);return new t(this._node.getChild(n),r,ie)},t.prototype.exists=function(){return!this._node.isEmpty()},t.prototype.exportVal=function(){return this._node.val(!0)},t.prototype.forEach=function(e){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return e(new t(i,Ji(n.ref,r),ie))}))},t.prototype.hasChild=function(t){var e=new vt(t);return!this._node.getChild(e).isEmpty()},t.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},t.prototype.toJSON=function(){return this.exportVal()},t.prototype.val=function(){return this._node.val()},t}();function Xi(t,e){return(t=(0,o.getModularInstance)(t))._checkNotDeleted("ref"),void 0!==e?Ji(t._root,e):t._root}function Qi(t,e){(t=(0,o.getModularInstance)(t))._checkNotDeleted("refFromURL");var n=ji(e,t._repo.repoInfo_.nodeAdmin);oi("refFromURL",n);var r=n.repoInfo;return t._repo.repoInfo_.isCustomHost()||r.host===t._repo.repoInfo_.host||k("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),Xi(t,n.path.toString())}function Ji(t,e){return null===bt((t=(0,o.getModularInstance)(t))._path)?ri("child","path",e,!1):ni("child","path",e,!1),new Ki(t._repo,It(t._path,e))}function Zi(t,e){t=(0,o.getModularInstance)(t),ii("set",t._path),Qr("set",e,t._path,!1);var n=new o.Deferred;return Si(t._repo,t._path,e,null,n.wrapCallback((function(){}))),n.promise}function to(t,e){Zr("update",e,t._path,!1);var n=new o.Deferred;return function(t,e,n,r){Ei(t,"update",{path:e.toString(),value:n});var i=!0,o=vi(t),a={};if(L(n,(function(n,r){i=!1,a[n]=Dr(It(e,n),fe(r),t.serverSyncTree_,o)})),i)T("update() called with empty data.  Don't do anything."),Ci(0,r,"ok",void 0);else{var s=wi(t),u=lr(t.serverSyncTree_,e,a,s);si(t.eventQueue_,u),t.server_.merge(e.toString(),n,(function(n,i){var o="ok"===n;o||E("update at "+e+" failed: "+n);var a=hr(t.serverSyncTree_,s,!o),u=a.length>0?Pi(t,e):e;ci(t.eventQueue_,u,a),Ci(0,r,n,i)})),L(n,(function(n){var r=Li(t,It(e,n));Pi(t,r)})),ci(t.eventQueue_,e,[])}}(t._repo,t._path,e,n.wrapCallback((function(){}))),n.promise}function eo(t){return function(t,e){var n=mr(t.serverSyncTree_,e);return null!=n?Promise.resolve(n):t.server_.get(e).then((function(n){var r=fe(n).withIndex(e._queryParams.getIndex()),i=dr(t.serverSyncTree_,e._path,r);return ui(t.eventQueue_,e._path,i),Promise.resolve(r)}),(function(n){return Ei(t,"get for query "+(0,o.stringify)(e)+" failed: "+n),Promise.reject(new Error(n))}))}((t=(0,o.getModularInstance)(t))._repo,t).then((function(e){return new Yi(e,new Ki(t._repo,t._path),t._queryParams.getIndex())}))}var no=function(){function t(t){this.callbackContext=t}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e._queryParams.getIndex();return new Gi("value",this,new Yi(t.snapshotNode,new Ki(e._repo,e._path),n))},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,null)}},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Ui(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))},t.prototype.hasAnyCallback=function(){return null!==this.callbackContext},t}(),ro=function(){function t(t,e){this.eventType=t,this.callbackContext=e}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Ui(this,t,e):null},t.prototype.createEvent=function(t,e){(0,o.assert)(null!=t.childName,"Child events should have a childName.");var n=Ji(new Ki(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new Gi(t.type,this,new Yi(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,t.prevName)}},t.prototype.matches=function(e){return e instanceof t&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))},t.prototype.hasAnyCallback=function(){return!!this.callbackContext},t}();function io(t,e,n,r,i){var o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){var a=n,s=function(e,n){Ii(t._repo,t,c),a(e,n)};s.userCallback=n.userCallback,s.context=n.context,n=s}var u=new Vi(n,o||void 0),c="value"===e?new no(u):new ro(e,u);return function(t,e,n){var r;r=".info"===bt(e._path)?pr(t.infoSyncTree_,e,n):pr(t.serverSyncTree_,e,n),ui(t.eventQueue_,e._path,r)}(t._repo,t,c),function(){return Ii(t._repo,t,c)}}function oo(t,e,n,r){return io(t,"value",e,n,r)}function ao(t,e,n,r){return io(t,"child_added",e,n,r)}function so(t,e,n,r){return io(t,"child_changed",e,n,r)}function uo(t,e,n,r){return io(t,"child_moved",e,n,r)}function co(t,e,n,r){return io(t,"child_removed",e,n,r)}function lo(t,e,n){var r=null,i=n?new Vi(n):null;"value"===e?r=new no(i):e&&(r=new ro(e,i)),Ii(t._repo,t,r)}var ho=function(){},fo=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return(0,a.__extends)(e,t),e.prototype._apply=function(t){Qr("endAt",this._value,t._path,!0);var e=Re(t._queryParams,this._value,this._key);if(Wi(e),$i(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new zi(t._repo,t._path,e,t._orderByCalled)},e}(ho);var po=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return(0,a.__extends)(e,t),e.prototype._apply=function(t){Qr("endBefore",this._value,t._path,!1);var e,n,r,i,o=(e=t._queryParams,n=this._value,r=this._key,e.index_===Vt?("string"==typeof n&&(n=Se(n)),i=Re(e,n,r)):i=Re(e,n,null==r?N:Se(r)),i.endBeforeSet_=!0,i);if(Wi(o),$i(o),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new zi(t._repo,t._path,o,t._orderByCalled)},e}(ho);var go=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return(0,a.__extends)(e,t),e.prototype._apply=function(t){Qr("startAt",this._value,t._path,!0);var e=Pe(t._queryParams,this._value,this._key);if(Wi(e),$i(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new zi(t._repo,t._path,e,t._orderByCalled)},e}(ho);var mo=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return(0,a.__extends)(e,t),e.prototype._apply=function(t){Qr("startAfter",this._value,t._path,!1);var e=function(t,e,n){var r;t.index_===Vt?("string"==typeof e&&(e=we(e)),r=Pe(t,e,n)):r=Pe(t,e,null==n?A:we(n));return r.startAfterSet_=!0,r}(t._queryParams,this._value,this._key);if(Wi(e),$i(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new zi(t._repo,t._path,e,t._orderByCalled)},e}(ho);var vo=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return(0,a.__extends)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new zi(t._repo,t._path,(e=t._queryParams,n=this._limit,(r=e.copy()).limitSet_=!0,r.limit_=n,r.viewFrom_="l",r),t._orderByCalled);var e,n,r},e}(ho);var yo=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return(0,a.__extends)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new zi(t._repo,t._path,(e=t._queryParams,n=this._limit,(r=e.copy()).limitSet_=!0,r.limit_=n,r.viewFrom_="r",r),t._orderByCalled);var e,n,r},e}(ho);var bo=function(t){function e(e){var n=t.call(this)||this;return n._path=e,n}return(0,a.__extends)(e,t),e.prototype._apply=function(t){Hi(t,"orderByChild");var e=new vt(this._path);if(kt(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new me(e),r=De(t._queryParams,n);return $i(r),new zi(t._repo,t._path,r,!0)},e}(ho);var _o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,a.__extends)(e,t),e.prototype._apply=function(t){Hi(t,"orderByKey");var e=De(t._queryParams,Vt);return $i(e),new zi(t._repo,t._path,e,!0)},e}(ho);var wo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,a.__extends)(e,t),e.prototype._apply=function(t){Hi(t,"orderByPriority");var e=De(t._queryParams,ie);return $i(e),new zi(t._repo,t._path,e,!0)},e}(ho);var So=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,a.__extends)(e,t),e.prototype._apply=function(t){Hi(t,"orderByValue");var e=De(t._queryParams,ye);return $i(e),new zi(t._repo,t._path,e,!0)},e}(ho);var To=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return(0,a.__extends)(e,t),e.prototype._apply=function(t){if(Qr("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new fo(this._value,this._key)._apply(new go(this._value,this._key)._apply(t))},e}(ho);function xo(t){for(var e,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var s=(0,o.getModularInstance)(t);try{for(var u=(0,a.__values)(r),c=u.next();!c.done;c=u.next()){s=c.value._apply(s)}}catch(t){e={error:t}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return s}!function(t){(0,o.assert)(!Vn,"__referenceConstructor has already been defined"),Vn=t}(Ki),function(t){(0,o.assert)(!Yn,"__referenceConstructor has already been defined"),Yn=t}(Ki);var Io="FIREBASE_DATABASE_EMULATOR_HOST",ko={},Eo=!1;function Co(t,e,n,r,i){var o=r||t.options.databaseURL;void 0===o&&(t.options.projectId||k("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),T("Using default host for project ",t.options.projectId),o=t.options.projectId+"-default-rtdb.firebaseio.com");var a,s=ji(o,i),u=s.repoInfo,c=void 0;"undefined"!=typeof process&&(c=process.env[Io]),c?(a=!0,o="http://"+c+"?ns="+u.namespace,u=(s=ji(o,i)).repoInfo):a=!s.repoInfo.secure;var l=i&&a?new $($.OWNER):new H(t.name,t.options,e);oi("Invalid Firebase Database URL",s),kt(s.path)||k("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(t,e,n,r){var i=ko[e.name];i||(i={},ko[e.name]=i);var o=i[t.toURLString()];o&&k("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return o=new pi(t,Eo,n,r),i[t.toURLString()]=o,o}(u,t,l,new z(t.name,n));return new No(h,t)}var No=function(){function t(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}return Object.defineProperty(t.prototype,"_repo",{get:function(){return this._instanceStarted||(gi(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new Ki(this._repo,yt())),this._rootInternal},enumerable:!1,configurable:!0}),t.prototype._delete=function(){var t,e,n;return null!==this._rootInternal&&(t=this._repo,e=this.app.name,(n=ko[e])&&n[t.key]===t||k("Database "+e+"("+t.repoInfo_+") has already been deleted."),ki(t),delete n[t.key],this._repoInternal=null,this._rootInternal=null),Promise.resolve()},t.prototype._checkNotDeleted=function(t){null===this._rootInternal&&k("Cannot call "+t+" on a deleted database.")},t}();function Ao(t,e,n,r){void 0===r&&(r={}),(t=(0,o.getModularInstance)(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&k("Cannot call useEmulator() after instance has already been initialized.");var i=t._repoInternal,a=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&k('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new $($.OWNER);else if(r.mockUserToken){var s="string"==typeof r.mockUserToken?r.mockUserToken:(0,o.createMockUserToken)(r.mockUserToken,t.app.options.projectId);a=new $(s)}!function(t,e,n,r){t.repoInfo_=new J(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),r&&(t.authTokenProvider_=r)}(i,e,n,a)}function Po(t){var e;(t=(0,o.getModularInstance)(t))._checkNotDeleted("goOnline"),(e=t._repo).persistentConnection_&&e.persistentConnection_.resume(di)}var Ro={".sv":"timestamp"};var Do=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}();function Mo(t,e,n){var r;if(t=(0,o.getModularInstance)(t),ii("Reference.transaction",t._path),".length"===t.key||".keys"===t.key)throw"Reference.transaction failed: "+t.key+" is a read-only object.";var i=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,a=new o.Deferred,s=oo(t,(function(){}));return function(t,e,n,r,i,a){Ei(t,"transaction on "+e);var s={path:e,update:n,onComplete:r,status:null,order:v(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=Ni(t,e,void 0);s.currentInputSnapshot=u;var c=s.update(u.val());if(void 0===c)s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete&&s.onComplete(null,!1,s.currentInputSnapshot);else{Jr("transaction failed: Data returned ",c,s.path),s.status=0;var l=Fr(t.transactionQueueTree_,e),h=jr(l)||[];h.push(s),Br(l,h);var d=void 0;"object"==typeof c&&null!==c&&(0,o.contains)(c,".priority")?(d=(0,o.safeGet)(c,".priority"),(0,o.assert)(Xr(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):d=(gr(t.serverSyncTree_,e)||le.EMPTY_NODE).getPriority().val();var f=vi(t),p=fe(c,d),g=Mr(p,u,f);s.currentOutputSnapshotRaw=p,s.currentOutputSnapshotResolved=g,s.currentWriteId=wi(t);var m=cr(t.serverSyncTree_,e,g,s.currentWriteId,s.applyLocally);ci(t.eventQueue_,e,m),Ai(t,t.transactionQueueTree_)}}(t._repo,t._path,e,(function(e,n,r){var i=null;e?a.reject(e):(i=new Yi(r,new Ki(t._repo,t._path),ie),a.resolve(new Do(n,i)))}),s,i),a.promise}var Oo=function(){function t(t){this._delegate=t}return t.prototype.cancel=function(t){(0,o.validateArgCount)("OnDisconnect.cancel",0,1,arguments.length),(0,o.validateCallback)("OnDisconnect.cancel","onComplete",t,!0);var e=this._delegate.cancel();return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},t.prototype.remove=function(t){(0,o.validateArgCount)("OnDisconnect.remove",0,1,arguments.length),(0,o.validateCallback)("OnDisconnect.remove","onComplete",t,!0);var e=this._delegate.remove();return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},t.prototype.set=function(t,e){(0,o.validateArgCount)("OnDisconnect.set",1,2,arguments.length),(0,o.validateCallback)("OnDisconnect.set","onComplete",e,!0);var n=this._delegate.set(t);return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n},t.prototype.setWithPriority=function(t,e,n){(0,o.validateArgCount)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,o.validateCallback)("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(t,e);return n&&r.then((function(){return n(null)}),(function(t){return n(t)})),r},t.prototype.update=function(t,e){if((0,o.validateArgCount)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,E("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,o.validateCallback)("OnDisconnect.update","onComplete",e,!0);var i=this._delegate.update(t);return e&&i.then((function(){return e(null)}),(function(t){return e(t)})),i},t}(),Lo=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return(0,o.validateArgCount)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),Fo=function(){function t(t,e){this._database=t,this._delegate=e}return t.prototype.val=function(){return(0,o.validateArgCount)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},t.prototype.exportVal=function(){return(0,o.validateArgCount)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},t.prototype.toJSON=function(){return(0,o.validateArgCount)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.exists=function(){return(0,o.validateArgCount)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},t.prototype.child=function(e){return(0,o.validateArgCount)("DataSnapshot.child",0,1,arguments.length),e=String(e),ni("DataSnapshot.child","path",e,!1),new t(this._database,this._delegate.child(e))},t.prototype.hasChild=function(t){return(0,o.validateArgCount)("DataSnapshot.hasChild",1,1,arguments.length),ni("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)},t.prototype.getPriority=function(){return(0,o.validateArgCount)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},t.prototype.forEach=function(e){var n=this;return(0,o.validateArgCount)("DataSnapshot.forEach",1,1,arguments.length),(0,o.validateCallback)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach((function(r){return e(new t(n._database,r))}))},t.prototype.hasChildren=function(){return(0,o.validateArgCount)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(t.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return(0,o.validateArgCount)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},t.prototype.getRef=function(){return(0,o.validateArgCount)("DataSnapshot.ref",0,0,arguments.length),new Bo(this._database,this._delegate.ref)},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),jo=function(){function t(t,e){this.database=t,this._delegate=e}return t.prototype.on=function(e,n,r,i){var a,s=this;(0,o.validateArgCount)("Query.on",2,4,arguments.length),(0,o.validateCallback)("Query.on","callback",n,!1);var u=t.getCancelAndContextArgs_("Query.on",r,i),c=function(t,e){n.call(u.context,new Fo(s.database,t),e)};c.userCallback=n,c.context=u.context;var l=null===(a=u.cancel)||void 0===a?void 0:a.bind(u.context);switch(e){case"value":return oo(this._delegate,c,l),n;case"child_added":return ao(this._delegate,c,l),n;case"child_removed":return co(this._delegate,c,l),n;case"child_changed":return so(this._delegate,c,l),n;case"child_moved":return uo(this._delegate,c,l),n;default:throw new Error((0,o.errorPrefix)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},t.prototype.off=function(t,e,n){if((0,o.validateArgCount)("Query.off",0,3,arguments.length),function(t,e,n){if(!n||void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,o.errorPrefix)(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}("Query.off",t,!0),(0,o.validateCallback)("Query.off","callback",e,!0),(0,o.validateContextObject)("Query.off","context",n,!0),e){var r=function(){};r.userCallback=e,r.context=n,lo(this._delegate,t,r)}else lo(this._delegate,t)},t.prototype.get=function(){var t=this;return eo(this._delegate).then((function(e){return new Fo(t.database,e)}))},t.prototype.once=function(e,n,r,i){var a=this;(0,o.validateArgCount)("Query.once",1,4,arguments.length),(0,o.validateCallback)("Query.once","callback",n,!0);var s=t.getCancelAndContextArgs_("Query.once",r,i),u=new o.Deferred,c=function(t,e){var r=new Fo(a.database,t);n&&n.call(s.context,r,e),u.resolve(r)};c.userCallback=n,c.context=s.context;var l=function(t){s.cancel&&s.cancel.call(s.context,t),u.reject(t)};switch(e){case"value":oo(this._delegate,c,l,{onlyOnce:!0});break;case"child_added":ao(this._delegate,c,l,{onlyOnce:!0});break;case"child_removed":co(this._delegate,c,l,{onlyOnce:!0});break;case"child_changed":so(this._delegate,c,l,{onlyOnce:!0});break;case"child_moved":uo(this._delegate,c,l,{onlyOnce:!0});break;default:throw new Error((0,o.errorPrefix)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise},t.prototype.limitToFirst=function(e){return(0,o.validateArgCount)("Query.limitToFirst",1,1,arguments.length),new t(this.database,xo(this._delegate,function(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new vo(t)}(e)))},t.prototype.limitToLast=function(e){return(0,o.validateArgCount)("Query.limitToLast",1,1,arguments.length),new t(this.database,xo(this._delegate,function(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new yo(t)}(e)))},t.prototype.orderByChild=function(e){return(0,o.validateArgCount)("Query.orderByChild",1,1,arguments.length),new t(this.database,xo(this._delegate,function(t){if("$key"===t)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===t)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===t)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return ni("orderByChild","path",t,!1),new bo(t)}(e)))},t.prototype.orderByKey=function(){return(0,o.validateArgCount)("Query.orderByKey",0,0,arguments.length),new t(this.database,xo(this._delegate,new _o))},t.prototype.orderByPriority=function(){return(0,o.validateArgCount)("Query.orderByPriority",0,0,arguments.length),new t(this.database,xo(this._delegate,new wo))},t.prototype.orderByValue=function(){return(0,o.validateArgCount)("Query.orderByValue",0,0,arguments.length),new t(this.database,xo(this._delegate,new So))},t.prototype.startAt=function(e,n){return void 0===e&&(e=null),(0,o.validateArgCount)("Query.startAt",0,2,arguments.length),new t(this.database,xo(this._delegate,function(t,e){return void 0===t&&(t=null),ei("startAt","key",e,!0),new go(t,e)}(e,n)))},t.prototype.startAfter=function(e,n){return void 0===e&&(e=null),(0,o.validateArgCount)("Query.startAfter",0,2,arguments.length),new t(this.database,xo(this._delegate,function(t,e){return ei("startAfter","key",e,!0),new mo(t,e)}(e,n)))},t.prototype.endAt=function(e,n){return void 0===e&&(e=null),(0,o.validateArgCount)("Query.endAt",0,2,arguments.length),new t(this.database,xo(this._delegate,function(t,e){return ei("endAt","key",e,!0),new fo(t,e)}(e,n)))},t.prototype.endBefore=function(e,n){return void 0===e&&(e=null),(0,o.validateArgCount)("Query.endBefore",0,2,arguments.length),new t(this.database,xo(this._delegate,function(t,e){return ei("endBefore","key",e,!0),new po(t,e)}(e,n)))},t.prototype.equalTo=function(e,n){return(0,o.validateArgCount)("Query.equalTo",1,2,arguments.length),new t(this.database,xo(this._delegate,function(t,e){return ei("equalTo","key",e,!0),new To(t,e)}(e,n)))},t.prototype.toString=function(){return(0,o.validateArgCount)("Query.toString",0,0,arguments.length),this._delegate.toString()},t.prototype.toJSON=function(){return(0,o.validateArgCount)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.isEqual=function(e){if((0,o.validateArgCount)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.")}return this._delegate.isEqual(e._delegate)},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:void 0,context:void 0};if(e&&n)r.cancel=e,(0,o.validateCallback)(t,"cancel",r.cancel,!0),r.context=n,(0,o.validateContextObject)(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error((0,o.errorPrefix)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return new Bo(this.database,new Ki(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),t}(),Bo=function(t){function e(e,n){var r=t.call(this,e,new zi(n._repo,n._path,new Ae,!1))||this;return r.database=e,r._delegate=n,r}return(0,a.__extends)(e,t),e.prototype.getKey=function(){return(0,o.validateArgCount)("Reference.key",0,0,arguments.length),this._delegate.key},e.prototype.child=function(t){return(0,o.validateArgCount)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new e(this.database,Ji(this._delegate,t))},e.prototype.getParent=function(){(0,o.validateArgCount)("Reference.parent",0,0,arguments.length);var t=this._delegate.parent;return t?new e(this.database,t):null},e.prototype.getRoot=function(){return(0,o.validateArgCount)("Reference.root",0,0,arguments.length),new e(this.database,this._delegate.root)},e.prototype.set=function(t,e){(0,o.validateArgCount)("Reference.set",1,2,arguments.length),(0,o.validateCallback)("Reference.set","onComplete",e,!0);var n=Zi(this._delegate,t);return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n},e.prototype.update=function(t,e){if((0,o.validateArgCount)("Reference.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,E("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ii("Reference.update",this._delegate._path),(0,o.validateCallback)("Reference.update","onComplete",e,!0);var i=to(this._delegate,t);return e&&i.then((function(){return e(null)}),(function(t){return e(t)})),i},e.prototype.setWithPriority=function(t,e,n){(0,o.validateArgCount)("Reference.setWithPriority",2,3,arguments.length),(0,o.validateCallback)("Reference.setWithPriority","onComplete",n,!0);var r=function(t,e,n){if(ii("setWithPriority",t._path),Qr("setWithPriority",e,t._path,!1),ti("setWithPriority",n,!1),".length"===t.key||".keys"===t.key)throw"setWithPriority failed: "+t.key+" is a read-only object.";var r=new o.Deferred;return Si(t._repo,t._path,e,n,r.wrapCallback((function(){}))),r.promise}(this._delegate,t,e);return n&&r.then((function(){return n(null)}),(function(t){return n(t)})),r},e.prototype.remove=function(t){(0,o.validateArgCount)("Reference.remove",0,1,arguments.length),(0,o.validateCallback)("Reference.remove","onComplete",t,!0);var e=function(t){return ii("remove",t._path),Zi(t,null)}(this._delegate);return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},e.prototype.transaction=function(t,e,n){var r=this;(0,o.validateArgCount)("Reference.transaction",1,3,arguments.length),(0,o.validateCallback)("Reference.transaction","transactionUpdate",t,!1),(0,o.validateCallback)("Reference.transaction","onComplete",e,!0),function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error((0,o.errorPrefix)(t,e)+"must be a boolean.")}("Reference.transaction","applyLocally",n,!0);var i=Mo(this._delegate,t,{applyLocally:n}).then((function(t){return new Lo(t.committed,new Fo(r.database,t.snapshot))}));return e&&i.then((function(t){return e(null,t.committed,t.snapshot)}),(function(t){return e(t,!1,null)})),i},e.prototype.setPriority=function(t,e){(0,o.validateArgCount)("Reference.setPriority",1,2,arguments.length),(0,o.validateCallback)("Reference.setPriority","onComplete",e,!0);var n=function(t,e){t=(0,o.getModularInstance)(t),ii("setPriority",t._path),ti("setPriority",e,!1);var n=new o.Deferred;return Si(t._repo,It(t._path,".priority"),e,null,n.wrapCallback((function(){}))),n.promise}(this._delegate,t);return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n},e.prototype.push=function(t,n){var r=this;(0,o.validateArgCount)("Reference.push",0,2,arguments.length),(0,o.validateCallback)("Reference.push","onComplete",n,!0);var i=function(t,e){t=(0,o.getModularInstance)(t),ii("push",t._path),Qr("push",e,t._path,!0);var n,r=mi(t._repo),i=_e(r),a=Ji(t,i),s=Ji(t,i);return n=null!=e?Zi(s,e).then((function(){return s})):Promise.resolve(s),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),a}(this._delegate,t),a=i.then((function(t){return new e(r.database,t)}));n&&a.then((function(){return n(null)}),(function(t){return n(t)}));var s=new e(this.database,i);return s.then=a.then.bind(a),s.catch=a.catch.bind(a,void 0),s},e.prototype.onDisconnect=function(){return ii("Reference.onDisconnect",this._delegate._path),new Oo(new qi(this._delegate._repo,this._delegate._path))},Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(jo),Go=function(){function t(t,e){var n=this;this._delegate=t,this.app=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),Ao(this._delegate,t,e,n)},t.prototype.ref=function(t){if((0,o.validateArgCount)("database.ref",0,1,arguments.length),t instanceof Bo){var e=Qi(this._delegate,t.toString());return new Bo(this,e)}e=Xi(this._delegate,t);return new Bo(this,e)},t.prototype.refFromURL=function(t){(0,o.validateArgCount)("database.refFromURL",1,1,arguments.length);var e=Qi(this._delegate,t);return new Bo(this,e)},t.prototype.goOffline=function(){return(0,o.validateArgCount)("database.goOffline",0,0,arguments.length),t=this._delegate,(t=(0,o.getModularInstance)(t))._checkNotDeleted("goOffline"),void ki(t._repo);var t},t.prototype.goOnline=function(){return(0,o.validateArgCount)("database.goOnline",0,0,arguments.length),Po(this._delegate)},t.ServerValue={TIMESTAMP:Ro,increment:function(t){return function(t){return{".sv":{increment:t}}}(t)}},t}();var Uo=Object.freeze({__proto__:null,forceLongPolling:function(){ct.forceDisallow(),at.forceAllow()},forceWebSockets:function(){at.forceDisallow()},isWebSocketsAvailable:function(){return ct.isAvailable()},setSecurityDebugCallback:function(t,e){t._delegate._repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){!function(t,e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var n;e?(t.statsListener_||(t.statsListener_=new qe(t.stats_)),n=t.statsListener_.get()):n=t.stats_.get();var r=Object.keys(n).reduce((function(t,e){return Math.max(e.length,t)}),0);L(n,(function(t,e){for(var n=t,i=t.length;i<r+2;i++)n+=" ";console.log(n+e)}))}}(t._delegate._repo,e)},statsIncrementCounter:function(t,e){!function(t,e){var n,r;t.stats_.incrementCounter(e),n=t.statsReporter_,r=e,n.statsToReport_[r]=!0}(t._delegate._repo,e)},dataUpdateCount:function(t){return t._delegate._repo.dataUpdateCount},interceptServerData:function(t,e){return function(t,e){t.interceptServerDataCallback_=e}(t._delegate._repo,e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.version,o=t.customAuthImpl,a=t.namespace,s=t.nodeAdmin,u=void 0!==s&&s;c(r);var l=new i.Provider("auth-internal",new i.ComponentContainer("database-standalone"));return l.setComponent(new i.Component("auth-internal",(function(){return o}),"PRIVATE")),{instance:new Go(Co(e,l,void 0,n,u),e),namespace:a}}}),Vo=jt;jt.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},jt.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var qo=ht,zo=J,Ho=Object.freeze({__proto__:null,DataConnection:Vo,RealTimeConnection:qo,hijackHash:function(t){var e=jt.prototype.put;return jt.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){jt.prototype.put=e}},ConnectionTarget:zo,queryIdentifier:function(t){return t._delegate._queryIdentifier},forceRestClient:function(t){!function(t){Eo=t}(t)}}),$o=Go.ServerValue;!function(e){c(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new i.Component("database",(function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new Go(Co(r,i,o,n),r)}),"PUBLIC").setServiceProps({Reference:Bo,Query:jo,Database:Go,DataSnapshot:Fo,enableLogging:S,INTERNAL:Uo,ServerValue:$o,TEST_ACCESS:Ho}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.11.0"),(0,o.isNodeSdk)()&&(t.exports=n)}(r.default)},2477:(t,e,n)=>{"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var i;n.r(e),n.d(e,{LogLevel:()=>o,Logger:()=>h,setLogLevel:()=>d,setUserLogHandler:()=>f});var o,a=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(o||(o={}));var s={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,c=((i={})[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),a=c[e];if(!a)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[a].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,a.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?s[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],t)),this._logHandler.apply(this,r([this,o.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],t)),this._logHandler.apply(this,r([this,o.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],t)),this._logHandler.apply(this,r([this,o.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],t)),this._logHandler.apply(this,r([this,o.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],t)),this._logHandler.apply(this,r([this,o.ERROR],t))},t}();function d(t){a.forEach((function(e){e.setLogLevel(t)}))}function f(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=s[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:o[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=a;r<i.length;r++){n(i[r])}}},1625:(t,e,n)=>{"use strict";n.r(e),n.d(e,{CONSTANTS:()=>i,Deferred:()=>p,ErrorFactory:()=>R,FirebaseError:()=>P,MAX_VALUE_MILLIS:()=>lt,RANDOM_FACTOR:()=>ht,Sha1:()=>X,areCookiesEnabled:()=>N,assert:()=>o,assertionError:()=>a,async:()=>Z,base64:()=>u,base64Decode:()=>h,base64Encode:()=>c,base64urlEncodeWithoutPadding:()=>l,calculateBackoffMillis:()=>dt,contains:()=>U,createMockUserToken:()=>g,createSubscribe:()=>Q,decode:()=>L,deepCopy:()=>d,deepEqual:()=>H,deepExtend:()=>f,errorPrefix:()=>nt,extractQuerystring:()=>Y,getGlobal:()=>A,getModularInstance:()=>pt,getUA:()=>m,isAdmin:()=>G,isBrowser:()=>b,isBrowserExtension:()=>_,isElectron:()=>S,isEmpty:()=>q,isIE:()=>T,isIndexedDBAvailable:()=>E,isMobileCordova:()=>v,isNode:()=>y,isNodeSdk:()=>I,isReactNative:()=>w,isSafari:()=>k,isUWP:()=>x,isValidFormat:()=>B,isValidTimestamp:()=>F,issuedAtTime:()=>j,jsonEval:()=>M,map:()=>z,ordinal:()=>ft,querystring:()=>W,querystringDecode:()=>K,safeGet:()=>V,stringLength:()=>st,stringToByteArray:()=>at,stringify:()=>O,validateArgCount:()=>et,validateCallback:()=>it,validateContextObject:()=>ot,validateIndexedDBOpenable:()=>C,validateNamespace:()=>rt});var r=n(1635),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(t,e){if(!t)throw a(e)},a=function(t){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=o>>2,h=(3&o)<<4|s>>4,d=(15&s)<<2|c>>6,f=63&c;u||(f=64,a||(d=64)),r.push(n[l],n[h],n[d],n[f])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!==s){var l=a<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},c=function(t){var e=s(t);return u.encodeByteArray(e,!0)},l=function(t){return c(t).replace(/\./g,"")},h=function(t){try{return u.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function d(t){return f(void 0,t)}function f(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=f(t[n],e[n]));return t}var p=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function g(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=(0,r.__assign)({iss:"https://securetoken.google.com/"+n,aud:n,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[l(JSON.stringify({alg:"none",type:"JWT"})),l(JSON.stringify(a)),""].join(".")}function m(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function v(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(m())}function y(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(t){return!1}}function b(){return"object"==typeof self&&self.self===self}function _(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function w(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function S(){return m().indexOf("Electron/")>=0}function T(){var t=m();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function x(){return m().indexOf("MSAppHost/")>=0}function I(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN}function k(){return!y()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function E(){return"indexedDB"in self&&null!=indexedDB}function C(){return new Promise((function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}}))}function N(){return!(!navigator||!navigator.cookieEnabled)}function A(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("Unable to locate global object.")}var P=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,R.prototype.create),o}return(0,r.__extends)(e,t),e}(Error),R=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?function(t,e){return t.replace(D,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").";return new P(i,s,r)},t}();var D=/\{\$([^}]+)}/g;function M(t){return JSON.parse(t)}function O(t){return JSON.stringify(t)}var L=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=M(h(o[0])||""),n=M(h(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}},F=function(t){var e=L(t).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"==typeof e&&(e.hasOwnProperty("nbf")?r=e.nbf:e.hasOwnProperty("iat")&&(r=e.iat),i=e.hasOwnProperty("exp")?e.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},j=function(t){var e=L(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},B=function(t){var e=L(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},G=function(t){var e=L(t).claims;return"object"==typeof e&&!0===e.admin};function U(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function V(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function q(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function z(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function H(t,e){if(t===e)return!0;for(var n=Object.keys(t),r=Object.keys(e),i=0,o=n;i<o.length;i++){var a=o[i];if(!r.includes(a))return!1;var s=t[a],u=e[a];if($(s)&&$(u)){if(!H(s,u))return!1}else if(s!==u)return!1}for(var c=0,l=r;c<l.length;c++){a=l[c];if(!n.includes(a))return!1}return!0}function $(t){return null!==t&&"object"==typeof t}function W(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}function K(t){var e={};return t.replace(/^\?/,"").split("&").forEach((function(t){if(t){var n=t.split("="),r=n[0],i=n[1];e[decodeURIComponent(r)]=decodeURIComponent(i)}})),e}function Y(t){var e=t.indexOf("?");if(!e)return"";var n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}var X=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=l^u&(c^l),a=1518500249):(o=u^c^l,a=1859775393):r<60?(o=u&c|l&(u|c),a=2400959708):(o=u^c^l,a=3395469782);i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295;h=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function Q(t,e){var n=new J(t,e);return n.subscribe.bind(n)}var J=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=tt),void 0===r.error&&(r.error=tt),void 0===r.complete&&(r.complete=tt);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function Z(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){t.apply(void 0,n)})).catch((function(t){e&&e(t)}))}}function tt(){}var et=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function nt(t,e){return t+" failed: "+e+" argument "}function rt(t,e,n){if((!n||e)&&"string"!=typeof e)throw new Error(nt(t,"namespace")+"must be a valid firebase namespace.")}function it(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(nt(t,e)+"must be a valid function.")}function ot(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(nt(t,e)+"must be a valid context object.")}var at=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,o(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},st=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},ut=1e3,ct=2,lt=144e5,ht=.5;function dt(t,e,n){void 0===e&&(e=ut),void 0===n&&(n=ct);var r=e*Math.pow(n,t),i=Math.round(ht*r*(Math.random()-.5)*2);return Math.min(lt,r+i)}function ft(t){return Number.isFinite(t)?t+function(t){t=Math.abs(t);var e=t%100;if(e>=10&&e<=20)return"th";var n=t%10;if(1===n)return"st";if(2===n)return"nd";if(3===n)return"rd";return"th"}(t):""+t}function pt(t){return t&&t._delegate?t._delegate:t}},365:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var r=n(1601),i=n.n(r),o=n(6314),a=n.n(o)()(i());a.push([t.id,"@import url(https://fonts.googleapis.com/css?family=Hind+Madurai:200,300,400,500,600,700,800,900|Nunito:200,300,400,500,600,700,800,900|Ubuntu:200,300,400,500,600,700,800,900|Fira+Code:200,300,400,500,600,700,800,900|Montserrat:700,300);"]),a.push([t.id,"* {\n    font-family: 'Nunito', sans-serif;\n    font-weight: 400\n}\n\nh4 {\n    margin-bottom: 5px\n}\n\n@keyframes slide {\n    0% {\n        background-position: 200% 0\n    }\n\n    100% {\n        background-position: -200% 0\n    }\n}\n\n@keyframes svelte-1k2e827-background-gradient {\n    0%, 100% {\n        background-position: 0 0\n    }\n\n    50% {\n        background-position: 100% 100%\n    }\n}\n\n#colorPickerInput::-webkit-color-swatch, #colorPickerInput::-moz-color-swatch, #gifInput::-webkit-color-swatch, #gifInput::-moz-color-swatch {\n    border: none;\n    border-radius: 5px\n}\n\n#colorPickerInput::-webkit-color-swatch-wrapper, #colorPickerInput::-moz-color-swatch-wrapper, #gifInput::-webkit-color-swatch-wrapper, #gifInput::-moz-color-swatch-wrapper {\n    padding: 5px\n}\n\n#colorPickerInput::placeholder, #gifInput::placeholder, input[type=number]::placeholder, input[type=text]::placeholder, select::placeholder {\n    color: #ffc66d6e\n}\n\n#google_ads_iframe_\\/421469808\\,22457655943\\/vanis\\.io_728x90_0__container__ {\n    display: none !important\n}\n\n#hotkey-container .action {\n    flex: 4 !important\n}\n\n#hotkey-container .action {\n    align-self: center !important;\n    flex: 4 !important\n}\n\n#hotkey-container .bind {\n    background: #9f85374d !important;\n    border: solid 1px #ffc66d6e !important;\n    border-radius: 11px !important;\n    color: #dadada !important;\n    flex: 3 !important;\n    min-height: 21px !important;\n    padding: 6px !important;\n    text-align: center !important\n}\n\n#hotkey-container .footer {\n    border-top: 0 solid #000 !important;\n    color: #caa443 !important;\n    display: flex !important;\n    justify-content: center !important;\n    padding: 10px 20px 20px !important\n}\n\n#hotkey-container .hotkeys, .reset-option-wrapper, .reset-option-wrapper {\n    padding: 10px !important;\n    width: auto !important\n}\n\n#hotkey-container .row {\n    display: flex !important;\n    padding: 10px !important\n}\n\n#hotkey-container .row:not(:last-child) {\n    border-bottom: 0 solid #0000 !important;\n    padding: 13px !important\n}\n\n#leaderboardIcon {\n    font-size: 24px;\n    left: 100px;\n    position: absolute;\n    top: 65px\n}\n\n#leaderboard[data-v-7e7860a8] {\n    backdrop-filter: blur(5px) !important;\n    background: #00000047 !important;\n    border: solid 1px #ffffff0f !important;\n    border-radius: 20px !important;\n    box-shadow: 0 0 30px 0 #00000061 !important;\n    height: 280px !important;\n    padding: 20px 20px 10px !important;\n    right: 10px !important;\n    text-align: center !important;\n    top: 10px !important;\n    width: 180px !important\n}\n\n#locations {\n    border-radius: 50% !important\n}\n\n#login-form > input::placeholder {\n    color: #ffc66d6e\n}\n\n#main-container {\n    grid-gap: 10px !important;\n    grid-template-columns:280px 350px 280px !important;\n    grid-template-rows:110px 146px 300px !important;\n    left: 50% !important;\n    margin-left: -461px !important;\n    margin-top: -252px !important;\n    position: absolute !important;\n    top: 40% !important\n}\n\n#nickname, #teamtag, #colorPickerInput, #gifInput, #skinurl, #player-container #player-data > div {\n    border-radius: 11px !important;\n    font-size: 17px !important;\n    height: 42px;\n    text-align-last: center !important\n}\n\n#overlay {\n    backdrop-filter: blur(5px);\n    background: #0009\n}\n\n#player-container #game-buttons #play-button:active, #player-container #game-buttons #spec-button:active, .confirm-button:active, .btn:active, .perk-color-update:active, .button-row > .button:active, .swal2-styled.swal2-confirm:active, .swal2-styled.swal2-cancel:active, .server-button:active {\n    background: #caa443 !important\n}\n\n#player-container #game-buttons #play-button:disabled, #player-container #game-buttons #spec-button:disabled, .confirm-button:disabled, .btn:disabled, .perk-color-update:disabled, .button-row > .button:disabled, .swal2-styled.swal2-confirm:disabled, .swal2-styled.swal2-cancel:disabled, .server-button:disabled {\n    background: #ffc66d6e !important;\n    color: #000000 !important;\n    transition: all .3s !important\n}\n\n#player-container #game-buttons #play-button:hover, #player-container #game-buttons #spec-button:hover, .confirm-button:hover, .btn:hover, .perk-color-update:hover, .button-row > .button:hover, .server-button:hover {\n    background: #caa443 !important;\n    box-shadow: none !important;\n    text-shadow: none !important\n}\n\n#player-container #game-buttons #spec-button {\n    flex: 3 !important\n}\n\n#player-container #game-buttons #spec-button, #player-container #game-buttons #play-button, .confirm-button, .btn, .perk-color-update, .button-row > .button, .swal2-styled.swal2-confirm, .swal2-styled.swal2-cancel, .server-button {\n    background: #caa443 !important;\n    border-radius: 11px !important;\n    box-shadow: none !important;\n    color: #241931 !important;\n    font-size: 17px !important;\n    margin-right: 7px !important;\n    padding: 8px !important;\n    text-shadow: none !important\n}\n\n#player-container #player-data {\n    box-sizing: border-box !important;\n    height: 100% !important;\n    padding: 0 15px 15px !important\n}\n\n#player-container > .tabs > .tab {\n    font-size: 23px\n}\n\n#skinsIcon {\n    font-size: 25px;\n    left: 185px;\n    position: absolute;\n    top: 65px\n}\n\n#statIcon {\n    font-size: 24px;\n    left: 60px;\n    position: absolute;\n    top: 65px\n}\n\n#swal2-content {\n    font-size: 18px;\n    text-shadow: none !important\n}\n\n#toolIcon {\n    font-size: 24px;\n    left: 143px;\n    position: absolute;\n    top: 65px\n}\n\n#userIcon {\n    font-size: 26px;\n    left: 11px;\n    position: absolute;\n    top: 65px\n}\n\n.absoluteCenter {\n    left: 50%;\n    position: absolute;\n    top: 50%;\n    transform: translate(-50%, -50%)\n}\n\n.account-name {\n    font-size: 18px !important;\n    font-weight: 400 !important\n}\n\n.account-wrapper {\n    padding: 15px 16px !important\n}\n\n.alertSwal-content > #swal2-content {\n    font-size: 16px !important;\n    padding: 0 7px\n}\n\n.alertSwal-header {\n    align-self: center;\n    display: flex !important;\n    flex-direction: row\n}\n\n.alertSwal-icon {\n    font-size: 4px;\n    margin: 9px 9px 8px 8px\n}\n\n.alertSwal-popup {\n    backdrop-filter: blur(5px);\n    background: #00000047;\n    border: solid 1px #ffffff0f;\n    border-radius: 16px !important;\n    box-shadow: none !important;\n    max-width: 300px !important\n}\n\n.alertSwal-title {\n    font-size: 17px;\n    margin: 1px 5px 0 0\n}\n\n.avatar {\n    border-radius: 20% !important;\n    box-shadow: 0 0 15px 1px #00000026 !important;\n    margin-right: 7px !important;\n    width: 70px !important\n}\n\n.backupAction {\n    display: flex;\n    gap: 7px;\n    width: 100%\n}\n\n.backupActionButton {\n    border-radius: 10px;\n    color: #fff;\n    flex: 1;\n    font-size: 15px;\n    margin-top: 10px;\n    padding: 7px;\n    text-align: center\n}\n\n.backupActual {\n    background: #0aff8b !important;\n    border: 1px solid #008949 !important;\n    color: #008949 !important\n}\n\n.backupCard {\n    background: #00000045;\n    border: 1px solid #ffc66d6e;\n    border-radius: 9px;\n    font-size: 15px;\n    margin-top: 10px;\n    padding: 5px;\n    width: fit-content\n}\n\n.backupContentList {\n    display: flex;\n    gap: 7px;\n    overflow-x: auto;\n    padding: 0 0 10px;\n    white-space: nowrap\n}\n\n.backupDate {\n    flex: 1;\n    text-align: right\n}\n\n.backupDelete {\n    background: #ff004d;\n    border: 1px solid #830c30\n}\n\n.backupGet {\n    background: #7d4eff;\n    border: 1px solid #7d2fff\n}\n\n.backupInformations {\n    display: flex\n}\n\n.backupItem {\n    margin-top: 10px\n}\n\n.backupItem:first-child {\n    margin-top: 0\n}\n\n.backupName {\n    flex: 1;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    width: 60%\n}\n\n.backupSkinItem {\n    border-radius: 50%;\n    box-shadow: 0 0 10px 0 #0000003d;\n    height: 40px;\n    margin-left: 5px;\n    margin-right: 5px;\n    margin-top: 5px;\n    object-fit: cover;\n    width: 40px\n}\n\n.badgeItem {\n    height: 40px;\n    width: 40px\n}\n\n.badgeItem:hover, .hatItem:hover {\n    scale: 92% !important\n}\n\n.badgeListPerks, .hatListPerks {\n    display: flex;\n    gap: 5px;\n    margin-top: 10px;\n    overflow-x: auto;\n    padding: 0 0 10px;\n    white-space: nowrap\n}\n\n.badgeNotOwner, .hatNotOwner {\n    cursor: not-allowed !important;\n    filter: brightness(50%) grayscale(100%) !important;\n    opacity: .5\n}\n\n.badgeOwner, .hatOwner {\n    cursor: pointer !important;\n    filter: none\n}\n\n.badgeSelected, .hatSelected {\n    filter: none\n}\n\n.bar {\n    align-items: center !important;\n    display: inline-grid !important;\n    grid-column: 1/4 !important;\n    margin: auto !important\n}\n\n.beautifulSkin {\n    animation: svelte-1k2e827-background-gradient 7s linear infinite;\n    background: linear-gradient(-45deg, red 0%, yellow 17%, lime 33%, cyan 50%, blue 67%, magenta 83%, red 100%);\n    background-size: 200% 200%\n}\n\n.bottom-margin > input {\n    font-size: 16px;\n    margin: 7px 0 10px;\n    text-align: center\n}\n\n.box-1 {\n    display: none !important\n}\n\n.btn {\n    margin-top: 10px !important\n}\n\n.bug-link, .discord-link {\n    border: 0 !important;\n    color: #dadada !important;\n    cursor: pointer !important;\n    font-size: 16px !important;\n    outline: none !important;\n    padding: 5px !important;\n    padding-left: 15px !important;\n    padding-right: 15px !important;\n    text-decoration: none !important\n}\n\n.bug-link:hover {\n    background: #8d2aff !important\n}\n\n.button-row {\n    border-bottom: none !important;\n    padding: 12px !important\n}\n\n.button-row > .button, .server-button, .perk-color-update {\n    font-size: 14px !important;\n    margin: 0 !important\n}\n\n.buttonTab {\n    border-radius: 11px;\n    flex: 1;\n    height: 43px;\n    padding: 0 10px\n}\n\n.buttonTabActive {\n    background: transparent;\n    color: #fff\n}\n\n.buttonTabContainer {\n    display: flex;\n    gap: 7px;\n    margin: 0 5px 10px;\n    overflow-x: auto;\n    padding: 0 0 8px;\n    white-space: nowrap\n}\n\n.buttonTabDisabled {\n    background: #caa443;\n    color: #241931\n}\n\n.buttonTabText {\n    font-size: 17px;\n    margin-top: 10px;\n    text-align: center\n}\n\n.chartMetricItem {\n    scale: 1.03\n}\n\n.chat-input > input {\n    height: 43px\n}\n\n.chatbox > input::placeholder {\n    color: #ffffff6b !important\n}\n\n.chatbox-resize-icon {\n    height: 30px;\n    position: absolute;\n    right: 0;\n    top: 15px;\n    width: 30px\n}\n\n.chatbox-resize-icon:hover {\n    cursor: ew-resize;\n    scale: 92% !important\n}\n\n.chatbox.toasts.visible {\n    border-radius: 11px;\n    display: flex;\n    padding: 6px 15px\n}\n\n.chatbox[data-v-7264abb4] {\n    backdrop-filter: blur(5px) !important;\n    background: #00000047 !important;\n    border: solid 1px #ffffff0f !important;\n    border-radius: 20px !important;\n    box-shadow: 0 0 30px 0 #00000061 !important;\n    font-size: 14px !important;\n    margin-bottom: 10px !important;\n    margin-left: 10px !important;\n    padding: 15px 15px 5px !important;\n    width: 250px\n}\n\n.closeSkinItemModal {\n    font-size: 45px;\n    padding: 20px;\n    position: absolute;\n    right: 0;\n    top: 0\n}\n\n.color-button, .image-button {\n    border: 1px solid #ffc66d6e !important;\n    border-radius: 10px !important;\n    height: 37px !important;\n    width: 37px !important\n}\n\n.color-input > .right {\n    border: 1px solid #c5a945 !important;\n    border-radius: 11px !important;\n    box-shadow: 0 0 16px 1px #00000054 !important;\n    height: 35px !important;\n    width: 35px !important\n}\n\n.color-input:not(:last-child) {\n    margin-bottom: 10px !important\n}\n\n.colorPickerContainer, .gifPickerContainer {\n    display: flex;\n    margin-top: 13px\n}\n\n.colorPickerGui {\n    background: #9f85374d;\n    border: solid 1px #ffc66d6e;\n    border-radius: 11px;\n    height: 40px;\n    margin-left: 10px;\n    width: 70px\n}\n\n.confirm-button {\n    background: #caa443 !important;\n    border-radius: 11px !important;\n    box-shadow: none !important;\n    color: #fff !important;\n    font-size: 16px !important;\n    padding: 7px 10px !important;\n    text-shadow: none !important\n}\n\n.container > .section > .options.two-columns {\n    font-size: 14px !important\n}\n\n.container.chat-wrapper.lobby-chat {\n    border-bottom: 1px solid #ffc66d6e;\n    border-left: 1px solid #ffc66d6e;\n    border-radius: 20px 0 0 20px;\n    border-top: 1px solid #ffc66d6e;\n    box-shadow: 0 0 20px 0 #0003;\n    margin: 15px 0 15px 15px\n}\n\n.container.circle {\n    border-radius: 50% !important\n}\n\n.container[data-v-769dba30] {\n    backdrop-filter: blur(5px) !important;\n    background: #00000047 !important;\n    border: solid 1px #ffffff0f !important;\n    border-radius: 20px !important;\n    bottom: 10px !important;\n    box-shadow: 0 0 30px 0 #00000061 !important;\n    position: fixed !important;\n    right: 10px !important\n}\n\n.container[data-v-ba56a55e], .tag {\n    display: none !important\n}\n\n.content.fade-box > .wrapper > .container {\n    padding: 20px !important\n}\n\n.customBoxHeader {\n    display: flex;\n    justify-content: space-between;\n    margin-bottom: 20px\n}\n\n.customBoxTitle {\n    color: #dadada;\n    font-size: 22px;\n    margin: 12px 0 0 16px !important;\n    text-shadow: 0 0 20px #00000075\n}\n\n.onixLogoUpdate {\n    height: 80px;\n    width: 80px;\n}\n\n.discord, .discord-btn {\n    background: #4350ff !important;\n    border: solid 1px #ffc66d6e !important;\n    border-radius: 11px !important;\n    color: #e1e1e1 !important;\n    cursor: pointer !important;\n    display: block !important;\n    margin: auto !important;\n    padding: 12px 10px 10px !important;\n    text-align: -webkit-center !important\n}\n\n.discord-btn {\n    margin-top: 12px\n}\n\n.discord-link, .tournaments-link, .skins-link, .bug-link {\n    background: transparent !important;\n    border-radius: 8px !important;\n    box-shadow: none !important;\n    text-shadow: 0 0 14px #000 !important\n}\n\n.discord-link:hover {\n    background: #4350ff !important\n}\n\n.divLogout {\n    color: #fff;\n    display: flex;\n    height: fit-content;\n    position: relative;\n    right: 10px;\n    top: 15px\n}\n\n.divLogout:hover {\n    color: #ff5e5e\n}\n\n.divSwitch {\n    display: flex;\n    font-size: 21px;\n    gap: 15px;\n    position: absolute;\n    right: 15px;\n    top: 65px\n}\n\n.fade-box {\n    background: linear-gradient(45deg, #252203, #000000);\n    border: solid 1px #ffc66d6e !important;\n    border-radius: 20px !important;\n    box-shadow: 1px 0 20px 0 #0006 !important\n}\n\n.forceRight {\n    float: right;\n    margin: 3px 5px\n}\n\n.gifInputOther {\n    flex: 1\n}\n\n.gifInputPath {\n    flex: 2\n}\n\n.gifPickerContainer {\n    gap: 7px\n}\n\n.gradientTextAnim {\n    animation: slide 2s infinite;\n    background: linear-gradient(45deg, #c29218, #ffdd36, #ffeb78, #ffebad, #ffeb78, #ffdd36, #c29218);\n    -webkit-background-clip: text;\n    background-clip: text;\n    background-size: 200% auto;\n    color: transparent\n}\n\n.hatItem {\n    height: 90px\n}\n\n.headerIcon {\n    margin-left: 5px\n}\n\n.hidden {\n    display: none\n}\n\n.image-button-text {\n    font-size: 23px !important;\n    height: 35px !important;\n    margin-top: -4px !important;\n    width: 35px !important\n}\n\n.imageSwitch {\n    filter: invert(1);\n    height: 20px;\n    width: 20px\n}\n\n.inline-range > input {\n    align-self: center !important;\n    height: 20px !important\n}\n\n.inputSkinToken {\n    font-size: 16px;\n    height: 40px;\n    margin-top: 5px;\n    text-align: center\n}\n\n.leaderboard-label {\n    align-items: center !important;\n    font-size: 17px !important;\n    place-content: center !important\n}\n\n.leaderboard-text {\n    width: fit-content !important\n}\n\n.leaderboard-title {\n    font-size: 20px !important\n}\n\n.leaderboardBadgeDiv {\n    margin-right: 3px;\n    width: 20px\n}\n\n.leaderboardItem {\n    align-items: center;\n    display: flex;\n    font-size: 17px;\n    padding: 0 0 0 15px\n}\n\n.leaderboardItem:last-child {\n    margin-bottom: 10px\n}\n\n.leaderboardItemMe {\n    background: #a890ea;\n    border-radius: 9px;\n    color: #241931 !important;\n    margin: 11px;\n    padding: 10px 0 10px 12px\n}\n\n.leaderboardNicknameMe {\n    color: #241931 !important\n}\n\n.leaderboardPosition {\n    width: 40px\n}\n\n.leaderboardStatisticValue {\n    margin-right: 25px;\n    position: absolute;\n    right: 0 !important\n}\n\n.leaderboardStatisticValueMe {\n    margin-right: 35px\n}\n\n.leetchiContainer {\n    align-items: center;\n    background: linear-gradient(45deg, #252203, #000000);\n    border: solid 1px #ffc66d6e !important;\n    border-radius: 10px;\n    box-shadow: 1px 0 20px 0 #0006 !important;\n    color: #fff;\n    display: flex;\n    gap: 8px;\n    left: 20px;\n    opacity: .5;\n    padding: 8px 10px;\n    position: absolute;\n    top: 20px\n}\n\n.lineSep {\n    background: #8a7932;\n    height: 1px;\n    margin: 15px -18px;\n    position: relative\n}\n\n.listItem {\n    background: #b3a55514;\n    border: solid 1px #ffc66d6e;\n    border-radius: 15px;\n    box-shadow: 0 0 20px 0 #0003;\n    color: #fff;\n    font-size: 15px;\n    padding: 10px\n}\n\n.listSkins {\n    display: flex;\n    overflow-x: auto;\n    padding: 10px 0 14px;\n    white-space: nowrap\n}\n\n.listSkins {\n    display: flex;\n    overflow-x: auto;\n    padding: 10px 0;\n    white-space: nowrap\n}\n\n.listTextItem {\n    align-self: center;\n    text-align: left\n}\n\n.listTop {\n    display: flex\n}\n\n.live-marker {\n    background: #caa443 !important;\n    border-radius: 6px !important;\n    color: #241931 !important;\n    font-size: 13px !important;\n    padding: 2px 4px !important\n}\n\n.loadingOnix h2 {\n    font-family: Montserrat, sans-serif !important;\n    font-size: 60px !important;\n    font-weight: unset !important\n}\n\n.loadingOnix div {\n    font-family: Montserrat, 'sans-serif';\n    font-weight: 700;\n}\n\n.loadingPage {\n    font-family: Montserrat, sans-serif;\n    font-weight: 700;\n    position: absolute;\n    top: 100px\n}\n\n.loadingPageContent {\n    font-family: Montserrat, sans-serif;\n    font-weight: 300;\n    margin-top: 130px;\n}\n\n.lobby-list > .row {\n    border-bottom: none !important\n}\n\n.me {\n    background: #caa443;\n    border-bottom: none !important;\n    border-radius: 11px;\n    color: #241931 !important;\n    margin: 10px 0;\n    padding: 10px\n}\n\n.message-from-name {\n    display: inline-block !important\n}\n\n.message-list {\n    padding: 5px !important\n}\n\n.message-row.toast {\n    border: solid 1px #ffffff0f !important;\n    border-radius: 8px !important;\n    box-shadow: 0 0 30px 0 #00000061 !important;\n    padding: 6px !important\n}\n\n.offlineList {\n    margin-top: 22px\n}\n\n.open-lobbies {\n    background: transparent !important\n}\n\n.open-lobbies:hover {\n    background: #0003 !important;\n    border-radius: 11px !important;\n    padding: 13px !important\n}\n\n.overlaySkin {\n    backdrop-filter: blur(3px);\n    background: #000000ba;\n    bottom: 0;\n    left: 0;\n    position: fixed;\n    right: 0;\n    top: 0;\n    z-index: 9999\n}\n\n.perk-badges-scroll {\n    margin-bottom: 0 !important;\n    margin-top: 10px !important;\n    overflow-x: auto !important;\n    width: 100% !important\n}\n\n.perk-color-wrapper {\n    align-items: center !important;\n    display: grid !important;\n    grid-template-columns:1fr 50px 50px !important;\n    grid-template-rows:1fr 50px !important;\n    margin-bottom: -5px !important;\n    width: 100% !important\n}\n\n.perk-color-wrapper.bottom-margin {\n    margin-bottom: 5px !important\n}\n\n.perk-name, .perk-color-update {\n    font-size: 16px !important;\n    height: 40px !important;\n    text-align: center !important\n}\n\n.perksSubtitle {\n    margin-top: 15px\n}\n\n.perksSubtitleSub {\n    color: #9d74ff;\n    font-size: 14px;\n    opacity: .7\n}\n\n.player-info {\n    font-size: 15px !important;\n    margin-top: 2px !important\n}\n\n.player-list {\n    font-size: 15px !important;\n    margin-top: 14px !important\n}\n\n.player-list-tab {\n    padding: 25px !important\n}\n\n.player-list-tab {\n    padding: 20px\n}\n\n.player-list-title {\n    color: #dadada;\n    font-size: 22px;\n    margin: 0 0 10px\n}\n\n.player-row.me > .player-name {\n    color: #241931 !important\n}\n\n.pretty.p-switch input:checked ~ .state label:after {\n    background-color: #caa443 !important\n}\n\n.pretty.p-switch input:checked ~ .state:before {\n    border-color: #caa443 !important\n}\n\n.profile-image {\n    border: 1px #ffdf9ce6 solid;\n    border-radius: 50%;\n    display: block;\n    height: 190px;\n    margin-bottom: 22px;\n    margin-left: 21%;\n    margin-top: 13px;\n    object-fit: cover;\n    padding: 5px;\n    position: relative;\n    width: 190px\n}\n\n.progress {\n    background: #ffec9c69 !important;\n    border-radius: 7px !important;\n    box-shadow: none !important;\n    height: 30px !important;\n    margin-top: 8px !important;\n    padding: 0 !important\n}\n\n.progress-striped .progress-bar {\n    background: #caa443 !important;\n    border-radius: 7px !important;\n    height: 30px !important\n}\n\n.replay-header {\n    border-bottom: none !important;\n    padding: 8px !important\n}\n\n.replay-item {\n    border: solid 1px #ffc66d6e !important;\n    border-radius: 11px !important;\n    box-shadow: 0 1px 20px 0 #00000040 !important\n}\n\n.replay-list-header {\n    align-items: center !important;\n    background: #0000 !important;\n    border-bottom: none !important;\n    box-shadow: none !important;\n    display: flex !important;\n    justify-content: space-between !important;\n    padding: 15px 15px 5px !important;\n    position: relative !important\n}\n\n.resetPasswordButton {\n    align-content: center;\n    background: #491db9;\n    border: 1px solid #6c22ff;\n    border-radius: 12px;\n    box-shadow: 0 0 10px 0 #0000003b;\n    color: #fff;\n    font-weight: 700;\n    height: 50px;\n    margin-bottom: 12px;\n    text-align: center;\n    width: 100%\n}\n\n.reset-option {\n    color: #caa443 !important;\n    cursor: pointer !important;\n    display: inline-flex !important;\n    justify-content: center !important\n}\n\n.resetAllStatistics {\n    font-size: 16px;\n    margin: 28px 0 15px;\n    text-align: center\n}\n\n.resetAllStatisticsIcon {\n    font-size: 16px;\n    margin-left: 5px\n}\n\n.scroll {\n    animation-duration: 2.5s !important;\n    animation-name: scroll-06e9bb4c !important;\n    animation-timing-function: ease !important;\n    font-size: 18px !important;\n    overflow: hidden !important;\n    text-align-last: center !important\n}\n\n.season-scroll > .tab-menu .tabs {\n    font-size: 17px;\n    text-align: center\n}\n\n.section {\n    border: 1px solid #ffc66d6e !important;\n    border-radius: 16px !important;\n    box-shadow: 0 0 30px 0 #0000003b !important;\n    margin: 5px 5px 13px !important\n}\n\n.section > .header {\n    background: linear-gradient(281deg, #efc959, #aa812e) !important;\n    border-bottom: none !important;\n    color: #fff !important;\n    padding: 14px !important;\n    text-shadow: 0 0 15px #00000054 !important\n}\n\n.section > .options:not(.dualSkinGalery) {\n    padding: 17px !important\n}\n\n.section.row:first-child {\n    margin-top: 10px !important\n}\n\n.selected {\n    box-shadow: 0 0 20px 0 #6d39ff !important\n}\n\n.server-button, #player-container #game-buttons #spec-button, .perk-color-update {\n    margin-right: 0 !important\n}\n\n.server-list {\n    padding: 5px !important\n}\n\n.server-list-item {\n    border-bottom: none !important;\n    border-radius: 11px !important;\n    padding: 13px !important\n}\n\n.server-list-item.active, .server-list-item.active:hover {\n    background: #caa443 !important;\n    border-radius: 11px !important;\n    color: #241931 !important;\n    margin: 8px !important\n}\n\n.signIn, .updatePage {\n    background: linear-gradient(45deg, #010004, #352005)\n}\n\n.signIn, .updatePage, .loadingPage {\n    align-items: center;\n    display: flex;\n    flex-direction: column;\n    font-family: Montserrat, 'sans-serif' !important;\n    height: 100%;\n    justify-content: center;\n    left: 0;\n    position: fixed;\n    top: 0;\n    width: 100%;\n    z-index: 9999\n}\n\n.signInLoginButton, .onixButtonUpdate {\n    background-color: #caa443;\n    border-radius: 13px;\n    color: #241931;\n    height: 35px;\n    padding: 8px;\n    transform: scale(1);\n    transition: all .3s ease 0s;\n    width: 350px\n}\n\n.signInLoginButtonText, .onixButtonUpdateText {\n    font-family: Montserrat, sans-serif;\n    font-size: 18px;\n    font-weight: 300;\n    padding: 6px;\n    text-align: center\n}\n\n.signInLoginEmail, .signInLoginPassword {\n    background-color: #9f85374d;\n    border: solid 1px #ffc66d6e;\n    border-radius: 13px;\n    color: #fff;\n    font-family: Montserrat, sans-serif;\n    font-size: 18px;\n    font-weight: 300;\n    height: 35px;\n    padding: 8px;\n    text-align: center;\n    width: 350px\n}\n\n.signInLoginForm {\n    align-items: center;\n    display: flex;\n    flex-direction: column;\n    font-family: Montserrat, sans-serif;\n    font-weight: 300;\n    gap: 10px;\n    justify-content: center;\n    margin-top: 270px;\n    position: absolute\n}\n\n.signInSubTitle, .onixSubtitleUpdate {\n    color: #ffe09c;\n    font-family: Montserrat, sans-serif;\n    font-size: 25px;\n    font-weight: 300;\n    opacity: .8;\n    position: absolute;\n    text-align: center;\n    top: 180px\n}\n\n.signInTitle, .onixTitleUpdate {\n    font-family: Montserrat, sans-serif;\n    font-size: 45px;\n    font-weight: 700;\n    position: absolute;\n    top: 90px\n}\n\n.signOutButton {\n    font-size: 20px;\n    margin-left: 7px\n}\n\n.silent {\n    color: #ffffff75 !important\n}\n\n.silentCustomBottom {\n    margin-bottom: 10px\n}\n\n.silentCustomTop {\n    margin-top: 10px\n}\n\n.silentUid {\n    font-size: 12px\n}\n\n.skinItemActions {\n    align-items: center;\n    display: flex;\n    font-size: 18px;\n    gap: 10px;\n    height: 50px;\n    margin-top: 20px;\n    width: 500px\n}\n\n.skinItemLibrary {\n    border-radius: 50%;\n    box-shadow: 0 0 50px 0 #00000020;\n    height: 135px;\n    margin: 5px;\n    object-fit: cover;\n    width: 135px\n}\n\n.skinItemModal {\n    border-radius: 50%;\n    height: 500px;\n    object-fit: cover;\n    width: 500px\n}\n\n.skinItemNav {\n    align-items: center;\n    background: linear-gradient(45deg, #252203, #000000);\n    border: solid 1px #ffc66d6e;\n    border-radius: 11px;\n    box-shadow: 1px 0 20px 0 #0006 !important;\n    display: flex;\n    height: 50px;\n    justify-content: center\n}\n\n.skinItemNavBtn {\n    flex: 2\n}\n\n.skinItemNavId {\n    flex: 4\n}\n\n.skinItemYoink, .skinItemCopy {\n    align-items: center;\n    display: flex;\n    gap: 6px\n}\n\n.skinProfile {\n    border-radius: 50%;\n    box-shadow: 0 0 15px 1px #00000026 !important;\n    display: block;\n    height: 190px;\n    object-fit: cover;\n    width: 190px\n}\n\n.skins-link:hover {\n    background: #30e6ff !important\n}\n\n.skinsLibraryList {\n    text-align: center\n}\n\n.skinsTab {\n    margin-bottom: 0\n}\n\n.slider {\n    background: #121212 !important;\n    border: 1px solid #caa443 !important;\n    border-radius: 60px !important\n}\n\n.slider::-webkit-slider-thumb {\n    background: #caa443 !important\n}\n\n.social-container {\n    max-width: none !important;\n    opacity: .1;\n    transition: opacity .5s !important;\n    width: 60% !important\n}\n\n.spanWithoutShadow {\n    text-shadow: none !important\n}\n\n.spotifyImageAlbum {\n    border-radius: 8px;\n    height: 50px;\n    width: 50px\n}\n\n.spotifyLoginButton {\n    align-content: center;\n    background: #1DB954;\n    border: 1px solid #22ff72;\n    border-radius: 12px;\n    box-shadow: 0 0 10px 0 #0000003b;\n    color: #fff;\n    font-weight: 700;\n    height: 50px;\n    text-align: center;\n    width: 100%\n}\n\n.spotifyPlayer {\n    backdrop-filter: blur(5px) !important;\n    background: #00000047 !important;\n    border: solid 1px #ffffff0f !important;\n    border-radius: 20px !important;\n    box-shadow: 0 0 30px 0 #00000061 !important;\n    color: #fff;\n    left: 0;\n    padding: 20px;\n    position: absolute;\n    top: -167px;\n    width: 240px\n}\n\n.spotifyPlayerButtons {\n    text-align-last: center\n}\n\n.spotifyPlayerMusicInfos {\n    display: flex;\n    margin-bottom: 10px\n}\n\n.spotifyPlayerMusicInfosTexts {\n    align-content: center;\n    margin-left: 10px\n}\n\n.spotifyPrevButton, .spotifyPlayPauseButton, .spotifyNextButton {\n    align-content: center;\n    background: #ffffff0d;\n    border: none;\n    border-radius: 50%;\n    color: #fff;\n    cursor: pointer;\n    font-size: 25px;\n    height: 30px;\n    padding: 13px;\n    text-align: center;\n    width: 30px\n}\n\n.spotifyVolumeControl {\n    margin-top: 10px;\n    width: 100%\n}\n\n.stat-global-flexdiv {\n    display: flex\n}\n\n.stat-my-photo {\n    border: solid 1px #ffc66d6e;\n    border-radius: 50%;\n    height: 25px;\n    left: 150px;\n    position: absolute;\n    top: 75px;\n    width: 25px\n}\n\n.stat-p-token {\n    margin-top: 5px\n}\n\n.stat-p:not(:first-child) {\n    margin-top: 5px\n}\n\n.stat-span {\n    color: #ffffff8a\n}\n\n.stats {\n    color: #fff !important;\n    padding: 20px !important\n}\n\n.stuck-mention {\n    color: transparent !important;\n    height: 22px !important;\n    margin-bottom: 6px !important;\n    margin-top: 35% !important;\n    text-align: center !important\n}\n\n.swal2-popup {\n    background: linear-gradient(45deg, #252203, #000000);\n    border: solid 1px #ffc66d6e;\n    border-radius: 20px;\n    box-shadow: 0 0 40px #08001cba !important;\n    font-size: 15px;\n    max-width: 700px;\n    padding: 28px 28px 15px\n}\n\n.swal2-popup.swal2-modal.swal2-show {\n    border-radius: 20px\n}\n\n.swal2-styled.swal2-cancel, .swal2-styled.swal2-cancel:active {\n    background: #442986 !important;\n    color: #977cd7 !important\n}\n\n.swal2-styled.swal2-confirm, .swal2-styled.swal2-cancel {\n    width: 150px !important\n}\n\n.swal2-title {\n    font-size: 23px;\n    text-shadow: none !important\n}\n\n.swal2-toast {\n    border-radius: 11px !important;\n    box-shadow: none !important\n}\n\n.switchAnonymous {\n    right: -10px;\n    top: 20px\n}\n\n.switchButton {\n    display: flex;\n    gap: 7px;\n    padding: 3px\n}\n\n.tab {\n    background: transparent;\n    border: none;\n    border-radius: 10px;\n    margin: 5px;\n    padding: 10px\n}\n\n.tab-menu .tab {\n    border-right: none !important;\n    padding: 7px\n}\n\n.tab-menu .tab.active {\n    background: #caa443 !important;\n    color: #241931 !important\n}\n\n.tab-menu .tabs {\n    font-size: 18px;\n    text-align: center\n}\n\n.tab:hover {\n    background: #00000026\n}\n\n.tab:not(:last-child) {\n    border-right: none !important\n}\n\n.tabs {\n    border-bottom: none !important;\n    margin: 5px !important\n}\n\n.tabs-rows > .tabs {\n    font-size: 17px !important\n}\n\n.titleSubBox {\n    color: #dadada;\n    font-size: 16px;\n    margin: 20px 15px 13px\n}\n\n.tools-list {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 10px;\n    list-style-type: none;\n    padding: 0\n}\n\n.tools-list li {\n    align-items: center;\n    border: solid 1px #ffc66d6e;\n    border-radius: 11px;\n    box-shadow: 6px 2px 20px 3px #0000001a;\n    color: #bddcdc;\n    display: flex;\n    gap: 5px;\n    padding: 10px\n}\n\n.tooltip {\n    background: linear-gradient(45deg, #252203, #000000) !important;\n    border: solid 1px #ffc66d6e !important;\n    border-radius: 7px !important;\n    box-shadow: 1px 0 30px 0 #5228c252 !important;\n    font-size: 14px !important;\n    max-width: 240px !important;\n    padding: 9px !important\n}\n\n.tournaments-link:hover {\n    background: #ff6e0f !important\n}\n\n.userBadgeDiv {\n    height: 10px;\n    margin-left: 14px;\n    object-position: 0 3px;\n    overflow: visible;\n    scale: 1.9;\n    width: 10px\n}\n\n.userDetails {\n    margin: 0 0 0 15px;\n    max-width: 160px\n}\n\n.userDetailsBadge {\n    height: 20px;\n    margin-top: 3px;\n    width: 20px\n}\n\n.userDetailsBody {\n    margin: 20px 0 0\n}\n\n.userDetailsHeaderFlex {\n    display: flex;\n    justify-content: space-between\n}\n\n.userDetailsItem {\n    display: flex;\n    gap: 5px;\n    margin-bottom: 3px\n}\n\n.userDetailsItemInfos {\n    opacity: .4\n}\n\n.userDetailsNick {\n    font-size: 20px\n}\n\n.userDetailsPageStatistics {\n    margin-bottom: 10px;\n    padding: 0 5px 5px\n}\n\n.userDetailsPhoto {\n    border-radius: 50%;\n    box-shadow: 0 0 15px 1px #00000026 !important;\n    height: 100px;\n    position: absolute;\n    right: 25px;\n    top: 75px;\n    width: 100px\n}\n\n.userDetailsStatTitle {\n    font-size: 16px;\n    margin-bottom: 5px\n}\n\n.userDetailsStatisticsGrid {\n    column-count: 2;\n    column-gap: 10px\n}\n\n.userDetailsStatisticsItem {\n    border: 1px solid #d8bcff3b;\n    border-radius: 12px;\n    box-shadow: 0 0 50px 0 #00000042;\n    break-inside: avoid;\n    height: fit-content;\n    margin-bottom: 10px;\n    padding: 15px;\n    text-align: center\n}\n\n.userDetailsStatus {\n    border: 3px solid #17083b;\n    border-radius: 30px;\n    box-shadow: 0 0 11px #180840c7;\n    height: fit-content;\n    position: relative;\n    right: 10px;\n    top: 80px\n}\n\n.userDetailsStatusText {\n    color: #140635;\n    font-family: 'Montserrat', sans-serif;\n    font-size: 14px;\n    margin: 4px 7px\n}\n\n.userGoDetails {\n    height: 100%;\n    opacity: .3;\n    position: absolute;\n    right: 14px;\n    top: 40%\n}\n\n.userItem {\n    display: flex;\n    margin: 10px 10px 0 !important;\n    position: relative\n}\n\n.userItem:hover {\n    cursor: pointer !important;\n    scale: 96% !important\n}\n\n.userItem:last-child {\n    margin: 10px 10px 15px !important\n}\n\n.userLevel {\n    color: #ffffff82\n}\n\n.userModeImg {\n    filter: invert(1);\n    height: 15px;\n    object-position: 1px 3px;\n    overflow: visible;\n    width: 15px\n}\n\n.userNickLine {\n    display: flex\n}\n\n.userNickname {\n    font-size: 16px;\n    margin-left: 10px\n}\n\n.userOnline {\n    border: 3px solid #644b1c;\n    border-radius: 50%;\n    height: 15px;\n    margin: 32px;\n    position: absolute;\n    width: 15px\n}\n\n.userOnlineText {\n    color: #fff;\n    margin-left: 10px;\n    margin-top: 2px\n}\n\n.userPhoto {\n    border-radius: 50%;\n    box-shadow: 0 0 50px 0 #00000020;\n    height: 50px;\n    object-fit: cover;\n    width: 50px\n}\n\n.vanis-button {\n    background: #9f85374d;\n    border: solid 1px #ffc66d6e;\n    border-radius: 8px !important;\n    color: #dadada;\n    cursor: pointer;\n    text-shadow: 0 0 0 #000\n}\n\n.vanis-button:disabled {\n    display: none\n}\n\n.wrapper > .lobby-list {\n    border-right: 1px solid #ffc66d6e !important;\n    margin-right: 0 !important\n}\n\n.wrapper, .content {\n    border-radius: 20px !important\n}\n\n.xp-data {\n    color: #302442 !important;\n    text-shadow: none !important\n}\n\n::-webkit-scrollbar-thumb {\n    background-color: #caa443\n}\n\n::-webkit-scrollbar-track {\n    background: transparent\n}\n\na {\n    outline: none !important;\n    text-decoration: none !important\n}\n\nbutton.confirm-button.right {\n    border-radius: 9px !important;\n    color: #302442 !important;\n    font-size: 14px !important;\n    margin-right: 0 !important\n}\n\ni.tab.fas {\n    font-size: 23px !important\n}\n\nimg.skin {\n    animation: svelte-1k2e827-background-gradient 7s linear infinite;\n    background: linear-gradient(-45deg, red 0%, yellow 17%, lime 33%, cyan 50%, blue 67%, magenta 83%, red 100%);\n    background-size: 200% 200%;\n    border: none !important;\n    border-radius: 50% !important;\n    box-shadow: 0 0 15px 1px #00000026 !important;\n    height: 71px !important;\n    object-fit: cover !important;\n    width: 71px !important\n}\n\ninput.perk-name {\n    margin: 0\n}\n\ninput.swal2-input {\n    font-size: 16px;\n    height: 45px;\n    text-align: center\n}\n\ninput[type=\"color\"] {\n    -webkit-appearance: none;\n    border: none;\n    border-radius: 11px;\n    height: 40px;\n    padding: 0;\n    width: 70px\n}\n\ninput[type=\"color\"]::-webkit-color-swatch {\n    border: none;\n    border-radius: 11px;\n    padding: 0\n}\n\ninput[type=\"color\"]::-webkit-color-swatch-wrapper {\n    padding: 0\n}\n\ninput[type=number], input[type=text], select {\n    background: #9f85374d;\n    border: solid 1px #ffc66d6e;\n    border-radius: 11px;\n    color: #dadada;\n    padding: 8px\n}\n\ntitleExtension {\n    animation: slide 2s linear infinite;\n    background: linear-gradient(45deg, #c29218, #ffdd36, #ffeb78, #ffebad, #ffeb78, #ffdd36, #c29218);\n    -webkit-background-clip: text;\n    background-clip: text;\n    background-size: 200% auto;\n    color: transparent;\n    font-family: 'Montserrat', sans-serif;\n    font-size: 45px;\n    font-weight: 900;\n    margin-bottom: -15px;\n}\n\ntitlemod {\n    justify-self: center;\n    margin-top: 10px\n}\n\n.badgeNotSelected, .hatNotSelected {\n    filter: brightness(55%)\n}\n\n.onixButtonUpdate, .lostPasswordButton, .resetPasswordButton, .chatbox-resize-icon, .leetchiContainer, .spotifyPrevButton, .spotifyPlayPauseButton, .spotifyNextButton, .spotifyLoginButton, .userDetailsPhoto, .userItem, .userPhoto, .badgeItem, .hatItem, .buttonTab, #skinsIcon, .closeSkinItemModal, .skinItemNav, .skinItemLibrary, .resetAllStatistics, .backupGet, .backupSkinItem, .backupDelete, .replay-item, .divLogout, #userIcon, .switchButton, #statIcon, #toolIcon, #leaderboardIcon, #player-container #game-buttons #spec-button, #player-container #game-buttons #play-button, .confirm-button, .btn, .perk-color-update, .button-row > .button, .swal2-styled.swal2-confirm, .swal2-styled.swal2-cancel, .server-button, .skin, .vanis-button, .discord-btn, .server-list-item.active, .tab, .tab-menu .tab, .discord, .server-list-item, #hotkey-container .reset-button2, #hotkey-container .bind, .reset-button2, .reset-option, .arrow, #submit-account, .discord-link, .tournaments-link, .skins-link, .bug-link {\n    transition: all .3s !important\n}\n\n.onixButtonUpdate:hover, .lostPasswordButton:hover, .resetPasswordButton:hover, .spotifyPrevButton:hover, .leetchiContainer:hover, .spotifyPlayPauseButton:hover, .spotifyNextButton:hover, .spotifyLoginButton:hover, .userDetailsPhoto:hover, .userPhoto:hover, .buttonTab:hover, #skinsIcon:hover, .closeSkinItemModal:hover, .skinItemNav:hover, .skinItemLibrary:hover, .resetAllStatistics:hover, .backupGet:hover, .backupSkinItem:hover, .divLogout:hover, .backupDelete:hover, .replay-item:hover, #userIcon:hover, .switchButton:hover, #statIcon:hover, #toolIcon:hover, #leaderboardIcon:hover, #player-container #game-buttons #spec-button:hover, #player-container #game-buttons #play-button:hover, .confirm-button:hover, .btn:hover, .perk-color-update:hover, .button-row > .button:hover, .swal2-styled.swal2-confirm:hover, .swal2-styled.swal2-cancel:hover, .server-button:hover, .skin:hover, .vanis-button:hover, .discord-btn:hover, .server-list-item.active:hover, .tab:hover, .tab-menu .tab:hover, .discord:hover, .server-list-item:hover, #hotkey-container .reset-button2:hover, #hotkey-container .bind:hover, .reset-button2:hover, .reset-option:hover, .arrow:hover, #submit-account:hover, .discord-link:hover, .tournaments-link:hover, .skins-link:hover, .bug-link:hover {\n    cursor: pointer !important;\n    scale: 92% !important\n}\n\n",""]);const s=a},6314:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",r=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,r,i,o){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(r)for(var s=0;s<this.length;s++){var u=this[s][0];null!=u&&(a[u]=!0)}for(var c=0;c<t.length;c++){var l=[].concat(t[c]);r&&a[l[0]]||(void 0!==o&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=o),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),i&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=i):l[4]="".concat(i)),e.push(l))}},e}},1601:t=>{"use strict";t.exports=function(t){return t[1]}},5350:(t,e,n)=>{"use strict";n.d(e,{A:()=>r.default});var r=n(9998);(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};var i=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g,t];for(var e=0;e<t.length;++e){var r=t[e];if(r&&r.Math==Math)return r}return globalThis}(this);function o(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function a(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:o(t)}}!function(t,n){if(n){var r=i;t=t.split(".");for(var o=0;o<t.length-1;o++){var a=t[o];a in r||(r[a]={}),r=r[a]}(n=n(o=r[t=t[t.length-1]]))!=o&&null!=n&&e(r,t,{configurable:!0,writable:!0,value:n})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function n(){this.a=null}function r(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var o=i.setTimeout;n.prototype.c=function(t){o(t,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},n.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)s.b(this.a[t]);this.a=null}};var s=new n;return e.prototype.s=function(t){var e=this.f();t.Ra(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(t){o(t)}}:e}var i,o,a=new e((function(t,e){i=t,o=e}));return this.Ra(r(t,i),r(n,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Ra=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},e.resolve=r,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var i=a(t),o=i.next();!o.done;o=i.next())r(o.value).Ra(e,n)}))},e.all=function(t){var n=a(t),i=n.next();return i.done?r([]):new e((function(t,e){function o(e){return function(n){a[e]=n,0==--s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,r(i.value).Ra(o(a.length-1),e),i=n.next()}while(!i.done)}))},e}));var s=s||{},u=this||self,c=/^[\w+/_-]+[=]{0,2}$/,l=null;function h(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&c.test(t)?t:""}function d(){}function f(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function p(t){var e=f(t);return"array"==e||"object"==e&&"number"==typeof t.length}function g(t){return"function"==f(t)}function m(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function v(t){return Object.prototype.hasOwnProperty.call(t,y)&&t[y]||(t[y]=++b)}var y="closure_uid_"+(1e9*Math.random()>>>0),b=0;function _(t,e,n){return t.call.apply(t.bind,arguments)}function w(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function S(t,e,n){return(S=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?_:w).apply(null,arguments)}function T(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var x=Date.now;function I(t,e){function n(){}n.prototype=e.prototype,t.bb=e.prototype,t.prototype=new n,t.prototype.constructor=t}function k(t){return t}function E(t,e,n){this.code=A+t,this.message=e||P[t]||"",this.a=n||null}function C(t){var e=t&&t.code;return e?new E(e.substring(A.length),t.message,t.serverResponse):null}I(E,Error),E.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},E.prototype.toJSON=function(){return this.w()};var N,A="auth/",P={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},R={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function D(t){for(var e in R)if(R[e].id===t)return{firebaseEndpoint:(t=R[e]).Ua,secureTokenEndpoint:t.$a,identityPlatformEndpoint:t.Xa};return null}function M(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function O(t){if(Error.captureStackTrace)Error.captureStackTrace(this,O);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function L(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");O.call(this,n+t[r])}function F(t,e){throw new L("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function j(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function B(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function G(){this.b=this.a=null}N=D("__EID__")?"__EID__":void 0,I(O,Error),O.prototype.name="CustomError",I(L,O),L.prototype.name="AssertionError",j.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var U=new j((function(){return new q}),(function(t){t.reset()}));function V(){var t=we,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function q(){this.next=this.b=this.a=null}G.prototype.add=function(t,e){var n=U.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},q.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},q.prototype.reset=function(){this.next=this.b=this.a=null};var z=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},H=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var $=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,a=0;a<n;a++)if(a in o){var s=o[a];e.call(void 0,s,a,t)&&(r[i++]=s)}return r},W=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},K=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function Y(t,e){return 0<=z(t,e)}function X(t,e){var n;return(n=0<=(e=z(t,e)))&&Array.prototype.splice.call(t,e,1),n}function Q(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&1==Array.prototype.splice.call(t,r,1).length&&0}))}function J(t){return Array.prototype.concat.apply([],arguments)}function Z(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var tt,et=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},nt=/&/g,rt=/</g,it=/>/g,ot=/"/g,at=/'/g,st=/\x00/g,ut=/[\x00&<>"']/;function ct(t,e){return-1!=t.indexOf(e)}function lt(t,e){return t<e?-1:t>e?1:0}t:{var ht=u.navigator;if(ht){var dt=ht.userAgent;if(dt){tt=dt;break t}}tt=""}function ft(t){return ct(tt,t)}function pt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function gt(t){for(var e in t)return!1;return!0}function mt(t){var e,n={};for(e in t)n[e]=t[e];return n}var vt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function yt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<vt.length;o++)n=vt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function bt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||u).Element&&r.Location){var i=r;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(m(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;F("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function _t(t,e){this.a=t===xt&&e||"",this.b=Tt}function wt(t){return t instanceof _t&&t.constructor===_t&&t.b===Tt?t.a:(F("expected object of type Const, got '"+t+"'"),"type_error:Const")}_t.prototype.ta=!0,_t.prototype.sa=function(){return this.a},_t.prototype.toString=function(){return"Const{"+this.a+"}"};var St,Tt={},xt={};function It(){if(void 0===St){var t=null,e=u.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:k,createScript:k,createScriptURL:k})}catch(t){u.console&&u.console.error(t.message)}St=t}else St=t}return St}function kt(t,e){this.a=e===Pt?t:""}function Et(t){return t instanceof kt&&t.constructor===kt?t.a:(F("expected object of type TrustedResourceUrl, got '"+t+"' of type "+f(t)),"type_error:TrustedResourceUrl")}function Ct(t,e){var n=wt(t);if(!At.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=It();return t=e?e.createScriptURL(t):t,new kt(t,Pt)}(t=n.replace(Nt,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof _t?wt(t):encodeURIComponent(String(t))})))}kt.prototype.ta=!0,kt.prototype.sa=function(){return this.a.toString()},kt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Nt=/%{(\w+)}/g,At=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Pt={};function Rt(t,e){this.a=e===Bt?t:""}function Dt(t){return t instanceof Rt&&t.constructor===Rt?t.a:(F("expected object of type SafeUrl, got '"+t+"' of type "+f(t)),"type_error:SafeUrl")}Rt.prototype.ta=!0,Rt.prototype.sa=function(){return this.a.toString()},Rt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Mt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Ot=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Lt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Ft(t){if(t instanceof Rt)return t;if(t="object"==typeof t&&t.ta?t.sa():String(t),Lt.test(t))t=new Rt(t,Bt);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Ot);t=e&&Mt.test(e[1])?new Rt(t,Bt):null}return t}function jt(t){return t instanceof Rt?t:(t="object"==typeof t&&t.ta?t.sa():String(t),Lt.test(t)||(t="about:invalid#zClosurez"),new Rt(t,Bt))}var Bt={},Gt=new Rt("about:invalid#zClosurez",Bt);function Ut(t,e,n){this.a=n===Vt?t:""}Ut.prototype.ta=!0,Ut.prototype.sa=function(){return this.a.toString()},Ut.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Vt={};function qt(t,e,n,r){return t=t instanceof Rt?t:jt(t),e=e||u,n=n instanceof _t?wt(n):n||"",e.open(Dt(t),n,r,void 0)}function zt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Ht(t){return ut.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(nt,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(rt,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(it,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(ot,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(at,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(st,"&#0;"))),t}function $t(t){return $t[" "](t),t}$t[" "]=d;var Wt,Kt,Yt=ft("Opera"),Xt=ft("Trident")||ft("MSIE"),Qt=ft("Edge"),Jt=Qt||Xt,Zt=ft("Gecko")&&!(ct(tt.toLowerCase(),"webkit")&&!ft("Edge"))&&!(ft("Trident")||ft("MSIE"))&&!ft("Edge"),te=ct(tt.toLowerCase(),"webkit")&&!ft("Edge");function ee(){var t=u.document;return t?t.documentMode:void 0}t:{var ne="",re=(Kt=tt,Zt?/rv:([^\);]+)(\)|;)/.exec(Kt):Qt?/Edge\/([\d\.]+)/.exec(Kt):Xt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Kt):te?/WebKit\/(\S+)/.exec(Kt):Yt?/(?:Version)[ \/]?(\S+)/.exec(Kt):void 0);if(re&&(ne=re?re[1]:""),Xt){var ie=ee();if(null!=ie&&ie>parseFloat(ne)){Wt=String(ie);break t}}Wt=ne}var oe,ae={};function se(t){return function(t,e){var n=ae;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=et(String(Wt)).split("."),r=et(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=lt(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||lt(0==a[2].length,0==s[2].length)||lt(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}if(u.document&&Xt){var ue=ee();oe=ue||(parseInt(Wt,10)||void 0)}else oe=void 0;var ce=oe;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Kt){}var le=!Xt||9<=Number(ce);function he(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function de(t,e){pt(e,(function(e,n){e&&"object"==typeof e&&e.ta&&(e=e.sa()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:ge.hasOwnProperty(n)?t.setAttribute(ge[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var fe,pe,ge={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function me(t,e,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!le&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',Ht(a.name),'"'),a.type){o.push(' type="',Ht(a.type),'"');var s={};yt(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=ve(i,o),a&&("string"==typeof a?o.className=a:Array.isArray(a)?o.className=a.join(" "):de(o,a)),2<r.length&&function(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!p(o)||m(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(m(o)){var a="function"==typeof o.item||"string"==typeof o.item;break t}if(g(o)){a="function"==typeof o.item;break t}}a=!1}H(a?Z(o):o,r)}}}(i,o,r),o}function ve(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ye(t){u.setTimeout((function(){throw t}),0)}function be(t,e){pe||function(){if(u.Promise&&u.Promise.resolve){var t=u.Promise.resolve(void 0);pe=function(){t.then(Se)}}else pe=function(){var t=Se;!g(u.setImmediate)||u.Window&&u.Window.prototype&&!ft("Edge")&&u.Window.prototype.setImmediate==u.setImmediate?(fe||(fe=function(){var t=u.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!ft("Presto")&&(t=function(){var t=ve(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=S((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!ft("Trident")&&!ft("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Hb;n.Hb=null,t()}},function(t){r.next={Hb:t},r=r.next,e.port2.postMessage(0)}}return function(t){u.setTimeout(t,0)}}()),fe(t)):u.setImmediate(t)}}(),_e||(pe(),_e=!0),we.add(t,e)}var _e=!1,we=new G;function Se(){for(var t;t=V();){try{t.a.call(t.b)}catch(t){ye(t)}B(U,t)}_e=!1}function Te(t,e){if(this.a=xe,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=d)try{var n=this;t.call(e,(function(t){Fe(n,Ie,t)}),(function(t){if(!(t instanceof ze))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Fe(n,ke,t)}))}catch(t){Fe(this,ke,t)}}var xe=0,Ie=2,ke=3;function Ee(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Ee.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ce=new j((function(){return new Ee}),(function(t){t.reset()}));function Ne(t,e,n){var r=Ce.get();return r.g=t,r.b=e,r.f=n,r}function Ae(t){if(t instanceof Te)return t;var e=new Te(d);return Fe(e,Ie,t),e}function Pe(t){return new Te((function(e,n){n(t)}))}function Re(t,e,n){je(t,e,n,null)||be(T(e,t))}function De(t){return new Te((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Qb:!0,value:o}:{Qb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Re(t[o],T(i,o,!0),T(i,o,!1));else e(r)}))}function Me(t,e){if(t.a==xe)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,a=n.b;a&&(a.c||(r++,a.a==t&&(i=a),!(i&&1<r)));a=a.next)i||(o=a);i&&(n.a==xe&&1==r?Me(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Ge(n),Ue(n,i,ke,e)))}t.c=null}else Fe(t,ke,e)}function Oe(t,e){t.b||t.a!=Ie&&t.a!=ke||Be(t),t.f?t.f.next=e:t.b=e,t.f=e}function Le(t,e,n,r){var i=Ne(null,null,null);return i.a=new Te((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(t){o(t)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof ze?o(e):t(i)}catch(t){o(t)}}:o})),i.a.c=t,Oe(t,i),i.a}function Fe(t,e,n){t.a==xe&&(t===n&&(e=ke,n=new TypeError("Promise cannot resolve to itself")),t.a=1,je(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,Be(t),e!=ke||n instanceof ze||function(t,e){t.g=!0,be((function(){t.g&&qe.call(null,e)}))}(t,n)))}function je(t,e,n,r){if(t instanceof Te)return Oe(t,Ne(e||d,n||null,r)),!0;if(M(t))return t.then(e,n,r),!0;if(m(t))try{var i=t.then;if(g(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}function a(t){s||(s=!0,n.call(i,t))}var s=!1;try{e.call(t,a,o)}catch(t){o(t)}}(t,i,e,n,r),!0}catch(t){return n.call(r,t),!0}return!1}function Be(t){t.h||(t.h=!0,be(t.gc,t))}function Ge(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Ue(t,e,n,r){if(n==ke&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Ve(e,n,r);else try{e.c?e.g.call(e.f):Ve(e,n,r)}catch(t){qe.call(null,t)}B(Ce,e)}function Ve(t,e,n){e==Ie?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}Te.prototype.then=function(t,e,n){return Le(this,g(t)?t:null,g(e)?e:null,n)},Te.prototype.$goog_Thenable=!0,(t=Te.prototype).oa=function(t,e){return(t=Ne(t,t,e)).c=!0,Oe(this,t),this},t.o=function(t,e){return Le(this,null,t,e)},t.cancel=function(t){if(this.a==xe){var e=new ze(t);be((function(){Me(this,e)}),this)}},t.$c=function(t){this.a=xe,Fe(this,Ie,t)},t.ad=function(t){this.a=xe,Fe(this,ke,t)},t.gc=function(){for(var t;t=Ge(this);)Ue(this,t,this.a,this.i);this.h=!1};var qe=ye;function ze(t){O.call(this,t)}function He(){0!=$e&&(We[v(this)]=this),this.ya=this.ya,this.pa=this.pa}I(ze,O),ze.prototype.name="cancel";var $e=0,We={};function Ke(t){if(!t.ya&&(t.ya=!0,t.Da(),0!=$e)){var e=v(t);if(0!=$e&&t.pa&&0<t.pa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete We[e]}}He.prototype.ya=!1,He.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var Ye=Object.freeze||function(t){return t},Xe=!Xt||9<=Number(ce),Qe=Xt&&!se("9"),Je=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{u.addEventListener("test",d,e),u.removeEventListener("test",d,e)}catch(t){}return t}();function Ze(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function tn(t,e){if(Ze.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Zt){t:{try{$t(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:en[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Ze.prototype.preventDefault=function(){this.defaultPrevented=!0},I(tn,Ze);var en=Ye({2:"touch",3:"pen",4:"mouse"});tn.prototype.preventDefault=function(){tn.bb.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Qe)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},tn.prototype.g=function(){return this.a};var nn="closure_listenable_"+(1e6*Math.random()|0),rn=0;function on(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Wa=i,this.key=++rn,this.wa=this.Qa=!1}function an(t){t.wa=!0,t.listener=null,t.proxy=null,t.src=null,t.Wa=null}function sn(t){this.src=t,this.a={},this.b=0}function un(t,e){var n=e.type;n in t.a&&X(t.a[n],e)&&(an(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function cn(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.wa&&o.listener==e&&o.capture==!!n&&o.Wa==r)return i}return-1}sn.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=cn(t,e,r,i);return-1<a?(e=t[a],n||(e.Qa=!1)):((e=new on(e,this.src,o,!!r,i)).Qa=n,t.push(e)),e};var ln="closure_lm_"+(1e6*Math.random()|0),hn={};function dn(t,e,n,r,i){if(r&&r.once)pn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)dn(t,e[o],n,r,i);else n=Tn(n),t&&t[nn]?In(t,e,n,m(r)?!!r.capture:!!r,i):fn(t,e,n,!1,r,i)}function fn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=m(i)?!!i.capture:!!i,s=wn(t);if(s||(t[ln]=s=new sn(t)),!(n=s.add(e,n,r,a,o)).proxy){if(r=function(){var t=_n,e=Xe?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Je||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(vn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}0}}function pn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)pn(t,e[o],n,r,i);else n=Tn(n),t&&t[nn]?kn(t,e,n,m(r)?!!r.capture:!!r,i):fn(t,e,n,!0,r,i)}function gn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)gn(t,e[o],n,r,i);else r=m(r)?!!r.capture:!!r,n=Tn(n),t&&t[nn]?(t=t.v,(e=String(e).toString())in t.a&&(-1<(n=cn(o=t.a[e],n,r,i))&&(an(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=wn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=cn(e,n,r,i)),(n=-1<t?e[t]:null)&&mn(n))}function mn(t){if("number"!=typeof t&&t&&!t.wa){var e=t.src;if(e&&e[nn])un(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(vn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=wn(e))?(un(n,t),0==n.b&&(n.src=null,e[ln]=null)):an(t)}}}function vn(t){return t in hn?hn[t]:hn[t]="on"+t}function yn(t,e,n,r){var i=!0;if((t=wn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.wa&&(o=bn(o,r),i=i&&!1!==o)}return i}function bn(t,e){var n=t.listener,r=t.Wa||t.src;return t.Qa&&mn(t),n.call(r,e)}function _n(t,e){if(t.wa)return!0;if(!Xe){if(!e)t:{e=["window","event"];for(var n=u,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new tn(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=yn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=yn(r[i],t,!1,e),n=n&&o}return n}return bn(t,new tn(e,this))}function wn(t){return(t=t[ln])instanceof sn?t:null}var Sn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Tn(t){return g(t)?t:(t[Sn]||(t[Sn]=function(e){return t.handleEvent(e)}),t[Sn])}function xn(){He.call(this),this.v=new sn(this),this.bc=this,this.hb=null}function In(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function kn(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function En(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.wa&&a.capture==n){var s=a.listener,u=a.Wa||a.src;a.Qa&&un(t.v,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}function Cn(t,e,n){if(g(t))n&&(t=S(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=S(t.handleEvent,t)}return 2147483647<Number(e)?-1:u.setTimeout(t,e||0)}function Nn(t){var e=null;return new Te((function(n,r){-1==(e=Cn((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).o((function(t){throw u.clearTimeout(e),t}))}function An(t){if(t.X&&"function"==typeof t.X)return t.X();if("string"==typeof t)return t.split("");if(p(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Pn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.X||"function"!=typeof t.X){if(p(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function Rn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Rn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Dn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Mn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Mn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Mn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}I(xn,He),xn.prototype[nn]=!0,xn.prototype.addEventListener=function(t,e,n,r){dn(this,t,e,n,r)},xn.prototype.removeEventListener=function(t,e,n,r){gn(this,t,e,n,r)},xn.prototype.dispatchEvent=function(t){var e,n=this.hb;if(n)for(e=[];n;n=n.hb)e.push(n);n=this.bc;var r=t.type||t;if("string"==typeof t)t=new Ze(t,n);else if(t instanceof Ze)t.target=t.target||n;else{var i=t;yt(t=new Ze(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.b=e[o];i=En(a,r,!0,t)&&i}if(i=En(a=t.b=n,r,!0,t)&&i,i=En(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=En(a=t.b=e[o],r,!1,t)&&i;return i},xn.prototype.Da=function(){if(xn.bb.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)an(n[r]);delete e.a[t],e.b--}}this.hb=null},(t=Rn.prototype).X=function(){Dn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return Dn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Mn(this.b,t)?this.b[t]:e},t.set=function(t,e){Mn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var On=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ln(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Ln?(this.i=void 0!==e?e:t.i,Fn(this,t.c),this.l=t.l,this.a=t.a,jn(this,t.g),this.f=t.f,Bn(this,ir(t.b)),this.h=t.h):t&&(n=String(t).match(On))?(this.i=!!e,Fn(this,n[1]||"",!0),this.l=zn(n[2]||""),this.a=zn(n[3]||"",!0),jn(this,n[4]),this.f=zn(n[5]||"",!0),Bn(this,n[6]||"",!0),this.h=zn(n[7]||"")):(this.i=!!e,this.b=new Jn(null,this.i))}function Fn(t,e,n){t.c=n?zn(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function jn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Bn(t,e,n){e instanceof Jn?(t.b=e,function(t,e){e&&!t.f&&(Zn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(er(this,e),rr(this,n,t))}),t)),t.f=e}(t.b,t.i)):(n||(e=Hn(e,Xn)),t.b=new Jn(e,t.i))}function Gn(t,e,n){t.b.set(e,n)}function Un(t,e){return t.b.get(e)}function Vn(t){return t instanceof Ln?new Ln(t):new Ln(t,void 0)}function qn(t,e,n,r){var i=new Ln(null,void 0);return t&&Fn(i,t),e&&(i.a=e),n&&jn(i,n),r&&(i.f=r),i}function zn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Hn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,$n),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function $n(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ln.prototype.toString=function(){var t=[],e=this.c;e&&t.push(Hn(e,Wn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(Hn(e,Wn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(Hn(n,"/"==n.charAt(0)?Yn:Kn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Hn(n,Qn)),t.join("")},Ln.prototype.resolve=function(t){var e=new Ln(this),n=!!t.c;n?Fn(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)jn(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ct(i,"./")||ct(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?Bn(e,ir(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Wn=/[#\/\?@]/g,Kn=/[#\?:]/g,Yn=/[#\?]/g,Xn=/[#\?@]/g,Qn=/#/g;function Jn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Zn(t){t.a||(t.a=new Rn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function tr(t){var e=Pn(t);if(void 0===e)throw Error("Keys are undefined");var n=new Jn(null,void 0);t=An(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?rr(n,i,o):n.add(i,o)}return n}function er(t,e){Zn(t),e=or(t,e),Mn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Mn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Dn(t)))}function nr(t,e){return Zn(t),e=or(t,e),Mn(t.a.b,e)}function rr(t,e,n){er(t,e),0<n.length&&(t.c=null,t.a.set(or(t,e),Z(n)),t.b+=n.length)}function ir(t){var e=new Jn;return e.c=t.c,t.a&&(e.a=new Rn(t.a),e.b=t.b),e}function or(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function ar(t){var e=[];return ur(new sr,t,e),e.join("")}function sr(){}function ur(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),ur(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&("function"!=typeof(o=e[r])&&(n.push(i),hr(r,n),n.push(":"),ur(t,o,n),i=","));return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":hr(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(t=Jn.prototype).add=function(t,e){Zn(this),this.c=null,t=or(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){Zn(this),this.a.forEach((function(n,r){H(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.Y=function(){Zn(this);for(var t=this.a.X(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.X=function(t){Zn(this);var e=[];if("string"==typeof t)nr(this,t)&&(e=J(e,this.a.get(or(this,t))));else{t=this.a.X();for(var n=0;n<t.length;n++)e=J(e,t[n])}return e},t.set=function(t,e){return Zn(this),this.c=null,nr(this,t=or(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.X(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.X(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var cr={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},lr=/\uffff/.test("")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function hr(t,e){e.push('"',t.replace(lr,(function(t){var e=cr[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),cr[t]=e),e})),'"')}function dr(){var t=Rr();return Xt&&!!ce&&11==ce||/Edge\/\d+/.test(t)}function fr(){return u.window&&u.window.location.href||self&&self.location&&self.location.href||""}function pr(t,e){e=e||u.window;var n="about:blank";t&&(n=Dt(Ft(t)||Gt)),e.location.href=n}function gr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<gr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function mr(t){return!!((t=(t||Rr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function vr(t){t=t||u.window;try{t.close()}catch(t){}}function yr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Rr().toLowerCase(),r&&(e.target=r,ct(n,"crios/")&&(e.target="_blank")),Nr(Rr())==Er&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Rt?n:Ft(void 0!==n.href?n.href:String(n))||Gt,n=t.target||n.target,i=[],t)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(t[a]?1:0))}var a=i.join(",");if((ft("iPhone")&&!ft("iPod")&&!ft("iPad")||ft("iPad")||ft("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(bt(a=ve(document,"A"),"HTMLAnchorElement"),e=e instanceof Rt?e:jt(e),a.href=Dt(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=qt("",r,n,a),t=Dt(e),a&&(Jt&&ct(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Ht(t)+'">',t=new Ut(t=(r=It())?r.createHTML(t):t,null,Vt),r=a.document)&&(r.write(function(t){return t instanceof Ut&&t.constructor===Ut?t.a:(F("expected object of type SafeHtml, got '"+t+"' of type "+f(t)),"type_error:SafeHtml")}(t)),r.close())):(a=qt(e,r,n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(t){}return a}var br=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_r=/^[^@]+@[^@]+$/;function wr(){var t=null;return new Te((function(e){"complete"==u.document.readyState?e():(t=function(){e()},pn(window,"load",t))})).o((function(e){throw gn(window,"load",t),e}))}function Sr(t){return t=t||Rr(),!("file:"!==Fr()&&"ionic:"!==Fr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Tr(){var t=u.window;try{return!(!t||t==t.top)}catch(t){return!1}}function xr(){return void 0!==u.WorkerGlobalScope&&"function"==typeof u.importScripts}function Ir(){return r.default.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":r.default.INTERNAL.hasOwnProperty("node")?"Node":xr()?"Worker":"Browser"}function kr(){var t=Ir();return"ReactNative"===t||"Node"===t}var Er="Firefox",Cr="Chrome";function Nr(t){var e=t.toLowerCase();return ct(e,"opera/")||ct(e,"opr/")||ct(e,"opios/")?"Opera":ct(e,"iemobile")?"IEMobile":ct(e,"msie")||ct(e,"trident/")?"IE":ct(e,"edge/")?"Edge":ct(e,"firefox/")?Er:ct(e,"silk/")?"Silk":ct(e,"blackberry")?"Blackberry":ct(e,"webos")?"Webos":!ct(e,"safari/")||ct(e,"chrome/")||ct(e,"crios/")||ct(e,"android")?!ct(e,"chrome/")&&!ct(e,"crios/")||ct(e,"edge/")?ct(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Cr:"Safari"}var Ar={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Pr(t,e){e=e||[];var n,r=[],i={};for(n in Ar)i[Ar[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=Ir())?r=Nr(i=Rr()):"Worker"===r&&(r=Nr(i=Rr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function Rr(){return u.navigator&&u.navigator.userAgent||""}function Dr(t,e){t=t.split("."),e=e||u;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Mr(){try{var t=u.localStorage,e=Vr();if(t)return t.setItem(e,"1"),t.removeItem(e),!dr()||!!u.indexedDB}catch(t){return xr()&&!!u.indexedDB}return!1}function Or(){return(Lr()||"chrome-extension:"===Fr()||Sr())&&!kr()&&Mr()&&!xr()}function Lr(){return"http:"===Fr()||"https:"===Fr()}function Fr(){return u.location&&u.location.protocol||null}function jr(t){return!mr(t=t||Rr())&&Nr(t)!=Er}function Br(t){return void 0===t?null:ar(t)}function Gr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Ur(t){if(null!==t)return JSON.parse(t)}function Vr(t){return t||Math.floor(1e9*Math.random()).toString()}function qr(t){return"Safari"!=Nr(t=t||Rr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function zr(){var t=u.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Hr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=Rr(),e=Ir(),this.b=mr(t)||"ReactNative"===e}function $r(){var t=u.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Wr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Kr(){return!(!Dr("fireauth.oauthhelper",u)&&!Dr("fireauth.iframe",u))}Hr.prototype.get=function(){var t=u.navigator;return!t||"boolean"!=typeof t.onLine||!Lr()&&"chrome-extension:"!==Fr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Yr,Xr={};function Qr(t){Xr[t]||(Xr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Jr={};Object.defineProperty(Jr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Jr,"abcd",{configurable:!0,enumerable:!0,value:2}),Yr=2==Jr.abcd}catch(Kt){Yr=!1}function Zr(t,e,n){Yr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function ti(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Zr(t,n,e[n])}function ei(t){var e={};return ti(e,t),e}function ni(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Zr(e,n,ni(t[n]));return e}function ri(t){var e=t&&(t[ui]?"phone":null);if(!(e&&t&&t[si]))throw new E("internal-error","Internal assert: invalid MultiFactorInfo object");Zr(this,"uid",t[si]),Zr(this,"displayName",t[oi]||null);var n=null;t[ai]&&(n=new Date(t[ai]).toUTCString()),Zr(this,"enrollmentTime",n),Zr(this,"factorId",e)}function ii(t){try{var e=new ci(t)}catch(t){e=null}return e}ri.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var oi="displayName",ai="enrolledAt",si="mfaEnrollmentId",ui="phoneInfo";function ci(t){ri.call(this,t),Zr(this,"phoneNumber",t[ui])}function li(t){var e={},n=t[pi],r=t[mi],i=t[vi];if(t=ii(t[gi]),!i||i!=di&&i!=fi&&!n||i==fi&&!r||i==hi&&!t)throw Error("Invalid checkActionCode response!");i==fi?(e[bi]=n||null,e[wi]=n||null,e[yi]=r):(e[bi]=r||null,e[wi]=r||null,e[yi]=n||null),e[_i]=t||null,Zr(this,Ti,i),Zr(this,Si,ni(e))}I(ci,ri),ci.prototype.w=function(){var t=ci.bb.w.call(this);return t.phoneNumber=this.phoneNumber,t};var hi="REVERT_SECOND_FACTOR_ADDITION",di="EMAIL_SIGNIN",fi="VERIFY_AND_CHANGE_EMAIL",pi="email",gi="mfaInfo",mi="newEmail",vi="requestType",yi="email",bi="fromEmail",_i="multiFactorInfo",wi="previousEmail",Si="data",Ti="operation";function xi(t){var e=Un(t=Vn(t),Ii)||null,n=Un(t,ki)||null,r=Un(t,Ni)||null;if(r=r&&Pi[r]||null,!e||!n||!r)throw new E("argument-error",Ii+", "+ki+"and "+Ni+" are required in a valid action code URL.");ti(this,{apiKey:e,operation:r,code:n,continueUrl:Un(t,Ei)||null,languageCode:Un(t,Ci)||null,tenantId:Un(t,Ai)||null})}var Ii="apiKey",ki="oobCode",Ei="continueUrl",Ci="languageCode",Ni="mode",Ai="tenantId",Pi={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:hi,signIn:di,verifyAndChangeEmail:fi,verifyEmail:"VERIFY_EMAIL"};function Ri(t){try{return new xi(t)}catch(t){return null}}function Di(t){var e=t[ji];if(void 0===e)throw new E("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new E("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Mi];if(n&&"object"==typeof n){e=n[Ui];var r=n[Bi];if(n=n[Gi],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new E("argument-error",Bi+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new E("argument-error",Gi+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new E("argument-error",Ui+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new E("missing-android-pkg-name")}}else if(void 0!==n)throw new E("argument-error",Mi+" property must be a non null object when specified.");if(this.f=null,(e=t[Fi])&&"object"==typeof e){if("string"==typeof(e=e[Vi])&&e.length)this.f=e;else if(void 0!==e)throw new E("argument-error",Vi+" property must be a non empty string when specified.")}else if(void 0!==e)throw new E("argument-error",Fi+" property must be a non null object when specified.");if(void 0!==(e=t[Li])&&"boolean"!=typeof e)throw new E("argument-error",Li+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Oi])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new E("argument-error",Oi+" property must be a non empty string when specified.");this.i=t||null}var Mi="android",Oi="dynamicLinkDomain",Li="handleCodeInApp",Fi="iOS",ji="url",Bi="installApp",Gi="minimumVersion",Ui="packageName",Vi="bundleId";function qi(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var zi=null;function Hi(t){var e=[];return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=zi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!zi){zi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===zi[o]&&(zi[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,(function(t){e.push(t)})),e}function $i(t){var e=Ki(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function Wi(t){try{return new $i(t)}catch(t){return null}}function Ki(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=Hi(t);for(t=[],n=e=0;e<r.length;){var i=r[e++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[e++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[e++];var a=r[e++],s=((7&i)<<18|(63&o)<<12|(63&a)<<6|63&r[e++])-65536;t[n++]=String.fromCharCode(55296+(s>>10)),t[n++]=String.fromCharCode(56320+(1023&s))}else o=r[e++],a=r[e++],t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}return JSON.parse(t.join(""))}catch(t){}return null}$i.prototype.T=function(){return this.f},$i.prototype.l=function(){return this.c},$i.prototype.toString=function(){return this.h};var Yi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Xi=["client_id","response_type","scope","redirect_uri","state"],Qi={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:Xi},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:Xi},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:Xi},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:Yi},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function Ji(t){for(var e in Qi)if(Qi[e].fa==t)return Qi[e];return null}function Zi(t){var e={};e["facebook.com"]=io,e["google.com"]=ao,e["github.com"]=oo,e["twitter.com"]=so;var n=t&&t[eo];try{if(n)return e[n]?new e[n](t):new ro(t);if(void 0!==t[to])return new no(t)}catch(t){}return null}var to="idToken",eo="providerId";function no(t){var e=t[eo];if(!e&&t[to]){var n=Wi(t[to]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Zr(this,"providerId",e),Zr(this,"isNewUser",n)}function ro(t){no.call(this,t),Zr(this,"profile",ni((t=Ur(t.rawUserInfo||"{}"))||{}))}function io(t){if(ro.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function oo(t){if(ro.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Zr(this,"username",this.profile&&this.profile.login||null)}function ao(t){if(ro.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function so(t){if(ro.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Zr(this,"username",t.screenName||null)}function uo(t){var e=Vn(t),n=Un(e,"link"),r=Un(Vn(n),"link");return e=Un(e,"deep_link_id"),Un(Vn(e),"link")||e||r||n||t}function co(t,e){if(!t&&!e)throw new E("internal-error","Internal assert: no raw session string available");if(t&&e)throw new E("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?lo:ho}I(ro,no),I(io,ro),I(oo,ro),I(ao,ro),I(so,ro);var lo="enroll",ho="signin";function fo(){}function po(t,e){return t.then((function(t){if(t[ns]){var n=Wi(t[ns]);if(!n||e!=n.i)throw new E("user-mismatch");return t}throw new E("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==A+"user-not-found"?new E("user-mismatch"):t}))}function go(t,e){if(!e)throw new E("internal-error","failed to construct a credential");this.a=e,Zr(this,"providerId",t),Zr(this,"signInMethod",t)}function mo(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function vo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new go(t.providerId,t.pendingToken)}catch(t){}return null}function yo(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Zr(this,"idToken",e.idToken),e.accessToken&&Zr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Zr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new E("internal-error","failed to construct a credential");Zr(this,"accessToken",e.oauthToken),Zr(this,"secret",e.oauthTokenSecret)}Zr(this,"providerId",t),Zr(this,"signInMethod",n)}function bo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:tr(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function _o(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new yo(t.providerId,e,t.signInMethod)}catch(t){}}return null}function wo(t,e){this.Qc=e||[],ti(this,{providerId:t,isOAuthProvider:!0}),this.Jb={},this.qb=(Ji(t)||{}).Ja||null,this.pb=null}function So(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new E("argument-error",'SAML provider IDs must be prefixed with "saml."');wo.call(this,t,[])}function To(t){wo.call(this,t,Xi),this.a=[]}function xo(){To.call(this,"facebook.com")}function Io(t){if(!t)throw new E("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return m(t)&&(e=t.accessToken),(new xo).credential({accessToken:e})}function ko(){To.call(this,"github.com")}function Eo(t){if(!t)throw new E("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return m(t)&&(e=t.accessToken),(new ko).credential({accessToken:e})}function Co(){To.call(this,"google.com"),this.Ca("profile")}function No(t,e){var n=t;return m(t)&&(n=t.idToken,e=t.accessToken),(new Co).credential({idToken:n,accessToken:e})}function Ao(){wo.call(this,"twitter.com",Yi)}function Po(t,e){var n=t;if(m(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new E("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new yo("twitter.com",n,"twitter.com")}function Ro(t,e,n){this.a=t,this.f=e,Zr(this,"providerId","password"),Zr(this,"signInMethod",n===Mo.EMAIL_LINK_SIGN_IN_METHOD?Mo.EMAIL_LINK_SIGN_IN_METHOD:Mo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Do(t){return t&&t.email&&t.password?new Ro(t.email,t.password,t.signInMethod):null}function Mo(){ti(this,{providerId:"password",isOAuthProvider:!1})}function Oo(t,e){if(!(e=Lo(e)))throw new E("argument-error","Invalid email link!");return new Ro(t,e.code,Mo.EMAIL_LINK_SIGN_IN_METHOD)}function Lo(t){return(t=Ri(t=uo(t)))&&t.operation===di?t:null}function Fo(t){if(!(t.fb&&t.eb||t.La&&t.ea))throw new E("internal-error");this.a=t,Zr(this,"providerId","phone"),this.fa="phone",Zr(this,"signInMethod","phone")}function jo(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return H(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new Fo(e)}return null}function Bo(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.fb,code:t.a.eb}}function Go(t){try{this.a=t||r.default.auth()}catch(t){throw new E("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}ti(this,{providerId:"phone",isOAuthProvider:!1})}function Uo(t,e){if(!t)throw new E("missing-verification-id");if(!e)throw new E("missing-verification-code");return new Fo({fb:t,eb:e})}function Vo(t){if(t.temporaryProof&&t.phoneNumber)return new Fo({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,a=t&&t.pendingToken;try{switch(e){case"google.com":return No(o,n);case"facebook.com":return Io(n);case"github.com":return Eo(n);case"twitter.com":return Po(n,r);default:return n||r||o||a?a?0==e.indexOf("saml.")?new go(e,a):new yo(e,{pendingToken:a,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new To(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function qo(t){if(!t.isOAuthProvider)throw new E("invalid-oauth-provider")}function zo(t,e,n,r,i,o,a){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new E("invalid-auth-event");if(this.g&&this.a)throw new E("invalid-auth-event");if(this.g&&!this.f)throw new E("invalid-auth-event")}function Ho(t){return(t=t||{}).type?new zo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&C(t.error),t.postBody,t.tenantId):null}function $o(){this.b=null,this.a=[]}co.prototype.Ha=function(){return this.a?Ae(this.a):Ae(this.b)},co.prototype.w=function(){return this.type==lo?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},fo.prototype.ka=function(){},fo.prototype.b=function(){},fo.prototype.c=function(){},fo.prototype.w=function(){},go.prototype.ka=function(t){return xs(t,mo(this))},go.prototype.b=function(t,e){var n=mo(this);return n.idToken=e,Is(t,n)},go.prototype.c=function(t,e){return po(ks(t,mo(this)),e)},go.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},yo.prototype.ka=function(t){return xs(t,bo(this))},yo.prototype.b=function(t,e){var n=bo(this);return n.idToken=e,Is(t,n)},yo.prototype.c=function(t,e){return po(ks(t,bo(this)),e)},yo.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},wo.prototype.Ka=function(t){return this.Jb=mt(t),this},I(So,wo),I(To,wo),To.prototype.Ca=function(t){return Y(this.a,t)||this.a.push(t),this},To.prototype.Rb=function(){return Z(this.a)},To.prototype.credential=function(t,e){var n;if(!(n=m(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new E("argument-error","credential failed: must provide the ID token and/or the access token.");return new yo(this.providerId,n,this.providerId)},I(xo,To),Zr(xo,"PROVIDER_ID","facebook.com"),Zr(xo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),I(ko,To),Zr(ko,"PROVIDER_ID","github.com"),Zr(ko,"GITHUB_SIGN_IN_METHOD","github.com"),I(Co,To),Zr(Co,"PROVIDER_ID","google.com"),Zr(Co,"GOOGLE_SIGN_IN_METHOD","google.com"),I(Ao,wo),Zr(Ao,"PROVIDER_ID","twitter.com"),Zr(Ao,"TWITTER_SIGN_IN_METHOD","twitter.com"),Ro.prototype.ka=function(t){return this.signInMethod==Mo.EMAIL_LINK_SIGN_IN_METHOD?su(t,Ms,{email:this.a,oobCode:this.f}):su(t,nu,{email:this.a,password:this.f})},Ro.prototype.b=function(t,e){return this.signInMethod==Mo.EMAIL_LINK_SIGN_IN_METHOD?su(t,Os,{idToken:e,email:this.a,oobCode:this.f}):su(t,Ks,{idToken:e,email:this.a,password:this.f})},Ro.prototype.c=function(t,e){return po(this.ka(t),e)},Ro.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},ti(Mo,{PROVIDER_ID:"password"}),ti(Mo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),ti(Mo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Fo.prototype.ka=function(t){return t.gb(Bo(this))},Fo.prototype.b=function(t,e){var n=Bo(this);return n.idToken=e,su(t,iu,n)},Fo.prototype.c=function(t,e){var n=Bo(this);return n.operation="REAUTH",po(t=su(t,ou,n),e)},Fo.prototype.w=function(){var t={providerId:"phone"};return this.a.fb&&(t.verificationId=this.a.fb),this.a.eb&&(t.verificationCode=this.a.eb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Go.prototype.gb=function(t,e){var n=this.a.a;return Ae(e.verify()).then((function(r){if("string"!=typeof r)throw new E("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");if("recaptcha"===e.type){var i,o=m(t)?t.session:null,a=m(t)?t.phoneNumber:t;return i=o&&o.type==lo?o.Ha().then((function(t){return function(t,e){return su(t,Xs,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:a,recaptchaToken:r}})})):o&&o.type==ho?o.Ha().then((function(e){return function(t,e){return su(t,Qs,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(t,e){return su(t,$s,e)}(n,{phoneNumber:a,recaptchaToken:r}),i.then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}))}throw new E("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}))},ti(Go,{PROVIDER_ID:"phone"}),ti(Go,{PHONE_SIGN_IN_METHOD:"phone"}),zo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},zo.prototype.T=function(){return this.h},zo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Wo,Ko=null;function Yo(t){var e="unauthorized-domain",n=void 0,r=Vn(t);t=r.a,"chrome-extension"==(r=r.c)?n=zt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=zt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",E.call(this,e,n)}function Xo(t,e,n){E.call(this,t,n),(t=e||{}).Kb&&Zr(this,"email",t.Kb),t.ea&&Zr(this,"phoneNumber",t.ea),t.credential&&Zr(this,"credential",t.credential),t.$b&&Zr(this,"tenantId",t.$b)}function Qo(t){if(t.code){var e=t.code||"";0==e.indexOf(A)&&(e=e.substring(A.length));var n={credential:Vo(t),$b:t.tenantId};if(t.email)n.Kb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new E(e,t.message||void 0);return new Xo(e,n,t.message)}return null}function Jo(){}function Zo(t){return t.c||(t.c=t.b())}function ta(){}function ea(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function na(){}function ra(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=S(this.qc,this),this.a.onerror=S(this.Tb,this),this.a.onprogress=S(this.rc,this),this.a.ontimeout=S(this.vc,this)}function ia(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function oa(t,e,n){this.reset(t,e,n,void 0,void 0)}I(Yo,E),I(Xo,E),Xo.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&yt(t,e),t},Xo.prototype.toJSON=function(){return this.w()},Jo.prototype.c=null,I(ta,Jo),ta.prototype.a=function(){var t=ea(this);return t?new ActiveXObject(t):new XMLHttpRequest},ta.prototype.b=function(){var t={};return ea(this)&&(t[0]=!0,t[1]=!0),t},Wo=new ta,I(na,Jo),na.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new ra;throw Error("Unsupported browser")},na.prototype.b=function(){return{}},(t=ra.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,ia(this,4)},t.Tb=function(){this.status=500,this.response=this.responseText="",ia(this,4)},t.vc=function(){this.Tb()},t.rc=function(){this.status=200,ia(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},oa.prototype.a=null;function aa(t){this.f=t,this.b=this.c=this.a=null}function sa(t,e){this.name=t,this.value=e}oa.prototype.reset=function(t,e,n,r,i){"number"==typeof i||0,r||x(),delete this.a},sa.prototype.toString=function(){return this.name};var ua=new sa("SEVERE",1e3),ca=new sa("WARNING",900),la=new sa("CONFIG",700),ha=new sa("FINE",500);function da(t){return t.c?t.c:t.a?da(t.a):(F("Root logger has no level set."),null)}aa.prototype.log=function(t,e,n){if(t.value>=da(this).value)for(g(e)&&(e=e()),t=new oa(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var fa={},pa=null;function ga(t){var e;if(pa||(pa=new aa(""),fa[""]=pa,pa.c=la),!(e=fa[t])){e=new aa(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=ga(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,fa[t]=e}return e}function ma(t,e){t&&t.log(ha,e,void 0)}function va(t){this.f=t}function ya(t){xn.call(this),this.u=t,this.h=void 0,this.readyState=ba,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=ga("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}I(va,Jo),va.prototype.a=function(){return new ya(this.f)},va.prototype.b=function(t){return function(){return t}}({}),I(ya,xn);var ba=0;function _a(t){t.c.read().then(t.pc.bind(t)).catch(t.Va.bind(t))}function wa(t){t.readyState=4,t.g=null,t.c=null,t.m=null,Sa(t)}function Sa(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function Ta(t){xn.call(this),this.headers=new Rn,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=xa,this.u=this.S=!1}(t=ya.prototype).open=function(t,e){if(this.readyState!=ba)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,Sa(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Va.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,wa(this)),this.readyState=ba},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,Sa(this)),this.a&&(this.readyState=3,Sa(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):void 0!==u.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,_a(this)):t.text().then(this.tc.bind(this),this.Va.bind(this)))))},t.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?wa(this):Sa(this),3==this.readyState&&_a(this)}},t.tc=function(t){this.a&&(this.response=this.responseText=t,wa(this))},t.sc=function(t){this.a&&(this.response=t,wa(this))},t.Va=function(t){var e=this.i;e&&e.log(ca,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&wa(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(ca,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(ca,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(ya.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),I(Ta,xn);var xa="";Ta.prototype.b=ga("goog.net.XhrIo");var Ia=/^https?$/i,ka=["POST","PUT"];function Ea(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.P=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():Wo.a(),t.C=t.D?Zo(t.D):Zo(Wo),t.a.onreadystatechange=S(t.Wb,t);try{ma(t.b,La(t,"Opening Xhr")),t.N=!0,t.a.open(n,String(e),!0),t.N=!1}catch(e){return ma(t.b,La(t,"Error opening Xhr: "+e.message)),void Na(t,e)}e=r||"";var o=new Rn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(p(t)||"string"==typeof t)H(t,e,void 0);else for(var n=Pn(t),r=An(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=Ca,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),r=u.FormData&&e instanceof u.FormData,!Y(ka,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{Da(t),0<t.g&&(t.u=function(t){return Xt&&se(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),ma(t.b,La(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=S(t.Ma,t)):t.s=Cn(t.Ma,t.g,t)),ma(t.b,La(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){ma(t.b,La(t,"Send error: "+e.message)),Na(t,e)}}function Ca(t){return"content-type"==t.toLowerCase()}function Na(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Aa(t),Ra(t)}function Aa(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Pa(t){if(t.c&&void 0!==s)if(t.C[1]&&4==Ma(t)&&2==Oa(t))ma(t.b,La(t,"Local request error detected and ignored"));else if(t.i&&4==Ma(t))Cn(t.Wb,0,t);else if(t.dispatchEvent("readystatechange"),4==Ma(t)){ma(t.b,La(t,"Request complete")),t.c=!1;try{var e,n=Oa(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match(On)[1]||null;if(!o&&u.self&&u.self.location){var a=u.self.location.protocol;o=a.substr(0,a.length-1)}i=!Ia.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<Ma(t)?t.a.statusText:""}catch(e){ma(t.b,"Can not get status: "+e.message),c=""}t.h=c+" ["+Oa(t)+"]",Aa(t)}}finally{Ra(t)}}}function Ra(t,e){if(t.a){Da(t);var n=t.a,r=t.C[0]?d:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(ua,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function Da(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(u.clearTimeout(t.s),t.s=null)}function Ma(t){return t.a?t.a.readyState:0}function Oa(t){try{return 2<Ma(t)?t.a.status:-1}catch(t){return-1}}function La(t,e){return e+" ["+t.P+" "+t.l+" "+Oa(t)+"]"}function Fa(t){var e=Ka;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function ja(t,e,n){t.a=!0,t.c=n,t.f=!e,Va(t)}function Ba(t){if(t.a){if(!t.v)throw new qa(t);t.v=!1}}function Ga(t,e,n,r){t.g.push([e,n,r]),t.a&&Va(t)}function Ua(t){return K(t.g,(function(t){return g(t[1])}))}function Va(t){if(t.h&&t.a&&Ua(t)){var e=t.h,n=$a[e];n&&(u.clearTimeout(n.a),delete $a[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],a=i[1];if(i=i[2],o=t.f?a:o)try{var s=o.call(i||t.s,e);void 0!==s&&(t.f=t.f&&(s==e||s instanceof Error),t.c=e=s),(M(e)||"function"==typeof u.Promise&&e instanceof u.Promise)&&(r=!0,t.i=!0)}catch(r){e=r,t.f=!0,Ua(t)||(n=!0)}}t.c=e,r&&(s=S(t.m,t,!0),r=S(t.m,t,!1),e instanceof Fa?(Ga(e,s,r),e.C=!0):e.then(s,r)),n&&(e=new Ha(e),$a[e.a]=e,t.h=e.a)}function qa(){O.call(this)}function za(){O.call(this)}function Ha(t){this.a=u.setTimeout(S(this.c,this),0),this.b=t}(t=Ta.prototype).Ma=function(){void 0!==s&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",ma(this.b,La(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(ma(this.b,La(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Ra(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Ra(this,!0)),Ta.bb.Da.call(this)},t.Wb=function(){this.ya||(this.N||this.i||this.f?Pa(this):this.Jc())},t.Jc=function(){Pa(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case xa:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(ua,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return ma(this.b,"Can not get response: "+t.message),null}},Fa.prototype.cancel=function(t){if(this.a)this.c instanceof Fa&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new za(this),Ba(this),ja(this,!1,t))}},Fa.prototype.m=function(t,e){this.i=!1,ja(this,t,e)},Fa.prototype.then=function(t,e,n){var r,i,o=new Te((function(t,e){r=t,i=e}));return Ga(this,r,(function(t){t instanceof za?o.cancel():i(t)})),o.then(t,e,n)},Fa.prototype.$goog_Thenable=!0,I(qa,O),qa.prototype.message="Deferred has already fired",qa.prototype.name="AlreadyCalledError",I(za,O),za.prototype.message="Deferred was canceled",za.prototype.name="CanceledError",Ha.prototype.c=function(){throw delete $a[this.a],this.b};var $a={};function Wa(t){var e={},n=e.document||document,r=Et(t).toString(),i=ve(document,"SCRIPT"),o={Xb:i,Ma:void 0},a=new Fa(o),s=null,c=null!=e.timeout?e.timeout:5e3;return 0<c&&(s=window.setTimeout((function(){Ya(i,!0);var t=new Ja(Qa,"Timeout reached for loading script "+r);Ba(a),ja(a,!1,t)}),c),o.Ma=s),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Ya(i,e.xd||!1,s),Ba(a),ja(a,!0,null))},i.onerror=function(){Ya(i,!0,s);var t=new Ja(Xa,"Error while loading script "+r);Ba(a),ja(a,!1,t)},yt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),de(i,o),function(t,e){bt(t,"HTMLScriptElement"),t.src=Et(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=u?e=h(e.document):(null===l&&(l=h(u.document)),e=l),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),a}function Ka(){if(this&&this.Xb){var t=this.Xb;t&&"SCRIPT"==t.tagName&&Ya(t,!0,this.Ma)}}function Ya(t,e,n){null!=n&&u.clearTimeout(n),t.onload=d,t.onerror=d,t.onreadystatechange=d,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var Xa=0,Qa=1;function Ja(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),O.call(this,n),this.code=t}function Za(t){this.f=t}function ts(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||rs,this.g=mt(t.secureTokenHeaders||is),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||os,this.a=mt(t.firebaseHeaders||as),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==Ir(),!(n=u.XMLHttpRequest||n&&r.default.INTERNAL.node&&r.default.INTERNAL.node.XMLHttpRequest)&&!xr())throw new E("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,xr()?this.f=new va(self):kr()?this.f=new Za(n):this.f=new na,this.b=null}I(Ja,O),I(Za,Jo),Za.prototype.a=function(){return new this.f},Za.prototype.b=function(){return{}};var es,ns="idToken",rs=new Hr(3e4,6e4),is={"Content-Type":"application/x-www-form-urlencoded"},os=new Hr(3e4,6e4),as={"Content-Type":"application/json"};function ss(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function us(t,e){e&&(t.l=cs("https://securetoken.googleapis.com/v1/token",e),t.h=cs("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=cs("https://identitytoolkit.googleapis.com/v2/",e))}function cs(t,e){return t=Vn(t),e=Vn(e.url),t.f=t.a+t.f,Fn(t,e.c),t.a=e.a,jn(t,e.g),t.toString()}function ls(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function hs(t,e,n,r,i,o,a){(function(){var t=Rr();return!((t=Nr(t)!=Cr?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||Xt&&ce&&!(9<ce))})()||xr()?t=S(t.u,t):(es||(es=new Te((function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{u[fs]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Ga(t,null,e,void 0)}(Wa(Ct(ds,{onload:fs})),(function(){e(Error("CORS_UNSUPPORTED"))}))}}(t,e)}))),t=S(t.s,t)),t(e,n,r,i,o,a)}ts.prototype.T=function(){return this.b},ts.prototype.u=function(t,e,n,r,i,o){if(xr()&&(void 0===u.fetch||void 0===u.Headers||void 0===u.Request))throw new E("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new Ta(this.f);if(o){a.g=Math.max(0,o);var s=setTimeout((function(){a.dispatchEvent("timeout")}),o)}In(a,"complete",(function(){s&&clearTimeout(s);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return ma(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){t=null}e&&e(t)})),kn(a,"ready",(function(){s&&clearTimeout(s),Ke(this)})),kn(a,"timeout",(function(){s&&clearTimeout(s),Ke(this),e&&e(null)})),Ea(a,t,n,r,i)};var ds=new _t(xt,"https://apis.google.com/js/client.js?onload=%{onload}"),fs="__fcb"+Math.floor(1e6*Math.random()).toString();function ps(t,e,n,r,i,o,a){var s=Vn(e+n);Gn(s,"key",t.c),a&&Gn(s,"cb",Date.now().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Gn(s,c,i[c]);return new Te((function(e,n){hs(t,s.toString(),(function(t){t?t.error?n(cu(t,o||{})):e(t):n(new E("network-request-failed"))}),r,u?void 0:ar(Gr(i)),t.a,t.v.get())}))}function gs(t){if("string"!=typeof(t=t.email)||!_r.test(t))throw new E("invalid-email")}function ms(t){"email"in t&&gs(t)}function vs(t){if(!t[ns]){if(t.mfaPendingCredential)throw new E("multi-factor-auth-required",null,mt(t));throw new E("internal-error")}}function ys(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new E("internal-error")}else{if(!t.sessionInfo)throw new E("missing-verification-id");if(!t.code)throw new E("missing-verification-code")}}ts.prototype.s=function(t,e,n,r,i){var o=this;es.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},ts.prototype.Ab=function(){return su(this,Ys,{})},ts.prototype.Cb=function(t,e){return su(this,Ws,{idToken:t,email:e})},ts.prototype.Db=function(t,e){return su(this,Ks,{idToken:t,password:e})};var bs={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function _s(t){if(!t.phoneVerificationInfo)throw new E("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new E("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new E("missing-verification-code")}function ws(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new E("internal-error")}function Ss(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(nr(t=new Jn(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function Ts(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Qo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Qo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Qo(t)):t.errorMessage&&(e=uu(t.errorMessage)),e)throw e;vs(t)}function xs(t,e){return e.returnIdpCredential=!0,su(t,Js,e)}function Is(t,e){return e.returnIdpCredential=!0,su(t,tu,e)}function ks(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,su(t,Zs,e)}function Es(t){if(!t.oobCode)throw new E("invalid-action-code")}(t=ts.prototype).Eb=function(t,e){var n={idToken:t},r=[];return pt(bs,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),su(this,Ws,n)},t.wb=function(t,e){return yt(t={requestType:"PASSWORD_RESET",email:t},e),su(this,Vs,t)},t.xb=function(t,e){return yt(t={requestType:"EMAIL_SIGNIN",email:t},e),su(this,Bs,t)},t.vb=function(t,e){return yt(t={requestType:"VERIFY_EMAIL",idToken:t},e),su(this,Gs,t)},t.Fb=function(t,e,n){return yt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),su(this,Us,t)},t.gb=function(t){return su(this,ru,t)},t.ob=function(t,e){return su(this,Hs,{oobCode:t,newPassword:e})},t.Sa=function(t){return su(this,Ns,{oobCode:t})},t.kb=function(t){return su(this,Cs,{oobCode:t})};var Cs={endpoint:"setAccountInfo",A:Es,Z:"email",B:!0},Ns={endpoint:"resetPassword",A:Es,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new E("internal-error")},B:!0},As={endpoint:"signupNewUser",A:function(t){if(gs(t),!t.password)throw new E("weak-password")},G:vs,V:!0,B:!0},Ps={endpoint:"createAuthUri",B:!0},Rs={endpoint:"deleteAccount",O:["idToken"]},Ds={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new E("internal-error")}},Ms={endpoint:"emailLinkSignin",O:["email","oobCode"],A:gs,G:vs,V:!0,B:!0},Os={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:gs,G:vs,V:!0},Ls={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:_s,G:vs,B:!0,Na:!0},Fs={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:_s,G:vs,B:!0,Na:!0},js={endpoint:"getAccountInfo"},Bs={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new E("internal-error");gs(t)},Z:"email",B:!0},Gs={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new E("internal-error")},Z:"email",B:!0},Us={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new E("internal-error")},Z:"email",B:!0},Vs={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new E("internal-error");gs(t)},Z:"email",B:!0},qs={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},zs={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new E("internal-error")}},Hs={endpoint:"resetPassword",A:Es,Z:"email",B:!0},$s={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Ws={endpoint:"setAccountInfo",O:["idToken"],A:ms,V:!0},Ks={endpoint:"setAccountInfo",O:["idToken"],A:function(t){if(ms(t),!t.password)throw new E("weak-password")},G:vs,V:!0},Ys={endpoint:"signupNewUser",G:vs,V:!0,B:!0},Xs={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new E("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new E("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new E("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new E("internal-error")},B:!0,Na:!0},Qs={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new E("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new E("internal-error")},B:!0,Na:!0},Js={endpoint:"verifyAssertion",A:ws,Za:Ss,G:Ts,V:!0,B:!0},Zs={endpoint:"verifyAssertion",A:ws,Za:Ss,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new E("user-not-found");if(t.errorMessage)throw uu(t.errorMessage);vs(t)},V:!0,B:!0},tu={endpoint:"verifyAssertion",A:function(t){if(ws(t),!t.idToken)throw new E("internal-error")},Za:Ss,G:Ts,V:!0},eu={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new E("invalid-custom-token")},G:vs,V:!0,B:!0},nu={endpoint:"verifyPassword",A:function(t){if(gs(t),!t.password)throw new E("wrong-password")},G:vs,V:!0,B:!0},ru={endpoint:"verifyPhoneNumber",A:ys,G:vs,B:!0},iu={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new E("internal-error");ys(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Qo(t);vs(t)}},ou={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ys,G:vs,B:!0},au={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[ns]^!!t.refreshToken)throw new E("internal-error")},B:!0,Na:!0};function su(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.O))return Pe(new E("internal-error"));var r,i=!!e.Na,o=e.Vb||"POST";return Ae(n).then(e.A).then((function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),ps(t,i?t.i:t.h,e.endpoint,o,n,e.Ib,e.mb||!1)})).then((function(t){return r=t,e.Za?e.Za(n,r):r})).then(e.G).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new E("internal-error");return r[e.Z]}))}function uu(t){return cu({error:{errors:[{message:t}],code:400,message:t}})}function cu(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new E(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",yt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new E(r[i],e);return!e&&t&&(e=Br(t)),new E("internal-error",e)}function lu(t){this.b=t,this.a=null,this.sb=function(t){return(pu||(pu=new Te((function(t,e){function n(){zr(),Dr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){zr(),e(Error("Network Error"))},timeout:du.get()})}if(Dr("gapi.iframes.Iframe"))t();else if(Dr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();u[r]=function(){Dr("gapi.load")?n():e(Error("Network Error"))},Ae(Wa(r=Ct(hu,{onload:r}))).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw pu=null,t})))).then((function(){return new Te((function(e,n){Dr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Dr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),fu.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var hu=new _t(xt,"https://apis.google.com/js/api.js?onload=%{onload}"),du=new Hr(3e4,6e4),fu=new Hr(5e3,15e3),pu=null;function gu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,this.g?t=qn((t=Vn(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):t=qn("https",this.l,null,"/__/auth/iframe"),this.a=t,Gn(this.a,"apiKey",this.h),Gn(this.a,"appName",this.i),this.b=null,this.c=[]}function mu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function vu(t){try{return r.default.app(t).auth().Ga()}catch(t){return[]}}function yu(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function bu(t){var e=fr();return function(t){return su(t,qs,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=Vn(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=Vn(o).a==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:br.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){t=!0;break t}}t=!1}if(!t)throw new Yo(fr())}))}function _u(t){return t.m||(t.m=wr().then((function(){if(!t.u){var e=t.c,n=t.i,r=vu(t.b),i=new gu(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=Z(r||[]),t.u=i.toString()}t.v=new lu(t.u),function(t){if(!t.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.sb.then((function(){t.a.register("authEvent",e,Dr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.v,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Ho(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Ae(n)}return n.status="ERROR",Ae(n)}))}(t)}))),t.m}function wu(t){return t.l||(t.C=t.c?Pr(t.c,vu(t.b)):null,t.l=new ts(t.g,D(t.i),t.C),t.f&&us(t.l,t.f)),t.l}function Su(t,e,n,r,i,o,a,s,u,c,l,h){return(t=new mu(t,e,n,r,i,h)).l=o,t.g=a,t.i=s,t.b=mt(u||null),t.f=c,t.zb(l).toString()}function Tu(t){if(this.a=t||r.default.INTERNAL.reactNative&&r.default.INTERNAL.reactNative.AsyncStorage,!this.a)throw new E("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function xu(t){this.b=t,this.a={},this.f=S(this.c,this)}gu.prototype.toString=function(){return this.f?Gn(this.a,"v",this.f):er(this.a.b,"v"),this.b?Gn(this.a,"eid",this.b):er(this.a.b,"eid"),this.c.length?Gn(this.a,"fw",this.c.join(",")):er(this.a.b,"fw"),this.a.toString()},mu.prototype.zb=function(t){return this.h=t,this},mu.prototype.toString=function(){if(this.v){var t=Vn(this.v.url);t=qn(t.c,t.a,t.g,"/emulator/auth/handler")}else t=qn("https",this.u,null,"/__/auth/handler");if(Gn(t,"apiKey",this.s),Gn(t,"appName",this.c),Gn(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=r.default.app(this.c).auth().la()}catch(t){n=null}for(var i in e.pb=n,Gn(t,"providerId",this.a.providerId),e=Gr((n=this.a).Jb))e[i]=e[i].toString();i=n.Qc,e=mt(e);for(var o=0;o<i.length;o++){var a=i[o];a in e&&delete e[a]}n.qb&&n.pb&&!e[n.qb]&&(e[n.qb]=n.pb),gt(e)||Gn(t,"customParameters",Br(e))}if("function"==typeof this.a.Rb&&((n=this.a.Rb()).length&&Gn(t,"scopes",n.join(","))),this.l?Gn(t,"redirectUrl",this.l):er(t.b,"redirectUrl"),this.g?Gn(t,"eventId",this.g):er(t.b,"eventId"),this.i?Gn(t,"v",this.i):er(t.b,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!Un(t,s)&&Gn(t,s,this.b[s]);return this.h?Gn(t,"tid",this.h):er(t.b,"tid"),this.f?Gn(t,"eid",this.f):er(t.b,"eid"),(s=vu(this.c)).length&&Gn(t,"fw",s.join(",")),t.toString()},(t=yu.prototype).Pb=function(t,e,n){var r=new E("popup-closed-by-user"),i=new E("web-storage-unsupported"),o=this,a=!1;return this.ma().then((function(){(function(t){var e={type:"webStorageSupport"};return _u(t).then((function(){return function(t,e){return t.sb.then((function(){return new Te((function(n){t.a.send(e.type,e,n,Dr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.v,e)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&vr(t),e(i),a=!0)}))})).o((function(){})).then((function(){if(!a)return function(t){return new Te((function(e){return function n(){Nn(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!a)return Nn(n).then((function(){e(r)}))}))},t.Yb=function(){var t=Rr();return!jr(t)&&!qr(t)},t.Ub=function(){return!1},t.Nb=function(t,e,n,r,i,o,a,s){if(!t)return Pe(new E("popup-blocked"));if(a&&!jr())return this.ma().o((function(e){vr(t),i(e)})),r(),Ae();this.a||(this.a=bu(wu(this)));var u=this;return this.a.then((function(){var e=u.ma().o((function(e){throw vr(t),i(e),e}));return r(),e})).then((function(){(qo(n),a)||pr(Su(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,s,u.f),t)})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Ob=function(t,e,n,r){this.a||(this.a=bu(wu(this)));var i=this;return this.a.then((function(){qo(e),pr(Su(i.s,i.g,i.b,t,e,fr(),n,i.c,void 0,i.i,r,i.f))})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.ma=function(){var t=this;return _u(this).then((function(){return t.v.sb})).o((function(){throw t.a=null,new E("network-request-failed")}))},t.ac=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Ta=function(t){Q(this.h,(function(e){return e==t}))},(t=Tu.prototype).get=function(t){return Ae(this.a.getItem(t)).then((function(t){return t&&Ur(t)}))},t.set=function(t,e){return Ae(this.a.setItem(t,Br(e)))},t.U=function(t){return Ae(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var Iu,ku=[];function Eu(t,e,n){gt(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function Cu(t){this.a=t}function Nu(t){this.c=t,this.b=!1,this.a=[]}function Au(t,e,n,r){var i,o,a,s,u=n||{},c=null;if(t.b)return Pe(Error("connection_unavailable"));var l=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new Te((function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),a=setTimeout((function(){r(Error("unsupported_event"))}),l),o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(a),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(s),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))},c={messageChannel:h,onMessage:o},t.a.push(c),h.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))})).then((function(e){return Pu(t,c),e})).o((function(e){throw Pu(t,c),e}))}function Pu(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),Q(t.a,(function(t){return t==e}))}}function Ru(){if(!Lu())throw new E("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=u.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;xr()&&self?(this.v=function(){var t=xr()?self:null;if(H(ku,(function(n){n.b==t&&(e=n)})),!e){var e=new xu(t);ku.push(e)}return e}(),Eu(this.v,"keyChanged",(function(e,n){return Uu(t).then((function(e){return 0<e.length&&H(t.a,(function(t){t(e)})),{keyProcessed:Y(e,n.key)}}))})),Eu(this.v,"ping",(function(){return Ae(["keyChanged"])}))):function(){var t=u.navigator;return t&&t.serviceWorker?Ae().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):Ae(null)}().then((function(e){(t.h=e)&&(t.g=new Nu(new Cu(e)),Au(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&Y(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function Du(t){return new Te((function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new Te((function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(t).then((function(){return Du(t)})).then((function(t){e(t)})).o((function(t){n(t)}))}}))}function Mu(t){return t.i||(t.i=Du(t)),t.i}function Ou(t,e){var n=0;return new Te((function r(i,o){Mu(t).then(e).then(i).o((function(e){if(!(3<++n))return Mu(t).then((function(e){return e.close(),t.i=void 0,r(i,o)})).o((function(t){o(t)}));o(e)}))}))}function Lu(){try{return!!u.indexedDB}catch(t){return!1}}function Fu(t){return t.objectStore("firebaseLocalStorage")}function ju(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Bu(t){return new Te((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Gu(t,e){return t.g&&t.h&&function(){var t=u.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Au(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):Ae()}function Uu(t){return Mu(t).then((function(t){var e=Fu(ju(t,!1));return e.getAll?Bu(e.getAll()):new Te((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=gr(t.c,n),t.c=n}return r}))}function Vu(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function qu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Ae().then((function(){if(Lu()){var t=Vr(),r="__sak"+t;return Iu||(Iu=new Ru),(n=Iu).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){H(e.a,(function(e){e(t)}))})),t}))}function zu(){this.a={},this.type="inMemory"}function Hu(){if(!function(){var t="Node"==Ir();if(t=$u()||t&&r.default.INTERNAL.node&&r.default.INTERNAL.node.localStorage,!t)return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Ir())throw new E("internal-error","The LocalStorage compatibility library was not found.");throw new E("web-storage-unsupported")}this.a=$u()||r.default.INTERNAL.node.localStorage,this.type="localStorage"}function $u(){try{var t=u.localStorage,e=Vr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Wu(){this.type="nullStorage"}function Ku(){if(!function(){var t="Node"==Ir();if(t=Yu()||t&&r.default.INTERNAL.node&&r.default.INTERNAL.node.sessionStorage,!t)return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Ir())throw new E("internal-error","The SessionStorage compatibility library was not found.");throw new E("web-storage-unsupported")}this.a=Yu()||r.default.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Yu(){try{var t=u.sessionStorage,e=Vr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Xu(){var t={};t.Browser=Zu,t.Node=tc,t.ReactNative=ec,t.Worker=nc,this.a=t[Ir()]}xu.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];H(r,(function(e){i.push(Ae().then((function(){return e(t.origin,t.data.data)})))})),De(i).then((function(r){var i=[];H(r,(function(t){i.push({fulfilled:t.Qb,value:t.value,reason:t.reason?t.reason.message:void 0})})),H(i,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},Cu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Nu.prototype.close=function(){for(;0<this.a.length;)Pu(this,this.a[0]);this.b=!0},(t=Ru.prototype).set=function(t,e){var n=this,r=!1;return Ou(this,(function(e){return Bu((e=Fu(ju(e,!0))).get(t))})).then((function(i){return Ou(n,(function(o){if(o=Fu(ju(o,!0)),i)return i.value=e,Bu(o.put(i));n.b++,r=!0;var a={};return a.fbase_key=t,a.value=e,Bu(o.add(a))}))})).then((function(){return n.c[t]=e,Gu(n,t)})).oa((function(){r&&n.b--}))},t.get=function(t){return Ou(this,(function(e){return Bu(Fu(ju(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.U=function(t){var e=this,n=!1;return Ou(this,(function(r){return n=!0,e.b++,Bu(Fu(ju(r,!0)).delete(t))})).then((function(){return delete e.c[t],Gu(e,t)})).oa((function(){n&&e.b--}))},t.ca=function(t){0==this.a.length&&function(t){function e(){t.f=setTimeout((function(){t.l=Uu(t).then((function(e){0<e.length&&H(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}Vu(t),e()}(this),this.a.push(t)},t.ia=function(t){Q(this.a,(function(e){return e==t})),0==this.a.length&&Vu(this)},(t=qu.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.U=function(t){return this.b.then((function(e){return e.U(t)}))},t.ca=function(t){this.a.push(t)},t.ia=function(t){Q(this.a,(function(e){return e==t}))},(t=zu.prototype).get=function(t){return Ae(this.a[t])},t.set=function(t,e){return this.a[t]=e,Ae()},t.U=function(t){return delete this.a[t],Ae()},t.ca=function(){},t.ia=function(){},(t=Hu.prototype).get=function(t){var e=this;return Ae().then((function(){return Ur(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Ae().then((function(){var r=Br(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return Ae().then((function(){e.a.removeItem(t)}))},t.ca=function(t){u.window&&dn(u.window,"storage",t)},t.ia=function(t){u.window&&gn(u.window,"storage",t)},(t=Wu.prototype).get=function(){return Ae(null)},t.set=function(){return Ae()},t.U=function(){return Ae()},t.ca=function(){},t.ia=function(){},(t=Ku.prototype).get=function(t){var e=this;return Ae().then((function(){return Ur(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Ae().then((function(){var r=Br(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return Ae().then((function(){e.a.removeItem(t)}))},t.ca=function(){},t.ia=function(){};var Qu,Ju,Zu={F:Hu,cb:Ku},tc={F:Hu,cb:Ku},ec={F:Tu,cb:Wu},nc={F:Hu,cb:Wu},rc={rd:"local",NONE:"none",td:"session"};function ic(){var t=!(qr(Rr())||!Tr()),e=jr(),n=Mr();this.m=t,this.h=e,this.l=n,this.a={},Qu||(Qu=new Xu),t=Qu;try{this.g=!dr()&&Kr()||!u.indexedDB?new t.a.F:new qu(xr()?new zu:new t.a.F)}catch(t){this.g=new zu,this.h=!0}try{this.i=new t.a.cb}catch(t){this.i=new zu}this.v=new zu,this.f=S(this.Zb,this),this.b={}}function oc(){return Ju||(Ju=new ic),Ju}function ac(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function sc(t,e){return"firebase:"+t.name+(e?":"+e:"")}function uc(t,e,n){return n=sc(e,n),"local"==e.F&&(t.b[n]=null),ac(t,e.F).U(n)}function cc(t){t.c&&(clearInterval(t.c),t.c=null)}function lc(t){this.a=t,this.b=oc()}(t=ic.prototype).get=function(t,e){return ac(this,t.F).get(sc(t,e))},t.set=function(t,e,n){var r=sc(t,n),i=this,o=ac(this,t.F);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.F&&(i.b[r]=e)}))},t.addListener=function(t,e,n){t=sc(t,e),this.l&&(this.b[t]=u.localStorage.getItem(t)),gt(this.a)&&(ac(this,"local").ca(this.f),this.h||(dr()||!Kr())&&u.indexedDB||!this.l||function(t){cc(t),t.c=setInterval((function(){for(var e in t.a){var n=u.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new tn({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Zb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=sc(t,e),this.a[t]&&(Q(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),gt(this.a)&&(ac(this,"local").ia(this.f),cc(this))},t.Zb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=u.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.nb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?ac(this,"local").ia(this.f):cc(this),this.m)if(n=u.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?u.localStorage.setItem(e,r):u.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===u.localStorage.getItem(e)||(o.b[e]=u.localStorage.getItem(e),o.nb(e))},Xt&&ce&&10==ce&&u.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else H(t,S(this.nb,this))},t.nb=function(t){this.a[t]&&H(this.a[t],(function(t){t()}))};var hc,dc={name:"authEvent",F:"local"};function fc(){this.a=oc()}function pc(t,e){this.b=gc,this.f=u.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=u.Int32Array?new Int32Array(64):Array(64),void 0===hc&&(hc=u.Int32Array?new Int32Array(Sc):Sc),this.reset()}I(pc,(function(){this.b=-1}));for(var gc=64,mc=gc-1,vc=[],yc=0;yc<mc;yc++)vc[yc]=0;var bc=J(128,vc);function _c(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+a|0}r=0|t.a[0],i=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],c=0|t.a[4],l=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var d=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&l^~c&h)+(0|hc[e])|0)+(0|n[e])|0)|0,o=h,h=l,l=c,c=u+a|0,u=s,s=i,i=r,r=a+d|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+l|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function wc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(_c(t),i=0);else{if(!p(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(_c(t),i=0)}}t.c=i,t.g+=n}pc.prototype.reset=function(){this.g=this.c=0,this.a=u.Int32Array?new Int32Array(this.h):Z(this.h)};var Sc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Tc(){pc.call(this,8,xc)}I(Tc,pc);var xc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Ic(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new fc,this.g=new lc(this.h),this.f=null,this.b=[],this.a=this.c=null}function kc(t){return new E("invalid-cordova-configuration",t)}function Ec(t){var e=new Tc;wc(e,t),t=[];var n=8*e.g;56>e.c?wc(e,bc,56-e.c):wc(e,bc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(_c(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return W(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}function Cc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function Nc(t){return t.f||(t.f=t.ma().then((function(){return new Te((function(e){t.Ea((function n(r){return e(r),t.Ta(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),Ac(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=uo(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Ur(Un(o=Vn(i),"firebaseError")||null))?C(o):null)?new zo(r.c,r.b,null,null,o,null,r.T()):new zo(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}Cc(t,i)}))}var n=new zo("unknown",null,null,null,new E("no-auth-event")),r=!1,i=Nn(500).then((function(){return Ac(t).then((function(){r||Cc(t,n)}))})),o=u.handleOpenURL;u.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Dr("BuildInfo.packageName",u).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(t){console.error(t)}},Ko||(Ko=new $o),function(t){var e=Ko;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=Dr("universalLinks.subscribe",u))&&t(null,e.b))}(e)}(t)}))}))),t.f}function Ac(t){var e=null;return function(t){return t.b.get(dc,t.a).then((function(t){return Ho(t)}))}(t.g).then((function(n){return e=n,uc((n=t.g).b,dc,n.a)})).then((function(){return e}))}function Pc(t){this.a=t,this.b=oc()}(t=Ic.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(Sr(void 0)?wr().then((function(){return new Te((function(t,e){var n=u.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):Pe(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof Dr("universalLinks.subscribe",u))throw kc("cordova-universal-links-plugin-fix is not installed");if(void 0===Dr("BuildInfo.packageName",u))throw kc("cordova-plugin-buildinfo is not installed");if("function"!=typeof Dr("cordova.plugins.browsertab.openUrl",u))throw kc("cordova-plugin-browsertab is not installed");if("function"!=typeof Dr("cordova.InAppBrowser.open",u))throw kc("cordova-plugin-inappbrowser is not installed")}),(function(){throw new E("cordova-not-ready")}))},t.Pb=function(t,e){return e(new E("operation-not-supported-in-this-environment")),Ae()},t.Nb=function(){return Pe(new E("operation-not-supported-in-this-environment"))},t.ac=function(){return!1},t.Yb=function(){return!0},t.Ub=function(){return!0},t.Ob=function(t,e,n,r){if(this.c)return Pe(new E("redirect-operation-pending"));var i=this,o=u.document,a=null,s=null,c=null,l=null;return this.c=Ae().then((function(){return qo(e),Nc(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new zo(e,r,null,o,new E("no-auth-event"),null,i),s=Dr("BuildInfo.packageName",u);if("string"!=typeof s)throw new E("invalid-cordova-configuration");var c=Dr("BuildInfo.displayName",u),l={};if(Rr().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=s;else{if(!Rr().toLowerCase().match(/android/))return Pe(new E("operation-not-supported-in-this-environment"));l.apn=s}c&&(l.appDisplayName=c),o=Ec(o),l.sessionId=o;var h=Su(t.v,t.i,t.l,e,n,null,r,t.m,l,t.u,i,t.s);return t.ma().then((function(){var e=t.h;return t.C.a.set(dc,a.w(),e)})).then((function(){var e=Dr("cordova.plugins.browsertab.isAvailable",u);if("function"!=typeof e)throw new E("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=Dr("cordova.plugins.browsertab.openUrl",u)))throw new E("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=Dr("cordova.InAppBrowser.open",u)))throw new E("invalid-cordova-configuration");e=Rr(),t.a=n(h,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new Te((function(t,e){s=function(){var e=Dr("cordova.plugins.browsertab.close",u);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(s),c=function(){a||(a=Nn(2e3).then((function(){e(new E("redirect-cancelled-by-user"))})))},l=function(){$r()&&c()},o.addEventListener("resume",c,!1),Rr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)})).o((function(t){return Ac(i).then((function(){throw t}))}))})).oa((function(){c&&o.removeEventListener("resume",c,!1),l&&o.removeEventListener("visibilitychange",l,!1),a&&a.cancel(),s&&i.Ta(s),i.c=null}))},t.Ea=function(t){this.b.push(t),Nc(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new zo("unknown",null,null,null,new E("no-auth-event")),t(e))}))},t.Ta=function(t){Q(this.b,(function(e){return e==t}))};var Rc={name:"pendingRedirect",F:"session"};function Dc(t){return uc(t.b,Rc,t.a)}function Mc(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=S(this.s,this),this.b=new Yc,this.C=new tl,this.g=new Pc(Wc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Oc(this.D,this.v,this.m,N,this.J)}function Oc(t,e,n,i,o){var a=r.default.SDK_VERSION||null;return Sr()?new Ic(t,e,n,a,i,o):new yu(t,e,n,a,i,o)}function Lc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o((function(n){throw t.a==e&&t.reset(),n}))}function Fc(t){t.a.Yb()&&Lc(t).o((function(e){var n=new zo("unknown",null,null,null,new E("operation-not-supported-in-this-environment"));qc(e)&&t.s(n)})),t.a.Ub()||Xc(t.b)}function jc(t,e){Y(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(Rc,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?Dc(t.g).then((function(){Lc(t).o((function(e){var n=new zo("unknown",null,null,null,new E("operation-not-supported-in-this-environment"));qc(e)&&t.s(n)}))})):Fc(t)})).o((function(){Fc(t)}))}function Bc(t,e){Q(t.h,(function(t){return t==e}))}Mc.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=Oc(this.D,this.v,this.m,null,this.J),this.i={}},Mc.prototype.s=function(t){if(!t)throw new E("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Gb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=Date.now())),e=!0;break}}return Xc(this.b),e};var Gc=new Hr(2e3,1e4),Uc=new Hr(3e4,6e4);function Vc(t,e,n,r,i,o,a){return t.a.Nb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,a)}function qc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function zc(t,e,n,r,i){var o;return function(t){return t.b.set(Rc,"pending",t.a)}(t.g).then((function(){return t.a.Ob(e,n,r,i).o((function(e){if(qc(e))throw new E("operation-not-supported-in-this-environment");return o=e,Dc(t.g).then((function(){throw o}))})).then((function(){return t.a.ac()?new Te((function(){})):Dc(t.g).then((function(){return t.ra()})).then((function(){})).o((function(){}))}))}))}function Hc(t,e,n,r,i){return t.a.Pb(r,(function(t){e.na(n,null,t,i)}),Gc.get())}Mc.prototype.ra=function(){return this.b.ra()};var $c={};function Wc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Kc(t,e,n,r){var i=Wc(e,n,r);return $c[i]||($c[i]=new Mc(t,e,n,r)),$c[i]}function Yc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Xc(t){t.g||(t.g=!0,Zc(t,!1,null,null))}function Qc(t){t.g&&!t.i&&Zc(t,!1,null,null)}function Jc(t,e){if(t.b=function(){return Ae(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Zc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Pe(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Jc(t,n):Jc(t,{user:null}),t.f=[],t.c=[]}function tl(){}function el(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(t){this.jb=t},enumerable:!1})}function nl(t,e){this.a=e,Zr(this,"verificationId",t)}function rl(t,e,n,r){return new Go(t).gb(e,n).then((function(t){return new nl(t,r)}))}function il(t){var e=Ki(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new E("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");ti(this,{token:t,expirationTime:Wr(1e3*e.exp),authTime:Wr(1e3*e.auth_time),issuedAtTime:Wr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function ol(t,e,n){var r=e&&e[sl];if(!r)throw new E("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=mt(e),this.g=n,this.c=new co(null,r),this.b=[];var i=this;H(e[al]||[],(function(t){(t=ii(t))&&i.b.push(t)})),Zr(this,"auth",this.a),Zr(this,"session",this.c),Zr(this,"hints",this.b)}Yc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Yc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Zc(this,!0,null,t.a),Ae()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,a=e.T(),s=!!e.c.match(/Redirect$/);n(r,i,a,o).then((function(e){Zc(t,s,e,null)})).o((function(e){Zc(t,s,null,e)}))}(this,t,e):Pe(new E("invalid-auth-event")):(Zc(this,!1,null,null),Ae())}else Pe(new E("invalid-auth-event"))},Yc.prototype.ra=function(){var t=this;return new Te((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new E("timeout");t.a&&t.a.cancel(),t.a=Nn(Uc.get()).then((function(){t.b||(t.g=!0,Zc(t,!0,null,e))}))}(t))}))},tl.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),Ae()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then((function(t){e.na(r,t,null,n)})).o((function(t){e.na(r,null,t,n)}))}(t,e):Pe(new E("invalid-auth-event"))}else Pe(new E("invalid-auth-event"))},nl.prototype.confirm=function(t){return t=Uo(this.verificationId,t),this.a(t)};var al="mfaInfo",sl="mfaPendingCredential";function ul(t,e,n,r){E.call(this,"multi-factor-auth-required",r,e),this.b=new ol(t,e,n),Zr(this,"resolver",this.b)}function cl(t,e,n){if(t&&m(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new ul(e,t.serverResponse,n,t.message)}catch(t){}return null}function ll(){}function hl(t){Zr(this,"factorId",t.fa),this.a=t}function dl(t){if(hl.call(this,t),this.a.fa!=Go.PROVIDER_ID)throw new E("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function fl(t,e){for(var n in Ze.call(this,t),e)this[n]=e[n]}function pl(t,e){this.a=t,this.b=[],this.c=S(this.yc,this),dn(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&H(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[si]=t.uid),t.displayName&&(r[oi]=t.displayName),t.enrollmentTime&&(r[ai]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[ui]=t.phoneNumber);try{e=new ci(r)}catch(t){}t=e}else t=null;t&&n.push(t)})),gl(this,n)}function gl(t,e){t.b=e,Zr(t,"enrolledFactors",e)}function ml(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function vl(t,e){t.stop(),t.b=Nn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then((function(){return function(){var t=u.document,e=null;return $r()||!t?Ae():new Te((function(n){e=function(){$r()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return t.h()})).then((function(){vl(t,!0)})).o((function(e){t.i(e)&&vl(t,!1)}))}function yl(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function bl(t,e){void 0===e&&(t.b?e=(e=t.b).a-e.g:e=0),t.c=Date.now()+1e3*e}function _l(t,e){t.b=Wi(e[ns]||""),t.a=e.refreshToken,bl(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function wl(t,e){return function(t,e){return new Te((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?hs(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(cu(t)):t.access_token&&t.refresh_token?n(t):r(new E("internal-error")):r(new E("network-request-failed"))}),"POST",tr(e).toString(),t.g,t.m.get()):r(new E("internal-error"))}))}(t.f,e).then((function(e){return t.b=Wi(e.access_token),t.a=e.refresh_token,bl(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}function Sl(t,e){this.a=t||null,this.b=e||null,ti(this,{lastSignInTime:Wr(e||null),creationTime:Wr(t||null)})}function Tl(t,e,n,r,i,o){ti(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function xl(t,e,n){this.N=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var i=r.default.SDK_VERSION?Pr(r.default.SDK_VERSION):null;this.a=new ts(this.l,D(N),i),(this.u=t.emulatorConfig||null)&&us(this.a,this.u),this.h=new yl(this.a),Dl(this,e[ns]),_l(this.h,e),Zr(this,"refreshToken",this.h.a),Ll(this,n||{}),xn.call(this),this.P=!1,this.s&&Or()&&(this.b=Kc(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=function(t){return new ml((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=t.h.c-Date.now()-3e5;return 0<e?e:0}))}(this),this.ba=S(this.ib,this);var o=this;this.za=null,this.Pa=function(t){o.xa(t.h)},this.qa=null,this.Ba=function(t){Il(o,t.c)},this.$=null,this.aa=[],this.Oa=function(t){Cl(o,t.f)},this.ja=null,this.S=new pl(this,n),Zr(this,"multiFactor",this.S)}function Il(t,e){t.u=e,us(t.a,e),t.b&&(e=t.b,t.b=Kc(t.s,t.l,t.m,t.u),t.P&&(Bc(e,t),jc(t.b,t)))}function kl(t,e){t.qa&&gn(t.qa,"languageCodeChanged",t.Pa),(t.qa=e)&&dn(e,"languageCodeChanged",t.Pa)}function El(t,e){t.$&&gn(t.$,"emulatorConfigChanged",t.Ba),(t.$=e)&&dn(e,"emulatorConfigChanged",t.Ba)}function Cl(t,e){t.aa=e,ls(t.a,r.default.SDK_VERSION?Pr(r.default.SDK_VERSION,t.aa):null)}function Nl(t,e){t.ja&&gn(t.ja,"frameworkChanged",t.Oa),(t.ja=e)&&dn(e,"frameworkChanged",t.Oa)}function Al(t){try{return r.default.app(t.m).auth()}catch(e){throw new E("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function Pl(t){t.J||t.D.b||(t.D.start(),gn(t,"tokenChanged",t.ba),dn(t,"tokenChanged",t.ba))}function Rl(t){gn(t,"tokenChanged",t.ba),t.D.stop()}function Dl(t,e){t.Aa=e,Zr(t,"_lat",e)}function Ml(t){for(var e=[],n=0;n<t.W.length;n++)e.push(t.W[n](t));return De(e).then((function(){return t}))}function Ol(t){t.b&&!t.P&&(t.P=!0,jc(t.b,t))}function Ll(t,e){ti(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new Sl(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Fl(){}function jl(t){return Ae().then((function(){if(t.J)throw new E("app-deleted")}))}function Bl(t){return W(t.providerData,(function(t){return t.providerId}))}function Gl(t,e){e&&(Ul(t,e.providerId),t.providerData.push(e))}function Ul(t,e){Q(t.providerData,(function(t){return t.providerId==e}))}function Vl(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Zr(t,e,n)}function ql(t,e){t!=e&&(ti(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?Zr(t,"metadata",function(t){return new Sl(t.a,t.b)}(e.metadata)):Zr(t,"metadata",new Sl),H(e.providerData,(function(e){Gl(t,e)})),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.h,e.h),Zr(t,"refreshToken",t.h.a),gl(t.S,e.S.b))}function zl(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return su(t.a,js,{idToken:e}).then(S(t.Kc,t))}(t,e).then((function(){return n||Vl(t,"isAnonymous",!1),e}))}))}function Hl(t,e){e[ns]&&t.Aa!=e[ns]&&(_l(t.h,e),t.dispatchEvent(new fl("tokenChanged")),Dl(t,e[ns]),Vl(t,"refreshToken",t.h.a))}function $l(t,e){return zl(t).then((function(){if(Y(Bl(t),e))return Ml(t).then((function(){throw new E("provider-already-linked")}))}))}function Wl(t,e,n){return ei({user:t,credential:Vo(e),additionalUserInfo:e=Zi(e),operationType:n})}function Kl(t,e){return Hl(t,e),t.reload().then((function(){return t}))}function Yl(t,e,n,i,o){if(!Or())return Pe(new E("operation-not-supported-in-this-environment"));if(t.i&&!o)return Pe(t.i);var a=Ji(n.providerId),s=Vr(t.uid+":::"),u=null;(!jr()||Tr())&&t.s&&n.isOAuthProvider&&(u=Su(t.s,t.l,t.m,e,n,null,s,r.default.SDK_VERSION||null,null,null,t.tenantId,t.u));var c=yr(u,a&&a.va,a&&a.ua);return i=i().then((function(){if(Ql(t),!o)return t.I().then((function(){}))})).then((function(){return Vc(t.b,c,e,n,s,!!u,t.tenantId)})).then((function(){return new Te((function(n,r){t.na(e,null,new E("cancelled-popup-request"),t.g||null),t.f=n,t.C=r,t.g=s,t.c=Hc(t.b,t,e,c,s)}))})).then((function(t){return c&&vr(c),t?ei(t):null})).o((function(t){throw c&&vr(c),t})),Jl(t,i,o)}function Xl(t,e,n,r,i){if(!Or())return Pe(new E("operation-not-supported-in-this-environment"));if(t.i&&!i)return Pe(t.i);var o=null,a=Vr(t.uid+":::");return r=r().then((function(){if(Ql(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=a,Ml(t)})).then((function(e){return t.ha&&(e=(e=t.ha).b.set(eh,t.w(),e.a)),e})).then((function(){return zc(t.b,e,n,a,t.tenantId)})).o((function(e){if(o=e,t.ha)return nh(t.ha);throw o})).then((function(){if(o)throw o})),Jl(t,r,i)}function Ql(t){if(!t.b||!t.P){if(t.b&&!t.P)throw new E("internal-error");throw new E("auth-domain-config-required")}}function Jl(t,e,n){var r=function(t,e,n){return t.i&&!n?(e.cancel(),Pe(t.i)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.i||t.dispatchEvent(new fl("userInvalidated")),t.i=e),e}))}(t,e,n);return t.N.push(r),r.oa((function(){X(t.N,r)})),r.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=cl(e.w(),Al(t),S(t.jc,t))),n||e}))}function Zl(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[ns]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new xl(e,n,t);return t.providerData&&H(t.providerData,(function(t){t&&Gl(i,ei(t))})),t.redirectEventId&&(i.ga=t.redirectEventId),i}function th(t){this.a=t,this.b=oc()}ol.prototype.Rc=function(t){var e=this;return t.tb(this.a.a,this.c).then((function(t){var n=mt(e.f);return delete n[al],delete n[sl],yt(n,t),e.g(n)}))},I(ul,E),ll.prototype.tb=function(t,e,n){return e.type==lo?function(t,e,n,r){return n.Ha().then((function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),yt(n,{phoneVerificationInfo:Bo(t.a)}),su(e,Ls,n)}))}(this,t,e,n):function(t,e,n){return n.Ha().then((function(n){return yt(n={mfaPendingCredential:n},{phoneVerificationInfo:Bo(t.a)}),su(e,Fs,n)}))}(this,t,e)},I(hl,ll),I(dl,hl),I(fl,Ze),(t=pl.prototype).yc=function(t){gl(this,function(t){var e=[];return H(t.mfaInfo||[],(function(t){(t=ii(t))&&e.push(t)})),e}(t.hd))},t.Sb=function(){return this.a.I().then((function(t){return new co(t,null)}))},t.fc=function(t,e){var n=this,r=this.a.a;return this.Sb().then((function(n){return t.tb(r,n,e)})).then((function(t){return Hl(n.a,t),n.a.reload()}))},t.bd=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return su(r,au,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=$(e.b,(function(t){return t.uid!=n}));return gl(e,r),Hl(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},t.w=function(){return{multiFactor:{enrolledFactors:W(this.b,(function(t){return t.w()}))}}},ml.prototype.start=function(){this.a=this.c,vl(this,!0)},ml.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},yl.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},yl.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Pe(new E("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?wl(this,{grant_type:"refresh_token",refresh_token:this.a}):Ae(null):Ae({accessToken:this.b.toString(),refreshToken:this.a})},Sl.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},I(xl,xn),xl.prototype.xa=function(t){this.za=t,ss(this.a,t)},xl.prototype.la=function(){return this.za},xl.prototype.Ga=function(){return Z(this.aa)},xl.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())},Zr(xl.prototype,"providerId","firebase"),(t=xl.prototype).reload=function(){var t=this;return Jl(this,jl(this).then((function(){return zl(t).then((function(){return Ml(t)})).then(Fl)})))},t.oc=function(t){return this.I(t).then((function(t){return new il(t)}))},t.I=function(t){var e=this;return Jl(this,jl(this).then((function(){return e.h.getToken(t)})).then((function(t){if(!t)throw new E("internal-error");return t.accessToken!=e.Aa&&(Dl(e,t.accessToken),e.dispatchEvent(new fl("tokenChanged"))),Vl(e,"refreshToken",t.refreshToken),t.accessToken})))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new E("internal-error");Ll(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?W(t,(function(t){return new Tl(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)Gl(this,e[n]);Vl(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new fl("userReloaded",{hd:t}))},t.Lc=function(t){return Qr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(t)},t.ub=function(t){var e=this,n=null;return Jl(this,t.c(this.a,this.uid).then((function(t){return Hl(e,t),n=Wl(e,t,"reauthenticate"),e.i=null,e.reload()})).then((function(){return n})),!0)},t.Cc=function(t){return Qr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(t)},t.rb=function(t){var e=this,n=null;return Jl(this,$l(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=Wl(e,t,"link"),Kl(e,t)})).then((function(){return n})))},t.Dc=function(t,e){var n=this;return Jl(this,$l(this,"phone").then((function(){return rl(Al(n),t,e,S(n.rb,n))})))},t.Mc=function(t,e){var n=this;return Jl(this,Ae().then((function(){return rl(Al(n),t,e,S(n.ub,n))})),!0)},t.Cb=function(t){var e=this;return Jl(this,this.I().then((function(n){return e.a.Cb(n,t)})).then((function(t){return Hl(e,t),e.reload()})))},t.ed=function(t){var e=this;return Jl(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return Hl(e,t),e.reload()})))},t.Db=function(t){var e=this;return Jl(this,this.I().then((function(n){return e.a.Db(n,t)})).then((function(t){return Hl(e,t),e.reload()})))},t.Eb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return jl(this);var e=this;return Jl(this,this.I().then((function(n){return e.a.Eb(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return Hl(e,t),Vl(e,"displayName",t.displayName||null),Vl(e,"photoURL",t.photoUrl||null),H(e.providerData,(function(t){"password"===t.providerId&&(Zr(t,"displayName",e.displayName),Zr(t,"photoURL",e.photoURL))})),Ml(e)})).then(Fl))},t.cd=function(t){var e=this;return Jl(this,zl(this).then((function(n){return Y(Bl(e),t)?function(t,e,n){return su(t,Ds,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return H(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),H(Bl(e),(function(t){n[t]||Ul(e,t)})),n[Go.PROVIDER_ID]||Zr(e,"phoneNumber",null),Ml(e)})):Ml(e).then((function(){throw new E("no-such-provider")}))})))},t.delete=function(){var t=this;return Jl(this,this.I().then((function(e){return su(t.a,Rs,{idToken:e})})).then((function(){t.dispatchEvent(new fl("userDeleted"))}))).then((function(){for(var e=0;e<t.N.length;e++)t.N[e].cancel("app-deleted");kl(t,null),El(t,null),Nl(t,null),t.N=[],t.J=!0,Rl(t),Zr(t,"refreshToken",null),t.b&&Bc(t.b,t)}))},t.Gb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?S(this.Lb,this):"reauthViaPopup"==t&&e==(this.g||null)?S(this.Mb,this):"linkViaRedirect"==t&&(this.ga||null)==e?S(this.Lb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?S(this.Mb,this):null},t.Ec=function(t){var e=this;return Yl(this,"linkViaPopup",t,(function(){return $l(e,t.providerId).then((function(){return Ml(e)}))}),!1)},t.Nc=function(t){return Yl(this,"reauthViaPopup",t,(function(){return Ae()}),!0)},t.Fc=function(t){var e=this;return Xl(this,"linkViaRedirect",t,(function(){return $l(e,t.providerId)}),!1)},t.Oc=function(t){return Xl(this,"reauthViaRedirect",t,(function(){return Ae()}),!0)},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Jl(this,this.I().then((function(n){return Is(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=Wl(i,t,"link"),Kl(i,t)})).then((function(){return o})))},t.Mb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Jl(this,Ae().then((function(){return po(ks(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=Wl(i,t,"reauthenticate"),Hl(i,t),i.i=null,i.reload()})).then((function(){return o})),!0)},t.vb=function(t){var e=this,n=null;return Jl(this,this.I().then((function(e){return n=e,void 0===t||gt(t)?{}:qi(new Di(t))})).then((function(t){return e.a.vb(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.Fb=function(t,e){var n=this,r=null;return Jl(this,this.I().then((function(t){return r=t,void 0===e||gt(e)?{}:qi(new Di(e))})).then((function(e){return n.a.Fb(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},t.jc=function(t){var e=null,n=this;return Jl(this,t=po(Ae(t),n.uid).then((function(t){return e=Wl(n,t,"reauthenticate"),Hl(n,t),n.i=null,n.reload()})).then((function(){return e})),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&yt(t,this.metadata.w()),H(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),yt(t,this.S.w()),t};var eh={name:"redirectUser",F:"session"};function nh(t){return uc(t.b,eh,t.a)}function rh(t){this.a=t,this.b=oc(),this.c=null,this.f=function(t){var e=ah("local"),n=ah("session"),r=ah("none");return function(t,e,n){var r=sc(e,n),i=ac(t,e.F);return t.get(e,n).then((function(o){var a=null;try{a=Ur(u.localStorage.getItem(r))}catch(t){}if(a&&!o)return u.localStorage.removeItem(r),t.set(e,a,n);a&&o&&"localStorage"!=i.type&&u.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(oh,t.a).then((function(t){return t?ah(t):e}))}))}))})).then((function(e){return t.c=e,ih(t,e.F)})).o((function(){t.c||(t.c=e)}))}(this),this.b.addListener(ah("local"),this.a,S(this.g,this))}function ih(t,e){var n,r=[];for(n in rc)rc[n]!==e&&r.push(uc(t.b,ah(rc[n]),t.a));return r.push(uc(t.b,oh,t.a)),function(t){return new Te((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},a=function(t){n(t)},s=0;s<t.length;s++)Re(t[s],T(o,s),a);else e(i)}))}(r)}rh.prototype.g=function(){var t=this,e=ah("local");lh(this,(function(){return Ae().then((function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return ih(t,"local").then((function(){t.c=e}))}))}))};var oh={name:"persistence",F:"session"};function ah(t){return{name:"authUser",F:t}}function sh(t,e){return lh(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function uh(t){return lh(t,(function(){return uc(t.b,t.c,t.a)}))}function ch(t,e,n){return lh(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Zl(t||{})}))}))}function lh(t,e){return t.f=t.f.then(e,e),t.f}function hh(t){if(this.l=!1,Zr(this,"settings",new el),Zr(this,"app",t),!_h(this).options||!_h(this).options.apiKey)throw new E("invalid-api-key");t=r.default.SDK_VERSION?Pr(r.default.SDK_VERSION):null,this.a=new ts(_h(this).options&&_h(this).options.apiKey,D(N),t),this.P=[],this.s=[],this.N=[],this.Pa=r.default.INTERNAL.createSubscribe(S(this.zc,this)),this.W=void 0,this.ib=r.default.INTERNAL.createSubscribe(S(this.Ac,this)),yh(this,null),this.i=new rh(_h(this).options.apiKey+":"+_h(this).name),this.D=new th(_h(this).options.apiKey+":"+_h(this).name),this.$=xh(this,function(t){var e=_h(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(eh,t.a).then((function(t){return t&&e&&(t.authDomain=e),Zl(t||{})}))}(t.D,_h(t).options.authDomain).then((function(e){return(t.m=e)&&(e.ha=t.D),nh(t.D)}));return xh(t,e)}(t).then((function(){return ch(t.i,e,t.R)})).then((function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then((function(){return sh(t.i,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:uh(t.i)}))):null})).then((function(e){yh(t,e||null)}));return xh(t,n)}(this)),this.h=xh(this,function(t){return t.$.then((function(){return mh(t)})).o((function(){})).then((function(){if(!t.l)return t.ja()})).o((function(){})).then((function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener(ah("local"),e.a,t.ja)}}))}(this)),this.ba=!1,this.ja=S(this.Zc,this),this.Ba=S(this.da,this),this.qa=S(this.mc,this),this.za=S(this.wc,this),this.Aa=S(this.xc,this),this.b=null,function(t){var e=_h(t).options.authDomain,n=_h(t).options.apiKey;e&&Or()&&(t.Oa=t.$.then((function(){if(!t.l){if(t.b=Kc(e,n,_h(t).name,t.R),jc(t.b,t),wh(t)&&Ol(wh(t)),t.m){Ol(t.m);var r=t.m;r.xa(t.la()),kl(r,t),Cl(r=t.m,t.J),Nl(r,t),Il(r=t.m,t.R),El(r,t),t.m=null}return t.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=S(this.delete,this),this.INTERNAL.logFramework=S(this.Gc,this),this.u=0,xn.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.xa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.zb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.R){var t=Vn(this.R.url);t=ei({protocol:t.c,host:t.a,port:t.g,options:ei({disableWarnings:this.R.ec})})}else t=null;return t},enumerable:!1})}(this),this.J=[],this.R=null}function dh(t){Ze.call(this,"languageCodeChanged"),this.h=t}function fh(t){Ze.call(this,"emulatorConfigChanged"),this.c=t}function ph(t){Ze.call(this,"frameworkChanged"),this.f=t}function gh(t){return t.Oa||Pe(new E("auth-domain-config-required"))}function mh(t){if(!Or())return Pe(new E("operation-not-supported-in-this-environment"));var e=gh(t).then((function(){return t.b.ra()})).then((function(t){return t?ei(t):null}));return xh(t,e)}function vh(t,e){var n={};return n.apiKey=_h(t).options.apiKey,n.authDomain=_h(t).options.authDomain,n.appName=_h(t).name,t.R&&(n.emulatorConfig=t.R),t.$.then((function(){return function(t,e,n,r){var i=new xl(t,e);return n&&(i.ha=n),r&&Cl(i,r),i.reload().then((function(){return i}))}(n,e,t.D,t.Ga())})).then((function(e){return wh(t)&&e.uid==wh(t).uid?(ql(wh(t),e),t.da(e)):(yh(t,e),Ol(e),t.da(e))})).then((function(){Th(t)}))}function yh(t,e){wh(t)&&(function(t,e){Q(t.W,(function(t){return t==e}))}(wh(t),t.Ba),gn(wh(t),"tokenChanged",t.qa),gn(wh(t),"userDeleted",t.za),gn(wh(t),"userInvalidated",t.Aa),Rl(wh(t))),e&&(e.W.push(t.Ba),dn(e,"tokenChanged",t.qa),dn(e,"userDeleted",t.za),dn(e,"userInvalidated",t.Aa),0<t.u&&Pl(e)),Zr(t,"currentUser",e),e&&(e.xa(t.la()),kl(e,t),Cl(e,t.J),Nl(e,t),Il(e,t.R),El(e,t))}function bh(t,e){var n=null,r=null;return xh(t,e.then((function(e){return n=Vo(e),r=Zi(e),vh(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=cl(e.w(),t,S(t.kc,t))),n||e})).then((function(){return ei({user:wh(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function _h(t){return t.app}function wh(t){return t.currentUser}function Sh(t){return wh(t)&&wh(t)._lat||null}function Th(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](Sh(t));if(t.W!==t.getUid()&&t.N.length)for(t.W=t.getUid(),e=0;e<t.N.length;e++)t.N[e]&&t.N[e](Sh(t))}}function xh(t,e){return t.P.push(e),e.oa((function(){X(t.P,e)})),e}function Ih(){}function kh(){this.a={},this.b=1e12}rh.prototype.yb=function(t){var e=null,n=this;return function(t){var e=new E("invalid-persistence-type"),n=new E("unsupported-persistence-type");t:{for(r in rc)if(rc[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(Ir()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Lu()&&"none"!==t)throw n;break;default:if(!Mr()&&"none"!==t)throw n}}(t),lh(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(r){return e=r,ih(n,t)})).then((function(){if(n.c=ah(t),e)return n.b.set(n.c,e,n.a)})):Ae()}))},I(hh,xn),I(dh,Ze),I(fh,Ze),I(ph,Ze),(t=hh.prototype).yb=function(t){return xh(this,t=this.i.yb(t))},t.xa=function(t){this.aa===t||this.l||(this.aa=t,ss(this.a,this.aa),this.dispatchEvent(new dh(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=u.navigator;this.xa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.R){if(!/^https?:\/\//.test(t))throw new E("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(t){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),u.document&&!t&&wr().then((function(){var t=u.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#b50000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),u.document.body.appendChild(t)}))})(e=!!e&&!!e.disableWarnings),this.R={url:t,ec:e},this.settings.jb=!0,us(this.a,this.R),this.dispatchEvent(new fh(this.R))}},t.Gc=function(t){this.J.push(t),ls(this.a,r.default.SDK_VERSION?Pr(r.default.SDK_VERSION,this.J):null),this.dispatchEvent(new ph(this.J))},t.Ga=function(){return Z(this.J)},t.zb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:_h(this).options.apiKey,authDomain:_h(this).options.authDomain,appName:_h(this).name,currentUser:wh(this)&&wh(this).w()}},t.Gb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?S(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return bh(i,xs(i.a,o))}))},t.Xc=function(t){if(!Or())return Pe(new E("operation-not-supported-in-this-environment"));var e=this,n=Ji(t.providerId),i=Vr(),o=null;(!jr()||Tr())&&_h(this).options.authDomain&&t.isOAuthProvider&&(o=Su(_h(this).options.authDomain,_h(this).options.apiKey,_h(this).name,"signInViaPopup",t,null,i,r.default.SDK_VERSION||null,null,null,this.T(),this.R));var a=yr(o,n&&n.va,n&&n.ua);return xh(this,n=gh(this).then((function(n){return Vc(n,a,"signInViaPopup",t,i,!!o,e.T())})).then((function(){return new Te((function(t,n){e.na("signInViaPopup",null,new E("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=i,e.c=Hc(e.b,e,"signInViaPopup",a,i)}))})).then((function(t){return a&&vr(a),t?ei(t):null})).o((function(t){throw a&&vr(a),t})))},t.Yc=function(t){if(!Or())return Pe(new E("operation-not-supported-in-this-environment"));var e=this,n=gh(this).then((function(){return function(t){return lh(t,(function(){return t.b.set(oh,t.c.F,t.a)}))}(e.i)})).then((function(){return zc(e.b,"signInViaRedirect",t,void 0,e.T())}));return xh(this,n)},t.ra=function(){var t=this;return mh(this).then((function(e){return t.b&&Qc(t.b.b),e})).o((function(e){throw t.b&&Qc(t.b.b),e}))},t.dd=function(t){if(!t)return Pe(new E("null-user"));if(this.S!=t.tenantId)return Pe(new E("tenant-id-mismatch"));var e=this,n={};n.apiKey=_h(this).options.apiKey,n.authDomain=_h(this).options.authDomain,n.appName=_h(this).name;var r=function(t,e,n,r){var i=t.h,o={};return o[ns]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new xl(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&Cl(e,r),ql(e,t),e}(t,n,e.D,e.Ga());return xh(this,this.h.then((function(){if(_h(e).options.apiKey!=t.l)return r.reload()})).then((function(){return wh(e)&&t.uid==wh(e).uid?(ql(wh(e),t),e.da(t)):(yh(e,r),Ol(r),e.da(r))})).then((function(){Th(e)})))},t.Bb=function(){var t=this;return xh(this,this.h.then((function(){return t.b&&Qc(t.b.b),wh(t)?(yh(t,null),uh(t.i).then((function(){Th(t)}))):Ae()})))},t.Zc=function(){var t=this;return ch(this.i,_h(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=wh(t)&&e){n=wh(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return ql(wh(t),e),wh(t).I();(wh(t)||e)&&(yh(t,e),e&&(Ol(e),e.ha=t.D),t.b&&jc(t.b,t),Th(t))}}))},t.da=function(t){return sh(this.i,t)},t.mc=function(){Th(this),this.da(wh(this))},t.wc=function(){this.Bb()},t.xc=function(){this.Bb()},t.kc=function(t){var e=this;return this.h.then((function(){return bh(e,Ae(t))}))},t.zc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(wh(e))}))},t.Ac=function(t){var e=this;!function(t,e){t.N.push(e),xh(t,t.h.then((function(){!t.l&&Y(t.N,e)&&t.W!==t.getUid()&&(t.W=t.getUid(),e(Sh(t)))})))}(this,(function(){t.next(wh(e))}))},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"==typeof t?t(wh(r)):"function"==typeof t.next&&t.next(wh(r))})),this.Pa(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.W=r.getUid(),"function"==typeof t?t(wh(r)):"function"==typeof t.next&&t.next(wh(r))})),this.ib(t,e,n)},t.nc=function(t){var e=this;return xh(this,this.h.then((function(){return wh(e)?wh(e).I(t).then((function(t){return{accessToken:t}})):null})))},t.Tc=function(t){var e=this;return this.h.then((function(){return bh(e,su(e.a,eu,{token:t}))})).then((function(t){var n=t.user;return Vl(n,"isAnonymous",!1),e.da(n),t}))},t.Uc=function(t,e){var n=this;return this.h.then((function(){return bh(n,su(n.a,nu,{email:t,password:e}))}))},t.dc=function(t,e){var n=this;return this.h.then((function(){return bh(n,su(n.a,As,{email:t,password:e}))}))},t.ab=function(t){var e=this;return this.h.then((function(){return bh(e,t.ka(e.a))}))},t.Sc=function(t){return Qr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(t)},t.Ab=function(){var t=this;return this.h.then((function(){var e=wh(t);if(e&&e.isAnonymous){var n=ei({providerId:null,isNewUser:!1});return ei({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return bh(t,t.a.Ab()).then((function(e){var n=e.user;return Vl(n,"isAnonymous",!0),t.da(n),e}))}))},t.getUid=function(){return wh(this)&&wh(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&wh(this)&&Pl(wh(this))},t.Pc=function(t){var e=this;H(this.s,(function(n){n==t&&e.u--})),0>this.u&&(this.u=0),0==this.u&&wh(this)&&Rl(wh(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),xh(this,this.h.then((function(){e.l||Y(e.s,t)&&t(Sh(e))})))},t.removeAuthTokenListener=function(t){Q(this.s,(function(e){return e==t}))},t.delete=function(){this.l=!0;for(var t=0;t<this.P.length;t++)this.P[t].cancel("app-deleted");return this.P=[],this.i&&(t=this.i).b.removeListener(ah("local"),t.a,this.ja),this.b&&(Bc(this.b,this),Qc(this.b.b)),Promise.resolve()},t.hc=function(t){return xh(this,function(t,e){return su(t,Ps,{identifier:e,continueUri:Lr()?fr():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.a,t))},t.Bc=function(t){return!!Lo(t)},t.xb=function(t,e){var n=this;return xh(this,Ae().then((function(){var t=new Di(e);if(!t.c)throw new E("argument-error",Li+" must be true when sending sign in link to email");return qi(t)})).then((function(e){return n.a.xb(t,e)})).then((function(){})))},t.jd=function(t){return this.Sa(t).then((function(t){return t.data.email}))},t.ob=function(t,e){return xh(this,this.a.ob(t,e).then((function(){})))},t.Sa=function(t){return xh(this,this.a.Sa(t).then((function(t){return new li(t)})))},t.kb=function(t){return xh(this,this.a.kb(t).then((function(){})))},t.wb=function(t,e){var n=this;return xh(this,Ae().then((function(){return void 0===e||gt(e)?{}:qi(new Di(e))})).then((function(e){return n.a.wb(t,e)})).then((function(){})))},t.Wc=function(t,e){return xh(this,rl(this,t,e,S(this.ab,this)))},t.Vc=function(t,e){var n=this;return xh(this,Ae().then((function(){var r=e||fr(),i=Oo(t,r);if(!(r=Lo(r)))throw new E("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new E("tenant-id-mismatch");return n.ab(i)})))},Ih.prototype.render=function(){},Ih.prototype.reset=function(){},Ih.prototype.getResponse=function(){},Ih.prototype.execute=function(){};var Eh=null;function Ch(t,e){return(e=Nh(e))&&t.a[e]||null}function Nh(t){return(t=void 0===t?1e12:t)?t.toString():null}function Ah(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=he(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():dn(this.f,"click",this.i)}function Ph(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function Rh(){}function Dh(){}kh.prototype.render=function(t,e){return this.a[this.b.toString()]=new Ah(t,e),this.b++},kh.prototype.reset=function(t){var e=Ch(this,t);t=Nh(t),e&&t&&(e.delete(),delete this.a[t])},kh.prototype.getResponse=function(t){return(t=Ch(this,t))?t.getResponse():null},kh.prototype.execute=function(t){(t=Ch(this,t))&&t.execute()},Ah.prototype.getResponse=function(){return Ph(this),this.b},Ah.prototype.execute=function(){Ph(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(t){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(t){}t.h&&t.execute()}),6e4)}),500))},Ah.prototype.delete=function(){Ph(this),this.g=!0,clearTimeout(this.a),this.a=null,gn(this.f,"click",this.i)},Zr(Rh,"FACTOR_ID","phone"),Dh.prototype.g=function(){return Eh||(Eh=new kh),Ae(Eh)},Dh.prototype.c=function(){};var Mh=null;function Oh(){this.b=u.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Lh=new _t(xt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Fh=new Hr(3e4,6e4);Oh.prototype.g=function(t){var e=this;return new Te((function(n,r){var i=setTimeout((function(){r(new E("network-request-failed"))}),Fh.get());!u.grecaptcha||t!==e.f&&!e.b?(u[e.a]=function(){if(u.grecaptcha){e.f=t;var o=u.grecaptcha.render;u.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(u.grecaptcha)}else clearTimeout(i),r(new E("internal-error"));delete u[e.a]},Ae(Wa(Ct(Lh,{onload:e.a,hl:t||""}))).o((function(){clearTimeout(i),r(new E("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(u.grecaptcha))}))},Oh.prototype.c=function(){this.b--};var jh=null;function Bh(t,e,n,r,i,o,a){if(Zr(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=e,this.g=null,a?(Mh||(Mh=new Dh),a=Mh):(jh||(jh=new Oh),a=jh),this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Vh])throw new E("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[qh],!u.document)throw new E("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!he(e)||!this.i&&he(e).hasChildNodes())throw new E("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new ts(t,o||null,i||null),this.u=r||function(){return null};var s=this;this.l=[];var c=this.a[Gh];this.a[Gh]=function(t){if(zh(s,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=Dr(c,u);"function"==typeof e&&e(t)}};var l=this.a[Uh];this.a[Uh]=function(){if(zh(s,null),"function"==typeof l)l();else if("string"==typeof l){var t=Dr(l,u);"function"==typeof t&&t()}}}var Gh="callback",Uh="expired-callback",Vh="sitekey",qh="size";function zh(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function Hh(t,e){return t.h.push(e),e.oa((function(){X(t.h,e)})),e}function $h(t){if(t.J)throw new E("internal-error","RecaptchaVerifier instance has been destroyed.")}function Wh(t,e,n){var i=!1;try{this.b=n||r.default.app()}catch(t){throw new E("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new E("invalid-api-key");n=this.b.options.apiKey;var o=this,a=null;try{a=this.b.auth().Ga()}catch(t){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}a=r.default.SDK_VERSION?Pr(r.default.SDK_VERSION,a):null,Bh.call(this,n,t,e,(function(){try{var t=o.b.auth().la()}catch(e){t=null}return t}),a,D(N),i)}function Kh(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new E("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=Yh.length)throw new E("internal-error","Argument validator received an unsupported number of arguments.");n=Yh[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new E("argument-error",t+" failed: "+r)}(t=Bh.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=Hh(this,Ae().then((function(){if(Lr()&&!xr())return wr();throw new E("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.u())})).then((function(e){return t.g=e,su(t.s,zs,{})})).then((function(e){t.a[Vh]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},t.render=function(){$h(this);var t=this;return Hh(this,this.Ia().then((function(){if(null===t.c){var e=t.v;if(!t.i){var n=he(e);e=me("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},t.verify=function(){$h(this);var t=this;return Hh(this,this.render().then((function(e){return new Te((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){Q(t.l,(function(t){return t==e}))}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},t.reset=function(){$h(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){$h(this),this.J=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=he(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},I(Wh,Bh);var Yh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Xh(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"==typeof t}}}function Qh(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"==typeof t}}}function Jh(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:m}}function Zh(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"==typeof t}}}function td(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function ed(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ka||!n)}}}function nd(t,e){return m(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function rd(t){return m(t)&&"string"==typeof t.uid}function id(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function od(t,e){for(var n in e){var r=e[n].name;t[r]=ud(r,t[n],e[n].j)}}function ad(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:T((function(t){return this[t]}),n),set:T((function(t,e,n,r){Kh(t,[n],[r],!0),this[e]=r}),r,n,e[n].lb),enumerable:!0})}}function sd(t,e,n,r){t[e]=ud(e,n,r)}function ud(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Kh(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return t=t.split("."),t[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}od(hh.prototype,{kb:{name:"applyActionCode",j:[Xh("code")]},Sa:{name:"checkActionCode",j:[Xh("code")]},ob:{name:"confirmPasswordReset",j:[Xh("code"),Xh("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Xh("email"),Xh("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Xh("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Xh("emailLink")]},Hc:{name:"onAuthStateChanged",j:[id(Jh(),Zh(),"nextOrObserver"),Zh("opt_error",!0),Zh("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[id(Jh(),Zh(),"nextOrObserver"),Zh("opt_error",!0),Zh("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[Xh("email"),id(Jh("opt_actionCodeSettings",!0),td(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[Xh("email"),Jh("actionCodeSettings")]},yb:{name:"setPersistence",j:[Xh("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[ed()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[ed()]},Tc:{name:"signInWithCustomToken",j:[Xh("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Xh("email"),Xh("password")]},Vc:{name:"signInWithEmailLink",j:[Xh("email"),Xh("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Xh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[id({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof xl)}},td(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Xh(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Xh("url"),Jh("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Xh("code")]}}),ad(hh.prototype,{lc:{name:"languageCode",lb:id(Xh(),td(),"languageCode")},ti:{name:"tenantId",lb:id(Xh(),td(),"tenantId")}}),hh.Persistence=rc,hh.Persistence.LOCAL="local",hh.Persistence.SESSION="session",hh.Persistence.NONE="none",od(xl.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Qh("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Qh("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[ed()]},rb:{name:"linkWithCredential",j:[ed()]},Dc:{name:"linkWithPhoneNumber",j:[Xh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[ed()]},ub:{name:"reauthenticateWithCredential",j:[ed()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Xh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[id(Jh("opt_actionCodeSettings",!0),td(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Xh(null,!0)]},cd:{name:"unlink",j:[Xh("provider")]},Cb:{name:"updateEmail",j:[Xh("email")]},Db:{name:"updatePassword",j:[Xh("password")]},ed:{name:"updatePhoneNumber",j:[ed("phone")]},Eb:{name:"updateProfile",j:[Jh("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[Xh("email"),id(Jh("opt_actionCodeSettings",!0),td(null,!0),"opt_actionCodeSettings",!0)]}}),od(kh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),od(Ih.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),od(Te.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),ad(el.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:Qh("appVerificationDisabledForTesting")}}),od(nl.prototype,{confirm:{name:"confirm",j:[Xh("verificationCode")]}}),sd(fo,"fromJSON",(function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[_o,Do,jo,vo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[id(Xh(),Jh(),"json")]),sd(Mo,"credential",(function(t,e){return new Ro(t,e)}),[Xh("email"),Xh("password")]),od(Ro.prototype,{w:{name:"toJSON",j:[Xh(null,!0)]}}),od(xo.prototype,{Ca:{name:"addScope",j:[Xh("scope")]},Ka:{name:"setCustomParameters",j:[Jh("customOAuthParameters")]}}),sd(xo,"credential",Io,[id(Xh(),Jh(),"token")]),sd(Mo,"credentialWithLink",Oo,[Xh("email"),Xh("emailLink")]),od(ko.prototype,{Ca:{name:"addScope",j:[Xh("scope")]},Ka:{name:"setCustomParameters",j:[Jh("customOAuthParameters")]}}),sd(ko,"credential",Eo,[id(Xh(),Jh(),"token")]),od(Co.prototype,{Ca:{name:"addScope",j:[Xh("scope")]},Ka:{name:"setCustomParameters",j:[Jh("customOAuthParameters")]}}),sd(Co,"credential",No,[id(Xh(),id(Jh(),td()),"idToken"),id(Xh(),td(),"accessToken",!0)]),od(Ao.prototype,{Ka:{name:"setCustomParameters",j:[Jh("customOAuthParameters")]}}),sd(Ao,"credential",Po,[id(Xh(),Jh(),"token"),Xh("secret",!0)]),od(To.prototype,{Ca:{name:"addScope",j:[Xh("scope")]},credential:{name:"credential",j:[id(Xh(),id(Jh(),td()),"optionsOrIdToken"),id(Xh(),td(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Jh("customOAuthParameters")]}}),od(yo.prototype,{w:{name:"toJSON",j:[Xh(null,!0)]}}),od(go.prototype,{w:{name:"toJSON",j:[Xh(null,!0)]}}),sd(Go,"credential",Uo,[Xh("verificationId"),Xh("verificationCode")]),od(Go.prototype,{gb:{name:"verifyPhoneNumber",j:[id(Xh(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?nd(t.session,lo)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?nd(t.session,ho)&&rd(t.multiFactorHint):t.session&&t.multiFactorUid?nd(t.session,ho)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),od(Fo.prototype,{w:{name:"toJSON",j:[Xh(null,!0)]}}),od(E.prototype,{toJSON:{name:"toJSON",j:[Xh(null,!0)]}}),od(Xo.prototype,{toJSON:{name:"toJSON",j:[Xh(null,!0)]}}),od(Yo.prototype,{toJSON:{name:"toJSON",j:[Xh(null,!0)]}}),od(ul.prototype,{toJSON:{name:"toJSON",j:[Xh(null,!0)]}}),od(ol.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}}]}}),od(pl.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}},Xh("displayName",!0)]},bd:{name:"unenroll",j:[id({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:rd},Xh(),"multiFactorInfoIdentifier")]}}),od(Wh.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),sd(xi,"parseLink",Ri,[Xh("link")]),sd(Rh,"assertion",(function(t){return new dl(t)}),[ed("phone")]),function(){if(void 0===r.default||!r.default.INTERNAL||!r.default.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:di,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:hi,VERIFY_AND_CHANGE_EMAIL:fi,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:hh,AuthCredential:fo,Error:E};sd(t,"EmailAuthProvider",Mo,[]),sd(t,"FacebookAuthProvider",xo,[]),sd(t,"GithubAuthProvider",ko,[]),sd(t,"GoogleAuthProvider",Co,[]),sd(t,"TwitterAuthProvider",Ao,[]),sd(t,"OAuthProvider",To,[Xh("providerId")]),sd(t,"SAMLAuthProvider",So,[Xh("providerId")]),sd(t,"PhoneAuthProvider",Go,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof hh)}}]),sd(t,"RecaptchaVerifier",Wh,[id(Xh(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Jh("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof r.default.app.App)}}]),sd(t,"ActionCodeURL",xi,[]),sd(t,"PhoneMultiFactorGenerator",Rh,[]),r.default.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new hh(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(t){t.getProvider("auth-internal").initialize()}}),r.default.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:S((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:S(t.nc,t),addAuthTokenListener:S(t.cc,t),removeAuthTokenListener:S(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),r.default.registerVersion("@firebase/auth","0.16.8"),r.default.INTERNAL.extendNamespace({User:xl})}()}).apply(void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});n(7566);var i=n(1635),o=n(1625),a=n(2477),s=function(t,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},s(t,e)};function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var c,l="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},h=h||{},d=l||self;function f(){}function p(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function g(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var m="closure_uid_"+(1e9*Math.random()>>>0),v=0;function y(t,e,n){return t.call.apply(t.bind,arguments)}function b(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function _(t,e,n){return(_=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y:b).apply(null,arguments)}function w(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function S(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function T(){this.s=this.s,this.o=this.o}var x={};T.prototype.s=!1,T.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,m)&&t[m]||(t[m]=++v)}(this);delete x[t]}},T.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var I=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},k=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function E(t){return Array.prototype.concat.apply([],arguments)}function C(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function N(t){return/^[\s\xa0]*$/.test(t)}var A,P=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function R(t,e){return-1!=t.indexOf(e)}function D(t,e){return t<e?-1:t>e?1:0}t:{var M=d.navigator;if(M){var O=M.userAgent;if(O){A=O;break t}}A=""}function L(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function F(t){var e={};for(var n in t)e[n]=t[n];return e}var j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function B(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<j.length;o++)n=j[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function G(t){return G[" "](t),t}G[" "]=f;var U,V,q=R(A,"Opera"),z=R(A,"Trident")||R(A,"MSIE"),H=R(A,"Edge"),$=H||z,W=R(A,"Gecko")&&!(R(A.toLowerCase(),"webkit")&&!R(A,"Edge"))&&!(R(A,"Trident")||R(A,"MSIE"))&&!R(A,"Edge"),K=R(A.toLowerCase(),"webkit")&&!R(A,"Edge");function Y(){var t=d.document;return t?t.documentMode:void 0}t:{var X="",Q=(V=A,W?/rv:([^\);]+)(\)|;)/.exec(V):H?/Edge\/([\d\.]+)/.exec(V):z?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(V):K?/WebKit\/(\S+)/.exec(V):q?/(?:Version)[ \/]?(\S+)/.exec(V):void 0);if(Q&&(X=Q?Q[1]:""),z){var J=Y();if(null!=J&&J>parseFloat(X)){U=String(J);break t}}U=X}var Z,tt={};function et(){return function(t){var e=tt;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}((function(){for(var t=0,e=P(String(U)).split("."),n=P("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",a=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;t=D(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||D(0==o[2].length,0==a[2].length)||D(o[2],a[2]),o=o[3],a=a[3]}while(0==t)}return 0<=t}))}if(d.document&&z){var nt=Y();Z=nt||(parseInt(U,10)||void 0)}else Z=void 0;var rt=Z,it=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{d.addEventListener("test",f,e),d.removeEventListener("test",f,e)}catch(t){}return t}();function ot(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function at(t,e){if(ot.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(W){t:{try{G(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:st[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&at.Z.h.call(this)}}ot.prototype.h=function(){this.defaultPrevented=!0},S(at,ot);var st={2:"touch",3:"pen",4:"mouse"};at.prototype.h=function(){at.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var ut="closure_listenable_"+(1e6*Math.random()|0),ct=0;function lt(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++ct,this.ca=this.fa=!1}function ht(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function dt(t){this.src=t,this.g={},this.h=0}function ft(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],o=I(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ht(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function pt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ca&&o.listener==e&&o.capture==!!n&&o.ia==r)return i}return-1}dt.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var a=pt(t,e,r,i);return-1<a?(e=t[a],n||(e.fa=!1)):((e=new lt(e,this.src,o,!!r,i)).fa=n,t.push(e)),e};var gt="closure_lm_"+(1e6*Math.random()|0),mt={};function vt(t,e,n,r,i){if(r&&r.once)return bt(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)vt(t,e[o],n,r,i);return null}return n=kt(n),t&&t[ut]?t.N(e,n,g(r)?!!r.capture:!!r,i):yt(t,e,n,!1,r,i)}function yt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=g(i)?!!i.capture:!!i,s=xt(t);if(s||(t[gt]=s=new dt(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){function t(n){return e.call(t.src,t.listener,n)}var e=Tt;return t}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)it||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(St(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function bt(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)bt(t,e[o],n,r,i);return null}return n=kt(n),t&&t[ut]?t.O(e,n,g(r)?!!r.capture:!!r,i):yt(t,e,n,!0,r,i)}function _t(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)_t(t,e[o],n,r,i);else r=g(r)?!!r.capture:!!r,n=kt(n),t&&t[ut]?(t=t.i,(e=String(e).toString())in t.g&&(-1<(n=pt(o=t.g[e],n,r,i))&&(ht(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--)))):t&&(t=xt(t))&&(e=t.g[e.toString()],t=-1,e&&(t=pt(e,n,r,i)),(n=-1<t?e[t]:null)&&wt(n))}function wt(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[ut])ft(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(St(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=xt(e))?(ft(n,t),0==n.h&&(n.src=null,e[gt]=null)):ht(t)}}}function St(t){return t in mt?mt[t]:mt[t]="on"+t}function Tt(t,e){if(t.ca)t=!0;else{e=new at(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&wt(t),t=n.call(r,e)}return t}function xt(t){return(t=t[gt])instanceof dt?t:null}var It="__closure_events_fn_"+(1e9*Math.random()>>>0);function kt(t){return"function"==typeof t?t:(t[It]||(t[It]=function(e){return t.handleEvent(e)}),t[It])}function Et(){T.call(this),this.i=new dt(this),this.P=this,this.I=null}function Ct(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new ot(e,t);else if(e instanceof ot)e.target=e.target||t;else{var i=e;B(e=new ot(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=e.g=n[o];i=Nt(a,r,!0,e)&&i}if(i=Nt(a=e.g=t,r,!0,e)&&i,i=Nt(a,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Nt(a=e.g=n[o],r,!1,e)&&i}function Nt(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.ca&&a.capture==n){var s=a.listener,u=a.ia||a.src;a.fa&&ft(t.i,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}S(Et,T),Et.prototype[ut]=!0,Et.prototype.removeEventListener=function(t,e,n,r){_t(this,t,e,n,r)},Et.prototype.M=function(){if(Et.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)ht(n[r]);delete e.g[t],e.h--}}this.I=null},Et.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},Et.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var At=d.JSON.stringify;function Pt(){var t=Bt,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Rt,Dt=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=Mt.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),Mt=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t},t}())((function(){return new Ot}),(function(t){return t.reset()})),Ot=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function Lt(t){d.setTimeout((function(){throw t}),0)}function Ft(t,e){Rt||function(){var t=d.Promise.resolve(void 0);Rt=function(){t.then(Gt)}}(),jt||(Rt(),jt=!0),Bt.add(t,e)}var jt=!1,Bt=new Dt;function Gt(){for(var t;t=Pt();){try{t.h.call(t.g)}catch(t){Lt(t)}var e=Mt;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}jt=!1}function Ut(t,e){Et.call(this),this.h=t||1,this.g=e||d,this.j=_(this.kb,this),this.l=Date.now()}function Vt(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function qt(t,e,n){if("function"==typeof t)n&&(t=_(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=_(t.handleEvent,t)}return 2147483647<Number(e)?-1:d.setTimeout(t,e||0)}function zt(t){t.g=qt((function(){t.g=null,t.i&&(t.i=!1,zt(t))}),t.j);var e=t.h;t.h=null,t.m.apply(null,e)}S(Ut,Et),(c=Ut.prototype).da=!1,c.S=null,c.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Ct(this,"tick"),this.da&&(Vt(this),this.start()))}},c.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},c.M=function(){Ut.Z.M.call(this),Vt(this),delete this.g};var Ht=function(t){function e(e,n){var r=t.call(this)||this;return r.m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:zt(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(T);function $t(t){T.call(this),this.h=t,this.g={}}S($t,T);var Wt=[];function Kt(t,e,n,r){Array.isArray(n)||(n&&(Wt[0]=n.toString()),n=Wt);for(var i=0;i<n.length;i++){var o=vt(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function Yt(t){L(t.g,(function(t,e){this.g.hasOwnProperty(e)&&wt(t)}),t),t.g={}}function Xt(){this.g=!0}function Qt(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return At(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}$t.prototype.M=function(){$t.Z.M.call(this),Yt(this)},$t.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Xt.prototype.Aa=function(){this.g=!1},Xt.prototype.info=function(){};var Jt={},Zt=null;function te(){return Zt=Zt||new Et}function ee(t){ot.call(this,Jt.Ma,t)}function ne(t){var e=te();Ct(e,new ee(e,t))}function re(t,e){ot.call(this,Jt.STAT_EVENT,t),this.stat=e}function ie(t){var e=te();Ct(e,new re(e,t))}function oe(t,e){ot.call(this,Jt.Na,t),this.size=e}function ae(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return d.setTimeout((function(){t()}),e)}Jt.Ma="serverreachability",S(ee,ot),Jt.STAT_EVENT="statevent",S(re,ot),Jt.Na="timingevent",S(oe,ot);var se={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},ue={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function ce(){}function le(t){return t.h||(t.h=t.i())}function he(){}ce.prototype.h=null;var de,fe={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function pe(){ot.call(this,"d")}function ge(){ot.call(this,"c")}function me(){}function ve(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new $t(this),this.P=be,t=$?125:void 0,this.W=new Ut(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new ye}function ye(){this.i=null,this.g="",this.h=!1}S(pe,ot),S(ge,ot),S(me,ce),me.prototype.g=function(){return new XMLHttpRequest},me.prototype.i=function(){return{}},de=new me;var be=45e3,_e={},we={};function Se(t,e,n){t.K=1,t.v=He(Be(e)),t.s=n,t.U=!0,Te(t,null)}function Te(t,e){t.F=Date.now(),Ee(t),t.A=Be(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),on(n.h,"t",r),t.C=0,n=t.l.H,t.h=new ye,t.g=ar(t.l,n?e:null,!t.s),0<t.O&&(t.L=new Ht(_(t.Ia,t,t.g),t.O)),Kt(t.V,t.g,"readystatechange",t.gb),e=t.H?F(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),ne(1),function(t,e,n,r,i,o){t.info((function(){if(t.g)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");a=2<=h.length&&"type"==h[1]?a+(l+"=")+c+"&":a+(l+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+a}))}(t.j,t.u,t.A,t.m,t.X,t.s)}function xe(t){return!!t.g&&("GET"==t.u&&2!=t.K&&t.l.Ba)}function Ie(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if((r=ke(t,n))==we){4==e&&(t.o=4,ie(14),i=!1),Qt(t.j,t.m,null,"[Incomplete Response]");break}if(r==_e){t.o=4,ie(15),Qt(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}Qt(t.j,t.m,r,null),Re(t,r)}xe(t)&&r!=we&&r!=_e&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,ie(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Jn(e),e.L=!0,ie(11))):(Qt(t.j,t.m,n,"[Invalid Chunked Response]"),Pe(t),Ae(t))}function ke(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?we:(n=Number(e.substring(n,r)),isNaN(n)?_e:(r+=1)+n>e.length?we:(e=e.substr(r,n),t.C=r+n,e))}function Ee(t){t.Y=Date.now()+t.P,Ce(t,t.P)}function Ce(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=ae(_(t.eb,t),e)}function Ne(t){t.B&&(d.clearTimeout(t.B),t.B=null)}function Ae(t){0==t.l.G||t.I||er(t.l,t)}function Pe(t){Ne(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,Vt(t.W),Yt(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Re(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||dn(n.i,t)))if(n.I=t.N,!t.J&&dn(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(o){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;tr(n),qn(n)}Qn(n),ie(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=ae(_(n.ab,n),6e3));if(1>=hn(n.i)&&n.ka){try{n.ka()}catch(o){}n.ka=void 0}}else rr(n,11)}else if((t.J||n.g==t)&&tr(n),!N(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var o=i[e];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var a=o[3];null!=a&&(n.ma=a,n.h.info("VER="+n.ma));var s=o[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(R(l,"spdy")||R(l,"quic")||R(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(fn(h,h.h),h.h=null))}if(r.D){var d=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;d&&(r.sa=d,ze(r.F,r.D,d))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var f=t;if((r=n).oa=or(r,r.H?r.la:null,r.W),f.J){pn(r.i,f);var p=f,g=r.K;g&&p.setTimeout(g),p.B&&(Ne(p),Ee(p)),r.g=f}else Xn(r);0<n.l.length&&$n(n)}else"stop"!=o[0]&&"close"!=o[0]||rr(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?rr(n,7):Vn(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}ne(4)}catch(o){}}function De(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(p(t)||"string"==typeof t)k(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(p(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(p(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Me(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Me)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Oe(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];Le(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)Le(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function Le(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(c=ve.prototype).setTimeout=function(t){this.P=t},c.gb=function(t){t=t.target;var e=this.L;e&&3==Fn(t)?e.l():this.Ia(t)},c.Ia=function(t){try{if(t==this.g)t:{var e=Fn(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||$||this.g&&(this.h.h||this.g.ga()||jn(this.g)))){this.I||4!=e||7==n||ne(8==n||0>=r?3:2),Ne(this);var i=this.g.ba();this.N=i;e:if(xe(this)){var o=jn(this.g);t="";var a=o.length,s=4==Fn(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Pe(this),Ae(this);var u="";break e}this.h.i=new d.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,t+=this.h.i.decode(o[n],{stream:s&&n==a-1});o.splice(0,a),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(t,e,n,r,i,o,a){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+a}))}(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(c)){var h=c;break e}}h=null}if(!(i=h)){this.i=!1,this.o=3,ie(12),Pe(this),Ae(this);break t}Qt(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Re(this,i)}this.U?(Ie(this,e,u),$&&this.i&&3==e&&(Kt(this.V,this.W,"tick",this.fb),this.W.start())):(Qt(this.j,this.m,u,null),Re(this,u)),4==e&&Pe(this),this.i&&!this.I&&(4==e?er(this.l,this):(this.i=!1,Ee(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,ie(12)):(this.o=0,ie(13)),Pe(this),Ae(this)}}}catch(e){}},c.fb=function(){if(this.g){var t=Fn(this.g),e=this.g.ga();this.C<e.length&&(Ne(this),Ie(this,t,e),this.i&&4!=t&&Ee(this))}},c.cancel=function(){this.I=!0,Pe(this)},c.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.K&&(ne(3),ie(17)),Pe(this),this.o=2,Ae(this)):Ce(this,this.Y-t)},(c=Me.prototype).R=function(){Oe(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},c.T=function(){return Oe(this),this.g.concat()},c.get=function(t,e){return Le(this.h,t)?this.h[t]:e},c.set=function(t,e){Le(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},c.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Fe=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function je(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof je){this.g=void 0!==e?e:t.g,Ge(this,t.j),this.s=t.s,Ue(this,t.i),Ve(this,t.m),this.l=t.l,e=t.h;var n=new tn;n.i=e.i,e.g&&(n.g=new Me(e.g),n.h=e.h),qe(this,n),this.o=t.o}else t&&(n=String(t).match(Fe))?(this.g=!!e,Ge(this,n[1]||"",!0),this.s=$e(n[2]||""),Ue(this,n[3]||"",!0),Ve(this,n[4]),this.l=$e(n[5]||"",!0),qe(this,n[6]||"",!0),this.o=$e(n[7]||"")):(this.g=!!e,this.h=new tn(null,this.g))}function Be(t){return new je(t)}function Ge(t,e,n){t.j=n?$e(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Ue(t,e,n){t.i=n?$e(e,!0):e}function Ve(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function qe(t,e,n){e instanceof tn?(t.h=e,function(t,e){e&&!t.j&&(en(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(nn(this,e),on(this,n,t))}),t)),t.j=e}(t.h,t.g)):(n||(e=We(e,Je)),t.h=new tn(e,t.g))}function ze(t,e,n){t.h.set(e,n)}function He(t){return ze(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function $e(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function We(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Ke),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ke(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}je.prototype.toString=function(){var t=[],e=this.j;e&&t.push(We(e,Ye,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(We(e,Ye,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(We(n,"/"==n.charAt(0)?Qe:Xe,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",We(n,Ze)),t.join("")};var Ye=/[#\/\?@]/g,Xe=/[#\?:]/g,Qe=/[#\?]/g,Je=/[#\?@]/g,Ze=/#/g;function tn(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function en(t){t.g||(t.g=new Me,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function nn(t,e){en(t),e=an(t,e),Le(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,Le((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&Oe(t)))}function rn(t,e){return en(t),e=an(t,e),Le(t.g.h,e)}function on(t,e,n){nn(t,e),0<n.length&&(t.i=null,t.g.set(an(t,e),C(n)),t.h+=n.length)}function an(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(c=tn.prototype).add=function(t,e){en(this),this.i=null,t=an(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},c.forEach=function(t,e){en(this),this.g.forEach((function(n,r){k(n,(function(n){t.call(e,n,r,this)}),this)}),this)},c.T=function(){en(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},c.R=function(t){en(this);var e=[];if("string"==typeof t)rn(this,t)&&(e=E(e,this.g.get(an(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=E(e,t[n])}return e},c.set=function(t,e){return en(this),this.i=null,rn(this,t=an(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},c.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},c.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.i=t.join("&")};var sn=function(t,e){this.h=t,this.g=e};function un(t){this.l=t||cn,d.PerformanceNavigationTiming?t=0<(t=d.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(d.g&&d.g.Ea&&d.g.Ea()&&d.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var cn=10;function ln(t){return!!t.h||!!t.g&&t.g.size>=t.j}function hn(t){return t.h?1:t.g?t.g.size:0}function dn(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function fn(t,e){t.g?t.g.add(e):t.h=e}function pn(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function gn(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r=t.i;try{for(var i=u(t.g.values()),o=i.next();!o.done;o=i.next()){var a=o.value;r=r.concat(a.D)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return C(t.i)}function mn(){}function vn(){this.g=new mn}function yn(t,e,n){var r=n||"";try{De(t,(function(t,n){var i=t;g(t)&&(i=At(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function bn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}function _n(t){this.l=t.$b||null,this.j=t.ib||!1}function wn(t,e){Et.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=Sn,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}un.prototype.cancel=function(){var t,e;if(this.i=gn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=u(this.g.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},mn.prototype.stringify=function(t){return d.JSON.stringify(t,void 0)},mn.prototype.parse=function(t){return d.JSON.parse(t,void 0)},S(_n,ce),_n.prototype.g=function(){return new wn(this.l,this.j)},_n.prototype.i=function(t){return function(){return t}}({}),S(wn,Et);var Sn=0;function Tn(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function xn(t){t.readyState=4,t.l=null,t.j=null,t.A=null,In(t)}function In(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(c=wn.prototype).open=function(t,e){if(this.readyState!=Sn)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,In(this)},c.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||d).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},c.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,xn(this)),this.readyState=Sn},c.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,In(this)),this.g&&(this.readyState=3,In(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==d.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Tn(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},c.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?xn(this):In(this),3==this.readyState&&Tn(this)}},c.Ua=function(t){this.g&&(this.response=this.responseText=t,xn(this))},c.Ta=function(t){this.g&&(this.response=t,xn(this))},c.ha=function(){this.g&&xn(this)},c.setRequestHeader=function(t,e){this.v.append(t,e)},c.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},c.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(wn.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var kn=d.JSON.parse;function En(t){Et.call(this),this.headers=new Me,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Cn,this.K=this.L=!1}S(En,Et);var Cn="",Nn=/^https?$/i,An=["POST","PUT"];function Pn(t){return"content-type"==t.toLowerCase()}function Rn(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Dn(t),On(t)}function Dn(t){t.D||(t.D=!0,Ct(t,"complete"),Ct(t,"error"))}function Mn(t){if(t.h&&void 0!==h&&(!t.C[1]||4!=Fn(t)||2!=t.ba()))if(t.v&&4==Fn(t))qt(t.Fa,0,t);else if(Ct(t,"readystatechange"),4==Fn(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.H).match(Fe)[1]||null;if(!o&&d.self&&d.self.location){var a=d.self.location.protocol;o=a.substr(0,a.length-1)}i=!Nn.test(o?o.toLowerCase():"")}e=i}if(e)Ct(t,"complete"),Ct(t,"success");else{t.m=6;try{var s=2<Fn(t)?t.g.statusText:""}catch(t){s=""}t.j=s+" ["+t.ba()+"]",Dn(t)}}finally{On(t)}}}function On(t,e){if(t.g){Ln(t);var n=t.g,r=t.C[0]?f:null;t.g=null,t.C=null,e||Ct(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function Ln(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(d.clearTimeout(t.A),t.A=null)}function Fn(t){return t.g?t.g.readyState:0}function jn(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case Cn:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Bn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return L(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):ze(t,e,n))}function Gn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Un(t){this.za=0,this.l=[],this.h=new Xt,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Gn("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Gn("baseRetryDelayMs",5e3,t),this.$a=Gn("retryDelaySeedMs",1e4,t),this.Ya=Gn("forwardChannelMaxRetries",2,t),this.ra=Gn("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new un(t&&t.concurrentRequestLimit),this.Ca=new vn,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function Vn(t){if(zn(t),3==t.G){var e=t.V++,n=Be(t.F);ze(n,"SID",t.J),ze(n,"RID",e),ze(n,"TYPE","terminate"),Kn(t,n),(e=new ve(t,t.h,e,void 0)).K=2,e.v=He(Be(n)),n=!1,d.navigator&&d.navigator.sendBeacon&&(n=d.navigator.sendBeacon(e.v.toString(),"")),!n&&d.Image&&((new Image).src=e.v,n=!0),n||(e.g=ar(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Ee(e)}ir(t)}function qn(t){t.g&&(Jn(t),t.g.cancel(),t.g=null)}function zn(t){qn(t),t.u&&(d.clearTimeout(t.u),t.u=null),tr(t),t.i.cancel(),t.m&&("number"==typeof t.m&&d.clearTimeout(t.m),t.m=null)}function Hn(t,e){t.l.push(new sn(t.Za++,e)),3==t.G&&$n(t)}function $n(t){ln(t.i)||t.m||(t.m=!0,Ft(t.Ha,t),t.C=0)}function Wn(t,e){var n;n=e?e.m:t.V++;var r=Be(t.F);ze(r,"SID",t.J),ze(r,"RID",n),ze(r,"AID",t.U),Kn(t,r),t.o&&t.s&&Bn(r,t.o,t.s),n=new ve(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=Yn(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),fn(t.i,n),Se(n,r,e)}function Kn(t,e){t.j&&De({},(function(t,n){ze(e,n,t)}))}function Yn(t,e,n){n=Math.min(t.l.length,n);var r=t.j?_(t.j.Oa,t.j,t):null;t:for(var i=t.l,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].h,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=o))o=Math.max(0,i[u].h-100),s=!1;else try{yn(l,a,"req"+c+"_")}catch(t){r&&r(l)}}if(s){r=a.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function Xn(t){t.g||t.u||(t.Y=1,Ft(t.Ga,t),t.A=0)}function Qn(t){return!(t.g||t.u||3<=t.A)&&(t.Y++,t.u=ae(_(t.Ga,t),nr(t,t.A)),t.A++,!0)}function Jn(t){null!=t.B&&(d.clearTimeout(t.B),t.B=null)}function Zn(t){t.g=new ve(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=Be(t.oa);ze(e,"RID","rpc"),ze(e,"SID",t.J),ze(e,"CI",t.N?"0":"1"),ze(e,"AID",t.U),Kn(t,e),ze(e,"TYPE","xmlhttp"),t.o&&t.s&&Bn(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=He(Be(e)),n.s=null,n.U=!0,Te(n,t)}function tr(t){null!=t.v&&(d.clearTimeout(t.v),t.v=null)}function er(t,e){var n=null;if(t.g==e){tr(t),Jn(t),t.g=null;var r=2}else{if(!dn(t.i,e))return;n=e.D,pn(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;Ct(r=te(),new oe(r,n,e,i)),$n(t)}else Xn(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!(hn(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=ae(_(t.Ha,t,e),nr(t,t.C)),t.C++,0)))}(t,e)||2==r&&Qn(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:rr(t,5);break;case 4:rr(t,10);break;case 3:rr(t,6);break;default:rr(t,2)}}function nr(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function rr(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=_(t.jb,t);n||(n=new je("//www.google.com/images/cleardot.gif"),d.location&&"http"==d.location.protocol||Ge(n,"https"),He(n)),function(t,e){var n=new Xt;if(d.Image){var r=new Image;r.onload=w(bn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=w(bn,n,r,"TestLoadImage: error",!1,e),r.onabort=w(bn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=w(bn,n,r,"TestLoadImage: timeout",!1,e),d.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else ie(2);t.G=0,t.j&&t.j.va(e),ir(t),zn(t)}function ir(t){t.G=0,t.I=-1,t.j&&(0==gn(t.i).length&&0==t.l.length||(t.i.i.length=0,C(t.l),t.l.length=0),t.j.ua())}function or(t,e,n){var r=function(t){return t instanceof je?Be(t):new je(t,void 0)}(n);if(""!=r.i)e&&Ue(r,e+"."+r.i),Ve(r,r.m);else{var i=d.location;r=function(t,e,n,r){var i=new je(null,void 0);return t&&Ge(i,t),e&&Ue(i,e),n&&Ve(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&L(t.aa,(function(t,e){ze(r,e,t)})),e=t.D,n=t.sa,e&&n&&ze(r,e,n),ze(r,"VER",t.ma),Kn(t,r),r}function ar(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Ba&&!t.qa?new En(new _n({ib:!0})):new En(t.qa)).L=t.H,e}function sr(){}function ur(){if(z&&!(10<=Number(rt)))throw Error("Environmental error: no available transport.")}function cr(t,e){Et.call(this),this.g=new Un(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!N(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!N(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&(e in(t=this.h)&&delete t[e])),this.j=new dr(this)}function lr(t){pe.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function hr(){ge.call(this),this.status=1}function dr(t){this.g=t}(c=En.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():de.g(),this.C=this.u?le(this.u):le(de),this.g.onreadystatechange=_(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(t){return void Rn(this,t)}t=n||"";var i=new Me(this.headers);r&&De(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=Pn,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=d.FormData&&t instanceof d.FormData,!(0<=I(An,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.g.setRequestHeader(e,t)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Ln(this),0<this.B&&((this.K=function(t){return z&&et()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=_(this.pa,this)):this.A=qt(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(t){Rn(this,t)}},c.pa=function(){void 0!==h&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ct(this,"timeout"),this.abort(8))},c.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Ct(this,"complete"),Ct(this,"abort"),On(this))},c.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),On(this,!0)),En.Z.M.call(this)},c.Fa=function(){this.s||(this.F||this.v||this.l?Mn(this):this.cb())},c.cb=function(){Mn(this)},c.ba=function(){try{return 2<Fn(this)?this.g.status:-1}catch(t){return-1}},c.ga=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},c.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),kn(e)}},c.Da=function(){return this.m},c.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(c=Un.prototype).ma=8,c.G=1,c.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(t){}},c.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new ve(this,this.h,t,void 0),n=this.s;if(this.P&&(n?B(n=F(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=Yn(this,e,r),ze(i=Be(this.F),"RID",t),ze(i,"CVER",22),this.D&&ze(i,"X-HTTP-Session-Id",this.D),Kn(this,i),this.o&&n&&Bn(i,this.o,n),fn(this.i,e),this.Ra&&ze(i,"TYPE","init"),this.ja?(ze(i,"$req",r),ze(i,"SID","null"),e.$=!0,Se(e,i,null)):Se(e,i,r),this.G=2}}else 3==this.G&&(t?Wn(this,t):0==this.l.length||ln(this.i)||Wn(this))},c.Ga=function(){if(this.u=null,Zn(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=ae(_(this.bb,this),t)}},c.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ie(10),qn(this),Zn(this))},c.ab=function(){null!=this.v&&(this.v=null,qn(this),Qn(this),ie(19))},c.jb=function(t){t?(this.h.info("Successfully pinged google.com"),ie(2)):(this.h.info("Failed to ping google.com"),ie(1))},(c=sr.prototype).xa=function(){},c.wa=function(){},c.va=function(){},c.ua=function(){},c.Oa=function(){},ur.prototype.g=function(t,e){return new cr(t,e)},S(cr,Et),cr.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),Ft(_(t.hb,t,e))),ie(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=or(t,null,t.W),$n(t)},cr.prototype.close=function(){Vn(this.g)},cr.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,Hn(this.g,e)}else this.v?((e={}).__data__=At(t),Hn(this.g,e)):Hn(this.g,t)},cr.prototype.M=function(){this.g.j=null,delete this.j,Vn(this.g),delete this.g,cr.Z.M.call(this)},S(lr,pe),S(hr,ge),S(dr,sr),dr.prototype.xa=function(){Ct(this.g,"a")},dr.prototype.wa=function(t){Ct(this.g,new lr(t))},dr.prototype.va=function(t){Ct(this.g,new hr(t))},dr.prototype.ua=function(){Ct(this.g,"b")},ur.prototype.createWebChannel=ur.prototype.g,cr.prototype.send=cr.prototype.u,cr.prototype.open=cr.prototype.m,cr.prototype.close=cr.prototype.close,se.NO_ERROR=0,se.TIMEOUT=8,se.HTTP_ERROR=6,ue.COMPLETE="complete",he.EventType=fe,fe.OPEN="a",fe.CLOSE="b",fe.ERROR="c",fe.MESSAGE="d",Et.prototype.listen=Et.prototype.N,En.prototype.listenOnce=En.prototype.O,En.prototype.getLastError=En.prototype.La,En.prototype.getLastErrorCode=En.prototype.Da,En.prototype.getStatus=En.prototype.ba,En.prototype.getResponseJson=En.prototype.Qa,En.prototype.getResponseText=En.prototype.ga,En.prototype.send=En.prototype.ea;var fr=function(){return new ur},pr=function(){return te()},gr=se,mr=ue,vr=Jt,yr={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},br=_n,_r=he,wr=En;var Sr=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Sr.o=-1;var Tr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},xr=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return(0,i.__extends)(e,t),e}(Error),Ir=new a.Logger("@firebase/firestore");function kr(){return Ir.logLevel}function Er(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Ir.logLevel<=a.LogLevel.DEBUG){var r=e.map(Ar);Ir.debug.apply(Ir,(0,i.__spreadArray)(["Firestore (8.10.1): "+t],r))}}function Cr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Ir.logLevel<=a.LogLevel.ERROR){var r=e.map(Ar);Ir.error.apply(Ir,(0,i.__spreadArray)(["Firestore (8.10.1): "+t],r))}}function Nr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Ir.logLevel<=a.LogLevel.WARN){var r=e.map(Ar);Ir.warn.apply(Ir,(0,i.__spreadArray)(["Firestore (8.10.1): "+t],r))}}function Ar(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function Pr(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.10.1) INTERNAL ASSERTION FAILED: "+t;throw Cr(e),new Error(e)}function Rr(t,e){t||Pr()}function Dr(t,e){return t}function Mr(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Or=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(256/62),n="";n.length<20;)for(var r=Mr(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%62));return n},t}();function Lr(t,e){return t<e?-1:t>e?1:0}function Fr(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function jr(t){return t+"\0"}var Br=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new xr(Tr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new xr(Tr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new xr(Tr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new xr(Tr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Lr(this.nanoseconds,t.nanoseconds):Lr(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Gr=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new Br(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function Ur(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Vr(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function qr(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var zr=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Pr(),void 0===n?n=t.length-e:n>t.length-e&&Pr(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Hr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.__extends)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var a=o[i];if(a.indexOf("//")>=0)throw new xr(Tr.INVALID_ARGUMENT,"Invalid segment ("+a+"). Paths must not contain // in them.");r.push.apply(r,a.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(zr),$r=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Wr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.__extends)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return $r.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new xr(Tr.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new xr(Tr.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new xr(Tr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new xr(Tr.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(zr),Kr=function(){function t(t){this.fields=t,t.sort(Wr.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return Fr(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Yr=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Lr(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();Yr.EMPTY_BYTE_STRING=new Yr("");var Xr=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qr(t){if(Rr(!!t),"string"==typeof t){var e=0,n=Xr.exec(t);if(Rr(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Jr(t.seconds),nanos:Jr(t.nanos)}}function Jr(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Zr(t){return"string"==typeof t?Yr.fromBase64String(t):Yr.fromUint8Array(t)}function ti(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ei(t){var e=t.mapValue.fields.__previous_value__;return ti(e)?ei(e):e}function ni(t){var e=Qr(t.mapValue.fields.__local_write_time__.timestampValue);return new Br(e.seconds,e.nanos)}function ri(t){return null==t}function ii(t){return 0===t&&1/t==-1/0}function oi(t){return"number"==typeof t&&Number.isInteger(t)&&!ii(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var ai=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(Hr.fromString(e))},t.fromName=function(e){return new t(Hr.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Hr.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return Hr.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new Hr(e.slice()))},t}();function si(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ti(t)?4:10:Pr()}function ui(t,e){var n=si(t);if(n!==si(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ni(t).isEqual(ni(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Qr(t.timestampValue),r=Qr(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Zr(t.bytesValue).isEqual(Zr(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Jr(t.geoPointValue.latitude)===Jr(e.geoPointValue.latitude)&&Jr(t.geoPointValue.longitude)===Jr(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Jr(t.integerValue)===Jr(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Jr(t.doubleValue),r=Jr(e.doubleValue);return n===r?ii(n)===ii(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Fr(t.arrayValue.values||[],e.arrayValue.values||[],ui);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Ur(n)!==Ur(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!ui(n[i],r[i])))return!1;return!0}(t,e);default:return Pr()}}function ci(t,e){return void 0!==(t.values||[]).find((function(t){return ui(t,e)}))}function li(t,e){var n=si(t),r=si(e);if(n!==r)return Lr(n,r);switch(n){case 0:return 0;case 1:return Lr(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Jr(t.integerValue||t.doubleValue),r=Jr(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return hi(t.timestampValue,e.timestampValue);case 4:return hi(ni(t),ni(e));case 5:return Lr(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Zr(t),r=Zr(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Lr(n[i],r[i]);if(0!==o)return o}return Lr(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Lr(Jr(t.latitude),Jr(e.latitude));return 0!==n?n:Lr(Jr(t.longitude),Jr(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=li(n[i],r[i]);if(o)return o}return Lr(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=Lr(r[a],o[a]);if(0!==s)return s;var u=li(n[r[a]],i[o[a]]);if(0!==u)return u}return Lr(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Pr()}}function hi(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Lr(t,e);var n=Qr(t),r=Qr(e),i=Lr(n.seconds,r.seconds);return 0!==i?i:Lr(n.nanos,r.nanos)}function di(t){return fi(t)}function fi(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=Qr(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Zr(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,ai.fromName(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=fi(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+fi(t.fields[o])}return e+"}"}(t.mapValue):Pr();var e,n}function pi(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function gi(t){return!!t&&"integerValue"in t}function mi(t){return!!t&&"arrayValue"in t}function vi(t){return!!t&&"nullValue"in t}function yi(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function bi(t){return!!t&&"mapValue"in t}function _i(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var e={mapValue:{fields:{}}};return Vr(t.mapValue.fields,(function(t,n){return e.mapValue.fields[t]=_i(n)})),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=_i(t.arrayValue.values[r]);return n}return Object.assign({},t)}var wi=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!bi(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=_i(e)},t.prototype.setAll=function(t){var e=this,n=Wr.emptyPath(),r={},i=[];t.forEach((function(t,o){if(!n.isImmediateParentOf(o)){var a=e.getFieldsMap(n);e.applyChanges(a,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=_i(t):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());bi(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return ui(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];bi(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){Vr(e,(function(e,n){return t[e]=n}));for(var r=0,i=n;r<i.length;r++){var o=i[r];delete t[o]}},t.prototype.clone=function(){return new t(_i(this.value))},t}();function Si(t){var e=[];return Vr(t.fields,(function(t,n){var r=new Wr([t]);if(bi(n)){var i=Si(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,a=i;o<a.length;o++){var s=a[o];e.push(r.child(s))}}else e.push(r)})),new Kr(e)}var Ti=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,Gr.min(),wi.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,wi.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,wi.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=wi.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=wi.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),xi=function(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.h=null};function Ii(t,e,n,r,i,o,a){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new xi(t,e,n,r,i,o,a)}function ki(t){var e=Dr(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.canonicalString()+t.op.toString()+di(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.canonicalString()+t.dir}(t)})).join(","),ri(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Bi(e.startAt)),e.endAt&&(n+="|ub:",n+=Bi(e.endAt)),e.h=n}return e.h}function Ei(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Ui(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!ui(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!qi(t.startAt,e.startAt)&&qi(t.endAt,e.endAt)}function Ci(t){return ai.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Ni=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return(0,i.__extends)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Ai(t,n,r):"array-contains"===n?new Mi(t,r):"in"===n?new Oi(t,r):"not-in"===n?new Li(t,r):"array-contains-any"===n?new Fi(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Pi(t,n):new Ri(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(li(e,this.value)):null!==e&&si(this.value)===si(e)&&this.m(li(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Pr()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Ai=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=ai.fromName(r.referenceValue),i}return(0,i.__extends)(e,t),e.prototype.matches=function(t){var e=ai.comparator(t.key,this.key);return this.m(e)},e}(Ni),Pi=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Di("in",n),r}return(0,i.__extends)(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Ni),Ri=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Di("not-in",n),r}return(0,i.__extends)(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Ni);function Di(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return ai.fromName(t.referenceValue)}))}var Mi=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return(0,i.__extends)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return mi(e)&&ci(e.arrayValue,this.value)},e}(Ni),Oi=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return(0,i.__extends)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&ci(this.value.arrayValue,e)},e}(Ni),Li=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return(0,i.__extends)(e,t),e.prototype.matches=function(t){if(ci(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!ci(this.value.arrayValue,e)},e}(Ni),Fi=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return(0,i.__extends)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!mi(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return ci(e.value.arrayValue,t)}))},e}(Ni),ji=function(t,e){this.position=t,this.before=e};function Bi(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return di(t)})).join(",")}var Gi=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Ui(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Vi(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],a=t.position[i];if(r=o.field.isKeyField()?ai.comparator(ai.fromName(a.referenceValue),n.key):li(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function qi(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!ui(t.position[n],e.position[n]))return!1;return!0}var zi=function(t,e,n,r,i,o,a,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.p=null,this.T=null,this.startAt,this.endAt};function Hi(t,e,n,r,i,o,a,s){return new zi(t,e,n,r,i,o,a,s)}function $i(t){return new zi(t)}function Wi(t){return!ri(t.limit)&&"F"===t.limitType}function Ki(t){return!ri(t.limit)&&"L"===t.limitType}function Yi(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Xi(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function Qi(t){return null!==t.collectionGroup}function Ji(t){var e=Dr(t);if(null===e.p){e.p=[];var n=Xi(e),r=Yi(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Gi(n)),e.p.push(new Gi(Wr.keyField(),"asc"));else{for(var i=!1,o=0,a=e.explicitOrderBy;o<a.length;o++){var s=a[o];e.p.push(s),s.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Gi(Wr.keyField(),u))}}}return e.p}function Zi(t){var e=Dr(t);if(!e.T)if("F"===e.limitType)e.T=Ii(e.path,e.collectionGroup,Ji(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Ji(e);r<i.length;r++){var o=i[r],a="desc"===o.dir?"asc":"desc";n.push(new Gi(o.field,a))}var s=e.endAt?new ji(e.endAt.position,!e.endAt.before):null,u=e.startAt?new ji(e.startAt.position,!e.startAt.before):null;e.T=Ii(e.path,e.collectionGroup,n,e.filters,e.limit,s,u)}return e.T}function to(t,e,n){return new zi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function eo(t,e){return Ei(Zi(t),Zi(e))&&t.limitType===e.limitType}function no(t){return ki(Zi(t))+"|lt:"+t.limitType}function ro(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.canonicalString()+" "+e.op+" "+di(e.value);var e})).join(", ")+"]"),ri(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Bi(t.startAt)),t.endAt&&(e+=", endAt: "+Bi(t.endAt)),"Target("+e+")"}(Zi(t))+"; limitType="+t.limitType+")"}function io(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):ai.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Vi(t.startAt,Ji(t),e)||t.endAt&&Vi(t.endAt,Ji(t),e))}(t,e)}function oo(t){return function(e,n){for(var r=!1,i=0,o=Ji(t);i<o.length;i++){var a=o[i],s=ao(a,e,n);if(0!==s)return s;r=r||a.field.isKeyField()}return 0}}function ao(t,e,n){var r=t.field.isKeyField()?ai.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?li(r,i):Pr()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Pr()}}function so(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ii(e)?"-0":e}}function uo(t){return{integerValue:""+t}}function co(t,e){return oi(e)?uo(e):so(t,e)}var lo=function(){this._=void 0};function ho(t,e,n){return t instanceof go?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof mo?vo(t,e):t instanceof yo?bo(t,e):function(t,e){var n=po(t,e),r=wo(n)+wo(t.A);return gi(n)&&gi(t.A)?uo(r):so(t.R,r)}(t,e)}function fo(t,e,n){return t instanceof mo?vo(t,e):t instanceof yo?bo(t,e):n}function po(t,e){return t instanceof _o?gi(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var go=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.__extends)(e,t),e}(lo),mo=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,i.__extends)(e,t),e}(lo);function vo(t,e){for(var n=So(e),r=function(t){n.some((function(e){return ui(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var yo=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,i.__extends)(e,t),e}(lo);function bo(t,e){for(var n=So(e),r=function(t){n=n.filter((function(e){return!ui(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var _o=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return(0,i.__extends)(e,t),e}(lo);function wo(t){return Jr(t.integerValue||t.doubleValue)}function So(t){return mi(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var To=function(t,e){this.field=t,this.transform=e},xo=function(t,e){this.version=t,this.transformResults=e},Io=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function ko(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Eo=function(){};function Co(t,e,n){t instanceof Do?function(t,e,n){var r=t.value.clone(),i=Lo(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof Mo?function(t,e,n){if(ko(t.precondition,e)){var r=Lo(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Oo(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function No(t,e,n){t instanceof Do?function(t,e,n){if(ko(t.precondition,e)){var r=t.value.clone(),i=Fo(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(Ro(e),r).setHasLocalMutations()}}(t,e,n):t instanceof Mo?function(t,e,n){if(ko(t.precondition,e)){var r=Fo(t.fieldTransforms,n,e),i=e.data;i.setAll(Oo(t)),i.setAll(r),e.convertToFoundDocument(Ro(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){ko(t.precondition,e)&&e.convertToNoDocument(Gr.min())}(t,e)}function Ao(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],a=e.data.field(o.field),s=po(o.transform,a||null);null!=s&&(null==n&&(n=wi.empty()),n.set(o.field,s))}return n||null}function Po(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Fr(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof mo&&e instanceof mo||t instanceof yo&&e instanceof yo?Fr(t.elements,e.elements,ui):t instanceof _o&&e instanceof _o?ui(t.A,e.A):t instanceof go&&e instanceof go}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Ro(t){return t.isFoundDocument()?t.version:Gr.min()}var Do=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return(0,i.__extends)(e,t),e}(Eo),Mo=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var a=this;return(a=t.call(this)||this).key=e,a.data=n,a.fieldMask=r,a.precondition=i,a.fieldTransforms=o,a.type=1,a}return(0,i.__extends)(e,t),e}(Eo);function Oo(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function Lo(t,e,n){var r=new Map;Rr(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],a=o.transform,s=e.data.field(o.field);r.set(o.field,fo(a,s,n[i]))}return r}function Fo(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var a=o[i],s=a.transform,u=n.data.field(a.field);r.set(a.field,ho(s,u,e))}return r}var jo,Bo,Go=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return(0,i.__extends)(e,t),e}(Eo),Uo=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return(0,i.__extends)(e,t),e}(Eo),Vo=function(t){this.count=t};function qo(t){switch(t){case Tr.OK:return Pr();case Tr.CANCELLED:case Tr.UNKNOWN:case Tr.DEADLINE_EXCEEDED:case Tr.RESOURCE_EXHAUSTED:case Tr.INTERNAL:case Tr.UNAVAILABLE:case Tr.UNAUTHENTICATED:return!1;case Tr.INVALID_ARGUMENT:case Tr.NOT_FOUND:case Tr.ALREADY_EXISTS:case Tr.PERMISSION_DENIED:case Tr.FAILED_PRECONDITION:case Tr.ABORTED:case Tr.OUT_OF_RANGE:case Tr.UNIMPLEMENTED:case Tr.DATA_LOSS:return!0;default:return Pr()}}function zo(t){if(void 0===t)return Cr("GRPC error has no .code"),Tr.UNKNOWN;switch(t){case jo.OK:return Tr.OK;case jo.CANCELLED:return Tr.CANCELLED;case jo.UNKNOWN:return Tr.UNKNOWN;case jo.DEADLINE_EXCEEDED:return Tr.DEADLINE_EXCEEDED;case jo.RESOURCE_EXHAUSTED:return Tr.RESOURCE_EXHAUSTED;case jo.INTERNAL:return Tr.INTERNAL;case jo.UNAVAILABLE:return Tr.UNAVAILABLE;case jo.UNAUTHENTICATED:return Tr.UNAUTHENTICATED;case jo.INVALID_ARGUMENT:return Tr.INVALID_ARGUMENT;case jo.NOT_FOUND:return Tr.NOT_FOUND;case jo.ALREADY_EXISTS:return Tr.ALREADY_EXISTS;case jo.PERMISSION_DENIED:return Tr.PERMISSION_DENIED;case jo.FAILED_PRECONDITION:return Tr.FAILED_PRECONDITION;case jo.ABORTED:return Tr.ABORTED;case jo.OUT_OF_RANGE:return Tr.OUT_OF_RANGE;case jo.UNIMPLEMENTED:return Tr.UNIMPLEMENTED;case jo.DATA_LOSS:return Tr.DATA_LOSS;default:return Pr()}}(Bo=jo||(jo={}))[Bo.OK=0]="OK",Bo[Bo.CANCELLED=1]="CANCELLED",Bo[Bo.UNKNOWN=2]="UNKNOWN",Bo[Bo.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Bo[Bo.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Bo[Bo.NOT_FOUND=5]="NOT_FOUND",Bo[Bo.ALREADY_EXISTS=6]="ALREADY_EXISTS",Bo[Bo.PERMISSION_DENIED=7]="PERMISSION_DENIED",Bo[Bo.UNAUTHENTICATED=16]="UNAUTHENTICATED",Bo[Bo.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Bo[Bo.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Bo[Bo.ABORTED=10]="ABORTED",Bo[Bo.OUT_OF_RANGE=11]="OUT_OF_RANGE",Bo[Bo.UNIMPLEMENTED=12]="UNIMPLEMENTED",Bo[Bo.INTERNAL=13]="INTERNAL",Bo[Bo.UNAVAILABLE=14]="UNAVAILABLE",Bo[Bo.DATA_LOSS=15]="DATA_LOSS";var Ho=function(){function t(t,e){this.comparator=t,this.root=e||Wo.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Wo.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wo.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new $o(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new $o(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new $o(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new $o(this.root,t,this.comparator,!0)},t}(),$o=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Wo=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Pr();if(this.right.isRed())throw Pr();var t=this.left.check();if(t!==this.right.check())throw Pr();return t+(this.isRed()?0:1)},t}();Wo.EMPTY=null,Wo.RED=!0,Wo.BLACK=!1,Wo.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Pr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Pr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Pr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Pr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Pr()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Wo(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var Ko=function(){function t(t){this.comparator=t,this.data=new Ho(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Yo(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Yo(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Yo=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Xo=new Ho(ai.comparator);function Qo(){return Xo}var Jo=new Ho(ai.comparator);function Zo(){return Jo}var ta=new Ho(ai.comparator);function ea(){return ta}var na=new Ko(ai.comparator);function ra(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=na,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var ia=new Ko(Lr);function oa(){return ia}var aa=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,sa.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(Gr.min(),r,oa(),Qo(),ra())},t}(),sa=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(Yr.EMPTY_BYTE_STRING,n,ra(),ra(),ra())},t}(),ua=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},ca=function(t,e){this.targetId=t,this.V=e},la=function(t,e,n,r){void 0===n&&(n=Yr.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},ha=function(){function t(){this.S=0,this.D=pa(),this.C=Yr.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"F",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.k},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.k=!0,this.C=t)},t.prototype.M=function(){var t=ra(),e=ra(),n=ra();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Pr()}})),new sa(this.C,this.N,t,e,n)},t.prototype.L=function(){this.k=!1,this.D=pa()},t.prototype.B=function(t,e){this.k=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.k=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.k=!0,this.N=!0},t}(),da=function(){function t(t){this.W=t,this.G=new Map,this.H=Qo(),this.J=fa(),this.Y=new Ko(Lr)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.F||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.F||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:Pr()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(Ci(i))if(0===n){var o=new ai(i.path);this.tt(e,o,Ti.newNoDocument(o,Gr.min()))}else Rr(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);if(o){if(r.current&&Ci(o.target)){var a=new ai(o.target.path);null!==e.H.get(a)||e.at(i,a)||e.tt(i,a,Ti.newNoDocument(a,t))}r.$&&(n.set(i,r.M()),r.L())}}));var r=ra();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new aa(t,n,this.Y,this.H,r);return this.H=Qo(),this.J=fa(),this.Y=new Ko(Lr),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new ha,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new Ko(Lr),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||Er("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.F?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new ha),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function fa(){return new Ho(ai.comparator)}function pa(){return new Ho(ai.comparator)}var ga={asc:"ASCENDING",desc:"DESCENDING"},ma={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},va=function(t,e){this.databaseId=t,this.I=e};function ya(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function ba(t,e){return t.I?e.toBase64():e.toUint8Array()}function _a(t,e){return ya(t,e.toTimestamp())}function wa(t){return Rr(!!t),Gr.fromTimestamp(function(t){var e=Qr(t);return new Br(e.seconds,e.nanos)}(t))}function Sa(t,e){return function(t){return new Hr(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Ta(t){var e=Hr.fromString(t);return Rr(Wa(e)),e}function xa(t,e){return Sa(t.databaseId,e.path)}function Ia(t,e){var n=Ta(e);if(n.get(1)!==t.databaseId.projectId)throw new xr(Tr.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new xr(Tr.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ai(Na(n))}function ka(t,e){return Sa(t.databaseId,e)}function Ea(t){var e=Ta(t);return 4===e.length?Hr.emptyPath():Na(e)}function Ca(t){return new Hr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Na(t){return Rr(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Aa(t,e,n){return{name:xa(t,e),fields:n.value.mapValue.fields}}function Pa(t,e,n){var r=Ia(t,e.name),i=wa(e.updateTime),o=new wi({mapValue:{fields:e.fields}}),a=Ti.newFoundDocument(r,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Ra(t,e){var n;if(e instanceof Do)n={update:Aa(t,e.key,e.value)};else if(e instanceof Go)n={delete:xa(t,e.key)};else if(e instanceof Mo)n={update:Aa(t,e.key,e.data),updateMask:$a(e.fieldMask)};else{if(!(e instanceof Uo))return Pr();n={verify:xa(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof go)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof mo)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof yo)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof _o)return{fieldPath:e.field.canonicalString(),increment:n.A};throw Pr()}(0,t)}))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:_a(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Pr()}(t,e.precondition)),n}function Da(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Io.updateTime(wa(t.updateTime)):void 0!==t.exists?Io.exists(t.exists):Io.none()}(e.currentDocument):Io.none(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)Rr("REQUEST_TIME"===e.setToServerValue),n=new go;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new mo(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new yo(i)}else"increment"in e?n=new _o(t,e.increment):Pr();var o=Wr.fromServerFormat(e.fieldPath);return new To(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=Ia(t,e.update.name),o=new wi({mapValue:{fields:e.update.fields}});if(e.updateMask){var a=function(t){var e=t.fieldPaths||[];return new Kr(e.map((function(t){return Wr.fromServerFormat(t)})))}(e.updateMask);return new Mo(i,o,a,n,r)}return new Do(i,o,n,r)}if(e.delete){var s=Ia(t,e.delete);return new Go(s,n)}if(e.verify){var u=Ia(t,e.verify);return new Uo(u,n)}return Pr()}function Ma(t,e){return{documents:[ka(t,e.path)]}}function Oa(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=ka(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=ka(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(yi(t.value))return{unaryFilter:{field:Va(t.field),op:"IS_NAN"}};if(vi(t.value))return{unaryFilter:{field:Va(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(yi(t.value))return{unaryFilter:{field:Va(t.field),op:"IS_NOT_NAN"}};if(vi(t.value))return{unaryFilter:{field:Va(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Va(t.field),op:Ua(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:Va(t.field),direction:Ga(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var a=function(t,e){return t.I||ri(e)?e:{value:e}}(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=ja(e.startAt)),e.endAt&&(n.structuredQuery.endAt=ja(e.endAt)),n}function La(t){var e=Ea(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Rr(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var a=[];n.where&&(a=Fa(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(t){return function(t){return new Gi(qa(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return ri(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Ba(n.startAt));var l=null;return n.endAt&&(l=Ba(n.endAt)),Hi(e,i,s,a,u,"F",c,l)}function Fa(t){return t?void 0!==t.unaryFilter?[Ha(t)]:void 0!==t.fieldFilter?[za(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return Fa(t)})).reduce((function(t,e){return t.concat(e)})):Pr():[]}function ja(t){return{before:t.before,values:t.position}}function Ba(t){var e=!!t.before,n=t.values||[];return new ji(n,e)}function Ga(t){return ga[t]}function Ua(t){return ma[t]}function Va(t){return{fieldPath:t.canonicalString()}}function qa(t){return Wr.fromServerFormat(t.fieldPath)}function za(t){return Ni.create(qa(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Pr()}}(t.fieldFilter.op),t.fieldFilter.value)}function Ha(t){switch(t.unaryFilter.op){case"IS_NAN":var e=qa(t.unaryFilter.field);return Ni.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=qa(t.unaryFilter.field);return Ni.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=qa(t.unaryFilter.field);return Ni.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=qa(t.unaryFilter.field);return Ni.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Pr()}}function $a(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function Wa(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function Ka(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Xa(e)),e=Ya(t.get(n),e);return Xa(e)}function Ya(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function Xa(t){return t+""}function Qa(t){var e=t.length;if(Rr(e>=2),2===e)return Rr(""===t.charAt(0)&&""===t.charAt(1)),Hr.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf("",o);switch((a<0||a>n)&&Pr(),t.charAt(a+1)){case"":var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"":i+=t.substring(o,a),i+="\0";break;case"":i+=t.substring(o,a+1);break;default:Pr()}o=a+2}return new Hr(r)}var Ja=function(t,e){this.seconds=t,this.nanoseconds=e},Za=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Za.store="owner",Za.key="owner";var ts=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};ts.store="mutationQueues",ts.keyPath="userId";var es=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};es.store="mutations",es.keyPath="batchId",es.userMutationsIndex="userMutationsIndex",es.userMutationsKeyPath=["userId","batchId"];var ns=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Ka(e)]},t.key=function(t,e,n){return[t,Ka(e),n]},t}();ns.store="documentMutations",ns.PLACEHOLDER=new ns;var rs=function(t,e){this.path=t,this.readTime=e},is=function(t,e){this.path=t,this.version=e},os=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};os.store="remoteDocuments",os.readTimeIndex="readTimeIndex",os.readTimeIndexPath="readTime",os.collectionReadTimeIndex="collectionReadTimeIndex",os.collectionReadTimeIndexPath=["parentPath","readTime"];var as=function(t){this.byteSize=t};as.store="remoteDocumentGlobal",as.key="remoteDocumentGlobalKey";var ss=function(t,e,n,r,i,o,a){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};ss.store="targets",ss.keyPath="targetId",ss.queryTargetsIndexName="queryTargetsIndex",ss.queryTargetsKeyPath=["canonicalId","targetId"];var us=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};us.store="targetDocuments",us.keyPath=["targetId","path"],us.documentTargetsIndex="documentTargetsIndex",us.documentTargetsKeyPath=["path","targetId"];var cs=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};cs.key="targetGlobalKey",cs.store="targetGlobal";var ls=function(t,e){this.collectionId=t,this.parent=e};ls.store="collectionParents",ls.keyPath=["collectionId","parent"];var hs=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};hs.store="clientMetadata",hs.keyPath="clientId";var ds=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};ds.store="bundles",ds.keyPath="bundleId";var fs=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};fs.store="namedQueries",fs.keyPath="name";var ps=(0,i.__spreadArray)((0,i.__spreadArray)([],(0,i.__spreadArray)((0,i.__spreadArray)([],(0,i.__spreadArray)((0,i.__spreadArray)([],(0,i.__spreadArray)((0,i.__spreadArray)([],[ts.store,es.store,ns.store,os.store,ss.store,Za.store,cs.store,us.store]),[hs.store])),[as.store])),[ls.store])),[ds.store,fs.store]),gs="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ms=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),vs=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},ys=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Pr(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),bs=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new vs,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new Ss(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=Es(e.target.error);n.ft.reject(new Ss(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Ss(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Er("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new xs(e)},t}(),_s=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t((0,o.getUA)())&&Cr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Er("SimpleDb","Removing database:",t),Is(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=(0,o.getUA)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,n=this;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(Er("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Ss(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new xr(Tr.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new Ss(t,n))},i.onupgradeneeded=function(t){Er("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.wt.Rt(e,i.transaction,t.oldVersion,n.version).next((function(){Er("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return(0,i.__awaiter)(this,void 0,void 0,(function(){var o,a,s,u,c;return(0,i.__generator)(this,(function(l){switch(l.label){case 0:o="readonly"===e,a=0,s=function(){var e,s,c,l,h;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:++a,i.label=1;case 1:return i.trys.push([1,4,,5]),[4,u.At(t)];case 2:return u.db=i.sent(),e=bs.open(u.db,t,o?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),ys.reject(t)})).toPromise(),c={},s.catch((function(){})),[4,e.dt];case 3:return[2,(c.value=(i.sent(),s),c)];case 4:return l=i.sent(),h="FirebaseError"!==l.name&&a<3,Er("SimpleDb","Transaction failed with error:",l.message,"Retrying:",h),u.close(),h?[3,5]:[2,{value:Promise.reject(l)}];case 5:return[2]}}))},u=this,l.label=1;case 1:return[5,s()];case 2:if("object"==typeof(c=l.sent()))return[2,c.value];l.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),ws=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return Is(this.Pt.delete())},t}(),Ss=function(t){function e(e,n){var r=this;return(r=t.call(this,Tr.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return(0,i.__extends)(e,t),e}(xr);function Ts(t){return"IndexedDbTransactionError"===t.name}var xs=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Er("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Er("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Is(n)},t.prototype.add=function(t){return Er("SimpleDb","ADD",this.store.name,t,t),Is(this.store.add(t))},t.prototype.get=function(t){var e=this;return Is(this.store.get(t)).next((function(n){return void 0===n&&(n=null),Er("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return Er("SimpleDb","DELETE",this.store.name,t),Is(this.store.delete(t))},t.prototype.count=function(){return Er("SimpleDb","COUNT",this.store.name),Is(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.kt=function(t,e){Er("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Ft=!1;var r=this.cursor(n);return this.xt(r,(function(t,e,n){return n.delete()}))},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new ys((function(n,r){e.onerror=function(t){var e=Es(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.xt=function(t,e){var n=[];return new ys((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new ws(i),a=e(i.primaryKey,i.value,o);if(a instanceof ys){var s=a.catch((function(t){return o.done(),ys.reject(t)}));n.push(s)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return ys.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Ft?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Is(t){return new ys((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=Es(t.target.error);n(e)}}))}var ks=!1;function Es(t){var e=_s._t((0,o.getUA)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new xr("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return ks||(ks=!0,setTimeout((function(){throw r}),0)),r}}return t}var Cs=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return(0,i.__extends)(e,t),e}(ms);function Ns(t,e){var n=Dr(t);return _s.It(n.Mt,e)}var As=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&Co(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&No(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&No(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Gr.min())}))},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),ra())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Fr(this.mutations,t.mutations,(function(t,e){return Po(t,e)}))&&Fr(this.baseMutations,t.baseMutations,(function(t,e){return Po(t,e)}))},t}(),Ps=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Rr(e.mutations.length===r.length);for(var i=ea(),o=e.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new t(e,n,r,i)},t}(),Rs=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=Gr.min()),void 0===o&&(o=Gr.min()),void 0===a&&(a=Yr.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),Ds=function(t){this.Lt=t};function Ms(t,e){if(e.document)return Pa(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=ai.fromSegments(e.noDocument.path),r=Bs(e.noDocument.readTime),i=Ti.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=ai.fromSegments(e.unknownDocument.path);return r=Bs(e.unknownDocument.version),Ti.newUnknownDocument(o,r)}return Pr()}function Os(t,e,n){var r=Ls(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:xa(t,e.key),fields:e.data.value.mapValue.fields,updateTime:ya(t,e.version.toTimestamp())}}(t.Lt,e),a=e.hasCommittedMutations;return new os(null,null,o,a,r,i)}if(e.isNoDocument()){var s=e.key.path.toArray(),u=js(e.version);return a=e.hasCommittedMutations,new os(null,new rs(s,u),null,a,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=js(e.version);return new os(new is(c,l),null,null,!0,r,i)}return Pr()}function Ls(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Fs(t){var e=new Br(t[0],t[1]);return Gr.fromTimestamp(e)}function js(t){var e=t.toTimestamp();return new Ja(e.seconds,e.nanoseconds)}function Bs(t){var e=new Br(t.seconds,t.nanoseconds);return Gr.fromTimestamp(e)}function Gs(t,e){for(var n=(e.baseMutations||[]).map((function(e){return Da(t.Lt,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var a=e.mutations.map((function(e){return Da(t.Lt,e)})),s=Br.fromMillis(e.localWriteTimeMs);return new As(e.batchId,s,n,a)}function Us(t){var e,n,r=Bs(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Bs(t.lastLimboFreeSnapshotVersion):Gr.min();return void 0!==t.query.documents?(Rr(1===(n=t.query).documents.length),e=Zi($i(Ea(n.documents[0])))):e=function(t){return Zi(La(t))}(t.query),new Rs(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Yr.fromBase64String(t.resumeToken))}function Vs(t,e){var n,r=js(e.snapshotVersion),i=js(e.lastLimboFreeSnapshotVersion);n=Ci(e.target)?Ma(t.Lt,e.target):Oa(t.Lt,e.target);var o=e.resumeToken.toBase64();return new ss(e.targetId,ki(e.target),r,o,e.sequenceNumber,i,n)}function qs(t){var e=La({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?to(e,e.limit,"L"):e}var zs=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return Hs(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:Bs(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){return Hs(t).put({bundleId:(n=e).id,createTime:js(wa(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return $s(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:qs(e.bundledQuery),readTime:Bs(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return $s(t).put(function(t){return{name:t.name,readTime:js(wa(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Hs(t){return Ns(t,ds.store)}function $s(t){return Ns(t,fs.store)}var Ws=function(){function t(){this.Bt=new Ks}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),ys.resolve()},t.prototype.getCollectionParents=function(t,e){return ys.resolve(this.Bt.getEntries(e))},t}(),Ks=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Ko(Hr.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Ko(Hr.comparator)).toArray()},t}(),Ys=function(){function t(){this.qt=new Ks}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.qt.add(e)}));var o={collectionId:r,parent:Ka(i)};return Xs(t).put(o)}return ys.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[jr(e),""],!1,!0);return Xs(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Qa(o.parent))}return n}))},t}();function Xs(t){return Ns(t,ls.store)}var Qs={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Js=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function Zs(t,e,n){var r=t.store(es.store),i=t.store(ns.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.$t({range:a},(function(t,e,n){return s++,n.delete()}));o.push(u.next((function(){Rr(1===s)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var d=h[l],f=ns.key(e,d.key.path,n.batchId);o.push(i.delete(f)),c.push(d.key)}return ys.waitFor(o).next((function(){return c}))}function tu(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Pr();e=t.noDocument}return JSON.stringify(e).length}Js.DEFAULT_COLLECTION_PERCENTILE=10,Js.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Js.DEFAULT=new Js(41943040,Js.DEFAULT_COLLECTION_PERCENTILE,Js.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Js.DISABLED=new Js(-1,0,0);var eu=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return t.Qt=function(e,n,r,i){return Rr(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ru(t).$t({index:es.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=iu(t),a=ru(t);return a.add({}).next((function(s){Rr("number"==typeof s);for(var u=new As(s,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return Ra(t.Lt,e)})),i=n.mutations.map((function(e){return Ra(t.Lt,e)}));return new es(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new Ko((function(t,e){return Lr(t.canonicalString(),e.canonicalString())})),d=0,f=r;d<f.length;d++){var p=f[d],g=ns.key(i.userId,p.key.path,s);h=h.add(p.key.path.popLast()),l.push(a.put(c)),l.push(o.put(g,ns.PLACEHOLDER))}return h.forEach((function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Kt[s]=u.keys()})),ys.waitFor(l).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return ru(t).get(e).next((function(t){return t?(Rr(t.userId===n.userId),Gs(n.R,t)):null}))},t.prototype.jt=function(t,e){var n=this;return this.Kt[e]?ys.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.Kt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return ru(t).$t({index:es.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(Rr(e.batchId>=r),o=Gs(n.R,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return ru(t).$t({index:es.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ru(t).Nt(es.userMutationsIndex,n).next((function(t){return t.map((function(t){return Gs(e.R,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=ns.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return iu(t).$t({range:i},(function(r,i,a){var s=r[0],u=r[1],c=r[2],l=Qa(u);if(s===n.userId&&e.path.isEqual(l))return ru(t).get(c).next((function(t){if(!t)throw Pr();Rr(t.userId===n.userId),o.push(Gs(n.R,t))}));a.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Ko(Lr),i=[];return e.forEach((function(e){var o=ns.prefixForPath(n.userId,e.path),a=IDBKeyRange.lowerBound(o),s=iu(t).$t({range:a},(function(t,i,o){var a=t[0],s=t[1],u=t[2],c=Qa(s);a===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(s)})),ys.waitFor(i).next((function(){return n.Wt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=ns.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new Ko(Lr);return iu(t).$t({range:a},(function(t,e,o){var a=t[0],u=t[1],c=t[2],l=Qa(u);a===n.userId&&r.isPrefixOf(l)?l.length===i&&(s=s.add(c)):o.done()})).next((function(){return n.Wt(t,s)}))},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(ru(t).get(e).next((function(t){if(null===t)throw Pr();Rr(t.userId===n.userId),r.push(Gs(n.R,t))})))})),ys.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return Zs(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),ys.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Gt=function(t){delete this.Kt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return ys.resolve();var r=IDBKeyRange.lowerBound(ns.prefixForUser(e.userId)),i=[];return iu(t).$t({range:r},(function(t,n,r){if(t[0]===e.userId){var o=Qa(t[1]);i.push(o)}else r.done()})).next((function(){Rr(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return nu(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return ou(t).get(this.userId).next((function(t){return t||new ts(e.userId,-1,"")}))},t}();function nu(t,e,n){var r=ns.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return iu(t).$t({range:o,Ft:!0},(function(t,n,r){var o=t[0],s=t[1];t[2],o===e&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function ru(t){return Ns(t,es.store)}function iu(t){return Ns(t,ns.store)}function ou(t){return Ns(t,ts.store)}var au=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),su=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new au(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return Gr.fromTimestamp(new Br(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return uu(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return Rr(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return uu(t).$t((function(a,s){var u=Us(s);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return ys.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return uu(t).$t((function(t,n){var r=Us(n);e(r)}))},t.prototype.Xt=function(t){return cu(t).get(cs.key).next((function(t){return Rr(null!==t),t}))},t.prototype.Zt=function(t,e){return cu(t).put(cs.key,e)},t.prototype.te=function(t,e){return uu(t).put(Vs(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=ki(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return uu(t).$t({range:r,index:ss.queryTargetsIndexName},(function(t,n,r){var o=Us(n);Ei(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=lu(t);return e.forEach((function(e){var a=Ka(e.path);i.push(o.put(new us(n,a))),i.push(r.referenceDelegate.addReference(t,n,e))})),ys.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=lu(t);return ys.forEach(e,(function(e){var o=Ka(e.path);return ys.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=lu(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=lu(t),i=ra();return r.$t({range:n,Ft:!0},(function(t,e,n){var r=Qa(t[1]),o=new ai(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=Ka(e.path),r=IDBKeyRange.bound([n],[jr(n)],!1,!0),i=0;return lu(t).$t({index:us.documentTargetsIndex,Ft:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.lt=function(t,e){return uu(t).get(e).next((function(t){return t?Us(t):null}))},t}();function uu(t){return Ns(t,ss.store)}function cu(t){return Ns(t,cs.store)}function lu(t){return Ns(t,us.store)}function hu(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){if(t.code!==Tr.FAILED_PRECONDITION||t.message!==gs)throw t;return Er("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}function du(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=Lr(n,i);return 0===a?Lr(r,o):a}var fu=function(){function t(t){this.ne=t,this.buffer=new Ko(du),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();du(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),pu=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;Er("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return(0,i.__awaiter)(e,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Ts(e=n.sent())?(Er("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,hu(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),gu=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return ys.resolve(Sr.o);var r=new fu(e);return this.ae.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ae.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Er("LruGarbageCollector","Garbage collection skipped; disabled"),ys.resolve(Qs)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Er("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Qs):n.fe(t,e)}))},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,u,c,l=this,h=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>l.params.maximumSequenceNumbersToCollect?(Er("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+l.params.maximumSequenceNumbersToCollect+" from "+e),r=l.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),l.nthSequenceNumber(t,r)})).next((function(r){return n=r,s=Date.now(),l.removeTargets(t,n,e)})).next((function(e){return i=e,u=Date.now(),l.removeOrphanedDocuments(t,n)})).next((function(t){return c=Date.now(),kr()<=a.LogLevel.DEBUG&&Er("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(u-s)+"ms\n\tRemoved "+t+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-h)+"ms"),ys.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},t}(),mu=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new gu(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return vu(t,n)},t.prototype.removeReference=function(t,e,n){return vu(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return vu(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return ou(t).Ot((function(r){return nu(t,r,e).next((function(t){return t&&(n=!0),ys.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(a,s){if(s<=e){var u=n._e(t,a).next((function(e){if(!e)return o++,r.getEntry(t,a).next((function(){return r.removeEntry(a),lu(t).delete([0,Ka(a.path)])}))}));i.push(u)}})).next((function(){return ys.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return vu(t,e)},t.prototype.we=function(t,e){var n,r=lu(t),i=Sr.o;return r.$t({index:us.documentTargetsIndex},(function(t,r){var o=t[0];t[1];var a=r.path,s=r.sequenceNumber;0===o?(i!==Sr.o&&e(new ai(Qa(n)),i),i=s,n=a):i=Sr.o})).next((function(){i!==Sr.o&&e(new ai(Qa(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function vu(t,e){return lu(t).put(function(t,e){return new us(0,Ka(t.path),e)}(e,t.currentSequenceNumber))}var yu=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(this.equalsFn(a,t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Vr(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];t(a,s)}}))},t.prototype.isEmpty=function(){return qr(this.inner)},t}(),bu=function(){function t(){this.changes=new yu((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:Gr.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:Ti.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?ys.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),_u=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return Tu(t).put(xu(e),n)},t.prototype.removeEntry=function(t,e){var n=Tu(t),r=xu(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return Tu(t).get(xu(e)).next((function(t){return n.ye(e,t)}))},t.prototype.ge=function(t,e){var n=this;return Tu(t).get(xu(e)).next((function(t){return{document:n.ye(e,t),size:tu(t)}}))},t.prototype.getEntries=function(t,e){var n=this,r=Qo();return this.pe(t,e,(function(t,e){var i=n.ye(t,e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.Ee=function(t,e){var n=this,r=Qo(),i=new Ho(ai.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,tu(e))})).next((function(){return{documents:r,Te:i}}))},t.prototype.pe=function(t,e,n){if(e.isEmpty())return ys.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Tu(t).$t({range:r},(function(t,e,r){for(var a=ai.fromSegments(t);o&&ai.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=Qo(),o=e.path.length+1,a={};if(n.isEqual(Gr.min())){var s=e.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=e.path.toArray(),c=Ls(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=os.collectionReadTimeIndex}return Tu(t).$t(a,(function(t,n,a){if(t.length===o){var s=Ms(r.R,n);e.path.isPrefixOf(s.key.path)?io(e,s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new wu(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Su(t).get(as.key).next((function(t){return Rr(!!t),t}))},t.prototype.me=function(t,e){return Su(t).put(as.key,e)},t.prototype.ye=function(t,e){if(e){var n=Ms(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(Gr.min()))return n}return Ti.newInvalidDocument(t)},t}(),wu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new yu((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return(0,i.__extends)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Ko((function(t,e){return Lr(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,a){var s=e.Ae.get(o);if(a.document.isValidDocument()){var u=Os(e.Ie.R,a.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=tu(u);r+=c-s,n.push(e.Ie.addEntry(t,o,u))}else if(r-=s,e.trackRemovals){var l=Os(e.Ie.R,Ti.newNoDocument(o,Gr.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),ys.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},e}(bu);function Su(t){return Ns(t,as.store)}function Tu(t){return Ns(t,os.store)}function xu(t){return t.path.toArray()}var Iu=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;Rr(n<r&&n>=0&&r<=11);var o=new bs("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Za.store)}(t),function(t){t.createObjectStore(ts.store,{keyPath:ts.keyPath}),t.createObjectStore(es.store,{keyPath:es.keyPath,autoIncrement:!0}).createIndex(es.userMutationsIndex,es.userMutationsKeyPath,{unique:!0}),t.createObjectStore(ns.store)}(t),ku(t),function(t){t.createObjectStore(os.store)}(t));var a=ys.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(us.store),t.deleteObjectStore(ss.store),t.deleteObjectStore(cs.store)}(t),ku(t)),a=a.next((function(){return function(t){var e=t.store(cs.store),n=new cs(0,0,Gr.min().toTimestamp(),0);return e.put(cs.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(t,e){return e.store(es.store).Nt().next((function(n){t.deleteObjectStore(es.store),t.createObjectStore(es.store,{keyPath:es.keyPath,autoIncrement:!0}).createIndex(es.userMutationsIndex,es.userMutationsKeyPath,{unique:!0});var r=e.store(es.store),i=n.map((function(t){return r.put(t)}));return ys.waitFor(i)}))}(t,o)}))),a=a.next((function(){!function(t){t.createObjectStore(hs.store,{keyPath:hs.keyPath})}(t)}))),n<5&&r>=5&&(a=a.next((function(){return i.Re(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(t){t.createObjectStore(as.store)}(t),i.be(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ve(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.Pe(t,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(os.store);e.createIndex(os.readTimeIndex,os.readTimeIndexPath,{unique:!1}),e.createIndex(os.collectionReadTimeIndex,os.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(a=a.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(a=a.next((function(){!function(t){t.createObjectStore(ds.store,{keyPath:ds.keyPath})}(t),function(t){t.createObjectStore(fs.store,{keyPath:fs.keyPath})}(t)}))),a},t.prototype.be=function(t){var e=0;return t.store(os.store).$t((function(t,n){e+=tu(n)})).next((function(){var n=new as(e);return t.store(as.store).put(as.key,n)}))},t.prototype.Re=function(t){var e=this,n=t.store(ts.store),r=t.store(es.store);return n.Nt().next((function(n){return ys.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(es.userMutationsIndex,i).next((function(r){return ys.forEach(r,(function(r){Rr(r.userId===n.userId);var i=Gs(e.R,r);return Zs(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ve=function(t){var e=t.store(us.store),n=t.store(os.store);return t.store(cs.store).get(cs.key).next((function(t){var r=[];return n.$t((function(n,i){var o=new Hr(n),a=function(t){return[0,Ka(t)]}(o);r.push(e.get(a).next((function(n){return n?ys.resolve():function(n){return e.put(new us(0,Ka(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return ys.waitFor(r)}))}))},t.prototype.Pe=function(t,e){t.createObjectStore(ls.store,{keyPath:ls.keyPath});var n=e.store(ls.store),r=new Ks,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Ka(i)})}};return e.store(os.store).$t({Ft:!0},(function(t,e){var n=new Hr(t);return i(n.popLast())})).next((function(){return e.store(ns.store).$t({Ft:!0},(function(t,e){t[0];var n=t[1];t[2];var r=Qa(n);return i(r.popLast())}))}))},t.prototype.Ve=function(t){var e=this,n=t.store(ss.store);return n.$t((function(t,r){var i=Us(r),o=Vs(e.R,i);return n.put(o)}))},t}();function ku(t){t.createObjectStore(us.store,{keyPath:us.keyPath}).createIndex(us.documentTargetsIndex,us.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(ss.store,{keyPath:ss.keyPath}).createIndex(ss.queryTargetsIndexName,ss.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(cs.store)}var Eu="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Cu=function(){function t(e,n,r,i,o,a,s,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=a,this.document=s,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.Fe=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new xr(Tr.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new mu(this,i),this.Le=n+"main",this.R=new Ds(u),this.Be=new _s(this.Le,11,new Iu(this.R)),this.qe=new su(this.referenceDelegate,this.R),this.Ut=new Ys,this.Ue=function(t,e){return new _u(t,e)}(this.R,this.Ut),this.Ke=new zs,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===l&&Cr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new xr(Tr.FAILED_PRECONDITION,Eu);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new Sr(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},t.prototype.He=function(t){var e=this;return this.Me=function(n){return(0,i.__awaiter)(e,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return(0,i.__awaiter)(e,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return(0,i.__awaiter)(e,void 0,void 0,(function(){return(0,i.__generator)(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return Au(e).put(new hs(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(Ts(e))return Er("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Er("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},t.prototype.Je=function(t){var e=this;return Nu(t).get(Za.key).next((function(t){return ys.resolve(e.tn(t))}))},t.prototype.en=function(t){return Au(t).delete(this.clientId)},t.prototype.nn=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t,e,n,r,o=this;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=Ns(t,hs.store);return e.Nt().next((function(t){var n=o.rn(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return ys.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=i.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)r=n[e],this.Qe.removeItem(this.on(r.clientId));i.label=2;case 2:return[2]}}))}))},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?ys.resolve(!0):Nu(t).get(Za.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new xr(Tr.FAILED_PRECONDITION,Eu);return!1}}return!(!e.networkEnabled||!e.inForeground)||Au(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&Er("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t=this;return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Za.store,hs.store],(function(e){var n=new Cs(e,Sr.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},t.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return Au(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return eu.Qt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;Er("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Be.runTransaction(t,o,ps,(function(o){return i=new Cs(o,r.Ne?r.Ne.next():Sr.o),"readwrite-primary"===e?r.Je(i).next((function(t){return!!t||r.Ye(i)})).next((function(e){if(!e)throw Cr("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new xr(Tr.FAILED_PRECONDITION,gs);return n(i)})).next((function(t){return r.Ze(i).next((function(){return t}))})):r.dn(i).next((function(){return n(i)}))})).then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.dn=function(t){var e=this;return Nu(t).get(Za.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new xr(Tr.FAILED_PRECONDITION,Eu)}))},t.prototype.Ze=function(t){var e=new Za(this.clientId,this.allowTabSynchronization,Date.now());return Nu(t).put(Za.key,e)},t.yt=function(){return _s.yt()},t.prototype.Xe=function(t){var e=this,n=Nu(t);return n.get(Za.key).next((function(t){return e.tn(t)?(Er("IndexedDbPersistence","Releasing primary lease."),n.delete(Za.key)):ys.resolve()}))},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Cr("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Fe=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.Fe),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.Fe&&(this.document.removeEventListener("visibilitychange",this.Fe),this.Fe=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ke=function(){e.un(),(0,o.isSafari)()&&navigator.appVersion.match("Version/14")&&e.Se.enterRestrictedMode(!0),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("pagehide",this.ke))},t.prototype.hn=function(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return Er("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Cr("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Cr("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Nu(t){return Ns(t,Za.store)}function Au(t){return Ns(t,hs.store)}function Pu(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Ru=function(t,e){this.progress=t,this.wn=e},Du=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},t.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return ai.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):Qi(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new ai(e)).next((function(t){var e=Zo();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=Zo();return this.Ut.getCollectionParents(t,i).next((function(a){return ys.forEach(a,(function(a){var s=function(t,e){return new zi(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,a.child(i));return r.An(t,s,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.Rn(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=r.get(c);null==l&&(l=Ti.newInvalidDocument(c),r=r.insert(c,l)),No(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){io(e,n)||(r=r.remove(t))})),r}))},t.prototype.Rn=function(t,e,n){for(var r=ra(),i=0,o=e;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof Mo&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},t}(),Mu=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=ra(),i=ra(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Ou=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(Gr.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(o){var s=i.Cn(e,o);return(Wi(e)||Ki(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(kr()<=a.LogLevel.DEBUG&&Er("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),ro(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return s.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.Cn=function(t,e){var n=new Ko(oo(t));return e.forEach((function(e,r){io(t,r)&&(n=n.add(r))})),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return kr()<=a.LogLevel.DEBUG&&Er("QueryEngine","Using full collection scan to execute query:",ro(e)),this.Sn.getDocumentsMatchingQuery(t,e,Gr.min())},t}(),Lu=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.kn=new Ho(Lr),this.Fn=new yu((function(t){return ki(t)}),Ei),this.$n=Gr.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new Du(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.kn)}))},t}();function Fu(t,e,n,r){return new Lu(t,e,n,r)}function ju(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n,r,o,a;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return n=Dr(t),r=n._n,o=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var i;return n._n.getAllMutationBatches(t).next((function(a){return i=a,r=n.persistence.getMutationQueue(e),o=new Du(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],a=ra(),s=0,u=i;s<u.length;s++){var c=u[s];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var d=h[l];a=a.add(d.key)}}for(var f=0,p=e;f<p.length;f++){var g=p[f];r.push(g.batchId);for(var m=0,v=g.mutations;m<v.length;m++){var y=v[m];a=a.add(y.key)}}return o.pn(t,a).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return a=i.sent(),[2,(n._n=r,n.Mn=o,n.xn.Vn(n.Mn),a)]}}))}))}function Bu(t,e){var n=Dr(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),a=ys.resolve();return o.forEach((function(t){a=a.next((function(){return r.getEntry(e,t)})).next((function(e){var o=n.docVersions.get(t);Rr(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))}))})),a.next((function(){return t._n.removeMutationBatch(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}function Gu(t){var e=Dr(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function Uu(t,e){var n=Dr(t),r=e.snapshotVersion,i=n.kn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.kn;var a=[];e.targetChanges.forEach((function(e,o){var s=i.get(o);if(s){a.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)})));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=s.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return Rr(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(s,c,e)&&a.push(n.qe.updateTargetData(t,c))}}}));var s=Qo();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),a.push(Vu(t,o,e.documentUpdates,r,void 0).next((function(t){s=t}))),!r.isEqual(Gr.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)}));a.push(u)}return ys.waitFor(a).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,s)})).next((function(){return s}))})).then((function(t){return n.kn=i,t}))}function Vu(t,e,n,r,i){var o=ra();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=Qo();return n.forEach((function(n,a){var s=t.get(n),u=(null==i?void 0:i.get(n))||r;a.isNoDocument()&&a.version.isEqual(Gr.min())?(e.removeEntry(n,u),o=o.insert(n,a)):!s.isValidDocument()||a.version.compareTo(s.version)>0||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(e.addEntry(a,u),o=o.insert(n,a)):Er("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)})),o}))}function qu(t,e){var n=Dr(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)}))}function zu(t,e){var n=Dr(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?(r=i,ys.resolve(r)):n.qe.allocateTargetId(t).next((function(i){return r=new Rs(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.kn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.kn=n.kn.insert(t.targetId,t),n.Fn.set(e,t.targetId)),t}))}function Hu(t,e,n){return(0,i.__awaiter)(this,void 0,void 0,(function(){var r,o,a,s;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:r=Dr(t),o=r.kn.get(e),a=n?"readwrite":"readwrite-primary",i.label=1;case 1:return i.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",a,(function(t){return r.persistence.referenceDelegate.removeTarget(t,o)}))];case 2:i.sent(),i.label=3;case 3:return[3,5];case 4:if(!Ts(s=i.sent()))throw s;return Er("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.kn=r.kn.remove(e),r.Fn.delete(o.target),[2]}}))}))}function $u(t,e,n){var r=Dr(t),i=Gr.min(),o=ra();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=Dr(t),i=r.Fn.get(n);return void 0!==i?ys.resolve(r.kn.get(i)):r.qe.getTargetData(e,n)}(r,t,Zi(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:Gr.min(),n?o:ra())})).next((function(t){return{documents:t,Bn:o}}))}))}function Wu(t,e){var n=Dr(t),r=Dr(n.qe),i=n.kn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function Ku(t){var e=Dr(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=Dr(t),i=Qo(),o=Ls(n),a=Tu(e),s=IDBKeyRange.lowerBound(o,!0);return a.$t({index:os.readTimeIndex,range:s},(function(t,e){var n=Ms(r.R,e);i=i.insert(n.key,n),o=e.readTime})).next((function(){return{wn:i,readTime:Fs(o)}}))}(e.On,t,e.$n)})).then((function(t){var n=t.wn,r=t.readTime;return e.$n=r,n}))}function Yu(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){return[2,(e=Dr(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=Tu(t),n=Gr.min();return e.$t({index:os.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Fs(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.$n=t}))]}))}))}function Xu(t,e,n,r){return(0,i.__awaiter)(this,void 0,void 0,(function(){var o,a,s,u,c,l,h,d,f,p;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:for(o=Dr(t),a=ra(),s=Qo(),u=ea(),c=0,l=n;c<l.length;c++)h=l[c],d=e.qn(h.metadata.name),h.document&&(a=a.add(d)),s=s.insert(d,e.Un(h)),u=u.insert(d,e.Kn(h.metadata.readTime));return f=o.On.newChangeBuffer({trackRemovals:!0}),[4,zu(o,function(t){return Zi($i(Hr.fromString("__bundle__/docs/"+t)))}(r))];case 1:return p=i.sent(),[2,o.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return Vu(t,f,s,Gr.min(),u).next((function(e){return f.apply(t),e})).next((function(e){return o.qe.removeMatchingKeysForTargetId(t,p.targetId).next((function(){return o.qe.addMatchingKeys(t,a,p.targetId)})).next((function(){return o.Mn.En(t,e)})).next((function(){return e}))}))}))]}}))}))}function Qu(t,e,n){return void 0===n&&(n=ra()),(0,i.__awaiter)(this,void 0,void 0,(function(){var r,o;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,zu(t,Zi(qs(e.bundledQuery)))];case 1:return r=i.sent(),[2,(o=Dr(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var i=wa(e.readTime);if(r.snapshotVersion.compareTo(i)>=0)return o.Ke.saveNamedQuery(t,e);var a=r.withResumeToken(Yr.EMPTY_BYTE_STRING,i);return o.kn=o.kn.insert(a.targetId,a),o.qe.updateTargetData(t,a).next((function(){return o.qe.removeMatchingKeysForTargetId(t,r.targetId)})).next((function(){return o.qe.addMatchingKeys(t,n,r.targetId)})).next((function(){return o.Ke.saveNamedQuery(t,e)}))}))]}}))}))}var Ju=function(){function t(t){this.R=t,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return ys.resolve(this.Qn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Qn.set(e.id,{id:(n=e).id,version:n.version,createTime:wa(n.createTime)}),ys.resolve()},t.prototype.getNamedQuery=function(t,e){return ys.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:qs(t.bundledQuery),readTime:wa(t.readTime)}}(e)),ys.resolve()},t}(),Zu=function(){function t(){this.Wn=new Ko(tc.Gn),this.zn=new Ko(tc.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new tc(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.Yn(new tc(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.Zn=function(t){var e=this,n=new ai(new Hr([])),r=new tc(n,t),i=new tc(n,t+1),o=[];return this.zn.forEachInRange([r,i],(function(t){e.Yn(t),o.push(t.key)})),o},t.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new ai(new Hr([])),n=new tc(e,t),r=new tc(e,t+1),i=ra();return this.zn.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new tc(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),tc=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return ai.comparator(t.key,e.key)||Lr(t.ns,e.ns)},t.Hn=function(t,e){return Lr(t.ns,e.ns)||ai.comparator(t.key,e.key)},t}(),ec=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new Ko(tc.Gn)}return t.prototype.checkEmpty=function(t){return ys.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new As(i,e,n,r);this._n.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.rs=this.rs.add(new tc(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return ys.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return ys.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.cs(n),i=r<0?0:r;return ys.resolve(this._n.length>i?this._n[i]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return ys.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return ys.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new tc(e,0),i=new tc(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(t){var e=n.os(t.ns);o.push(e)})),ys.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Ko(Lr);return e.forEach((function(t){var e=new tc(t,0),i=new tc(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],(function(t){r=r.add(t.ns)}))})),ys.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;ai.isDocumentKey(i)||(i=i.child(""));var o=new tc(new ai(i),0),a=new Ko(Lr);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(a=a.add(t.ns)),!0)}),o),ys.resolve(this.us(a))},t.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.os(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Rr(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return ys.forEach(e.mutations,(function(i){var o=new tc(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new tc(e,0),r=this.rs.firstAfterOrEqual(n);return ys.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return this._n.length,ys.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),nc=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new Ho(ai.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,a=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:a,readTime:n}),this.size+=a-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return ys.resolve(n?n.document.clone():Ti.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=Qo();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():Ti.newInvalidDocument(t))})),ys.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=Qo(),i=new ai(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value,c=u.document,l=u.readTime;if(!e.path.isPrefixOf(s.path))break;l.compareTo(n)<=0||io(e,c)&&(r=r.insert(c.key,c.clone()))}return ys.resolve(r)},t.prototype.fs=function(t,e){return ys.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new rc(this)},t.prototype.getSize=function(t){return ys.resolve(this.size)},t}(),rc=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return(0,i.__extends)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),ys.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(bu),ic=function(){function t(t){this.persistence=t,this.ds=new yu((function(t){return ki(t)}),Ei),this.lastRemoteSnapshotVersion=Gr.min(),this.highestTargetId=0,this.ws=0,this._s=new Zu,this.targetCount=0,this.ys=au.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),ys.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return ys.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return ys.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),ys.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),ys.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new au(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,ys.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),ys.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,ys.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(a,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(r.ds.delete(a),o.push(r.removeMatchingKeysForTargetId(t,s.targetId)),i++)})),ys.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return ys.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return ys.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),ys.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),ys.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),ys.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return ys.resolve(n)},t.prototype.containsKey=function(t,e){return ys.resolve(this._s.containsKey(e))},t}(),oc=function(){function t(t,e){var n=this;this.gs={},this.Ne=new Sr(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new ic(this),this.Ut=new Ws,this.Ue=function(t,e){return new nc(t,(function(t){return n.referenceDelegate.ps(t)}))}(this.Ut),this.R=new Ds(e),this.Ke=new Ju(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new ec(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;Er("MemoryPersistence","Starting transaction:",t);var i=new ac(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Is=function(t,e){return ys.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),ac=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return(0,i.__extends)(e,t),e}(ms),sc=function(){function t(t){this.persistence=t,this.As=new Zu,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Pr()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),ys.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),ys.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),ys.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ys.forEach(this.vs,(function(r){var i=ai.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return ys.or([function(){return ys.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),uc=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function cc(t,e){return"firestore_clients_"+t+"_"+e}function lc(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function hc(t,e){return"firestore_targets_"+t+"_"+e}uc.UNAUTHENTICATED=new uc(null),uc.GOOGLE_CREDENTIALS=new uc("google-credentials-uid"),uc.FIRST_PARTY=new uc("first-party-uid"),uc.MOCK_USER=new uc("mock-user");var dc=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),a="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return a&&o.error&&(a="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new xr(o.error.code,o.error.message)),a?new t(e,n,o.state,i):(Cr("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),fc=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new xr(i.error.code,i.error.message)),o?new t(e,i.state,r):(Cr("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),pc=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=oa(),a=0;i&&a<r.activeTargetIds.length;++a)i=oi(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new t(e,o):(Cr("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),gc=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Cr("SharedClientState","Failed to parse online state: "+e),null)},t}(),mc=function(){function t(){this.activeTargetIds=oa()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),vc=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.ks.bind(this),this.Fs=new Ho(Lr),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=cc(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Fs=this.Fs.insert(this.Ns,new mc),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ks=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t,e,n,r,o,a,s,u,c,l,h,d=this;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=i.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(o=this.getItem(cc(this.persistenceKey,r)))&&(a=pc.Vs(r,o))&&(this.Fs=this.Fs.insert(a.clientId,a));for(this.Qs(),(s=this.storage.getItem(this.Us))&&(u=this.js(s))&&this.Ws(u),c=0,l=this.$s;c<l.length;c++)h=l[c],this.ks(h);return this.$s=[],this.window.addEventListener("pagehide",(function(){return d.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.Fs)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.Fs.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(hc(this.persistenceKey,t));if(n){var r=fc.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Qs(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(hc(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Er("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Er("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Er("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.ks=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Er("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void Cr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return(0,i.__awaiter)(e,void 0,void 0,(function(){var t,e,r,o,a,s;return(0,i.__generator)(this,(function(i){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(o=this.ri(n.key,n.newValue)))return[2,this.oi(o)]}else if(n.key===this.Us){if(null!==n.newValue&&(a=this.js(n.newValue)))return[2,this.Ws(a)]}else if(n.key===this.Ms)(s=function(t){var e=Sr.o;if(null!=t)try{var n=JSON.parse(t);Rr("number"==typeof n),e=n}catch(t){Cr("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Sr.o&&this.sequenceNumberHandler(s);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.Fs.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new dc(this.currentUser,t,e,n),i=lc(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=lc(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){var e={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(e))},t.prototype.Ys=function(t,e,n){var r=hc(this.persistenceKey,t),i=new fc(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return pc.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return dc.Vs(new uc(i),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return fc.Vs(r,e)},t.prototype.js=function(t){return gc.Vs(t)},t.prototype.ii=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Er("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.Fs.insert(t,e):this.Fs.remove(t),i=this.Gs(this.Fs),o=this.Gs(r),a=[],s=[];return o.forEach((function(t){i.has(t)||a.push(t)})),i.forEach((function(t){o.has(t)||s.push(t)})),this.syncEngine.hi(a,s).then((function(){n.Fs=r}))},t.prototype.Ws=function(t){this.Fs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=oa();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),yc=function(){function t(){this.li=new mc,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new mc,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),bc=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),_c=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Er("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){Er("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),wc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Sc=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),Tc=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return(0,i.__extends)(e,t),e.prototype.Fi=function(t,e,n,r){return new Promise((function(i,o){var a=new wr;a.listenOnce(mr.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case gr.NO_ERROR:var e=a.getResponseJson();Er("Connection","XHR received:",JSON.stringify(e)),i(e);break;case gr.TIMEOUT:Er("Connection",'RPC "'+t+'" timed out'),o(new xr(Tr.DEADLINE_EXCEEDED,"Request time out"));break;case gr.HTTP_ERROR:var n=a.getStatus();if(Er("Connection",'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var s=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Tr).indexOf(e)>=0?e:Tr.UNKNOWN}(r.status);o(new xr(s,r.message))}else o(new xr(Tr.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new xr(Tr.UNAVAILABLE,"Connection failed."));break;default:Pr()}}finally{Er("Connection",'RPC "'+t+'" completed.')}}));var s=JSON.stringify(r);a.send(e,"POST",s,n,15)}))},e.prototype.Oi=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=fr(),i=pr(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new br({})),this.ki(a.initMessageHeaders,e),(0,o.isMobileCordova)()||(0,o.isReactNative)()||(0,o.isElectron)()||(0,o.isIE)()||(0,o.isUWP)()||(0,o.isBrowserExtension)()||(a.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");Er("Connection","Creating WebChannel: "+s,a);var u=r.createWebChannel(s,a),c=!1,l=!1,h=new Sc({Ei:function(t){l?Er("Connection","Not sending because WebChannel is closed:",t):(c||(Er("Connection","Opening WebChannel transport."),u.open(),c=!0),Er("Connection","WebChannel sending:",t),u.send(t))},Ti:function(){return u.close()}}),d=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return d(u,_r.EventType.OPEN,(function(){l||Er("Connection","WebChannel transport opened.")})),d(u,_r.EventType.CLOSE,(function(){l||(l=!0,Er("Connection","WebChannel transport closed"),h.Vi())})),d(u,_r.EventType.ERROR,(function(t){l||(l=!0,Nr("Connection","WebChannel transport errored:",t),h.Vi(new xr(Tr.UNAVAILABLE,"The operation could not be completed")))})),d(u,_r.EventType.MESSAGE,(function(t){var e;if(!l){var n=t.data[0];Rr(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){Er("Connection","WebChannel received error:",i);var o=i.status,a=function(t){var e=jo[t];if(void 0!==e)return zo(e)}(o),s=i.message;void 0===a&&(a=Tr.INTERNAL,s="Unknown error status: "+o+" with message "+i.message),l=!0,h.Vi(new xr(a,s)),u.close()}else Er("Connection","WebChannel received:",n),h.Si(n)}})),d(i,vr.STAT_EVENT,(function(t){t.stat===yr.PROXY?Er("Connection","Detected buffering proxy"):t.stat===yr.NOPROXY&&Er("Connection","Detected no buffering proxy")})),setTimeout((function(){h.Pi()}),0),h},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);Er("RestConnection","Sending: ",i,n);var o={};return this.ki(o,r),this.Fi(t,i,o,n).then((function(t){return Er("RestConnection","Received: ",t),t}),(function(e){throw Nr("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.ki=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.10.1",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){var n=wc[t];return this.Di+"/v1/"+e+":"+n},t}());function xc(){return"undefined"!=typeof window?window:null}function Ic(){return"undefined"!=typeof document?document:null}function kc(t){return new va(t,!0)}var Ec=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&Er("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Ki=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),Cc=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Ec(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===Tr.RESOURCE_EXHAUSTED?(Cr(e.toString()),Cr("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===Tr.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new xr(Tr.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return(0,i.__awaiter)(t,void 0,void 0,(function(){return(0,i.__generator)(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.dr=function(t){return Er("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(Er("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Nc=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,a}return(0,i.__extends)(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Pr()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(Rr(void 0===e||"string"==typeof e),Yr.fromBase64String(e||"")):(Rr(void 0===e||e instanceof Uint8Array),Yr.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=(s=e.targetChange.cause)&&function(t){var e=void 0===t.code?Tr.UNKNOWN:zo(t.code);return new xr(e,t.message||"")}(s);n=new la(r,i,o,a||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=Ia(t,r.document.name),o=wa(r.document.updateTime);var s=new wi({mapValue:{fields:r.document.fields}}),u=(a=Ti.newFoundDocument(i,o,s),r.targetIds||[]),c=r.removedTargetIds||[];n=new ua(u,c,a.key,a)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=Ia(t,r.document),o=r.readTime?wa(r.readTime):Gr.min(),s=Ti.newNoDocument(i,o),a=r.removedTargetIds||[],n=new ua([],a,s.key,s);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=Ia(t,r.document),o=r.removedTargetIds||[],n=new ua([],o,i,null);else{if(!("filter"in e))return Pr();e.filter;var l=e.filter;l.targetId,r=l.count||0,i=new Vo(r),o=l.targetId,n=new ca(o,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return Gr.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Gr.min():e.readTime?wa(e.readTime):Gr.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=Ca(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=Ci(r)?{documents:Ma(t,r)}:{query:Oa(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=ba(t,e.resumeToken):e.snapshotVersion.compareTo(Gr.min())>0&&(n.readTime=ya(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Pr()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=Ca(this.R),e.removeTarget=t,this.cr(e)},e}(Cc),Ac=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,a.gr=!1,a}return(0,i.__extends)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(Rr(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(Rr(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?wa(t.updateTime):wa(e);return n.isEqual(Gr.min())&&(n=wa(e)),new xo(n,t.transformResults||[])}(t,e)}))):[]}(t.writeResults,t.commitTime),n=wa(t.commitTime);return this.listener.Tr(n,e)}return Rr(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=Ca(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return Ra(e.R,t)}))};this.cr(n)},e}(Cc),Pc=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return(0,i.__extends)(e,t),e.prototype.br=function(){if(this.Rr)throw new xr(Tr.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===Tr.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new xr(Tr.UNKNOWN,t.toString())}))},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.$i(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===Tr.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new xr(Tr.UNKNOWN,t.toString())}))},e.prototype.terminate=function(){this.Rr=!0},e}((function(){})),Rc=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.kr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.kr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Cr(e),this.Vr=!1):Er("OnlineStateTracker",e)},t.prototype.kr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),Dc=function(t,e,n,r,o){var a=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.Fr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=o,this.Lr.di((function(t){n.enqueueAndForget((function(){return(0,i.__awaiter)(a,void 0,void 0,(function(){return(0,i.__generator)(this,(function(t){switch(t.label){case 0:return Vc(this)?(Er("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return(e=Dr(t)).Or.add(4),[4,Oc(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,Mc(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new Rc(n,r)};function Mc(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,n;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:if(!Vc(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Oc(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,n;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Lc(t,e){var n=Dr(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),Uc(n)?Gc(n):rl(n).er()&&jc(n,e))}function Fc(t,e){var n=Dr(t),r=rl(n);n.$r.delete(e),r.er()&&Bc(n,e),0===n.$r.size&&(r.er()?r.ir():Vc(n)&&n.Br.set("Unknown"))}function jc(t,e){t.qr.U(e.targetId),rl(t).mr(e)}function Bc(t,e){t.qr.U(e),rl(t).yr(e)}function Gc(t){t.qr=new da({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),rl(t).start(),t.Br.Sr()}function Uc(t){return Vc(t)&&!rl(t).tr()&&t.$r.size>0}function Vc(t){return 0===Dr(t).Or.size}function qc(t){t.qr=void 0}function zc(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){return t.$r.forEach((function(e,n){jc(t,e)})),[2]}))}))}function Hc(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(n){return qc(t),Uc(t)?(t.Br.Nr(e),Gc(t)):t.Br.set("Unknown"),[2]}))}))}function $c(t,e,n){return(0,i.__awaiter)(this,void 0,void 0,(function(){var r,o,a;return(0,i.__generator)(this,(function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof la&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n,r,o,a;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:n=e.cause,r=0,o=e.targetIds,i.label=1;case 1:return r<o.length?(a=o[r],t.$r.has(a)?[4,t.remoteSyncer.rejectListen(a,n)]:[3,3]):[3,5];case 2:i.sent(),t.$r.delete(a),t.qr.removeTarget(a),i.label=3;case 3:i.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Er("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Wc(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof ua?t.qr.X(e):e instanceof ca?t.qr.rt(e):t.qr.et(e),n.isEqual(Gr.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Gu(t.localStore)];case 8:return o=s.sent(),n.compareTo(o)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(Yr.EMPTY_BYTE_STRING,n.snapshotVersion)),Bc(t,e);var r=new Rs(n.target,e,1,n.sequenceNumber);jc(t,r)}})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Er("RemoteStore","Failed to raise snapshot:",a=s.sent()),[4,Wc(t,a)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function Wc(t,e,n){return(0,i.__awaiter)(this,void 0,void 0,(function(){var r=this;return(0,i.__generator)(this,(function(o){switch(o.label){case 0:if(!Ts(e))throw e;return t.Or.add(1),[4,Oc(t)];case 1:return o.sent(),t.Br.set("Offline"),n||(n=function(){return Gu(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return(0,i.__awaiter)(r,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return Er("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,Mc(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function Kc(t,e){return e().catch((function(n){return Wc(t,n,e)}))}function Yc(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,n,r,o,a;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:e=Dr(t),n=il(e),r=e.Fr.length>0?e.Fr[e.Fr.length-1].batchId:-1,i.label=1;case 1:if(!function(t){return Vc(t)&&t.Fr.length<10}(e))return[3,7];i.label=2;case 2:return i.trys.push([2,4,,6]),[4,qu(e.localStore,r)];case 3:return null===(o=i.sent())?(0===e.Fr.length&&n.ir(),[3,7]):(r=o.batchId,function(t,e){t.Fr.push(e);var n=il(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,o),[3,6]);case 4:return a=i.sent(),[4,Wc(e,a)];case 5:return i.sent(),[3,6];case 6:return[3,1];case 7:return Xc(e)&&Qc(e),[2]}}))}))}function Xc(t){return Vc(t)&&!il(t).tr()&&t.Fr.length>0}function Qc(t){il(t).start()}function Jc(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){return il(t).Ar(),[2]}))}))}function Zc(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,n,r,o;return(0,i.__generator)(this,(function(i){for(e=il(t),n=0,r=t.Fr;n<r.length;n++)o=r[n],e.Er(o.mutations);return[2]}))}))}function tl(t,e,n){return(0,i.__awaiter)(this,void 0,void 0,(function(){var r,o;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return r=t.Fr.shift(),o=Ps.from(r,e,n),[4,Kc(t,(function(){return t.remoteSyncer.applySuccessfulWrite(o)}))];case 1:return i.sent(),[4,Yc(t)];case 2:return i.sent(),[2]}}))}))}function el(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return e&&il(t).pr?[4,function(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n,r;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return qo(r=e.code)&&r!==Tr.ABORTED?(n=t.Fr.shift(),il(t).sr(),[4,Kc(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,Yc(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Xc(t)&&Qc(t),[2]}}))}))}function nl(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return n=Dr(t),e?(n.Or.delete(2),[4,Mc(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,Oc(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function rl(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=Dr(t);return r.br(),new Nc(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:zc.bind(null,t),Ri:Hc.bind(null,t),_r:$c.bind(null,t)}),t.Mr.push((function(n){return(0,i.__awaiter)(e,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return n?(t.Ur.sr(),Uc(t)?Gc(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),qc(t),e.label=3;case 3:return[2]}}))}))}))),t.Ur}function il(t){var e=this;return t.Kr||(t.Kr=function(t,e,n){var r=Dr(t);return r.br(),new Ac(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Jc.bind(null,t),Ri:el.bind(null,t),Ir:Zc.bind(null,t),Tr:tl.bind(null,t)}),t.Mr.push((function(n){return(0,i.__awaiter)(e,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return n?(t.Kr.sr(),[4,Yc(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:e.sent(),t.Fr.length>0&&(Er("RemoteStore","Stopping write stream with "+t.Fr.length+" pending writes"),t.Fr=[]),e.label=4;case 4:return[2]}}))}))}))),t.Kr}var ol=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new vs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var a=new t(e,n,Date.now()+r,i,o);return a.start(r),a},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xr(Tr.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function al(t,e){if(Cr("AsyncQueue",e+": "+t),Ts(t))return new xr(Tr.UNAVAILABLE,e+": "+t);throw t}var sl=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||ai.comparator(e.key,n.key)}:function(t,e){return ai.comparator(t.key,e.key)},this.keyedMap=Zo(),this.sortedSet=new Ho(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),ul=function(){function t(){this.Qr=new Ho(ai.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);n?0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):Pr():this.Qr=this.Qr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),cl=function(){function t(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,sl.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&eo(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),ll=function(){this.Wr=void 0,this.listeners=[]},hl=function(){this.queries=new yu((function(t){return no(t)}),eo),this.onlineState="Unknown",this.Gr=new Set};function dl(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n,r,o,a,s,u,c;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:if(n=Dr(t),r=e.query,o=!1,(a=n.queries.get(r))||(o=!0,a=new ll),!o)return[3,4];i.label=1;case 1:return i.trys.push([1,3,,4]),s=a,[4,n.onListen(r)];case 2:return s.Wr=i.sent(),[3,4];case 3:return u=i.sent(),c=al(u,"Initialization of query '"+ro(e.query)+"' failed"),[2,void e.onError(c)];case 4:return n.queries.set(r,a),a.listeners.push(e),e.zr(n.onlineState),a.Wr&&e.Hr(a.Wr)&&ml(n),[2]}}))}))}function fl(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n,r,o,a,s;return(0,i.__generator)(this,(function(i){return n=Dr(t),r=e.query,o=!1,(a=n.queries.get(r))&&(s=a.listeners.indexOf(e))>=0&&(a.listeners.splice(s,1),o=0===a.listeners.length),o?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function pl(t,e){for(var n=Dr(t),r=!1,i=0,o=e;i<o.length;i++){var a=o[i],s=a.query,u=n.queries.get(s);if(u){for(var c=0,l=u.listeners;c<l.length;c++)l[c].Hr(a)&&(r=!0);u.Wr=a}}r&&ml(n)}function gl(t,e,n){var r=Dr(t),i=r.queries.get(e);if(i)for(var o=0,a=i.listeners;o<a.length;o++)a[o].onError(n);r.queries.delete(e)}function ml(t){t.Gr.forEach((function(t){t.next()}))}var vl=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new cl(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.so&&n||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=cl.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),yl=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),bl=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return Ia(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?Pa(this.R,t.document,!1):Ti.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},t.prototype.Kn=function(t){return wa(t)},t}(),_l=function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=wl(t)}return t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new bl(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var a=n.qn(o.metadata.name),s=0,u=o.metadata.queries;s<u.length;s++){var c=u[s],l=(e.get(c)||ra()).add(a);e.set(c,l)}}return e},t.prototype.complete=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t,e,n,r,o;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,Xu(this.localStore,new bl(this.R),this.documents,this.ro.id)];case 1:t=i.sent(),e=this.co(this.documents),n=0,r=this.queries,i.label=2;case 2:return n<r.length?(o=r[n],[4,Qu(this.localStore,o,e.get(o.name))]):[3,5];case 3:i.sent(),i.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Ru(Object.assign({},this.progress),t))]}}))}))},t}();function wl(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var Sl=function(t){this.key=t},Tl=function(t){this.key=t},xl=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=ra(),this.mutatedKeys=ra(),this.lo=oo(t),this.fo=new sl(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new ul,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=Wi(this.query)&&i.size===this.query.limit?i.last():null,c=Ki(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var l=i.get(t),h=io(n.query,e)?e:null,d=!!l&&n.mutatedKeys.has(l.key),f=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?d!==f&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(h?(a=a.add(h),o=f?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)))})),Wi(this.query)||Ki(this.query))for(;a.size>this.query.limit;){var l=Wi(this.query)?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:a,mo:r,Nn:s,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pr()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)})),this.po(n);var a=e?this.Eo():[],s=0===this.ho.size&&this.current?1:0,u=s!==this.ao;return this.ao=s,0!==o.length||u?{snapshot:new cl(this.query,t.fo,i,o,t.mutatedKeys,0===s,u,!1),To:a}:{To:a}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new ul,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.uo=e.uo.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.uo=e.uo.delete(t)})),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=ra(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new Tl(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new Sl(t))})),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=ra();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return cl.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),Il=function(t,e,n){this.query=t,this.targetId=e,this.view=n},kl=function(t){this.key=t,this.bo=!1},El=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new yu((function(t){return no(t)}),eo),this.Vo=new Map,this.So=new Set,this.Do=new Ho(ai.comparator),this.Co=new Map,this.No=new Zu,this.xo={},this.ko=new Map,this.Fo=au.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function Cl(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n,r,o,a,s,u;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return n=rh(t),(a=n.Po.get(e))?(r=a.targetId,n.sharedClientState.addLocalQueryTarget(r),o=a.view.Ro(),[3,4]):[3,1];case 1:return[4,zu(n.localStore,Zi(e))];case 2:return s=i.sent(),u=n.sharedClientState.addLocalQueryTarget(s.targetId),r=s.targetId,[4,Nl(n,e,r,"current"===u)];case 3:o=i.sent(),n.isPrimaryClient&&Lc(n.remoteStore,s),i.label=4;case 4:return[2,o]}}))}))}function Nl(t,e,n,r){return(0,i.__awaiter)(this,void 0,void 0,(function(){var o,a,s,u,c,l;return(0,i.__generator)(this,(function(h){switch(h.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return(0,i.__awaiter)(this,void 0,void 0,(function(){var o,a,s;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return(o=e.view._o(n)).Nn?[4,$u(t.localStore,e.query,!1).then((function(t){var n=t.documents;return e.view._o(n,o)}))]:[3,2];case 1:o=i.sent(),i.label=2;case 2:return a=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(o,t.isPrimaryClient,a),[2,(Vl(t,e.targetId,s.To),s.snapshot)]}}))}))}(t,e,n,r)},[4,$u(t.localStore,e,!0)];case 1:return o=h.sent(),a=new xl(e,o.Bn),s=a._o(o.documents),u=sa.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),c=a.applyChanges(s,t.isPrimaryClient,u),Vl(t,n,c.To),l=new Il(e,n,a),[2,(t.Po.set(e,l),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),c.snapshot)]}}))}))}function Al(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n,r,o;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return n=Dr(t),r=n.Po.get(e),(o=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,o.filter((function(t){return!eo(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Hu(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),Fc(n.remoteStore,r.targetId),Gl(n,r.targetId)})).catch(hu)]):[3,3];case 1:i.sent(),i.label=2;case 2:return[3,5];case 3:return Gl(n,r.targetId),[4,Hu(n.localStore,r.targetId,!0)];case 4:i.sent(),i.label=5;case 5:return[2]}}))}))}function Pl(t,e,n){return(0,i.__awaiter)(this,void 0,void 0,(function(){var r,o,a,s;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:r=ih(t),i.label=1;case 1:return i.trys.push([1,5,,6]),[4,function(t,e){var n,r=Dr(t),i=Br.now(),o=e.reduce((function(t,e){return t.add(e.key)}),ra());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Mn.pn(t,o).next((function(o){n=o;for(var a=[],s=0,u=e;s<u.length;s++){var c=u[s],l=Ao(c,n.get(c.key));null!=l&&a.push(new Mo(c.key,l,Si(l.value.mapValue),Io.exists(!0)))}return r._n.addMutationBatch(t,i,a,e)}))})).then((function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}}))}(r.localStore,e)];case 2:return o=i.sent(),r.sharedClientState.addPendingMutation(o.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new Ho(Lr)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,o.batchId,n),[4,Hl(r,o.changes)];case 3:return i.sent(),[4,Yc(r.remoteStore)];case 4:return i.sent(),[3,6];case 5:return a=i.sent(),s=al(a,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}function Rl(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n,r;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:n=Dr(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Uu(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){var r=n.Co.get(e);r&&(Rr(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?Rr(r.bo):t.removedDocuments.size>0&&(Rr(r.bo),r.bo=!1))})),[4,Hl(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,hu(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function Dl(t,e,n){var r=Dr(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=Dr(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)})),r&&ml(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Ml(t,e,n){return(0,i.__awaiter)(this,void 0,void 0,(function(){var r,o,a,s,u,c;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return(r=Dr(t)).sharedClientState.updateQueryState(e,"rejected",n),o=r.Co.get(e),(a=o&&o.key)?(s=(s=new Ho(ai.comparator)).insert(a,Ti.newNoDocument(a,Gr.min())),u=ra().add(a),c=new aa(Gr.min(),new Map,new Ko(Lr),s,u),[4,Rl(r,c)]):[3,2];case 1:return i.sent(),r.Do=r.Do.remove(a),r.Co.delete(e),zl(r),[3,4];case 2:return[4,Hu(r.localStore,e,!1).then((function(){return Gl(r,e,n)})).catch(hu)];case 3:i.sent(),i.label=4;case 4:return[2]}}))}))}function Ol(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n,r,o;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:n=Dr(t),r=e.batch.batchId,i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Bu(n.localStore,e)];case 2:return o=i.sent(),Bl(n,r,null),jl(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Hl(n,o)];case 3:return i.sent(),[3,6];case 4:return[4,hu(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function Ll(t,e,n){return(0,i.__awaiter)(this,void 0,void 0,(function(){var r,o;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:r=Dr(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,function(t,e){var n=Dr(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n._n.lookupMutationBatch(t,e).next((function(e){return Rr(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}(r.localStore,e)];case 2:return o=i.sent(),Bl(r,e,n),jl(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,Hl(r,o)];case 3:return i.sent(),[3,6];case 4:return[4,hu(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function Fl(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n,r,o,a,s;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:Vc((n=Dr(t)).remoteStore)||Er("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,function(t){var e=Dr(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e._n.getHighestUnacknowledgedBatchId(t)}))}(n.localStore)];case 2:return-1===(r=i.sent())?[2,void e.resolve()]:((o=n.ko.get(r)||[]).push(e),n.ko.set(r,o),[3,4]);case 3:return a=i.sent(),s=al(a,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}}))}))}function jl(t,e){(t.ko.get(e)||[]).forEach((function(t){t.resolve()})),t.ko.delete(e)}function Bl(t,e,n){var r=Dr(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function Gl(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||Ul(t,e)}))}function Ul(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(Fc(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),zl(t))}function Vl(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Sl?(t.No.addReference(o.key,e),ql(t,o)):o instanceof Tl?(Er("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||Ul(t,o.key)):Pr()}}function ql(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(Er("SyncEngine","New document in limbo: "+n),t.So.add(r),zl(t))}function zl(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new ai(Hr.fromString(e)),r=t.Fo.next();t.Co.set(r,new kl(n)),t.Do=t.Do.insert(n,r),Lc(t.remoteStore,new Rs(Zi($i(n.path)),r,2,Sr.o))}}function Hl(t,e,n){return(0,i.__awaiter)(this,void 0,void 0,(function(){var r,o,a,s;return(0,i.__generator)(this,(function(u){switch(u.label){case 0:return r=Dr(t),o=[],a=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(t,i){s.push(r.Oo(i,e,n).then((function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(i.targetId,t.fromCache?"not-current":"current"),o.push(t);var e=Mu.Pn(i.targetId,t);a.push(e)}})))})),[4,Promise.all(s)]);case 1:return u.sent(),r.vo._r(o),[4,function(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n,r,o,a,s,u,c,l,h;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:n=Dr(t),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return ys.forEach(e,(function(e){return ys.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return ys.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return i.sent(),[3,4];case 3:if(!Ts(r=i.sent()))throw r;return Er("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(o=0,a=e;o<a.length;o++)s=a[o],u=s.targetId,s.fromCache||(c=n.kn.get(u),l=c.snapshotVersion,h=c.withLastLimboFreeSnapshotVersion(l),n.kn=n.kn.insert(u,h));return[2]}}))}))}(r.localStore,a)];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))}function $l(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n,r;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return(n=Dr(t)).currentUser.isEqual(e)?[3,3]:(Er("SyncEngine","User change. New user:",e.toKey()),[4,ju(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.ko.forEach((function(t){t.forEach((function(t){t.reject(new xr(Tr.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.ko.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,Hl(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function Wl(t,e){var n=Dr(t),r=n.Co.get(e);if(r&&r.bo)return ra().add(r.key);var i=ra(),o=n.Vo.get(e);if(!o)return i;for(var a=0,s=o;a<s.length;a++){var u=s[a],c=n.Po.get(u);i=i.unionWith(c.view.wo)}return i}function Kl(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n,r,o;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,$u((n=Dr(t)).localStore,e.query,!0)];case 1:return r=i.sent(),o=e.view.Ao(r),[2,(n.isPrimaryClient&&Vl(n,e.targetId,o.To),o)]}}))}))}function Yl(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){return[2,Ku((e=Dr(t)).localStore).then((function(t){return Hl(e,t)}))]}))}))}function Xl(t,e,n,r){return(0,i.__awaiter)(this,void 0,void 0,(function(){var o,a;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,function(t,e){var n=Dr(t),r=Dr(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.jt(t,e).next((function(e){return e?n.Mn.pn(t,e):ys.resolve(null)}))}))}((o=Dr(t)).localStore,e)];case 1:return null===(a=i.sent())?[3,6]:"pending"!==n?[3,3]:[4,Yc(o.remoteStore)];case 2:return i.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Bl(o,e,r||null),jl(o,e),function(t,e){Dr(Dr(t)._n).Gt(e)}(o.localStore,e)):Pr(),i.label=4;case 4:return[4,Hl(o,a)];case 5:return i.sent(),[3,7];case 6:Er("SyncEngine","Cannot apply mutation batch with id: "+e),i.label=7;case 7:return[2]}}))}))}function Ql(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n,r,o,a,s,u,c,l;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return rh(n=Dr(t)),ih(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,Jl(n,r.toArray())]);case 1:return o=i.sent(),n.$o=!0,[4,nl(n.remoteStore,!0)];case 2:for(i.sent(),a=0,s=o;a<s.length;a++)u=s[a],Lc(n.remoteStore,u);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(c=[],l=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?c.push(e):l=l.then((function(){return Gl(n,e),Hu(n.localStore,e,!0)})),Fc(n.remoteStore,e)})),[4,l]);case 4:return i.sent(),[4,Jl(n,c)];case 5:return i.sent(),function(t){var e=Dr(t);e.Co.forEach((function(t,n){Fc(e.remoteStore,n)})),e.No.ts(),e.Co=new Map,e.Do=new Ho(ai.comparator)}(n),n.$o=!1,[4,nl(n.remoteStore,!1)];case 6:i.sent(),i.label=7;case 7:return[2]}}))}))}function Jl(t,e,n){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n,r,o,a,s,u,c,l,h,d,f,p,g,m;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:n=Dr(t),r=[],o=[],a=0,s=e,i.label=1;case 1:return a<s.length?(u=s[a],c=void 0,(l=n.Vo.get(u))&&0!==l.length?[4,zu(n.localStore,Zi(l[0]))]:[3,7]):[3,13];case 2:c=i.sent(),h=0,d=l,i.label=3;case 3:return h<d.length?(f=d[h],p=n.Po.get(f),[4,Kl(n,p)]):[3,6];case 4:(g=i.sent()).snapshot&&o.push(g.snapshot),i.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,Wu(n.localStore,u)];case 8:return m=i.sent(),[4,zu(n.localStore,m)];case 9:return c=i.sent(),[4,Nl(n,Zl(m),u,!1)];case 10:i.sent(),i.label=11;case 11:r.push(c),i.label=12;case 12:return a++,[3,1];case 13:return[2,(n.vo._r(o),r)]}}))}))}function Zl(t){return Hi(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function th(t){var e=Dr(t);return Dr(Dr(e.localStore).persistence).fn()}function eh(t,e,n,r){return(0,i.__awaiter)(this,void 0,void 0,(function(){var o,a,s;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return(o=Dr(t)).$o?(Er("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!o.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Ku(o.localStore)];case 3:return a=i.sent(),s=aa.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,Hl(o,a,s)];case 4:return i.sent(),[3,8];case 5:return[4,Hu(o.localStore,e,!0)];case 6:return i.sent(),Gl(o,e,r),[3,8];case 7:Pr(),i.label=8;case 8:return[2]}}))}))}function nh(t,e,n){return(0,i.__awaiter)(this,void 0,void 0,(function(){var r,o,a,s,u,c,l,h,d,f;return(0,i.__generator)(this,(function(p){switch(p.label){case 0:if(!(r=rh(t)).$o)return[3,10];o=0,a=e,p.label=1;case 1:return o<a.length?(s=a[o],r.Vo.has(s)?(Er("SyncEngine","Adding an already active target "+s),[3,5]):[4,Wu(r.localStore,s)]):[3,6];case 2:return u=p.sent(),[4,zu(r.localStore,u)];case 3:return c=p.sent(),[4,Nl(r,Zl(u),c.targetId,!1)];case 4:p.sent(),Lc(r.remoteStore,c),p.label=5;case 5:return o++,[3,1];case 6:l=function(t){return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,Hu(r.localStore,t,!1).then((function(){Fc(r.remoteStore,t),Gl(r,t)})).catch(hu)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},h=0,d=n,p.label=7;case 7:return h<d.length?(f=d[h],[5,l(f)]):[3,10];case 8:p.sent(),p.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function rh(t){var e=Dr(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Rl.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Wl.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ml.bind(null,e),e.vo._r=pl.bind(null,e.eventManager),e.vo.Mo=gl.bind(null,e.eventManager),e}function ih(t){var e=Dr(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ol.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ll.bind(null,e),e}function oh(t,e,n){var r=Dr(t);(function(t,e,n){return(0,i.__awaiter)(this,void 0,void 0,(function(){var r,o,a,s,u,c;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,14,,15]),[4,e.getMetadata()];case 1:return r=i.sent(),[4,function(t,e){var n=Dr(t),r=wa(e.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(t){return n.Ke.getBundleMetadata(t,e.id)})).then((function(t){return!!t&&t.createTime.compareTo(r)>=0}))}(t.localStore,r)];case 2:return i.sent()?[4,e.close()]:[3,4];case 3:return[2,(i.sent(),void n._completeWith(function(t){return{taskState:"Success",documentsLoaded:t.totalDocuments,bytesLoaded:t.totalBytes,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(r)))];case 4:return n._updateProgress(wl(r)),o=new _l(r,t.localStore,e.R),[4,e.Lo()];case 5:a=i.sent(),i.label=6;case 6:return a?[4,o.oo(a)]:[3,10];case 7:return(s=i.sent())&&n._updateProgress(s),[4,e.Lo()];case 8:a=i.sent(),i.label=9;case 9:return[3,6];case 10:return[4,o.complete()];case 11:return u=i.sent(),[4,Hl(t,u.wn,void 0)];case 12:return i.sent(),[4,function(t,e){var n=Dr(t);return n.persistence.runTransaction("Save bundle","readwrite",(function(t){return n.Ke.saveBundleMetadata(t,e)}))}(t.localStore,r)];case 13:return i.sent(),n._completeWith(u.progress),[3,15];case 14:return Nr("SyncEngine","Loading bundle failed with "+(c=i.sent())),n._failWith(c),[3,15];case 15:return[2]}}))}))})(r,e,n).then((function(){r.sharedClientState.notifyBundleLoaded()}))}var ah=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return this.R=kc(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}}))}))},t.prototype.Uo=function(t){return null},t.prototype.Ko=function(t){return Fu(this.persistence,new Ou,t.initialUser,this.R)},t.prototype.qo=function(t){return new oc(sc.bs,this.R)},t.prototype.Bo=function(t){return new yc},t.prototype.terminate=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),sh=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return(0,i.__extends)(e,t),e.prototype.initialize=function(e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n=this;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return r.sent(),[4,Yu(this.localStore)];case 2:return r.sent(),[4,this.Qo.initialize(this,e)];case 3:return r.sent(),[4,ih(this.Qo.syncEngine)];case 4:return r.sent(),[4,Yc(this.Qo.remoteStore)];case 5:return r.sent(),[4,this.persistence.He((function(){return n.gcScheduler&&!n.gcScheduler.started&&n.gcScheduler.start(n.localStore),Promise.resolve()}))];case 6:return r.sent(),[2]}}))}))},e.prototype.Ko=function(t){return Fu(this.persistence,new Ou,t.initialUser,this.R)},e.prototype.Uo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new pu(e,t.asyncQueue)},e.prototype.qo=function(t){var e=Pu(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Js.withCacheSize(this.cacheSizeBytes):Js.DEFAULT;return new Cu(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,xc(),Ic(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new yc},e}(ah),uh=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Qo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return(0,i.__extends)(e,t),e.prototype.initialize=function(e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n,r=this;return(0,i.__generator)(this,(function(o){switch(o.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return o.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof vc?(this.sharedClientState.syncEngine={ui:Xl.bind(null,n),ai:eh.bind(null,n),hi:nh.bind(null,n),fn:th.bind(null,n),ci:Yl.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:o.sent(),o.label=3;case 3:return[4,this.persistence.He((function(t){return(0,i.__awaiter)(r,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return[4,Ql(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return o.sent(),[2]}}))}))},e.prototype.Bo=function(t){var e=xc();if(!vc.yt(e))throw new xr(Tr.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Pu(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new vc(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(sh),ch=function(){function t(){}return t.prototype.initialize=function(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n=this;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Dl(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=$l.bind(null,this.syncEngine),[4,nl(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new hl},t.prototype.createDatastore=function(t){var e,n=kc(t.databaseInfo.databaseId),r=(e=t.databaseInfo,new Tc(e));return function(t,e,n){return new Pc(t,e,n)}(t.credentials,r,n)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,a=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return Dl(a.syncEngine,t,0)},o=_c.yt()?new _c:new bc,new Dc(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,a){var s=new El(t,e,n,r,i,o);return a&&(s.$o=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return e=Dr(t),Er("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,Oc(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}();function lh(t,e){void 0===e&&(e=10240);var n=0;return{read:function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var r;return(0,i.__generator)(this,(function(i){return n<t.byteLength?(r={value:t.slice(n,n+e),done:!1},[2,(n+=e,r)]):[2,{done:!0}]}))}))},cancel:function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(t){return[2]}))}))},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var hh=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),dh=function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new vs,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then((function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}return t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Lo=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}}))}))},t.prototype.Ho=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t,e,n,r;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new yl(JSON.parse(r),t.length+n)]}}))}))},t.prototype.Zo=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.Jo=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t,e;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.Xo=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t,e;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))},t}(),fh=function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,n=this;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new xr(Tr.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n,r,o,a,s,u;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return n=Dr(t),r=Ca(n.R)+"/documents",o={documents:e.map((function(t){return xa(n.R,t)}))},[4,n.$i("BatchGetDocuments",r,o)];case 1:return a=i.sent(),s=new Map,a.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){Rr(!!e.found),e.found.name,e.found.updateTime;var n=Ia(t,e.found.name),r=wa(e.found.updateTime),i=new wi({mapValue:{fields:e.found.fields}});return Ti.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){Rr(!!e.missing),Rr(!!e.readTime);var n=Ia(t,e.missing),r=wa(e.readTime);return Ti.newNoDocument(n,r)}(t,e):Pr()}(n.R,t);s.set(e.key.toString(),e)})),u=[],[2,(e.forEach((function(t){var e=s.get(t.toString());Rr(!!e),u.push(e)})),u)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Go(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t,e=this;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=ai.fromPath(n);e.mutations.push(new Uo(r,e.precondition(r)))})),[4,function(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n,r,o;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return n=Dr(t),r=Ca(n.R)+"/documents",o={writes:e.map((function(t){return Ra(n.R,t)}))},[4,n.Ni("Commit",r,o)];case 1:return i.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Pr();e=Gr.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new xr(Tr.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Io.updateTime(e):Io.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Gr.min()))throw new xr(Tr.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Io.updateTime(e)}return Io.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}(),ph=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Ec(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji((function(){return(0,i.__awaiter)(t,void 0,void 0,(function(){var t,e,n=this;return(0,i.__generator)(this,(function(r){return t=new fh(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!ri(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!qo(e)}return!1},t}(),gh=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=uc.UNAUTHENTICATED,this.clientId=Or.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,(function(t){return(0,i.__awaiter)(r,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return Er("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}}))}))}))}return t.prototype.getConfiguration=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new xr(Tr.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new vs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return(0,i.__awaiter)(t,void 0,void 0,(function(){var t,n;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=al(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();function mh(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n,r,o=this;return(0,i.__generator)(this,(function(a){switch(a.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Er("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=a.sent(),[4,e.initialize(n)];case 2:return a.sent(),r=n.initialUser,t.setCredentialChangeListener((function(t){return(0,i.__awaiter)(o,void 0,void 0,(function(){return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,ju(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}}))}))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function vh(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n,r;return(0,i.__generator)(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,yh(t)];case 1:return n=o.sent(),Er("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=o.sent(),[4,e.initialize(n,r)];case 3:return o.sent(),t.setCredentialChangeListener((function(t){return function(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n,r;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return(n=Dr(t)).asyncQueue.verifyOperationInProgress(),Er("RemoteStore","RemoteStore received new credentials"),r=Vc(n),n.Or.add(3),[4,Oc(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,Mc(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,t)})),t.onlineComponents=e,[2]}}))}))}function yh(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Er("FirestoreClient","Using default OfflineComponentProvider"),[4,mh(t,new ah)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function bh(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Er("FirestoreClient","Using default OnlineComponentProvider"),[4,vh(t,new ch)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function _h(t){return yh(t).then((function(t){return t.persistence}))}function wh(t){return yh(t).then((function(t){return t.localStore}))}function Sh(t){return bh(t).then((function(t){return t.remoteStore}))}function Th(t){return bh(t).then((function(t){return t.syncEngine}))}function xh(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,n;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return[4,bh(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Cl.bind(null,e.syncEngine),n.onUnlisten=Al.bind(null,e.syncEngine),n)]}}))}))}function Ih(t,e,n){var r=this;void 0===n&&(n={});var o=new vs;return t.asyncQueue.enqueueAndForget((function(){return(0,i.__awaiter)(r,void 0,void 0,(function(){var r;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return r=function(t,e,n,r,i){var o=new hh({next:function(o){e.enqueueAndForget((function(){return fl(t,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new xr(Tr.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new xr(Tr.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),a=new vl($i(n.path),o,{includeMetadataChanges:!0,so:!0});return dl(t,a)},[4,xh(t)];case 1:return[2,r.apply(void 0,[i.sent(),t.asyncQueue,e,n,o])]}}))}))})),o.promise}function kh(t,e,n){var r=this;void 0===n&&(n={});var o=new vs;return t.asyncQueue.enqueueAndForget((function(){return(0,i.__awaiter)(r,void 0,void 0,(function(){var r;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return r=function(t,e,n,r,i){var o=new hh({next:function(n){e.enqueueAndForget((function(){return fl(t,a)})),n.fromCache&&"server"===r.source?i.reject(new xr(Tr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),a=new vl(n,o,{includeMetadataChanges:!0,so:!0});return dl(t,a)},[4,xh(t)];case 1:return[2,r.apply(void 0,[i.sent(),t.asyncQueue,e,n,o])]}}))}))})),o.promise}var Eh=function(t,e,n,r,i,o,a,s){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=s},Ch=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Nh=new Map,Ah=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Ph=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable((function(){return e(uc.UNAUTHENTICATED)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Rh=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable((function(){return e(n.token.user)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Dh=function(){function t(t){var e=this;this.currentUser=uc.UNAUTHENTICATED,this.oc=new vs,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)}))};var n=function(t){Er("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit((function(t){return n(t)})),setTimeout((function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(Er("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}}),0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(Er("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Rr("string"==typeof n.accessToken),new Ah(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable((function(){return(0,i.__awaiter)(n,void 0,void 0,(function(){return(0,i.__generator)(this,(function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}}))}))}))},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return Rr(null===t||"string"==typeof t),new uc(t)},t}(),Mh=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=uc.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),Oh=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new Mh(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable((function(){return e(uc.FIRST_PARTY)}))},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Lh(t,e,n){if(!n)throw new xr(Tr.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Fh(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new xr(Tr.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function jh(t,e,n,r){if(!0===e&&!0===r)throw new xr(Tr.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Bh(t){if(!ai.isDocumentKey(t))throw new xr(Tr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Gh(t){if(ai.isDocumentKey(t))throw new xr(Tr.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Uh(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Pr()}function Vh(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new xr(Tr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Uh(t);throw new xr(Tr.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function qh(t,e){if(e<=0)throw new xr(Tr.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var zh=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new xr(Tr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new xr(Tr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,jh("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),Hh=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zh({}),this._settingsFrozen=!1,t instanceof Ch?(this._databaseId=t,this._credentials=new Ph):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new xr(Tr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ch(t.options.projectId)}(t),this._credentials=new Dh(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new xr(Tr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new xr(Tr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zh(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Ph;switch(t.type){case"gapi":var e=t.client;return Rr(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Oh(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new xr(Tr.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return this,(t=Nh.get(this))&&(Er("ComponentProvider","Removing Datastore"),Nh.delete(this),t.terminate()),Promise.resolve();var t},t}(),$h=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Kh(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),Wh=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),Kh=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,$i(r))||this)._path=r,i.type="collection",i}return(0,i.__extends)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new $h(this.firestore,null,new ai(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(Wh);function Yh(t,e){for(var n,r=[],a=2;a<arguments.length;a++)r[a-2]=arguments[a];if(t=(0,o.getModularInstance)(t),Lh("collection","path",e),t instanceof Hh)return Gh(n=Hr.fromString.apply(Hr,(0,i.__spreadArray)([e],r))),new Kh(t,null,n);if(!(t instanceof $h||t instanceof Kh))throw new xr(Tr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Gh(n=Hr.fromString.apply(Hr,(0,i.__spreadArray)([t.path],r)).child(Hr.fromString(e))),new Kh(t.firestore,null,n)}function Xh(t,e){for(var n,r=[],a=2;a<arguments.length;a++)r[a-2]=arguments[a];if(t=(0,o.getModularInstance)(t),1===arguments.length&&(e=Or.u()),Lh("doc","path",e),t instanceof Hh)return Bh(n=Hr.fromString.apply(Hr,(0,i.__spreadArray)([e],r))),new $h(t,null,new ai(n));if(!(t instanceof $h||t instanceof Kh))throw new xr(Tr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Bh(n=t._path.child(Hr.fromString.apply(Hr,(0,i.__spreadArray)([e],r)))),new $h(t.firestore,t instanceof Kh?t.converter:null,new ai(n))}function Qh(t,e){return t=(0,o.getModularInstance)(t),e=(0,o.getModularInstance)(e),(t instanceof $h||t instanceof Kh)&&(e instanceof $h||e instanceof Kh)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Jh(t,e){return t=(0,o.getModularInstance)(t),e=(0,o.getModularInstance)(e),t instanceof Wh&&e instanceof Wh&&t.firestore===e.firestore&&eo(t._query,e._query)&&t.converter===e.converter}var Zh=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new Ec(this,"async_queue_retry"),this.Ic=function(){var e=Ic();e&&Er("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=Ic();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},t.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var e=Ic();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ic)}},t.prototype.enqueue=function(t){var e=this;if(this.Ac(),this._c)return new Promise((function(){}));var n=new vs;return this.Rc((function(){return e._c&&e.Ec?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.wc.push(t),e.bc()}))},t.prototype.bc=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t,e=this;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!Ts(t=n.sent()))throw t;return Er("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji((function(){return e.bc()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Rc=function(t){var e=this,n=this.dc.then((function(){return e.gc=!0,t().catch((function(t){throw e.yc=t,e.gc=!1,Cr("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.gc=!1,t}))}));return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ac(),this.Tc.indexOf(t)>-1&&(e=0);var i=ol.createAndSchedule(this,t,e,n,(function(t){return r.vc(t)}));return this.mc.push(i),i},t.prototype.Ac=function(){this.yc&&Pr()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Pc=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t;return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Vc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Sc=function(t){var e=this;return this.Pc().then((function(){e.mc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Pc()}))},t.prototype.Dc=function(t){this.Tc.push(t)},t.prototype.vc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function td(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var ed=function(){function t(){this._progressObserver={},this._taskCompletionResolver=new vs,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)},t}(),nd=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new Zh,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return(0,i.__extends)(e,t),e.prototype._terminate=function(){return this._firestoreClient||id(this),this._firestoreClient.terminate()},e}(Hh);function rd(t){return t._firestoreClient||id(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function id(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new Eh(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new gh(t._credentials,t._queue,r)}function od(t,e,n){var r=this,o=new vs;return t.asyncQueue.enqueue((function(){return(0,i.__awaiter)(r,void 0,void 0,(function(){var r;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),[4,mh(t,n)];case 1:return i.sent(),[4,vh(t,e)];case 2:return i.sent(),o.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Tr.FAILED_PRECONDITION||t.code===Tr.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=i.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),o.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return o.promise}))}function ad(t){if(t._initialized||t._terminated)throw new xr(Tr.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var sd=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new xr(Tr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wr(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),ud=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(Yr.fromBase64String(e))}catch(e){throw new xr(Tr.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Yr.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),cd=function(t){this._methodName=t},ld=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new xr(Tr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new xr(Tr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Lr(this._lat,t._lat)||Lr(this._long,t._long)},t}(),hd=/^__.*__$/,dd=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new Mo(t,this.data,this.fieldMask,e,this.fieldTransforms):new Do(t,this.data,e,this.fieldTransforms)},t}(),fd=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new Mo(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function pd(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pr()}}var gd=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),t.prototype.xc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,Fc:!1});return r.$c(t),r},t.prototype.Oc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,Fc:!1});return r.Cc(),r},t.prototype.Mc=function(t){return this.xc({path:void 0,Fc:!0})},t.prototype.Lc=function(t){return Od(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},t.prototype.$c=function(t){if(0===t.length)throw this.Lc("Document fields must not be empty");if(pd(this.Nc)&&hd.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},t}(),md=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||kc(t)}return t.prototype.Uc=function(t,e,n,r){return void 0===r&&(r=!1),new gd({Nc:t,methodName:e,qc:n,path:Wr.emptyPath(),Fc:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function vd(t){var e=t._freezeSettings(),n=kc(t._databaseId);return new md(t._databaseId,!!e.ignoreUndefinedProperties,n)}function yd(t,e,n,r,i,o){void 0===o&&(o={});var a=t.Uc(o.merge||o.mergeFields?2:0,e,n,i);Pd("Data must be an object, but it was:",a,r);var s,u,c=Nd(r,a);if(o.merge)s=new Kr(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,d=o.mergeFields;h<d.length;h++){var f=Rd(e,d[h],n);if(!a.contains(f))throw new xr(Tr.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");Ld(l,f)||l.push(f)}s=new Kr(l),u=a.fieldTransforms.filter((function(t){return s.covers(t.field)}))}else s=null,u=a.fieldTransforms;return new dd(new wi(c),s,u)}var bd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.__extends)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Nc)throw 1===t.Nc?t.Lc(this._methodName+"() can only appear at the top level of your update data"):t.Lc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(cd);function _d(t,e,n){return new gd({Nc:3,qc:e.settings.qc,methodName:t._methodName,Fc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var wd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.__extends)(e,t),e.prototype._toFieldTransform=function(t){return new To(t.path,new go)},e.prototype.isEqual=function(t){return t instanceof e},e}(cd),Sd=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return(0,i.__extends)(e,t),e.prototype._toFieldTransform=function(t){var e=_d(this,t,!0),n=this.Kc.map((function(t){return Cd(t,e)})),r=new mo(n);return new To(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(cd),Td=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return(0,i.__extends)(e,t),e.prototype._toFieldTransform=function(t){var e=_d(this,t,!0),n=this.Kc.map((function(t){return Cd(t,e)})),r=new yo(n);return new To(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(cd),xd=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Qc=n,r}return(0,i.__extends)(e,t),e.prototype._toFieldTransform=function(t){var e=new _o(t.R,co(t.R,this.Qc));return new To(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(cd);function Id(t,e,n,r){var i=t.Uc(1,e,n);Pd("Data must be an object, but it was:",i,r);var a=[],s=wi.empty();Vr(r,(function(t,r){var u=Md(e,t,n);r=(0,o.getModularInstance)(r);var c=i.Oc(u);if(r instanceof bd)a.push(u);else{var l=Cd(r,c);null!=l&&(a.push(u),s.set(u,l))}}));var u=new Kr(a);return new fd(s,u,i.fieldTransforms)}function kd(t,e,n,r,i,a){var s=t.Uc(1,e,n),u=[Rd(e,r,n)],c=[i];if(a.length%2!=0)throw new xr(Tr.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var l=0;l<a.length;l+=2)u.push(Rd(e,a[l])),c.push(a[l+1]);for(var h=[],d=wi.empty(),f=u.length-1;f>=0;--f)if(!Ld(h,u[f])){var p=u[f],g=c[f];g=(0,o.getModularInstance)(g);var m=s.Oc(p);if(g instanceof bd)h.push(p);else{var v=Cd(g,m);null!=v&&(h.push(p),d.set(p,v))}}var y=new Kr(h);return new fd(d,y,s.fieldTransforms)}function Ed(t,e,n,r){return void 0===r&&(r=!1),Cd(n,t.Uc(r?4:3,e))}function Cd(t,e){if(Ad(t=(0,o.getModularInstance)(t)))return Pd("Unsupported field value:",e,t),Nd(t,e);if(t instanceof cd)return function(t,e){if(!pd(e.Nc))throw e.Lc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Lc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Fc&&4!==e.Nc)throw e.Lc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=Cd(o[i],e.Mc(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=(0,o.getModularInstance)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return co(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Br.fromDate(t);return{timestampValue:ya(e.R,n)}}if(t instanceof Br)return n=new Br(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:ya(e.R,n)};if(t instanceof ld)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ud)return{bytesValue:ba(e.R,t._byteString)};if(t instanceof $h){n=e.databaseId;var r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Lc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Sa(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Lc("Unsupported field value: "+Uh(t))}(t,e)}function Nd(t,e){var n={};return qr(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Vr(t,(function(t,r){var i=Cd(r,e.kc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Ad(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Br||t instanceof ld||t instanceof ud||t instanceof $h||t instanceof cd)}function Pd(t,e,n){if(!Ad(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Uh(n);throw"an object"===r?e.Lc(t+" a custom object"):e.Lc(t+" "+r)}}function Rd(t,e,n){if((e=(0,o.getModularInstance)(e))instanceof sd)return e._internalPath;if("string"==typeof e)return Md(t,e);throw Od("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Dd=new RegExp("[~\\*/\\[\\]]");function Md(t,e,n){if(e.search(Dd)>=0)throw Od("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(sd.bind.apply(sd,(0,i.__spreadArray)([void 0],e.split(".")))))._internalPath}catch(r){throw Od("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Od(t,e,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,s="Function "+e+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var u="";return(o||a)&&(u+=" (found",o&&(u+=" in field "+r),a&&(u+=" in document "+i),u+=")"),new xr(Tr.INVALID_ARGUMENT,(s+=". ")+t+u)}function Ld(t,e){return t.some((function(t){return t.isEqual(e)}))}var Fd=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new $h(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new jd(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(Bd("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),jd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.__extends)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Fd);function Bd(t,e){return"string"==typeof e?Md(t,e):e instanceof sd?e._internalPath:e._delegate._internalPath}var Gd=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Ud=function(t){function e(e,n,r,i,o,a){var s=this;return(s=t.call(this,e,n,r,i,a)||this)._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return(0,i.__extends)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new Vd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(Bd("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Fd),Vd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.__extends)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Ud),qd=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Gd(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new Vd(n._firestore,n._userDataWriter,r.key,r,new Gd(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new xr(Tr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){return{type:"added",doc:new Vd(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Gd(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new Vd(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Gd(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:zd(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function zd(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pr()}}function Hd(t,e){return t instanceof Ud&&e instanceof Ud?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof qd&&e instanceof qd&&t._firestore===e._firestore&&Jh(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function $d(t){if(Ki(t)&&0===t.explicitOrderBy.length)throw new xr(Tr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Wd=function(){};function Kd(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){t=i[r]._apply(t)}return t}var Yd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).jc=e,i.Wc=n,i.Gc=r,i.type="where",i}return(0,i.__extends)(e,t),e.prototype._apply=function(t){var e=vd(t.firestore),n=function(t,e,n,r,i,o,a){var s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new xr(Tr.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){nf(a,o);for(var u=[],c=0,l=a;c<l.length;c++){var h=l[c];u.push(ef(r,t,h))}s={arrayValue:{values:u}}}else s=ef(r,t,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||nf(a,o),s=Ed(n,"where",a,"in"===o||"not-in"===o);var d=Ni.create(i,o,s);return function(t,e){if(e.g()){var n=Xi(t);if(null!==n&&!n.isEqual(e.field))throw new xr(Tr.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Yi(t);null!==r&&rf(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new xr(Tr.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new xr(Tr.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,d),d}(t._query,0,e,t.firestore._databaseId,this.jc,this.Wc,this.Gc);return new Wh(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new zi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Wd),Xd=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jc=e,r.zc=n,r.type="orderBy",r}return(0,i.__extends)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new xr(Tr.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new xr(Tr.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Gi(e,n);return function(t,e){if(null===Yi(t)){var n=Xi(t);null!==n&&rf(t,n,e.field)}}(t,r),r}(t._query,this.jc,this.zc);return new Wh(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new zi(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Wd),Qd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return(0,i.__extends)(e,t),e.prototype._apply=function(t){return new Wh(t.firestore,t.converter,to(t._query,this.Hc,this.Jc))},e}(Wd),Jd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return(0,i.__extends)(e,t),e.prototype._apply=function(t){var e=tf(t,this.type,this.Yc,this.Xc);return new Wh(t.firestore,t.converter,function(t,e){return new zi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Wd),Zd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return(0,i.__extends)(e,t),e.prototype._apply=function(t){var e=tf(t,this.type,this.Yc,this.Xc);return new Wh(t.firestore,t.converter,function(t,e){return new zi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Wd);function tf(t,e,n,r){if(n[0]=(0,o.getModularInstance)(n[0]),n[0]instanceof Fd)return function(t,e,n,r,i){if(!r)throw new xr(Tr.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],a=0,s=Ji(t);a<s.length;a++){var u=s[a];if(u.field.isKeyField())o.push(pi(e,r.key));else{var c=r.data.field(u.field);if(ti(c))throw new xr(Tr.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new xr(Tr.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new ji(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=vd(t.firestore);return function(t,e,n,r,i,o){var a=t.explicitOrderBy;if(i.length>a.length)throw new xr(Tr.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],u=0;u<i.length;u++){var c=i[u];if(a[u].field.isKeyField()){if("string"!=typeof c)throw new xr(Tr.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Qi(t)&&-1!==c.indexOf("/"))throw new xr(Tr.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(Hr.fromString(c));if(!ai.isDocumentKey(l))throw new xr(Tr.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new ai(l);s.push(pi(e,h))}else{var d=Ed(n,r,c);s.push(d)}}return new ji(s,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function ef(t,e,n){if("string"==typeof(n=(0,o.getModularInstance)(n))){if(""===n)throw new xr(Tr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Qi(e)&&-1!==n.indexOf("/"))throw new xr(Tr.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Hr.fromString(n));if(!ai.isDocumentKey(r))throw new xr(Tr.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return pi(t,new ai(r))}if(n instanceof $h)return pi(t,n._key);throw new xr(Tr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Uh(n)+".")}function nf(t,e){if(!Array.isArray(t)||0===t.length)throw new xr(Tr.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new xr(Tr.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function rf(t,e,n){if(!n.isEqual(e))throw new xr(Tr.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var of=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),si(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Jr(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Zr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Pr()}},t.prototype.convertObject=function(t,e){var n=this,r={};return Vr(t.fields,(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new ld(Jr(t.latitude),Jr(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=ei(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(ni(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=Qr(t);return new Br(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=Hr.fromString(t);Rr(Wa(n));var r=new Ch(n.get(1),n.get(3)),i=new ai(n.popFirst(5));return r.isEqual(e)||Cr("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function af(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var sf=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,i.__extends)(e,t),e.prototype.convertBytes=function(t){return new ud(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new $h(this.firestore,null,e)},e}(of),uf=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=vd(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=cf(t,this._firestore),i=af(r.converter,e,n),o=yd(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,Io.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var a,s=cf(t,this._firestore);return a="string"==typeof(e=(0,o.getModularInstance)(e))||e instanceof sd?kd(this._dataReader,"WriteBatch.update",s._key,e,n,r):Id(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(a.toMutation(s._key,Io.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=cf(t,this._firestore);return this._mutations=this._mutations.concat(new Go(e._key,Io.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new xr(Tr.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function cf(t,e){if((t=(0,o.getModularInstance)(t)).firestore!==e)throw new xr(Tr.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var lf=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,i.__extends)(e,t),e.prototype.convertBytes=function(t){return new ud(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new $h(this.firestore,null,e)},e}(of);function hf(t,e,n){t=Vh(t,$h);var r=Vh(t.firestore,nd),i=af(t.converter,e,n);return pf(r,[yd(vd(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,Io.none())])}function df(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Vh(t,$h);var a=Vh(t.firestore,nd),s=vd(a);return pf(a,[("string"==typeof(e=(0,o.getModularInstance)(e))||e instanceof sd?kd(s,"updateDoc",t._key,e,n,r):Id(s,"updateDoc",t._key,e)).toMutation(t._key,Io.exists(!0))])}function ff(t){for(var e,n,r,a=[],s=1;s<arguments.length;s++)a[s-1]=arguments[s];t=(0,o.getModularInstance)(t);var u={includeMetadataChanges:!1},c=0;"object"!=typeof a[c]||td(a[c])||(u=a[c],c++);var l,h,d,f={includeMetadataChanges:u.includeMetadataChanges};if(td(a[c])){var p=a[c];a[c]=null===(e=p.next)||void 0===e?void 0:e.bind(p),a[c+1]=null===(n=p.error)||void 0===n?void 0:n.bind(p),a[c+2]=null===(r=p.complete)||void 0===r?void 0:r.bind(p)}if(t instanceof $h)h=Vh(t.firestore,nd),d=$i(t._key.path),l={next:function(e){a[c]&&a[c](gf(h,t,e))},error:a[c+1],complete:a[c+2]};else{var g=Vh(t,Wh);h=Vh(g.firestore,nd),d=g._query;var m=new lf(h);l={next:function(t){a[c]&&a[c](new qd(h,m,g,t))},error:a[c+1],complete:a[c+2]},$d(t._query)}return function(t,e,n,r){var o=this,a=new hh(r),s=new vl(e,a,n);return t.asyncQueue.enqueueAndForget((function(){return(0,i.__awaiter)(o,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return e=dl,[4,xh(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){a.Wo(),t.asyncQueue.enqueueAndForget((function(){return(0,i.__awaiter)(o,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return e=fl,[4,xh(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}(rd(h),d,f,l)}function pf(t,e){return function(t,e){var n=this,r=new vs;return t.asyncQueue.enqueueAndForget((function(){return(0,i.__awaiter)(n,void 0,void 0,(function(){var n;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return n=Pl,[4,Th(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(rd(t),e)}function gf(t,e,n){var r=n.docs.get(e._key),i=new lf(t);return new Ud(t,i,e._key,r,new Gd(n.hasPendingWrites,n.fromCache),e.converter)}var mf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return(0,i.__extends)(e,t),e.prototype.get=function(e){var n=this,r=cf(e,this._firestore),i=new lf(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new Ud(n._firestore,i,r._key,t._document,new Gd(!1,!1),r.converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=vd(t)}return t.prototype.get=function(t){var e=this,n=cf(t,this._firestore),r=new sf(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return Pr();var i=t[0];if(i.isFoundDocument())return new Fd(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Fd(e._firestore,r,n._key,null,n.converter);throw Pr()}))},t.prototype.set=function(t,e,n){var r=cf(t,this._firestore),i=af(r.converter,e,n),o=yd(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var a,s=cf(t,this._firestore);return a="string"==typeof(e=(0,o.getModularInstance)(e))||e instanceof sd?kd(this._dataReader,"Transaction.update",s._key,e,n,r):Id(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,a),this},t.prototype.delete=function(t){var e=cf(t,this._firestore);return this._transaction.delete(e._key),this},t}());function vf(){if("undefined"==typeof Uint8Array)throw new xr(Tr.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function yf(){if("undefined"==typeof atob)throw new xr(Tr.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var bf=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return yf(),new t(ud.fromBase64String(e))},t.fromUint8Array=function(e){return vf(),new t(ud.fromUint8Array(e))},t.prototype.toBase64=function(){return yf(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return vf(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),_f=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){ad(t=Vh(t,nd));var n=rd(t),r=t._freezeSettings(),i=new ch;return od(n,i,new sh(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){ad(t=Vh(t,nd));var e=rd(t),n=t._freezeSettings(),r=new ch;return od(e,r,new uh(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new xr(Tr.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new vs;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return(0,i.__awaiter)(e,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return _s.yt()?(e=t+"main",[4,_s.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(Pu(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},t}(),wf=function(){function t(t,e,n){var r=this;this._delegate=e,this.Zc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof Ch||(this.tu=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||Nr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){var i;void 0===r&&(r={});var a=(t=Vh(t,Hh))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&Nr("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},a),{host:e+":"+n,ssl:!1})),r.mockUserToken){var s,u;if("string"==typeof r.mockUserToken)s=r.mockUserToken,u=uc.MOCK_USER;else{s=(0,o.createMockUserToken)(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);var c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new xr(Tr.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new uc(c)}t._credentials=new Rh(new Ah(s,u))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return(0,i.__awaiter)(e,void 0,void 0,(function(){var e,n;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return[4,_h(t)];case 1:return e=r.sent(),[4,Sh(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=Dr(t);return e.Or.delete(0),Mc(e)}(n))]}}))}))}))}(rd(Vh(this._delegate,nd)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return(0,i.__awaiter)(e,void 0,void 0,(function(){var e,n;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return[4,_h(t)];case 1:return e=r.sent(),[4,Sh(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return(e=Dr(t)).Or.add(0),[4,Oc(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(rd(Vh(this._delegate,nd)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&jh("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new vs;return t.asyncQueue.enqueueAndForget((function(){return(0,i.__awaiter)(e,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return e=Fl,[4,Th(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(rd(Vh(this._delegate,nd)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new hh(e);return t.asyncQueue.enqueueAndForget((function(){return(0,i.__awaiter)(n,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return e=function(t,e){Dr(t).Gr.add(e),e.next()},[4,xh(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),t.asyncQueue.enqueueAndForget((function(){return(0,i.__awaiter)(n,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return e=function(t,e){Dr(t).Gr.delete(e)},[4,xh(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(rd(t=Vh(t,nd)),td(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.tu)throw new xr(Tr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Of(this,Yh(this._delegate,t))}catch(t){throw Ef(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new kf(this,Xh(this._delegate,t))}catch(t){throw Ef(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new Rf(this,function(t,e){if(t=Vh(t,Hh),Lh("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new xr(Tr.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Wh(t,null,function(t){return new zi(Hr.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw Ef(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new vs;return t.asyncQueue.enqueueAndForget((function(){return(0,i.__awaiter)(n,void 0,void 0,(function(){var n;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,function(t){return bh(t).then((function(t){return t.datastore}))}(t)];case 1:return n=i.sent(),new ph(t.asyncQueue,n,e,r).run(),[2]}}))}))})),r.promise}(rd(t),(function(n){return e(new mf(t,n))}))}(this._delegate,(function(n){return t(new Tf(e,n))}))},t.prototype.batch=function(){var t=this;return rd(this._delegate),new xf(new uf(this._delegate,(function(e){return pf(t._delegate,e)})))},t.prototype.loadBundle=function(t){throw new xr(Tr.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new xr(Tr.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),Sf=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,i.__extends)(e,t),e.prototype.convertBytes=function(t){return new bf(new ud(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return kf.eu(e,this.firestore,null)},e}(of);var Tf=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new Sf(t)}return t.prototype.get=function(t){var e=this,n=Lf(t);return this._delegate.get(n).then((function(t){return new Af(e._firestore,new Ud(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))}))},t.prototype.set=function(t,e,n){var r=Lf(t);return n?(Fh("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];var s=Lf(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,(0,i.__spreadArray)([s,e,n],o)),this},t.prototype.delete=function(t){var e=Lf(t);return this._delegate.delete(e),this},t}(),xf=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=Lf(t);return n?(Fh("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];var s=Lf(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,(0,i.__spreadArray)([s,e,n],o)),this},t.prototype.delete=function(t){var e=Lf(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),If=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new Vd(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Pf(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.nu=function(e,n){var r=t.su,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new Sf(e),n),i.set(n,o)),o},t}();If.su=new WeakMap;var kf=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Sf(t)}return t.iu=function(e,n,r){if(e.length%2!=0)throw new xr(Tr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new $h(n._delegate,r,new ai(e)))},t.eu=function(e,n,r){return new t(n,new $h(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Of(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Of(this.firestore,Yh(this._delegate,t))}catch(t){throw Ef(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=(0,o.getModularInstance)(t))instanceof $h&&Qh(this._delegate,t)},t.prototype.set=function(t,e){e=Fh("DocumentReference.set",e);try{return e?hf(this._delegate,t,e):hf(this._delegate,t)}catch(t){throw Ef(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?df(this._delegate,t):df.apply(void 0,(0,i.__spreadArray)([this._delegate,t,e],n))}catch(t){throw Ef(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return pf(Vh((t=this._delegate).firestore,nd),[new Go(t._key,Io.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Cf(e),i=Nf(e,(function(e){return new Af(t.firestore,new Ud(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}));return ff(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Vh(t,$h);var e=Vh(t.firestore,nd),n=rd(e),r=new lf(e);return function(t,e){var n=this,r=new vs;return t.asyncQueue.enqueueAndForget((function(){return(0,i.__awaiter)(n,void 0,void 0,(function(){var n;return(0,i.__generator)(this,(function(o){switch(o.label){case 0:return n=function(t,e,n){return(0,i.__awaiter)(this,void 0,void 0,(function(){var r,o;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,function(t,e){var n=Dr(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Mn.mn(t,e)}))}(t,e)];case 1:return(o=i.sent()).isFoundDocument()?n.resolve(o):o.isNoDocument()?n.resolve(null):n.reject(new xr(Tr.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=i.sent(),o=al(r,"Failed to get document '"+e+" from cache"),n.reject(o),[3,3];case 3:return[2]}}))}))},[4,wh(t)];case 1:return[2,n.apply(void 0,[o.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new Ud(e,r,t._key,n,new Gd(null!==n&&n.hasLocalMutations,!0),t.converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Vh(t,$h);var e=Vh(t.firestore,nd);return Ih(rd(e),t._key,{source:"server"}).then((function(n){return gf(e,t,n)}))}(this._delegate):function(t){t=Vh(t,$h);var e=Vh(t.firestore,nd);return Ih(rd(e),t._key).then((function(n){return gf(e,t,n)}))}(this._delegate)).then((function(t){return new Af(e.firestore,new Ud(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}))},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(If.nu(this.firestore,e)):this._delegate.withConverter(null))},t}();function Ef(t,e,n){return t.message=t.message.replace(e,n),t}function Cf(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!td(r))return r}return{}}function Nf(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=td(t[0])?t[0]:td(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Af=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new kf(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return Hd(this._delegate,t._delegate)},t}(),Pf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.__extends)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(Af),Rf=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Sf(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,Kd(this._delegate,function(t,e,n){var r=e,i=Bd("where",t);return new Yd(i,r,n)}(e,n,r)))}catch(e){throw Ef(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,Kd(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Bd("orderBy",t);return new Xd(r,n)}(e,n)))}catch(e){throw Ef(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,Kd(this._delegate,function(t){return qh("limit",t),new Qd("limit",t,"F")}(e)))}catch(e){throw Ef(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,Kd(this._delegate,function(t){return qh("limitToLast",t),new Qd("limitToLast",t,"L")}(e)))}catch(e){throw Ef(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Kd(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Jd("startAt",t,!0)}.apply(void 0,e)))}catch(e){throw Ef(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Kd(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Jd("startAfter",t,!1)}.apply(void 0,e)))}catch(e){throw Ef(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Kd(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Zd("endBefore",t,!0)}.apply(void 0,e)))}catch(e){throw Ef(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Kd(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Zd("endAt",t,!1)}.apply(void 0,e)))}catch(e){throw Ef(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return Jh(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Vh(t,Wh);var e=Vh(t.firestore,nd),n=rd(e),r=new lf(e);return function(t,e){var n=this,r=new vs;return t.asyncQueue.enqueueAndForget((function(){return(0,i.__awaiter)(n,void 0,void 0,(function(){var n;return(0,i.__generator)(this,(function(o){switch(o.label){case 0:return n=function(t,e,n){return(0,i.__awaiter)(this,void 0,void 0,(function(){var r,o,a,s,u;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,$u(t,e,!0)];case 1:return u=i.sent(),r=new xl(e,u.Bn),o=r._o(u.documents),a=r.applyChanges(o,!1),n.resolve(a.snapshot),[3,3];case 2:return s=i.sent(),u=al(s,"Failed to execute query '"+e+" against cache"),n.reject(u),[3,3];case 3:return[2]}}))}))},[4,wh(t)];case 1:return[2,n.apply(void 0,[o.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new qd(e,r,t,n)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Vh(t,Wh);var e=Vh(t.firestore,nd),n=rd(e),r=new lf(e);return kh(n,t._query,{source:"server"}).then((function(n){return new qd(e,r,t,n)}))}(this._delegate):function(t){t=Vh(t,Wh);var e=Vh(t.firestore,nd),n=rd(e),r=new lf(e);return $d(t._query),kh(n,t._query).then((function(n){return new qd(e,r,t,n)}))}(this._delegate)).then((function(t){return new Mf(e.firestore,new qd(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Cf(e),i=Nf(e,(function(e){return new Mf(t.firestore,new qd(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return ff(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(If.nu(this.firestore,e)):this._delegate.withConverter(null))},t}(),Df=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new Pf(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),Mf=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new Rf(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new Pf(t._firestore,e)}))},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new Df(e._firestore,t)}))},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new Pf(n._firestore,r))}))},t.prototype.isEqual=function(t){return Hd(this._delegate,t._delegate)},t}(),Of=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return(0,i.__extends)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new kf(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new kf(this.firestore,void 0===t?Xh(this._delegate):Xh(this._delegate,t))}catch(t){throw Ef(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Vh(t.firestore,nd),r=Xh(t),i=af(t.converter,e);return pf(n,[yd(vd(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,Io.exists(!1))]).then((function(){return r}))}(this._delegate,t).then((function(t){return new kf(e.firestore,t)}))},e.prototype.isEqual=function(t){return Qh(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(If.nu(this.firestore,t)):this._delegate.withConverter(null))},e}(Rf);function Lf(t){return Vh(t,$h)}var Ff=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(sd.bind.apply(sd,(0,i.__spreadArray)([void 0],t)))}return t.documentId=function(){return new t(Wr.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=(0,o.getModularInstance)(t))instanceof sd&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),jf=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new wd("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new bd("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Sd("arrayUnion",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Td("arrayRemove",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new xd("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}();function Bf(t){return function(t,e){var n=rd(t=Vh(t,nd)),r=new ed;return function(t,e,n,r){var o=this,a=function(t,e){return function(t,e){return new dh(t,e)}(function(t,e){if(t instanceof Uint8Array)return lh(t,e);if(t instanceof ArrayBuffer)return lh(new Uint8Array(t),e);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof t?(new TextEncoder).encode(t):t),e)}(n,kc(e));t.asyncQueue.enqueueAndForget((function(){return(0,i.__awaiter)(o,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return e=oh,[4,Th(t)];case 1:return e.apply(void 0,[n.sent(),a,r]),[2]}}))}))}))}(n,t._databaseId,e,r),r}(this._delegate,t)}function Gf(t){var e,n,r=this;return(e=this._delegate,n=t,function(t,e){var n=this;return t.asyncQueue.enqueue((function(){return(0,i.__awaiter)(n,void 0,void 0,(function(){var n;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return n=function(t,e){var n=Dr(t);return n.persistence.runTransaction("Get named query","readonly",(function(t){return n.Ke.getNamedQuery(t,e)}))},[4,wh(t)];case 1:return[2,n.apply(void 0,[r.sent(),e])]}}))}))}))}(rd(e=Vh(e,nd)),n).then((function(t){return t?new Wh(e,null,t.query):null}))).then((function(t){return t?new Rf(r,t):null}))}var Uf,Vf,qf=n(1134),zf={Firestore:wf,GeoPoint:ld,Timestamp:Br,Blob:bf,Transaction:Tf,WriteBatch:xf,DocumentReference:kf,DocumentSnapshot:Af,Query:Rf,QueryDocumentSnapshot:Pf,QuerySnapshot:Mf,CollectionReference:Of,FieldPath:Ff,FieldValue:jf,setLogLevel:function(t){var e;e=t,Ir.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new qf.Component("firestore",(function(t){return function(t,e){return new wf(t,new nd(t,e),new _f)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},zf)))})(Uf=r.default),Uf.registerVersion("@firebase/firestore","2.4.1"),(Vf=wf).prototype.loadBundle=Bf,Vf.prototype.namedQuery=Gf;var Hf={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},$f=function(t){function e(n,r,i){var o=t.call(this,r)||this;return Object.setPrototypeOf(o,e.prototype),o.code=n,o.details=i,o}return(0,i.__extends)(e,t),e}(Error);var Wf=function(){function t(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then((function(t){return n.auth=t}),(function(){})),this.messaging||e.get().then((function(t){return n.messaging=t}),(function(){}))}return t.prototype.getAuthToken=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t;return(0,i.__generator)(this,(function(e){switch(e.label){case 0:if(!this.auth)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(t=e.sent())?[2,t.accessToken]:[2,void 0];case 3:return e.sent(),[2,void 0];case 4:return[2]}}))}))},t.prototype.getInstanceIdToken=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(t){switch(t.label){case 0:if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.messaging.getToken()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,void 0];case 4:return[2]}}))}))},t.prototype.getContext=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t,e;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return t=n.sent(),[4,this.getInstanceIdToken()];case 2:return e=n.sent(),[2,{authToken:t,instanceIdToken:e}]}}))}))},t}();function Kf(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var Yf=function(){function t(){}return t.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map((function(t){return e.encode(t)}));if("function"==typeof t||"object"==typeof t)return Kf(t,(function(t){return e.encode(t)}));throw new Error("Data cannot be encoded in JSON: "+t)},t.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map((function(t){return e.decode(t)})):"function"==typeof t||"object"==typeof t?Kf(t,(function(t){return e.decode(t)})):t},t}();var Xf=function(){function t(t,e,n,r,i,o){var a=this;void 0===i&&(i="us-central1"),this.app_=t,this.appCheckProvider=r,this.fetchImpl=o,this.serializer=new Yf,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(a.deleteService())}},this.contextProvider=new Wf(e,n),this.cancelAllRequests=new Promise((function(t){a.deleteService=function(){return t()}}));try{var s=new URL(i);this.customDomain=s.origin,this.region="us-central1"}catch(t){this.customDomain=null,this.region=i}}return Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),t.prototype._url=function(t){var e=this.app_.options.projectId;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+e+"/"+this.region+"/"+t:null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t},t.prototype.useEmulator=function(t,e){this.emulatorOrigin="http://"+t+":"+e},t.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},t.prototype.httpsCallable=function(t,e){var n=this;return function(r){return n.call(t,r,e||{})}},t.prototype.postJSON=function(t,e,n){return(0,i.__awaiter)(this,void 0,void 0,(function(){var r,o,a;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return n["Content-Type"]="application/json",[4,this.getAppCheckToken()];case 1:null!==(r=i.sent())&&(n["X-Firebase-AppCheck"]=r),i.label=2;case 2:return i.trys.push([2,4,,5]),[4,this.fetchImpl(t,{method:"POST",body:JSON.stringify(e),headers:n})];case 3:return o=i.sent(),[3,5];case 4:return i.sent(),[2,{status:0,json:null}];case 5:a=null,i.label=6;case 6:return i.trys.push([6,8,,9]),[4,o.json()];case 7:return a=i.sent(),[3,9];case 8:return i.sent(),[3,9];case 9:return[2,{status:o.status,json:a}]}}))}))},t.prototype.getAppCheckToken=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t;return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return(t=this.appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}}))}))},t.prototype.call=function(t,e,n){return(0,i.__awaiter)(this,void 0,void 0,(function(){var r,o,a,s,u,c,l,h,d,f,p;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return r=this._url(t),e=this.serializer.encode(e),o={data:e},a={},[4,this.contextProvider.getContext()];case 1:return(s=i.sent()).authToken&&(a.Authorization="Bearer "+s.authToken),s.instanceIdToken&&(a["Firebase-Instance-ID-Token"]=s.instanceIdToken),u=n.timeout||7e4,c=function(t){var e,n=new Promise((function(n,r){e=setTimeout((function(){r(new $f("deadline-exceeded","deadline-exceeded"))}),t)}));return{timer:e,promise:n}}(u),l=c.timer,h=c.promise,[4,Promise.race([Qf(l,this.postJSON(r,o,a)),h,Qf(l,this.cancelAllRequests)])];case 2:if(!(d=i.sent()))throw new $f("cancelled","Firebase Functions instance was deleted.");if(f=function(t,e,n){var r=function(t){if(t>=200&&t<300)return"ok";switch(t){case 0:case 500:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r,o=void 0;try{var a=e&&e.error;if(a){var s=a.status;if("string"==typeof s){if(!Hf[s])return new $f("internal","internal");r=Hf[s],i=s}var u=a.message;"string"==typeof u&&(i=u),void 0!==(o=a.details)&&(o=n.decode(o))}}catch(t){}return"ok"===r?null:new $f(r,i,o)}(d.status,d.json,this.serializer),f)throw f;if(!d.json)throw new $f("internal","Response is not valid JSON object.");if(void 0===(p=d.json.data)&&(p=d.json.result),void 0===p)throw new $f("internal","Response is missing data field.");return[2,{data:this.serializer.decode(p)}]}}))}))},t}();function Qf(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),clearTimeout(t),[2,n]}}))}))}var Jf,Zf,tp;Jf=r.default,Zf=fetch.bind(self),tp={Functions:Xf},Jf.INTERNAL.registerComponent(new qf.Component("functions",(function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal"),a=t.getProvider("messaging");return new Xf(r,i,a,o,n,Zf)}),"PUBLIC").setServiceProps(tp).setMultipleInstances(!0)),r.default.registerVersion("@firebase/functions","0.6.16");var ep,np=n(1588),rp="0.4.32",ip=1e4,op="w:"+rp,ap="FIS_v2",sp="https://firebaseinstallations.googleapis.com/v1",up=36e5,cp=((ep={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',ep["not-registered"]="Firebase Installation is not registered.",ep["installation-not-found"]="Firebase Installation not found.",ep["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',ep["app-offline"]="Could not process request. Application offline.",ep["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",ep),lp=new o.ErrorFactory("installations","Installations",cp);function hp(t){return t instanceof o.FirebaseError&&t.code.includes("request-failed")}function dp(t){var e=t.projectId;return sp+"/projects/"+e+"/installations"}function fp(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}function pp(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n,r;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,e.json()];case 1:return n=i.sent(),r=n.error,[2,lp.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}}))}))}function gp(t){var e=t.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function mp(t,e){var n=e.refreshToken,r=gp(t);return r.append("Authorization",function(t){return ap+" "+t}(n)),r}function vp(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return[4,t()];case 1:return(e=n.sent()).status>=500&&e.status<600?[2,t()]:[2,e]}}))}))}function yp(t,e){var n=e.fid;return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,r,o,a,s,u;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return e=dp(t),r=gp(t),o={fid:n,authVersion:ap,appId:t.appId,sdkVersion:op},a={method:"POST",headers:r,body:JSON.stringify(o)},[4,vp((function(){return fetch(e,a)}))];case 1:return(s=i.sent()).ok?[4,s.json()]:[3,3];case 2:return u=i.sent(),[2,{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:fp(u.authToken)}];case 3:return[4,pp("Create Installation",s)];case 4:throw i.sent()}}))}))}function bp(t){return new Promise((function(e){setTimeout(e,t)}))}var _p=/^[cdef][\w-]{21}$/,wp="";function Sp(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=function(t){var e=(n=t,btoa(String.fromCharCode.apply(String,(0,i.__spreadArray)([],(0,i.__read)(n)))).replace(/\+/g,"-").replace(/\//g,"_"));var n;return e.substr(0,22)}(t);return _p.test(e)?e:wp}catch(t){return wp}}function Tp(t){return t.appName+"!"+t.appId}var xp=new Map;function Ip(t,e){var n=Tp(t);kp(n,e),function(t,e){var n=Cp();n&&n.postMessage({key:t,fid:e});Np()}(n,e)}function kp(t,e){var n,r,o=xp.get(t);if(o)try{for(var a=(0,i.__values)(o),s=a.next();!s.done;s=a.next()){(0,s.value)(e)}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}var Ep=null;function Cp(){return!Ep&&"BroadcastChannel"in self&&((Ep=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){kp(t.data.key,t.data.fid)}),Ep}function Np(){0===xp.size&&Ep&&(Ep.close(),Ep=null)}var Ap,Pp="firebase-installations-database",Rp=1,Dp="firebase-installations-store",Mp=null;function Op(){return Mp||(Mp=(0,np.openDb)(Pp,Rp,(function(t){if(0===t.oldVersion)t.createObjectStore(Dp)}))),Mp}function Lp(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n,r,o,a,s;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return n=Tp(t),[4,Op()];case 1:return r=i.sent(),o=r.transaction(Dp,"readwrite"),[4,(a=o.objectStore(Dp)).get(n)];case 2:return s=i.sent(),[4,a.put(e,n)];case 3:return i.sent(),[4,o.complete];case 4:return i.sent(),s&&s.fid===e.fid||Ip(t,e.fid),[2,e]}}))}))}function Fp(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,n,r;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return e=Tp(t),[4,Op()];case 1:return n=i.sent(),[4,(r=n.transaction(Dp,"readwrite")).objectStore(Dp).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function jp(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n,r,o,a,s,u;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return n=Tp(t),[4,Op()];case 1:return r=i.sent(),o=r.transaction(Dp,"readwrite"),[4,(a=o.objectStore(Dp)).get(n)];case 2:return s=i.sent(),void 0!==(u=e(s))?[3,4]:[4,a.delete(n)];case 3:return i.sent(),[3,6];case 4:return[4,a.put(u,n)];case 5:i.sent(),i.label=6;case 6:return[4,o.complete];case 7:return i.sent(),!u||s&&s.fid===u.fid||Ip(t,u.fid),[2,u]}}))}))}function Bp(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,n,r;return(0,i.__generator)(this,(function(o){switch(o.label){case 0:return[4,jp(t,(function(n){var r=function(t){var e=t||{fid:Sp(),registrationStatus:0};return Vp(e)}(n),o=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(lp.create("app-offline"))};var n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n,r;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,yp(t,e)];case 1:return n=i.sent(),[2,Lp(t,n)];case 2:return hp(r=i.sent())&&409===r.customData.serverCode?[4,Fp(t)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,Lp(t,{fid:e.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}}))}))}(t,n);return{installationEntry:n,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:Gp(t)}:{installationEntry:e}}(t,r);return e=o.registrationPromise,o.installationEntry}))];case 1:return(n=o.sent()).fid!==wp?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=o.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}}))}))}function Gp(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,n,r,o;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,Up(t)];case 1:e=i.sent(),i.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,bp(100)];case 3:return i.sent(),[4,Up(t)];case 4:return e=i.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,Bp(t)];case 6:return n=i.sent(),r=n.installationEntry,(o=n.registrationPromise)?[2,o]:[2,r];case 7:return[2,e]}}))}))}function Up(t){return jp(t,(function(t){if(!t)throw lp.create("installation-not-found");return Vp(t)}))}function Vp(t){return 1===(e=t).registrationStatus&&e.registrationTime+ip<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}function qp(t,e){var n=t.appConfig,r=t.platformLoggerProvider;return(0,i.__awaiter)(this,void 0,void 0,(function(){var t,o,a,s,u,c,l;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return t=function(t,e){var n=e.fid;return dp(t)+"/"+n+"/authTokens:generate"}(n,e),o=mp(n,e),(a=r.getImmediate({optional:!0}))&&o.append("x-firebase-client",a.getPlatformInfoString()),s={installation:{sdkVersion:op}},u={method:"POST",headers:o,body:JSON.stringify(s)},[4,vp((function(){return fetch(t,u)}))];case 1:return(c=i.sent()).ok?[4,c.json()]:[3,3];case 2:return l=i.sent(),[2,fp(l)];case 3:return[4,pp("Generate Auth Token",c)];case 4:throw i.sent()}}))}))}function zp(t,e){return void 0===e&&(e=!1),(0,i.__awaiter)(this,void 0,void 0,(function(){var n,r,o;return(0,i.__generator)(this,(function(a){switch(a.label){case 0:return[4,jp(t.appConfig,(function(r){if(!$p(r))throw lp.create("not-registered");var o=r.authToken;if(!e&&function(t){return 2===t.requestStatus&&!function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+up}(t)}(o))return r;if(1===o.requestStatus)return n=function(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n,r;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,Hp(t.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,bp(100)];case 3:return i.sent(),[4,Hp(t.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,zp(t,e)]:[2,r]}}))}))}(t,e),r;if(!navigator.onLine)throw lp.create("app-offline");var a=function(t){var e={requestStatus:1,requestTime:Date.now()};return(0,i.__assign)((0,i.__assign)({},t),{authToken:e})}(r);return n=function(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n,r,o;return(0,i.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,8]),[4,qp(t,e)];case 1:return n=a.sent(),o=(0,i.__assign)((0,i.__assign)({},e),{authToken:n}),[4,Lp(t.appConfig,o)];case 2:return a.sent(),[2,n];case 3:return!hp(r=a.sent())||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,Fp(t.appConfig)];case 4:return a.sent(),[3,7];case 5:return o=(0,i.__assign)((0,i.__assign)({},e),{authToken:{requestStatus:0}}),[4,Lp(t.appConfig,o)];case 6:a.sent(),a.label=7;case 7:throw r;case 8:return[2]}}))}))}(t,a),a}))];case 1:return r=a.sent(),n?[4,n]:[3,3];case 2:return o=a.sent(),[3,4];case 3:o=r.authToken,a.label=4;case 4:return[2,o]}}))}))}function Hp(t){return jp(t,(function(t){if(!$p(t))throw lp.create("not-registered");var e,n=t.authToken;return 1===(e=n).requestStatus&&e.requestTime+ip<Date.now()?(0,i.__assign)((0,i.__assign)({},t),{authToken:{requestStatus:0}}):t}))}function $p(t){return void 0!==t&&2===t.registrationStatus}function Wp(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return[4,Bp(t)];case 1:return(e=n.sent().registrationPromise)?[4,e]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}function Kp(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n,r,o,a;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return n=function(t,e){var n=e.fid;return dp(t)+"/"+n}(t,e),r=mp(t,e),o={method:"DELETE",headers:r},[4,vp((function(){return fetch(n,o)}))];case 1:return(a=i.sent()).ok?[3,3]:[4,pp("Delete Installation",a)];case 2:throw i.sent();case 3:return[2]}}))}))}function Yp(t,e){var n=t.appConfig;return function(t,e){Cp();var n=Tp(t),r=xp.get(n);r||(r=new Set,xp.set(n,r)),r.add(e)}(n,e),function(){!function(t,e){var n=Tp(t),r=xp.get(n);r&&(r.delete(e),0===r.size&&xp.delete(n),Np())}(n,e)}}function Xp(t){return lp.create("missing-app-config-values",{valueName:t})}!function(t){t.INTERNAL.registerComponent(new qf.Component("installations",(function(t){var e=t.getProvider("app").getImmediate(),n=function(t){var e,n;if(!t||!t.options)throw Xp("App Configuration");if(!t.name)throw Xp("App Name");try{for(var r=(0,i.__values)(["projectId","apiKey","appId"]),o=r.next();!o.done;o=r.next()){var a=o.value;if(!t.options[a])throw Xp(a)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),r={appConfig:n,platformLoggerProvider:t.getProvider("platform-logger")},o={app:e,getId:function(){return function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,n,r;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,Bp(t.appConfig)];case 1:return e=i.sent(),n=e.installationEntry,(r=e.registrationPromise)?r.catch(console.error):zp(t).catch(console.error),[2,n.fid]}}))}))}(r)},getToken:function(t){return function(t,e){return void 0===e&&(e=!1),(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return[4,Wp(t.appConfig)];case 1:return n.sent(),[4,zp(t,e)];case 2:return[2,n.sent().token]}}))}))}(r,t)},delete:function(){return function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,n;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return[4,jp(e=t.appConfig,(function(t){if(!t||0!==t.registrationStatus)return t}))];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw lp.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw lp.create("app-offline");case 3:return[4,Kp(e,n)];case 4:return r.sent(),[4,Fp(e)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}(r)},onIdChange:function(t){return Yp(r,t)}};return o}),"PUBLIC")),t.registerVersion("@firebase/installations",rp)}(r.default);var Qp,Jp=((Ap={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',Ap["only-available-in-window"]="This method is available in a Window context.",Ap["only-available-in-sw"]="This method is available in a service worker context.",Ap["permission-default"]="The notification permission was not granted and dismissed instead.",Ap["permission-blocked"]="The notification permission was not granted and blocked instead.",Ap["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",Ap["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",Ap["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",Ap["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",Ap["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",Ap["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",Ap["token-update-no-token"]="FCM returned no token when updating the user to push.",Ap["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",Ap["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",Ap["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",Ap["invalid-vapid-key"]="The public VAPID key must be a string.",Ap["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",Ap),Zp=new o.ErrorFactory("messaging","Messaging",Jp),tg="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",eg="https://fcmregistrations.googleapis.com/v1",ng="FCM_MSG",rg="google.c.a.c_id";function ig(t){var e=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,(0,i.__spreadArray)([],(0,i.__read)(e)))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function og(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(e),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}!function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"}(Qp||(Qp={}));var ag="fcm_token_details_db",sg=5,ug="fcm_token_object_Store";function cg(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,n,r,o=this;return(0,i.__generator)(this,(function(a){switch(a.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(e=a.sent(),n=e.map((function(t){return t.name})),!n.includes(ag))return[2,null];a.label=2;case 2:return r=null,[4,(0,np.openDb)(ag,sg,(function(e){return(0,i.__awaiter)(o,void 0,void 0,(function(){var n,o,a,s;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return e.oldVersion<2?[2]:e.objectStoreNames.contains(ug)?[4,(n=e.transaction.objectStore(ug)).index("fcmSenderId").get(t)]:[2];case 1:return o=i.sent(),[4,n.clear()];case 2:if(i.sent(),!o)return[2];if(2===e.oldVersion){if(!(a=o).auth||!a.p256dh||!a.endpoint)return[2];r={token:a.fcmToken,createTime:null!==(s=a.createTime)&&void 0!==s?s:Date.now(),subscriptionOptions:{auth:a.auth,p256dh:a.p256dh,endpoint:a.endpoint,swScope:a.swScope,vapidKey:"string"==typeof a.vapidKey?a.vapidKey:ig(a.vapidKey)}}}else(3===e.oldVersion||4===e.oldVersion)&&(r={token:(a=o).fcmToken,createTime:a.createTime,subscriptionOptions:{auth:ig(a.auth),p256dh:ig(a.p256dh),endpoint:a.endpoint,swScope:a.swScope,vapidKey:ig(a.vapidKey)}});return[2]}}))}))}))];case 3:return a.sent().close(),[4,(0,np.deleteDb)(ag)];case 4:return a.sent(),[4,(0,np.deleteDb)("fcm_vapid_details_db")];case 5:return a.sent(),[4,(0,np.deleteDb)("undefined")];case 6:return a.sent(),[2,lg(r)?r:null]}}))}))}function lg(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}var hg="firebase-messaging-database",dg=1,fg="firebase-messaging-store",pg=null;function gg(){return pg||(pg=(0,np.openDb)(hg,dg,(function(t){if(0===t.oldVersion)t.createObjectStore(fg)}))),pg}function mg(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,n,r;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return e=bg(t),[4,gg()];case 1:return[4,i.sent().transaction(fg).objectStore(fg).get(e)];case 2:return(n=i.sent())?[2,n]:[3,3];case 3:return[4,cg(t.appConfig.senderId)];case 4:return(r=i.sent())?[4,vg(t,r)]:[3,6];case 5:return i.sent(),[2,r];case 6:return[2]}}))}))}function vg(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n,r,o;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return n=bg(t),[4,gg()];case 1:return r=i.sent(),[4,(o=r.transaction(fg,"readwrite")).objectStore(fg).put(e,n)];case 2:return i.sent(),[4,o.complete];case 3:return i.sent(),[2,e]}}))}))}function yg(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,n,r;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return e=bg(t),[4,gg()];case 1:return n=i.sent(),[4,(r=n.transaction(fg,"readwrite")).objectStore(fg).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function bg(t){return t.appConfig.appId}function _g(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n,r,o,a,s,u;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,xg(t)];case 1:n=i.sent(),r=Ig(e),o={method:"POST",headers:n,body:JSON.stringify(r)},i.label=2;case 2:return i.trys.push([2,5,,6]),[4,fetch(Tg(t.appConfig),o)];case 3:return[4,i.sent().json()];case 4:return a=i.sent(),[3,6];case 5:throw s=i.sent(),Zp.create("token-subscribe-failed",{errorInfo:s});case 6:if(a.error)throw u=a.error.message,Zp.create("token-subscribe-failed",{errorInfo:u});if(!a.token)throw Zp.create("token-subscribe-no-token");return[2,a.token]}}))}))}function wg(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n,r,o,a,s,u;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,xg(t)];case 1:n=i.sent(),r=Ig(e.subscriptionOptions),o={method:"PATCH",headers:n,body:JSON.stringify(r)},i.label=2;case 2:return i.trys.push([2,5,,6]),[4,fetch(Tg(t.appConfig)+"/"+e.token,o)];case 3:return[4,i.sent().json()];case 4:return a=i.sent(),[3,6];case 5:throw s=i.sent(),Zp.create("token-update-failed",{errorInfo:s});case 6:if(a.error)throw u=a.error.message,Zp.create("token-update-failed",{errorInfo:u});if(!a.token)throw Zp.create("token-update-no-token");return[2,a.token]}}))}))}function Sg(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n,r,o,a,s;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,xg(t)];case 1:n=i.sent(),r={method:"DELETE",headers:n},i.label=2;case 2:return i.trys.push([2,5,,6]),[4,fetch(Tg(t.appConfig)+"/"+e,r)];case 3:return[4,i.sent().json()];case 4:if((o=i.sent()).error)throw a=o.error.message,Zp.create("token-unsubscribe-failed",{errorInfo:a});return[3,6];case 5:throw s=i.sent(),Zp.create("token-unsubscribe-failed",{errorInfo:s});case 6:return[2]}}))}))}function Tg(t){var e=t.projectId;return eg+"/projects/"+e+"/registrations"}function xg(t){var e=t.appConfig,n=t.installations;return(0,i.__awaiter)(this,void 0,void 0,(function(){var t;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return t=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":"FIS "+t})]}}))}))}function Ig(t){var e=t.p256dh,n=t.auth,r=t.endpoint,i=t.vapidKey,o={web:{endpoint:r,auth:n,p256dh:e}};return i!==tg&&(o.web.applicationPubKey=i),o}function kg(t,e,n){return(0,i.__awaiter)(this,void 0,void 0,(function(){var r,o,a,s;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:if("granted"!==Notification.permission)throw Zp.create("permission-blocked");return[4,Ag(e,n)];case 1:return r=i.sent(),[4,mg(t)];case 2:return o=i.sent(),a={vapidKey:n,swScope:e.scope,endpoint:r.endpoint,auth:ig(r.getKey("auth")),p256dh:ig(r.getKey("p256dh"))},o?[3,3]:[2,Ng(t,a)];case 3:if(u=o.subscriptionOptions,l=(c=a).vapidKey===u.vapidKey,h=c.endpoint===u.endpoint,d=c.auth===u.auth,f=c.p256dh===u.p256dh,l&&h&&d&&f)return[3,8];i.label=4;case 4:return i.trys.push([4,6,,7]),[4,Sg(t,o.token)];case 5:return i.sent(),[3,7];case 6:return s=i.sent(),console.warn(s),[3,7];case 7:return[2,Ng(t,a)];case 8:return Date.now()>=o.createTime+6048e5?[2,Cg({token:o.token,createTime:Date.now(),subscriptionOptions:a},t,e)]:[2,o.token];case 9:return[2]}var u,c,l,h,d,f}))}))}function Eg(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n,r;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,mg(t)];case 1:return(n=i.sent())?[4,Sg(t,n.token)]:[3,4];case 2:return i.sent(),[4,yg(t)];case 3:i.sent(),i.label=4;case 4:return[4,e.pushManager.getSubscription()];case 5:return(r=i.sent())?[2,r.unsubscribe()]:[2,!0]}}))}))}function Cg(t,e,n){return(0,i.__awaiter)(this,void 0,void 0,(function(){var r,o,a;return(0,i.__generator)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,3,,5]),[4,wg(e,t)];case 1:return r=s.sent(),o=(0,i.__assign)((0,i.__assign)({},t),{token:r,createTime:Date.now()}),[4,vg(e,o)];case 2:return s.sent(),[2,r];case 3:return a=s.sent(),[4,Eg(e,n)];case 4:throw s.sent(),a;case 5:return[2]}}))}))}function Ng(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n,r;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,_g(t,e)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:e},[4,vg(t,r)];case 2:return i.sent(),[2,r.token]}}))}))}function Ag(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return[4,t.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:og(e)})]}}))}))}function Pg(t){return"object"==typeof t&&!!t&&rg in t}function Rg(t){return new Promise((function(e){setTimeout(e,t)}))}var Dg=function(){function t(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",(function(t){t.waitUntil(e.onPush(t))})),self.addEventListener("pushsubscriptionchange",(function(t){t.waitUntil(e.onSubChange(t))})),self.addEventListener("notificationclick",(function(t){t.waitUntil(e.onNotificationClick(t))}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!=typeof t)throw Zp.create("invalid-bg-handler");this.bgMessageHandler=t},t.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},t.prototype.getToken=function(){var t,e;return(0,i.__awaiter)(this,void 0,void 0,(function(){var n;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return this.vapidKey?[3,2]:[4,mg(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(e=null===(t=null==n?void 0:n.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==e?e:tg,r.label=2;case 2:return[2,kg(this.firebaseDependencies,self.registration,this.vapidKey)]}}))}))},t.prototype.deleteToken=function(){return Eg(this.firebaseDependencies,self.registration)},t.prototype.requestPermission=function(){throw Zp.create("only-available-in-window")},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw Zp.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw Zp.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(){throw Zp.create("only-available-in-window")},t.prototype.onMessage=function(){throw Zp.create("only-available-in-window")},t.prototype.onTokenRefresh=function(){throw Zp.create("only-available-in-window")},t.prototype.onPush=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,n,r,o;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return e=function(t){var e=t.data;if(!e)return null;try{return e.json()}catch(t){return null}}(t),e?[4,Fg()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return function(t){return t.some((function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")}))}(n=i.sent())?[2,Lg(n,e)]:(r=!1,e.notification?[4,jg(Mg(e))]:[3,3]);case 2:i.sent(),r=!0,i.label=3;case 3:return!0===r&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(o=function(t){var e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcm_message_id};return function(t,e){if(e.notification){t.notification={};var n=e.notification.title;n&&(t.notification.title=n);var r=e.notification.body;r&&(t.notification.body=r);var i=e.notification.image;i&&(t.notification.image=i)}}(e,t),function(t,e){e.data&&(t.data=e.data)}(e,t),function(t,e){if(e.fcmOptions){t.fcmOptions={};var n=e.fcmOptions.link;n&&(t.fcmOptions.link=n);var r=e.fcmOptions.analytics_label;r&&(t.fcmOptions.analyticsLabel=r)}}(e,t),e}(e),"function"==typeof this.bgMessageHandler?this.bgMessageHandler(o):this.bgMessageHandler.next(o)),[4,Rg(1e3)]);case 4:return i.sent(),[2]}}))}))},t.prototype.onSubChange=function(t){var e,n;return(0,i.__awaiter)(this,void 0,void 0,(function(){var r;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return t.newSubscription?[3,2]:[4,Eg(this.firebaseDependencies,self.registration)];case 1:case 5:return i.sent(),[2];case 2:return[4,mg(this.firebaseDependencies)];case 3:return r=i.sent(),[4,Eg(this.firebaseDependencies,self.registration)];case 4:return i.sent(),[4,kg(this.firebaseDependencies,self.registration,null!==(n=null===(e=null==r?void 0:r.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==n?n:tg)]}}))}))},t.prototype.onNotificationClick=function(t){var e,n;return(0,i.__awaiter)(this,void 0,void 0,(function(){var r,o,a,s,u;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return(r=null===(n=null===(e=t.notification)||void 0===e?void 0:e.data)||void 0===n?void 0:n[ng])?t.action?[2]:(t.stopImmediatePropagation(),t.notification.close(),o=function(t){var e,n,r,i=null!==(n=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==n?n:null===(r=t.notification)||void 0===r?void 0:r.click_action;if(i)return i;return Pg(t.data)?self.location.origin:null}(r),o?(a=new URL(o,self.location.href),s=new URL(self.location.origin),a.host!==s.host?[2]:[4,Og(a)]):[2]):[2];case 1:return(u=i.sent())?[3,4]:[4,self.clients.openWindow(o)];case 2:return u=i.sent(),[4,Rg(3e3)];case 3:return i.sent(),[3,6];case 4:return[4,u.focus()];case 5:u=i.sent(),i.label=6;case 6:return u?(r.messageType=Qp.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,u.postMessage(r)]):[2]}}))}))},t}();function Mg(t){var e,n=(0,i.__assign)({},t.notification);return n.data=((e={})[ng]=t,e),n}function Og(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,n,r,o,a,s,u;return(0,i.__generator)(this,(function(c){switch(c.label){case 0:return[4,Fg()];case 1:e=c.sent();try{for(n=(0,i.__values)(e),r=n.next();!r.done;r=n.next())if(o=r.value,a=new URL(o.url,self.location.href),t.host===a.host)return[2,o]}catch(t){s={error:t}}finally{try{r&&!r.done&&(u=n.return)&&u.call(n)}finally{if(s)throw s.error}}return[2,null]}}))}))}function Lg(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=Qp.PUSH_RECEIVED;try{for(var o=(0,i.__values)(t),a=o.next();!a.done;a=o.next()){a.value.postMessage(e)}}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}function Fg(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function jg(t){var e,n=t.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(e=t.title)&&void 0!==e?e:"",t)}var Bg=function(){function t(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",(function(t){return e.messageEventListener(t)}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.messageEventListener=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,n;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return(e=t.data).isFirebaseMessaging?(this.onMessageCallback&&e.messageType===Qp.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback(function(t){return delete t.messageType,delete t.isFirebaseMessaging,t}(Object.assign({},e))):this.onMessageCallback.next(Object.assign({},e))),Pg(n=e.data)&&"1"===n["google.c.a.e"]?[4,this.logEvent(e.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.getVapidKey=function(){return this.vapidKey},t.prototype.getSwReg=function(){return this.swRegistration},t.prototype.getToken=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:e.sent(),e.label=2;case 2:if("granted"!==Notification.permission)throw Zp.create("permission-blocked");return[4,this.updateVapidKey(null==t?void 0:t.vapidKey)];case 3:return e.sent(),[4,this.updateSwReg(null==t?void 0:t.serviceWorkerRegistration)];case 4:return e.sent(),[2,kg(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}}))}))},t.prototype.updateVapidKey=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){return t?this.vapidKey=t:this.vapidKey||(this.vapidKey=tg),[2]}))}))},t.prototype.updateSwReg=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return t||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:if(!t&&this.swRegistration)return[2];if(!(t instanceof ServiceWorkerRegistration))throw Zp.create("invalid-sw-registration");return this.swRegistration=t,[2]}}))}))},t.prototype.registerDefaultSw=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t,e;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return t.swRegistration=n.sent(),this.swRegistration.update().catch((function(){})),[3,3];case 2:throw e=n.sent(),Zp.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 3:return[2]}}))}))},t.prototype.deleteToken=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,Eg(this.firebaseDependencies,this.swRegistration)]}}))}))},t.prototype.requestPermission=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t;return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(t=e.sent()))return[2];throw"denied"===t?Zp.create("permission-blocked"):Zp.create("permission-default")}}))}))},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw Zp.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw Zp.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw Zp.create("invalid-sw-registration");if(this.swRegistration)throw Zp.create("use-sw-after-get-token");this.swRegistration=t},t.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},t.prototype.setBackgroundMessageHandler=function(){throw Zp.create("only-available-in-sw")},t.prototype.onBackgroundMessage=function(){throw Zp.create("only-available-in-sw")},t.prototype.onTokenRefresh=function(){return function(){}},t.prototype.logEvent=function(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return n=function(t){switch(t){case Qp.NOTIFICATION_CLICKED:return"notification_open";case Qp.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r.sent().logEvent(n,{message_id:e[rg],message_name:e["google.c.a.c_l"],message_time:e["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}}))}))},t}();function Gg(t){return Zp.create("missing-app-config-values",{valueName:t})}var Ug={isSupported:Vg};function Vg(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}r.default.INTERNAL.registerComponent(new qf.Component("messaging",(function(t){var e=t.getProvider("app").getImmediate(),n=function(t){var e,n;if(!t||!t.options)throw Gg("App Configuration Object");if(!t.name)throw Gg("App Name");var r=t.options;try{for(var o=(0,i.__values)(["projectId","apiKey","appId","messagingSenderId"]),a=o.next();!a.done;a=o.next()){var s=a.value;if(!r[s])throw Gg(s)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),r={app:e,appConfig:n,installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!Vg())throw Zp.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new Dg(r):new Bg(r)}),"PUBLIC").setServiceProps(Ug));var qg="firebasestorage.googleapis.com",zg="storageBucket",Hg=function(t){function e(n,r){var i=t.call(this,$g(n),"Firebase Storage: "+r+" ("+$g(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,e.prototype),i}return(0,i.__extends)(e,t),e.prototype._codeEquals=function(t){return $g(t)===this.code},Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=this._baseMessage+"\n"+this.customData.serverResponse:this.message=this._baseMessage},enumerable:!1,configurable:!0}),e}(o.FirebaseError);function $g(t){return"storage/"+t}function Wg(){return new Hg("unknown","An unknown error occurred, please check the error payload for server response.")}function Kg(){return new Hg("canceled","User canceled the upload/download.")}function Yg(){return new Hg("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Xg(t){return new Hg("invalid-argument",t)}function Qg(){return new Hg("app-deleted","The Firebase app was deleted.")}function Jg(t){return new Hg("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Zg(t,e){return new Hg("invalid-format","String does not match format '"+t+"': "+e)}function tm(t){throw new Hg("internal-error","Internal error: "+t)}var em={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},nm=function(t,e){this.data=t,this.contentType=e||null};function rm(t,e){switch(t){case em.RAW:return new nm(im(e));case em.BASE64:case em.BASE64URL:return new nm(om(t,e));case em.DATA_URL:return new nm((n=new am(e)).base64?om(em.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw Zg(em.DATA_URL,"Malformed data URL.")}return im(e)}(n.rest),function(t){var e=new am(t);return e.contentType}(e))}var n;throw Wg()}function im(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function om(t,e){switch(t){case em.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw Zg(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case em.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw Zg(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(e)}catch(e){throw Zg(t,"Invalid character found")}for(var s=new Uint8Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);return s}var am=function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw Zg(em.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=e[1]||null;null!=n&&(this.base64=(r=n,i=";base64",r.length>=i.length&&r.substring(r.length-i.length)===i),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=t.substring(t.indexOf(",")+1);var r,i};var sm,um={STATE_CHANGED:"state_changed"},cm={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function lm(t){switch(t){case"running":case"pausing":case"canceling":return cm.RUNNING;case"paused":return cm.PAUSED;case"success":return cm.SUCCESS;case"canceled":return cm.CANCELED;default:return cm.ERROR}}!function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"}(sm||(sm={}));var hm=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=sm.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=sm.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=sm.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw tm("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw tm("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw tm("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw tm("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}();var dm=function(){function t(){}return t.prototype.createConnection=function(){return new hm},t}(),fm=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e,n){var r;try{r=t.makeFromUrl(e,n)}catch(n){return new t(e,"")}if(""===r.path)return r;throw new Hg("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var o=new RegExp("^gs://"+i+"(/(.*))?$","i");function a(t){t.path_=decodeURIComponent(t.path)}for(var s=n.replace(/[.]/g,"\\."),u=[{regex:o,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+s+"/v[A-Za-z0-9_]+/b/"+i+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:a},{regex:new RegExp("^https?://"+(n===qg?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/"+i+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:a}],c=0;c<u.length;c++){var l=u[c],h=l.regex.exec(e);if(h){var d=h[l.indices.bucket],f=h[l.indices.path];f||(f=""),r=new t(d,f),l.postModify(r);break}}if(null==r)throw function(t){return new Hg("invalid-url","Invalid URL '"+t+"'.")}(e);return r},t}(),pm=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();function gm(t){return"string"==typeof t||t instanceof String}function mm(t){return vm()&&t instanceof Blob}function vm(){return"undefined"!=typeof Blob}function ym(t,e,n,r){if(r<e)throw Xg("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw Xg("Invalid value for '"+t+"'. Expected "+n+" or less.")}function bm(t,e){var n=e.match(/^(\w+):\/\/.+/),r=e;return null==(null==n?void 0:n[1])&&(r="https://"+e),r+"/v0"+t}function _m(t){var e=encodeURIComponent,n="?";for(var r in t){if(t.hasOwnProperty(r))n=n+(e(r)+"="+e(t[r]))+"&"}return n=n.slice(0,-1)}var wm=function(){function t(t,e,n,r,i,o,a,s,u,c,l){var h=this;this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise((function(t,e){h.resolve_=t,h.reject_=e,h.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,a=n.connection;if(n.wasSuccessCode)try{var s=t.callback_(a,a.getResponseText());!function(t){return void 0!==t}(s)?i():i(s)}catch(t){o(t)}else null!==a?((r=Wg()).serverResponse=a.getResponseText(),t.errorCallback_?o(t.errorCallback_(a,r)):o(r)):n.canceled?o(r=t.appDelete_?Qg():Kg()):o(r=new Hg("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new Sm(!1,null,!0)):this.backoffId_=function(t,e,n){var r=1,o=null,a=!1,s=0;function u(){return 2===s}var c=!1;function l(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];c||(c=!0,e.apply(null,t))}function h(e){o=setTimeout((function(){o=null,t(d,u())}),e)}function d(t){for(var e,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];c||(t||u()||a?l.call.apply(l,(0,i.__spreadArray)([null,t],n)):(r<64&&(r*=2),1===s?(s=2,e=0):e=1e3*(r+Math.random()),h(e)))}var f=!1;function p(t){f||(f=!0,c||(null!==o?(t||(s=2),clearTimeout(o),h(0)):t||(s=1)))}return h(0),setTimeout((function(){a=!0,p(!0)}),n),p}((function(e,n){if(n)e(!1,new Sm(!1,null,!0));else{var r=t.pool_.createConnection();t.pendingConnection_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(){null!==t.progressCallback_&&r.removeUploadProgressListener(i),t.pendingConnection_=null;var n=r.getErrorCode()===sm.NO_ERROR,o=r.getStatus();if(n&&!t.isRetryStatusCode_(o)){var a=-1!==t.successCodes_.indexOf(o);e(!0,new Sm(a,r))}else{var s=r.getErrorCode()===sm.ABORT;e(!1,new Sm(!1,null,s))}}))}function i(e){var n=e.loaded,r=e.lengthComputable?e.total:-1;null!==t.progressCallback_&&t.progressCallback_(n,r)}}),e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function(t){t(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),Sm=function(t,e,n){this.wasSuccessCode=t,this.connection=e,this.canceled=!!n};function Tm(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function xm(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Tm();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(vm())return new Blob(t);throw new Hg("unsupported-environment","This browser doesn't seem to support creating Blobs")}var Im=function(){function t(t,e){var n=0,r="";mm(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(mm(this.data_)){var r=function(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}(this.data_,e,n);return null===r?null:new t(r)}return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(vm()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t(xm.apply(null,r))}var i=e.map((function(t){return gm(t)?rm(em.RAW,t).data:t.data_})),o=0;i.forEach((function(t){o+=t.byteLength}));var a=new Uint8Array(o),s=0;return i.forEach((function(t){for(var e=0;e<t.length;e++)a[s++]=t[e]})),new t(a,!0)},t.prototype.uploadData=function(){return this.data_},t}();function km(t){var e;try{e=JSON.parse(t)}catch(t){return null}return function(t){return"object"==typeof t&&!Array.isArray(t)}(e)?e:null}function Em(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function Cm(t,e){return e}var Nm=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||Cm},Am=null;function Pm(){if(Am)return Am;var t=[];t.push(new Nm("bucket")),t.push(new Nm("generation")),t.push(new Nm("metageneration")),t.push(new Nm("name","fullPath",!0));var e=new Nm("name");e.xform=function(t,e){return function(t){return!gm(t)||t.length<2?t:Em(t)}(e)},t.push(e);var n=new Nm("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new Nm("timeCreated")),t.push(new Nm("updated")),t.push(new Nm("md5Hash",null,!0)),t.push(new Nm("cacheControl",null,!0)),t.push(new Nm("contentDisposition",null,!0)),t.push(new Nm("contentEncoding",null,!0)),t.push(new Nm("contentLanguage",null,!0)),t.push(new Nm("contentType",null,!0)),t.push(new Nm("metadata","customMetadata",!0)),Am=t}function Rm(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,e[a.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=t.bucket,r=t.fullPath,i=new fm(n,r);return e._makeStorageReference(i)}})}(r,t),r}function Dm(t,e,n){var r=km(e);return null===r?null:Rm(t,r,n)}function Mm(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var Om="prefixes",Lm="items";function Fm(t,e,n){var r=km(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Om])for(var i=0,o=n[Om];i<o.length;i++){var a=o[i].replace(/\/$/,""),s=t._makeStorageReference(new fm(e,a));r.prefixes.push(s)}if(n[Lm])for(var u=0,c=n[Lm];u<c.length;u++){var l=c[u];s=t._makeStorageReference(new fm(e,l.name)),r.items.push(s)}return r}(t,e,r)}var jm=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function Bm(t){if(!t)throw Wg()}function Gm(t,e){return function(n,r){var i=Dm(t,r,e);return Bm(null!==i),i}}function Um(t,e){return function(n,r){var i=Dm(t,r,e);return Bm(null!==i),function(t,e,n){var r=km(e);if(null===r)return null;if(!gm(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map((function(e){var r=t.bucket,i=t.fullPath;return bm("/b/"+o(r)+"/o/"+o(i),n)+_m({alt:"media",token:e})}))[0]}(i,r,t.host)}}function Vm(t){return function(e,n){var r,i,o;return 401===e.getStatus()?r=e.getResponseText().includes("Firebase App Check token is invalid")?new Hg("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new Hg("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?(o=t.bucket,r=new Hg("quota-exceeded","Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===e.getStatus()?(i=t.path,r=new Hg("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function qm(t){var e=Vm(t);return function(n,r){var i,o=e(n,r);return 404===n.getStatus()&&(i=t.path,o=new Hg("object-not-found","Object '"+i+"' does not exist.")),o.serverResponse=r.serverResponse,o}}function zm(t,e,n){var r=bm(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new jm(r,"GET",Gm(t,n),i);return o.errorHandler=qm(e),o}function Hm(t,e,n,r,i){var o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var a=bm(e.bucketOnlyServerUrl(),t.host),s=t.maxOperationRetryTime,u=new jm(a,"GET",function(t,e){return function(n,r){var i=Fm(t,e,r);return Bm(null!==i),i}}(t,e.bucket),s);return u.urlParams=o,u.errorHandler=Vm(e),u}function $m(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}var Wm=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function Km(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){Bm(!1)}return Bm(!!n&&-1!==(e||["active"]).indexOf(n)),n}var Ym=262144;function Xm(t,e,n,r,i,o,a,s){var u=new Wm(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new Hg("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,d=h+l,f={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":""+u.current},p=r.slice(h,d);if(null===p)throw Yg();var g=e.maxUploadRetryTime,m=new jm(n,"POST",(function(t,n){var i,a=Km(t,["active","final"]),s=u.current+l,c=r.size();return i="final"===a?Gm(e,o)(t,n):null,new Wm(s,c,"final"===a,i)}),g);return m.headers=f,m.body=p.uploadData(),m.progressCallback=s||null,m.errorHandler=Vm(t),m}var Qm=function(t,e,n){var r=function(t){return"function"==typeof t}(t)||null!=e||null!=n;if(r)this.next=t,this.error=e,this.complete=n;else{var i=t;this.next=i.next,this.error=i.error,this.complete=i.complete}};function Jm(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}var Zm=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=Pm(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise((function(t,e){r._resolve=t,r._reject=e,r._start()})),this._promise.then(null,(function(){}))}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=n[0],i=n[1];switch(e._state){case"running":t(r,i);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}}))},t.prototype._createResumable=function(){var t=this;this._resolveToken((function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a=$m(e,r,i),s={name:a.fullPath},u=bm(o,t.host),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":""+r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},l=Mm(a,n),h=t.maxUploadRetryTime,d=new jm(u,"POST",(function(t){var e;Km(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){Bm(!1)}return Bm(gm(e)),e}),h);return d.urlParams=s,d.headers=c,d.body=l,d.errorHandler=Vm(e),d}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()}),t._errorHandler)}))},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken((function(n,r){var i=function(t,e,n,r){var i=t.maxUploadRetryTime,o=new jm(n,"POST",(function(t){var e=Km(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){Bm(!1)}n||Bm(!1);var i=Number(n);return Bm(!isNaN(i)),new Wm(i,r.size(),"final"===e)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=Vm(e),o}(t._ref.storage,t._ref._location,e,t._blob),o=t._ref.storage._makeRequest(i,n,r);t._request=o,o.getPromise().then((function(e){t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()}),t._errorHandler)}))},t.prototype._continueUpload=function(){var t=this,e=Ym*this._chunkMultiplier,n=new Wm(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,o){var a;try{a=Xm(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(e){return t._error=e,void t._transition("error")}var s=t._ref.storage._makeRequest(a,i,o);t._request=s,s.getPromise().then((function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()}),t._errorHandler)}))},t.prototype._increaseMultiplier=function(){Ym*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken((function(e,n){var r=zm(t._ref.storage,t._ref._location,t._mappings),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._transition("success")}),t._metadataErrorHandler)}))},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken((function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();a["Content-Type"]="multipart/related; boundary="+s;var u=$m(e,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Mm(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+s+"--",h=Im.getBlob(c,r,l);if(null===h)throw Yg();var d={name:u.fullPath},f=bm(o,t.host),p=t.maxUploadRetryTime,g=new jm(f,"POST",Gm(t,n),p);return g.urlParams=d,g.headers=a,g.body=h.uploadData(),g.errorHandler=Vm(e),g}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")}),t._errorHandler)}))},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=t,this._notifyObservers();break;case"canceled":this._error=Kg(),this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=lm(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new Qm(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach((function(e){t._notifyObserver(e)}))},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(lm(this._state)){case cm.SUCCESS:Jm(this._resolve.bind(null,this.snapshot))();break;case cm.CANCELED:case cm.ERROR:Jm(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(lm(this._state)){case cm.RUNNING:case cm.PAUSED:t.next&&Jm(t.next.bind(t,this.snapshot))();break;case cm.SUCCESS:t.complete&&Jm(t.complete.bind(t))();break;default:t.error&&Jm(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),tv=function(){function t(t,e){this._service=t,this._location=e instanceof fm?e:fm.makeFromUrl(e,t.host)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new fm(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return Em(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new fm(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw Jg(t)},t}();function ev(t){var e={prefixes:[],items:[]};return nv(t,e).then((function(){return e}))}function nv(t,e,n){return(0,i.__awaiter)(this,void 0,void 0,(function(){var r,o,a;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,rv(t,{pageToken:n})];case 1:return r=i.sent(),(o=e.prefixes).push.apply(o,r.prefixes),(a=e.items).push.apply(a,r.items),null==r.nextPageToken?[3,3]:[4,nv(t,e,r.nextPageToken)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function rv(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n,r;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return null!=e&&"number"==typeof e.maxResults&&ym("options.maxResults",1,1e3,e.maxResults),n=e||{},r=Hm(t.storage,t._location,"/",n.pageToken,n.maxResults),[4,t.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}}))}))}function iv(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("updateMetadata"),n=function(t,e,n,r){var i=bm(e.fullServerUrl(),t.host),o=Mm(n,r),a=t.maxOperationRetryTime,s=new jm(i,"PATCH",Gm(t,r),a);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=o,s.errorHandler=qm(e),s}(t.storage,t._location,e,Pm()),[4,t.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}}))}))}function ov(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("getDownloadURL"),e=function(t,e,n){var r=bm(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new jm(r,"GET",Um(t,n),i);return o.errorHandler=qm(e),o}(t.storage,t._location,Pm()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise().then((function(t){if(null===t)throw new Hg("no-download-url","The given file does not have any download URLs.");return t}))]}}))}))}function av(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("deleteObject"),e=function(t,e){var n=bm(e.fullServerUrl(),t.host),r=t.maxOperationRetryTime,i=new jm(n,"DELETE",(function(t,e){}),r);return i.successCodes=[200,204],i.errorHandler=qm(e),i}(t.storage,t._location),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}}))}))}function sv(t,e){var n=function(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new fm(t._location.bucket,n);return new tv(t.storage,r)}function uv(t){return/^[A-Za-z]+:\/\//.test(t)}function cv(t,e){if(t instanceof dv){var n=t;if(null==n._bucket)throw new Hg("no-default-bucket","No default bucket found. Did you set the '"+zg+"' property when initializing the app?");var r=new tv(n,n._bucket);return null!=e?cv(r,e):r}return void 0!==e?sv(t,e):t}function lv(t,e){if(e&&uv(e)){if(t instanceof dv)return new tv(t,e);throw Xg("To use ref(service, url), the first argument must be a Storage instance.")}return cv(t,e)}function hv(t,e){var n=null==e?void 0:e[zg];return null==n?null:fm.makeFromBucketSpec(n,t)}var dv=function(){function t(t,e,n,r,i,o){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=qg,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?fm.makeFromBucketSpec(i,this._host):hv(this._host,this.app.options)}return Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,null!=this._url?this._bucket=fm.makeFromBucketSpec(this._url,t):this._bucket=hv(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){ym("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){ym("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t,e;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return this._overrideAuthToken?[2,this._overrideAuthToken]:(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}}))}))},t.prototype._getAppCheckToken=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t;return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return(t=this._appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}}))}))},t.prototype._delete=function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(t){return t.cancel()})),this._requests.clear()),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new tv(this,t)},t.prototype._makeRequest=function(t,e,n){var r=this;if(this._deleted)return new pm(Qg());var i=function(t,e,n,r,i,o){var a=_m(t.urlParams),s=t.url+a,u=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(u,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(u,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(u,o),function(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(u,r),new wm(s,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i)}(t,this._appId,e,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then((function(){return r._requests.delete(i)}),(function(){return r._requests.delete(i)})),i},t.prototype.makeRequestWithTokens=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,n,r;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return e=i.sent(),n=e[0],r=e[1],[2,this._makeRequest(t,n,r)]}}))}))},t}();function fv(t,e,n){return function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new Zm(t,new Im(e),n)}(t=(0,o.getModularInstance)(t),e,n)}function pv(t){return function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("getMetadata"),e=zm(t.storage,t._location,Pm()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}}))}))}(t=(0,o.getModularInstance)(t))}function gv(t,e){return lv(t=(0,o.getModularInstance)(t),e)}function mv(t,e,n,r){void 0===r&&(r={}),function(t,e,n,r){void 0===r&&(r={}),t.host="http://"+e+":"+n;var i=r.mockUserToken;i&&(t._overrideAuthToken="string"==typeof i?i:(0,o.createMockUserToken)(i,t.app.options.projectId))}(t,e,n,r)}var vv=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),yv=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new vv(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then((function(e){if(t)return t(new vv(e,n,n._ref))}),e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new vv(t,i,i._ref))}:{next:e.next?function(t){return e.next(new vv(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),bv=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map((function(e){return new _v(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map((function(e){return new _v(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),_v=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){var n=function(t,e){return sv(t,e)}(this._delegate,e);return new t(n,this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new yv(fv(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=em.RAW),this._throwIfRoot("putString");var r=rm(e,t),o=(0,i.__assign)({},n);return null==o.contentType&&null!=r.contentType&&(o.contentType=r.contentType),new yv(new Zm(this._delegate,new Im(r.data,!0),o),this)},t.prototype.listAll=function(){var t=this;return function(t){return ev(t=(0,o.getModularInstance)(t))}(this._delegate).then((function(e){return new bv(e,t.storage)}))},t.prototype.list=function(t){var e=this;return function(t,e){return rv(t=(0,o.getModularInstance)(t),e)}(this._delegate,t||void 0).then((function(t){return new bv(t,e.storage)}))},t.prototype.getMetadata=function(){return pv(this._delegate)},t.prototype.updateMetadata=function(t){return function(t,e){return iv(t=(0,o.getModularInstance)(t),e)}(this._delegate,t)},t.prototype.getDownloadURL=function(){return function(t){return ov(t=(0,o.getModularInstance)(t))}(this._delegate)},t.prototype.delete=function(){return this._throwIfRoot("delete"),function(t){return av(t=(0,o.getModularInstance)(t))}(this._delegate)},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw Jg(t)},t}(),wv=function(){function t(t,e){this.app=t,this._delegate=e}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(uv(t))throw Xg("ref() expected a child path but got a URL, use refFromURL instead.");return new _v(gv(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!uv(t))throw Xg("refFromURL() expected a full URL but got a child path, use ref() instead.");try{fm.makeFromUrl(t,this._delegate.host)}catch(t){throw Xg("refFromUrl() expected a valid full URL but got an invalid one.")}return new _v(gv(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),mv(this._delegate,t,e,n)},t}();function Sv(t,e){var n=e.instanceIdentifier,i=t.getProvider("app").getImmediate(),o=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal");return new wv(i,new dv(i,o,a,new dm,n,r.default.SDK_VERSION))}!function(t){var e={TaskState:cm,TaskEvent:um,StringFormat:em,Storage:dv,Reference:_v};t.INTERNAL.registerComponent(new qf.Component("storage",Sv,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage","0.7.1")}(r.default);var Tv,xv,Iv,kv="0.4.18",Ev=kv,Cv="FB-PERF-TRACE-MEASURE",Nv="_wt_",Av="_fcp",Pv="_fid",Rv="@firebase/performance/config",Dv="@firebase/performance/configexpire",Mv="Performance",Ov=((Tv={})["trace started"]="Trace {$traceName} was started before.",Tv["trace stopped"]="Trace {$traceName} is not running.",Tv["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",Tv["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",Tv["no window"]="Window is not available.",Tv["no app id"]="App id is not available.",Tv["no project id"]="Project id is not available.",Tv["no api key"]="Api key is not available.",Tv["invalid cc log"]="Attempted to queue invalid cc event",Tv["FB not default"]="Performance can only start when Firebase app instance is the default one.",Tv["RC response not ok"]="RC response is not ok",Tv["invalid attribute name"]="Attribute name {$attributeName} is invalid.",Tv["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",Tv["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",Tv["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",Tv),Lv=new o.ErrorFactory("performance",Mv,Ov),Fv=new a.Logger(Mv);Fv.logLevel=a.LogLevel.INFO;var jv,Bv=function(){function t(t){if(this.window=t,!t)throw Lv.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return t.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},t.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},t.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},t.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},t.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},t.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},t.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!(0,o.isIndexedDBAvailable)()||(Fv.info("IndexedDB is not supported by current browswer"),!1):(Fv.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},t.prototype.setupObserver=function(t,e){if(this.PerformanceObserver){var n=new this.PerformanceObserver((function(t){for(var n=0,r=t.getEntries();n<r.length;n++){var i=r[n];e(i)}}));n.observe({entryTypes:[t]})}},t.getInstance=function(){return void 0===xv&&(xv=new t(Iv)),xv},t}();function Gv(t,e){var n=t.length-e.length;if(n<0||n>1)throw Lv.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}var Uv,Vv,qv=function(){function t(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=Gv("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=Gv("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return t.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw Lv.create("no app id");return t},t.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw Lv.create("no project id");return t},t.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw Lv.create("no api key");return t},t.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},t.getInstance=function(){return void 0===jv&&(jv=new t),jv},t}();function zv(){return Uv}!function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.VISIBLE=1]="VISIBLE",t[t.HIDDEN=2]="HIDDEN"}(Vv||(Vv={}));var Hv=["firebase_","google_","ga_"],$v=new RegExp("^[a-zA-Z]\\w*$");function Wv(){var t=Bv.getInstance().navigator;return"serviceWorker"in t?t.serviceWorker.controller?2:3:1}function Kv(){switch(Bv.getInstance().document.visibilityState){case"visible":return Vv.VISIBLE;case"hidden":return Vv.HIDDEN;default:return Vv.UNKNOWN}}function Yv(){var t=Bv.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}var Xv="0.0.1",Qv={loggingEnabled:!0},Jv="FIREBASE_INSTALLATIONS_AUTH";function Zv(t){var e=function(){var t=Bv.getInstance().localStorage;if(!t)return;var e=t.getItem(Dv);if(!(e&&(n=e,Number(n)>Date.now())))return;var n;var r=t.getItem(Rv);if(!r)return;try{return JSON.parse(r)}catch(t){return}}();return e?(ey(e),Promise.resolve()):function(t){return(e=qv.getInstance().installationsService.getToken(),e.then((function(t){})),e).then((function(e){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+qv.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+qv.getInstance().getApiKey(),r=new Request(n,{method:"POST",headers:{Authorization:Jv+" "+e},body:JSON.stringify({app_instance_id:t,app_instance_id_token:e,app_id:qv.getInstance().getAppId(),app_version:Ev,sdk_version:Xv})});return fetch(r).then((function(t){if(t.ok)return t.json();throw Lv.create("RC response not ok")}))})).catch((function(){Fv.info(ty)}));var e}(t).then(ey).then((function(t){return function(t){var e=Bv.getInstance().localStorage;if(!t||!e)return;e.setItem(Rv,JSON.stringify(t)),e.setItem(Dv,String(Date.now()+60*qv.getInstance().configTimeToLive*60*1e3))}(t)}),(function(){}))}var ty="Could not fetch config, will use default configs";function ey(t){if(!t)return t;var e=qv.getInstance(),n=t.entries||{};return void 0!==n.fpr_enabled?e.loggingEnabled="true"===String(n.fpr_enabled):e.loggingEnabled=Qv.loggingEnabled,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=ny(e.tracesSamplingRate),e.logNetworkAfterSampling=ny(e.networkRequestsSamplingRate),t}function ny(t){return Math.random()<=t}var ry,iy=1;function oy(){return iy=2,ry=ry||function(){var t=Bv.getInstance().document;return new Promise((function(e){if(t&&"complete"!==t.readyState){var n=function(){"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()}))}().then((function(){return(t=qv.getInstance().installationsService.getId()).then((function(t){Uv=t})),t;var t})).then((function(t){return Zv(t)})).then((function(){return ay()}),(function(){return ay()}))}function ay(){iy=3}var sy,uy=1e4,cy=3,ly=1e3,hy=cy,dy=[],fy=!1;function py(t){setTimeout((function(){var t,e;if(0!==hy)return dy.length?(t=dy.splice(0,ly),e=t.map((function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}})),void function(t,e){return function(t){var e=qv.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}(t).then((function(t){return t.ok||Fv.info("Call to Firebase backend failed."),t.json()})).then((function(t){var n=Number(t.nextRequestWaitMillis),r=uy;isNaN(n)||(r=Math.max(n,r));var o=t.logResponseDetails;Array.isArray(o)&&o.length>0&&"RETRY_REQUEST_LATER"===o[0].responseAction&&(dy=(0,i.__spreadArray)((0,i.__spreadArray)([],e),dy),Fv.info("Retry transport request later.")),hy=cy,py(r)}))}({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:qv.getInstance().logSource,log_event:e},t).catch((function(){dy=(0,i.__spreadArray)((0,i.__spreadArray)([],t),dy),hy--,Fv.info("Tries left: "+hy+"."),py(uy)}))):py(uy)}),t)}function gy(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];!function(t){if(!t.eventTime||!t.message)throw Lv.create("invalid cc log");dy=(0,i.__spreadArray)((0,i.__spreadArray)([],dy),[t])}({message:t.apply(void 0,e),eventTime:Date.now()})}}function my(t,e){sy||(sy=gy(by)),sy(t,e)}function vy(t){var e=qv.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&Bv.getInstance().requiredApisAvailable()&&(t.isAuto&&Kv()!==Vv.VISIBLE||(3===iy?yy(t):oy().then((function(){return yy(t)}),(function(){return yy(t)}))))}function yy(t){if(zv()){var e=qv.getInstance();e.loggingEnabled&&e.logTraceAfterSampling&&setTimeout((function(){return my(t,1)}),0)}}function by(t,e){return 0===e?(r={url:(n=t).url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},i={application_info:_y(),network_request_metric:r},JSON.stringify(i)):function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);var r={application_info:_y(),trace_metric:e};return JSON.stringify(r)}(t);var n,r,i}function _y(){return{google_app_id:qv.getInstance().getAppId(),app_instance_id:zv(),web_app_info:{sdk_version:Ev,page_url:Bv.getInstance().getUrl(),service_worker_status:Wv(),visibility_state:Kv(),effective_connection_type:Yv()},application_process_state:0}}var wy=["_fp",Av,Pv];var Sy=function(){function t(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=Bv.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||Cv+"-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return t.prototype.start=function(){if(1!==this.state)throw Lv.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},t.prototype.stop=function(){if(2!==this.state)throw Lv.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),vy(this)},t.prototype.record=function(t,e,n){if(t<=0)throw Lv.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw Lv.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=(0,i.__assign)({},n.attributes)),n&&n.metrics)for(var r=0,o=Object.keys(n.metrics);r<o.length;r++){var a=o[r];isNaN(Number(n.metrics[a]))||(this.counters[a]=Number(Math.floor(n.metrics[a])))}vy(this)},t.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]?this.putMetric(t,e):this.putMetric(t,this.counters[t]+e)},t.prototype.putMetric=function(t,e){if(i=t,o=this.name,0===i.length||i.length>100||!(o&&o.startsWith(Nv)&&wy.indexOf(i)>-1)&&i.startsWith("_"))throw Lv.create("invalid custom metric name",{customMetricName:t});var n,r,i,o;this.counters[t]=(n=e,(r=Math.floor(n))<n&&Fv.info("Metric value should be an Integer, setting the value as : "+r+"."),r)},t.prototype.getMetric=function(t){return this.counters[t]||0},t.prototype.putAttribute=function(t,e){var n,r=!(0===(n=t).length||n.length>40||Hv.some((function(t){return n.startsWith(t)}))||!n.match($v)),i=function(t){return 0!==t.length&&t.length<=100}(e);if(r&&i)this.customAttributes[t]=e;else{if(!r)throw Lv.create("invalid attribute name",{attributeName:t});if(!i)throw Lv.create("invalid attribute value",{attributeValue:e})}},t.prototype.getAttribute=function(t){return this.customAttributes[t]},t.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},t.prototype.getAttributes=function(){return(0,i.__assign)({},this.customAttributes)},t.prototype.setStartTime=function(t){this.startTimeUs=t},t.prototype.setDuration=function(t){this.durationUs=t},t.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},t.createOobTrace=function(e,n,r){var i=Bv.getInstance().getUrl();if(i){var o=new t(Nv+i,!0),a=Math.floor(1e3*Bv.getInstance().getTimeOrigin());o.setStartTime(a),e&&e[0]&&(o.setDuration(Math.floor(1e3*e[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*e[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*e[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*e[0].loadEventEnd)));if(n){var s=n.find((function(t){return"first-paint"===t.name}));s&&s.startTime&&o.putMetric("_fp",Math.floor(1e3*s.startTime));var u=n.find((function(t){return"first-contentful-paint"===t.name}));u&&u.startTime&&o.putMetric(Av,Math.floor(1e3*u.startTime)),r&&o.putMetric(Pv,Math.floor(1e3*r))}vy(o)}},t.createUserTimingTrace=function(e){vy(new t(e,!1,e))},t}();function Ty(t){var e=t;if(e&&void 0!==e.responseStart){var n=Bv.getInstance().getTimeOrigin(),r=Math.floor(1e3*(e.startTime+n)),i=e.responseStart?Math.floor(1e3*(e.responseStart-e.startTime)):void 0,o=Math.floor(1e3*(e.responseEnd-e.startTime));!function(t){var e=qv.getInstance();if(e.instrumentationEnabled){var n=t.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&e.loggingEnabled&&e.logNetworkAfterSampling&&setTimeout((function(){return my(t,0)}),0)}}({url:e.name&&e.name.split("?")[0],responsePayloadBytes:e.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o})}}var xy=5e3;function Iy(){zv()&&(setTimeout((function(){return function(){var t=Bv.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");if(t.onFirstInputDelay){var r=setTimeout((function(){Sy.createOobTrace(e,n),r=void 0}),xy);t.onFirstInputDelay((function(t){r&&(clearTimeout(r),Sy.createOobTrace(e,n,t))}))}else Sy.createOobTrace(e,n)}()}),0),setTimeout((function(){return function(){for(var t=Bv.getInstance(),e=t.getEntriesByType("resource"),n=0,r=e;n<r.length;n++){Ty(r[n])}t.setupObserver("resource",Ty)}()}),0),setTimeout((function(){return function(){for(var t=Bv.getInstance(),e=t.getEntriesByType("measure"),n=0,r=e;n<r.length;n++){ky(r[n])}t.setupObserver("measure",ky)}()}),0))}function ky(t){var e=t.name;e.substring(0,Cv.length)!==Cv&&Sy.createUserTimingTrace(e)}var Ey=function(){function t(t){this.app=t,Bv.getInstance().requiredApisAvailable()&&(0,o.validateIndexedDBOpenable)().then((function(t){t&&(fy||(py(5500),fy=!0),oy().then(Iy,Iy))})).catch((function(t){Fv.info("Environment doesn't support IndexedDB: "+t)}))}return t.prototype.trace=function(t){return new Sy(t)},Object.defineProperty(t.prototype,"instrumentationEnabled",{get:function(){return qv.getInstance().instrumentationEnabled},set:function(t){qv.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataCollectionEnabled",{get:function(){return qv.getInstance().dataCollectionEnabled},set:function(t){qv.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),t}();!function(t){var e=function(t,e){if("[DEFAULT]"!==t.name)throw Lv.create("FB not default");if("undefined"==typeof window)throw Lv.create("no window");return function(t){Iv=t}(window),qv.getInstance().firebaseAppInstance=t,qv.getInstance().installationsService=e,new Ey(t)};t.INTERNAL.registerComponent(new qf.Component("performance",(function(t){var n=t.getProvider("app").getImmediate(),r=t.getProvider("installations").getImmediate();return e(n,r)}),"PUBLIC")),t.registerVersion("@firebase/performance",kv)}(r.default);var Cy,Ny,Ay="firebase_id",Py="origin",Ry=6e4,Dy="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",My="https://www.googletagmanager.com/gtag/js";!function(t){t.EVENT="event",t.SET="set",t.CONFIG="config"}(Cy||(Cy={})),function(t){t.ADD_SHIPPING_INFO="add_shipping_info",t.ADD_PAYMENT_INFO="add_payment_info",t.ADD_TO_CART="add_to_cart",t.ADD_TO_WISHLIST="add_to_wishlist",t.BEGIN_CHECKOUT="begin_checkout",t.CHECKOUT_PROGRESS="checkout_progress",t.EXCEPTION="exception",t.GENERATE_LEAD="generate_lead",t.LOGIN="login",t.PAGE_VIEW="page_view",t.PURCHASE="purchase",t.REFUND="refund",t.REMOVE_FROM_CART="remove_from_cart",t.SCREEN_VIEW="screen_view",t.SEARCH="search",t.SELECT_CONTENT="select_content",t.SELECT_ITEM="select_item",t.SELECT_PROMOTION="select_promotion",t.SET_CHECKOUT_OPTION="set_checkout_option",t.SHARE="share",t.SIGN_UP="sign_up",t.TIMING_COMPLETE="timing_complete",t.VIEW_CART="view_cart",t.VIEW_ITEM="view_item",t.VIEW_ITEM_LIST="view_item_list",t.VIEW_PROMOTION="view_promotion",t.VIEW_SEARCH_RESULTS="view_search_results"}(Ny||(Ny={}));var Oy,Ly=new a.Logger("@firebase/analytics");function Fy(t,e,n,r,o,a){return(0,i.__awaiter)(this,void 0,void 0,(function(){var s,u,c,l;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:s=r[o],i.label=1;case 1:return i.trys.push([1,7,,8]),s?[4,e[s]]:[3,3];case 2:return i.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return u=i.sent(),(c=u.find((function(t){return t.measurementId===o})))?[4,e[c.appId]]:[3,6];case 5:i.sent(),i.label=6;case 6:return[3,8];case 7:return l=i.sent(),Ly.error(l),[3,8];case 8:return t(Cy.CONFIG,o,a),[2]}}))}))}function jy(t,e,n,r,o){return(0,i.__awaiter)(this,void 0,void 0,(function(){var a,s,u,c,l,h,d,f;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),a=[],o&&o.send_to?(s=o.send_to,Array.isArray(s)||(s=[s]),[4,Promise.all(n)]):[3,2];case 1:for(u=i.sent(),c=function(t){var n=u.find((function(e){return e.measurementId===t})),r=n&&e[n.appId];if(!r)return a=[],"break";a.push(r)},l=0,h=s;l<h.length&&(d=h[l],"break"!==c(d));l++);i.label=2;case 2:return 0===a.length&&(a=Object.values(e)),[4,Promise.all(a)];case 3:return i.sent(),t(Cy.EVENT,r,o||{}),[3,5];case 4:return f=i.sent(),Ly.error(f),[3,5];case 5:return[2]}}))}))}function By(t,e,n,r,o){var a=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[r].push(arguments)};return window[o]&&"function"==typeof window[o]&&(a=window[o]),window[o]=function(t,e,n,r){return function(o,a,s){return(0,i.__awaiter)(this,void 0,void 0,(function(){var u;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,6,,7]),o!==Cy.EVENT?[3,2]:[4,jy(t,e,n,a,s)];case 1:return i.sent(),[3,5];case 2:return o!==Cy.CONFIG?[3,4]:[4,Fy(t,e,n,r,a,s)];case 3:return i.sent(),[3,5];case 4:t(Cy.SET,a),i.label=5;case 5:return[3,7];case 6:return u=i.sent(),Ly.error(u),[3,7];case 7:return[2]}}))}))}}(a,t,e,n),{gtagCore:a,wrappedGtag:window[o]}}var Gy=((Oy={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",Oy["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",Oy["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",Oy["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",Oy["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",Oy["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",Oy["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",Oy["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',Oy["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',Oy),Uy=new o.ErrorFactory("analytics","Analytics",Gy),Vy=30,qy=new(function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e=1e3),this.throttleMetadata=t,this.intervalMillis=e}return t.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},t.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},t.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},t}());function zy(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function Hy(t){var e;return(0,i.__awaiter)(this,void 0,void 0,(function(){var n,r,o,a,s,u,c;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return n=t.appId,r=t.apiKey,o={method:"GET",headers:zy(r)},a=Dy.replace("{app-id}",n),[4,fetch(a,o)];case 1:if(200===(s=i.sent()).status||304===s.status)return[3,6];u="",i.label=2;case 2:return i.trys.push([2,4,,5]),[4,s.json()];case 3:return c=i.sent(),(null===(e=c.error)||void 0===e?void 0:e.message)&&(u=c.error.message),[3,5];case 4:return i.sent(),[3,5];case 5:throw Uy.create("config-fetch-failed",{httpStatus:s.status,responseMessage:u});case 6:return[2,s.json()]}}))}))}function $y(t,e,n,r){var a=e.throttleEndTimeMillis,s=e.backoffCount;return void 0===r&&(r=qy),(0,i.__awaiter)(this,void 0,void 0,(function(){var e,u,c,l,h,d,f;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:e=t.appId,u=t.measurementId,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,Wy(n,a)];case 2:return i.sent(),[3,4];case 3:if(c=i.sent(),u)return Ly.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+u+' provided in the "measurementId" field in the local Firebase config. ['+c.message+"]"),[2,{appId:e,measurementId:u}];throw c;case 4:return i.trys.push([4,6,,7]),[4,Hy(t)];case 5:return l=i.sent(),r.deleteThrottleMetadata(e),[2,l];case 6:if(!function(t){if(!(t instanceof o.FirebaseError&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(h=i.sent())){if(r.deleteThrottleMetadata(e),u)return Ly.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+u+' provided in the "measurementId" field in the local Firebase config. ['+h.message+"]"),[2,{appId:e,measurementId:u}];throw h}return d=503===Number(h.customData.httpStatus)?(0,o.calculateBackoffMillis)(s,r.intervalMillis,Vy):(0,o.calculateBackoffMillis)(s,r.intervalMillis),f={throttleEndTimeMillis:Date.now()+d,backoffCount:s+1},r.setThrottleMetadata(e,f),Ly.debug("Calling attemptFetch again in "+d+" millis"),[2,$y(t,f,n,r)];case 7:return[2]}}))}))}function Wy(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r(Uy.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}var Ky=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}();function Yy(t,e,n,r,a,s){return(0,i.__awaiter)(this,void 0,void 0,(function(){var u,c,l,h,d,f,p;return(0,i.__generator)(this,(function(g){switch(g.label){case 0:return u=function(t,e,n){return void 0===e&&(e=qy),(0,i.__awaiter)(this,void 0,void 0,(function(){var r,o,a,s,u,c,l=this;return(0,i.__generator)(this,(function(h){if(r=t.options,o=r.appId,a=r.apiKey,s=r.measurementId,!o)throw Uy.create("no-app-id");if(!a){if(s)return[2,{measurementId:s,appId:o}];throw Uy.create("no-api-key")}return u=e.getThrottleMetadata(o)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new Ky,setTimeout((function(){return(0,i.__awaiter)(l,void 0,void 0,(function(){return(0,i.__generator)(this,(function(t){return c.abort(),[2]}))}))}),void 0!==n?n:Ry),[2,$y({appId:o,apiKey:a,measurementId:s},u,c,e)]}))}))}(t),u.then((function(e){n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&Ly.warn("The measurement ID in the local Firebase config ("+t.options.measurementId+") does not match the measurement ID fetched from the server ("+e.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(t){return Ly.error(t)})),e.push(u),c=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t;return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return(0,o.isIndexedDBAvailable)()?[3,1]:(Ly.warn(Uy.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return e.trys.push([1,3,,4]),[4,(0,o.validateIndexedDBOpenable)()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),Ly.warn(Uy.create("indexeddb-unavailable",{errorInfo:t}).message),[2,!1];case 4:return[2,!0]}}))}))}().then((function(t){return t?r.getId():void 0})),[4,Promise.all([u,c])];case 1:return l=g.sent(),h=l[0],d=l[1],function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(My))return r}return null}()||function(t,e){var n=document.createElement("script");n.src=My+"?l="+t+"&id="+e,n.async=!0,document.head.appendChild(n)}(s,h.measurementId),a("js",new Date),(p={})[Py]="firebase",p.update=!0,f=p,null!=d&&(f[Ay]=d),a(Cy.CONFIG,h.measurementId,f),[2,h.measurementId]}}))}))}var Xy,Qy,Jy={},Zy=[],tb={},eb="dataLayer",nb="gtag",rb=!1;function ib(t){if(rb)throw Uy.create("already-initialized");t.dataLayerName&&(eb=t.dataLayerName),t.gtagName&&(nb=t.gtagName)}function ob(t,e){!function(){var t=[];if((0,o.isBrowserExtension)()&&t.push("This is a browser extension environment."),(0,o.areCookiesEnabled)()||t.push("Cookies are not available."),t.length>0){var e=t.map((function(t,e){return"("+(e+1)+") "+t})).join(" "),n=Uy.create("invalid-analytics-context",{errorInfo:e});Ly.warn(n.message)}}();var n=t.options.appId;if(!n)throw Uy.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw Uy.create("no-api-key");Ly.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=Jy[n])throw Uy.create("already-exists",{id:n});if(!rb){!function(t){var e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(eb);var r=By(Jy,Zy,tb,eb,nb),a=r.wrappedGtag,s=r.gtagCore;Qy=a,Xy=s,rb=!0}Jy[n]=Yy(t,Zy,tb,e,Xy,eb);var u={app:t,logEvent:function(t,e,r){(function(t,e,n,r,o){return(0,i.__awaiter)(this,void 0,void 0,(function(){var a,s;return(0,i.__generator)(this,(function(u){switch(u.label){case 0:return o&&o.global?(t(Cy.EVENT,n,r),[2]):[3,1];case 1:return[4,e];case 2:a=u.sent(),s=(0,i.__assign)((0,i.__assign)({},r),{send_to:a}),t(Cy.EVENT,n,s),u.label=3;case 3:return[2]}}))}))})(Qy,Jy[n],t,e,r).catch((function(t){return Ly.error(t)}))},setCurrentScreen:function(t,e){(function(t,e,n,r){return(0,i.__awaiter)(this,void 0,void 0,(function(){var o;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return r&&r.global?(t(Cy.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:o=i.sent(),t(Cy.CONFIG,o,{update:!0,screen_name:n}),i.label=3;case 3:return[2]}}))}))})(Qy,Jy[n],t,e).catch((function(t){return Ly.error(t)}))},setUserId:function(t,e){(function(t,e,n,r){return(0,i.__awaiter)(this,void 0,void 0,(function(){var o;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return r&&r.global?(t(Cy.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:o=i.sent(),t(Cy.CONFIG,o,{update:!0,user_id:n}),i.label=3;case 3:return[2]}}))}))})(Qy,Jy[n],t,e).catch((function(t){return Ly.error(t)}))},setUserProperties:function(t,e){(function(t,e,n,r){return(0,i.__awaiter)(this,void 0,void 0,(function(){var o,a,s,u,c;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:if(!r||!r.global)return[3,1];for(o={},a=0,s=Object.keys(n);a<s.length;a++)u=s[a],o["user_properties."+u]=n[u];return t(Cy.SET,o),[2,Promise.resolve()];case 1:return[4,e];case 2:c=i.sent(),t(Cy.CONFIG,c,{update:!0,user_properties:n}),i.label=3;case 3:return[2]}}))}))})(Qy,Jy[n],t,e).catch((function(t){return Ly.error(t)}))},setAnalyticsCollectionEnabled:function(t){(function(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),window["ga-disable-"+n]=!e,[2]}}))}))})(Jy[n],t).catch((function(t){return Ly.error(t)}))},INTERNAL:{delete:function(){return delete Jy[n],Promise.resolve()}}};return u}var ab="analytics";function sb(){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(t){switch(t.label){case 0:if((0,o.isBrowserExtension)())return[2,!1];if(!(0,o.areCookiesEnabled)())return[2,!1];if(!(0,o.isIndexedDBAvailable)())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,(0,o.validateIndexedDBOpenable)()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}}))}))}!function(t){t.INTERNAL.registerComponent(new qf.Component(ab,(function(t){return ob(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())}),"PUBLIC").setServiceProps({settings:ib,EventName:Ny,isSupported:sb})),t.INTERNAL.registerComponent(new qf.Component("analytics-internal",(function(t){try{return{logEvent:t.getProvider(ab).getImmediate().logEvent}}catch(t){throw Uy.create("interop-component-reg-failed",{reason:t})}}),"PRIVATE")),t.registerVersion("@firebase/analytics","0.6.18")}(r.default);var ub,cb=function(){function t(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}return t.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,r=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+r+"."),r},t.prototype.fetch=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,n,r,o,a;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return e=i.sent(),n=e[0],(r=e[1])&&this.isCachedDataFresh(t.cacheMaxAgeMillis,n)?[2,r]:(t.eTag=r&&r.eTag,[4,this.client.fetch(t)]);case 2:return o=i.sent(),a=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===o.status&&a.push(this.storage.setLastSuccessfulFetchResponse(o)),[4,Promise.all(a)];case 3:return i.sent(),[2,o]}}))}))},t}(),lb=((ub={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",ub["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",ub["registration-api-key"]="Undefined API key. Check Firebase app initialization.",ub["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",ub["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",ub["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",ub["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",ub["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",ub["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",ub["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',ub["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',ub["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",ub["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",ub),hb=new o.ErrorFactory("remoteconfig","Remote Config",lb);var db=function(){function t(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}return t.prototype.fetch=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,n,r,o,a,s,u,c,l,h,d,f,p,g,m,v,y,b,_;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:e=i.sent(),n=e[0],r=e[1],o=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",a=o+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,s={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},u={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:this.appId,language_code:(void 0===w&&(w=navigator),w.languages&&w.languages[0]||w.language)},c={method:"POST",headers:s,body:JSON.stringify(u)},l=fetch(a,c),h=new Promise((function(e,n){t.signal.addEventListener((function(){var t=new Error("The operation was aborted.");t.name="AbortError",n(t)}))})),i.label=2;case 2:return i.trys.push([2,5,,6]),[4,Promise.race([l,h])];case 3:return i.sent(),[4,l];case 4:return d=i.sent(),[3,6];case 5:throw f=i.sent(),p="fetch-client-network","AbortError"===f.name&&(p="fetch-timeout"),hb.create(p,{originalErrorMessage:f.message});case 6:if(g=d.status,m=d.headers.get("ETag")||void 0,200!==d.status)return[3,11];b=void 0,i.label=7;case 7:return i.trys.push([7,9,,10]),[4,d.json()];case 8:return b=i.sent(),[3,10];case 9:throw _=i.sent(),hb.create("fetch-client-parse",{originalErrorMessage:_.message});case 10:v=b.entries,y=b.state,i.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===y?g=500:"NO_CHANGE"===y?g=304:"NO_TEMPLATE"!==y&&"EMPTY_CONFIG"!==y||(v={}),304!==g&&200!==g)throw hb.create("fetch-status",{httpStatus:g});return[2,{status:g,eTag:m,config:v}]}var w}))}))},t}(),fb=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}(),pb=["1","true","t","yes","y","on"],gb=function(){function t(t,e){void 0===e&&(e=""),this._source=t,this._value=e}return t.prototype.asString=function(){return this._value},t.prototype.asBoolean=function(){return"static"!==this._source&&pb.indexOf(this._value.toLowerCase())>=0},t.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},t.prototype.getSource=function(){return this._source},t}(),mb=function(){function t(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return t.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=a.LogLevel.DEBUG;break;case"silent":this._logger.logLevel=a.LogLevel.SILENT;break;default:this._logger.logLevel=a.LogLevel.ERROR}},Object.defineProperty(t.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),t.prototype.activate=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t,e,n;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return t=r.sent(),e=t[0],n=t[1],e&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}}))}))},t.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then((function(){t._isInitializationComplete=!0}))),this._initializePromise},t.prototype.fetch=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t,e,n,r=this;return(0,i.__generator)(this,(function(a){switch(a.label){case 0:t=new fb,setTimeout((function(){return(0,i.__awaiter)(r,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){return t.abort(),[2]}))}))}),this.settings.fetchTimeoutMillis),a.label=1;case 1:return a.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return a.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return a.sent(),[3,6];case 4:return e=a.sent(),n=function(t,e){return t instanceof o.FirebaseError&&-1!==t.code.indexOf(e)}(e,"fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw a.sent(),e;case 6:return[2]}}))}))},t.prototype.fetchAndActivate=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}}))}))},t.prototype.getAll=function(){var t=this;return function(t,e){void 0===t&&(t={});void 0===e&&(e={});return Object.keys((0,i.__assign)((0,i.__assign)({},t),e))}(this._storageCache.getActiveConfig(),this.defaultConfig).reduce((function(e,n){return e[n]=t.getValue(n),e}),{})},t.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},t.prototype.getNumber=function(t){return this.getValue(t).asNumber()},t.prototype.getString=function(t){return this.getValue(t).asString()},t.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new gb("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new gb("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new gb("static"))},t}();function vb(t,e){var n=t.target.error||void 0;return hb.create(e,{originalErrorMessage:n&&n.message})}var yb="app_namespace_store";var bb=function(){function t(t,e,n,r){void 0===r&&(r=new Promise((function(t,e){var n=indexedDB.open("firebase_remote_config",1);n.onerror=function(t){e(vb(t,"storage-open"))},n.onsuccess=function(e){t(e.target.result)},n.onupgradeneeded=function(t){var e=t.target.result;0===t.oldVersion&&e.createObjectStore(yb,{keyPath:"compositeKey"})}}))),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}return t.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},t.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},t.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},t.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},t.prototype.getActiveConfig=function(){return this.get("active_config")},t.prototype.setActiveConfig=function(t){return this.set("active_config",t)},t.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},t.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},t.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},t.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},t.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},t.prototype.get=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,n=this;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction([yb],"readonly").objectStore(yb),a=n.createCompositeKey(t);try{var s=o.get(a);s.onerror=function(t){i(vb(t,"storage-get"))},s.onsuccess=function(t){var e=t.target.result;r(e?e.value:void 0)}}catch(t){i(hb.create("storage-get",{originalErrorMessage:t&&t.message}))}}))]}}))}))},t.prototype.set=function(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n,r=this;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise((function(i,o){var a=n.transaction([yb],"readwrite").objectStore(yb),s=r.createCompositeKey(t);try{var u=a.put({compositeKey:s,value:e});u.onerror=function(t){o(vb(t,"storage-set"))},u.onsuccess=function(){i()}}catch(t){o(hb.create("storage-set",{originalErrorMessage:t&&t.message}))}}))]}}))}))},t.prototype.delete=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,n=this;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction([yb],"readwrite").objectStore(yb),a=n.createCompositeKey(t);try{var s=o.delete(a);s.onerror=function(t){i(vb(t,"storage-delete"))},s.onsuccess=function(){r()}}catch(t){i(hb.create("storage-delete",{originalErrorMessage:t&&t.message}))}}))]}}))}))},t.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},t}(),_b=function(){function t(t){this.storage=t}return t.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},t.prototype.getActiveConfig=function(){return this.activeConfig},t.prototype.loadFromStorage=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t,e,n,r,o,a;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return t=this.storage.getLastFetchStatus(),e=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,t];case 1:return(r=i.sent())&&(this.lastFetchStatus=r),[4,e];case 2:return(o=i.sent())&&(this.lastSuccessfulFetchTimestampMillis=o),[4,n];case 3:return(a=i.sent())&&(this.activeConfig=a),[2]}}))}))},t.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},t.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},t}();function wb(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r(hb.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}var Sb,Tb=function(){function t(t,e){this.client=t,this.storage=e}return t.prototype.fetch=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,e)]}}))}))},t.prototype.attemptFetch=function(t,e){var n=e.throttleEndTimeMillis,r=e.backoffCount;return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,a,s;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,wb(t.signal,n)];case 1:i.sent(),i.label=2;case 2:return i.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return e=i.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return i.sent(),[2,e];case 5:if(!function(t){if(!(t instanceof o.FirebaseError&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(a=i.sent()))throw a;return s={throttleEndTimeMillis:Date.now()+(0,o.calculateBackoffMillis)(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(s)];case 6:return i.sent(),[2,this.attemptFetch(t,s)];case 7:return[2]}}))}))},t}(),xb="@firebase/remote-config";(Sb=r.default).INTERNAL.registerComponent(new qf.Component("remoteConfig",(function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw hb.create("registration-window");var o=r.options,s=o.projectId,u=o.apiKey,c=o.appId;if(!s)throw hb.create("registration-project-id");if(!u)throw hb.create("registration-api-key");if(!c)throw hb.create("registration-app-id");n=n||"firebase";var l=new bb(c,r.name,n),h=new _b(l),d=new a.Logger(xb);d.logLevel=a.LogLevel.ERROR;var f=new db(i,Sb.SDK_VERSION,n,s,u,c),p=new Tb(f,l),g=new cb(p,l,h,d),m=new mb(r,g,h,l,d);return m.ensureInitialized(),m}),"PUBLIC").setMultipleInstances(!0)),Sb.registerVersion(xb,"0.1.43");n(8716);var Ib="8.10.1";r.default.registerVersion("firebase",Ib,"app"),r.default.SDK_VERSION=Ib;console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),r.default.registerVersion("firebase","8.10.1")},7168:(t,e,n)=>{var r;!function(i,o,a,s){"use strict";var u,c=["","webkit","Moz","MS","ms","o"],l=o.createElement("div"),h="function",d=Math.round,f=Math.abs,p=Date.now;function g(t,e,n){return setTimeout(S(t,n),e)}function m(t,e,n){return!!Array.isArray(t)&&(v(t,n[e],n),!0)}function v(t,e,n){var r;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==s)for(r=0;r<t.length;)e.call(n,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}function y(t,e,n){var r="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=i.console&&(i.console.warn||i.console.log);return o&&o.call(i.console,r,n),t.apply(this,arguments)}}u="function"!=typeof Object.assign?function(t){if(t===s||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==s&&null!==r)for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e}:Object.assign;var b=y((function(t,e,n){for(var r=Object.keys(e),i=0;i<r.length;)(!n||n&&t[r[i]]===s)&&(t[r[i]]=e[r[i]]),i++;return t}),"extend","Use `assign`."),_=y((function(t,e){return b(t,e,!0)}),"merge","Use `assign`.");function w(t,e,n){var r,i=e.prototype;(r=t.prototype=Object.create(i)).constructor=t,r._super=i,n&&u(r,n)}function S(t,e){return function(){return t.apply(e,arguments)}}function T(t,e){return typeof t==h?t.apply(e&&e[0]||s,e):t}function x(t,e){return t===s?e:t}function I(t,e,n){v(N(e),(function(e){t.addEventListener(e,n,!1)}))}function k(t,e,n){v(N(e),(function(e){t.removeEventListener(e,n,!1)}))}function E(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function C(t,e){return t.indexOf(e)>-1}function N(t){return t.trim().split(/\s+/g)}function A(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var r=0;r<t.length;){if(n&&t[r][n]==e||!n&&t[r]===e)return r;r++}return-1}function P(t){return Array.prototype.slice.call(t,0)}function R(t,e,n){for(var r=[],i=[],o=0;o<t.length;){var a=e?t[o][e]:t[o];A(i,a)<0&&r.push(t[o]),i[o]=a,o++}return n&&(r=e?r.sort((function(t,n){return t[e]>n[e]})):r.sort()),r}function D(t,e){for(var n,r,i=e[0].toUpperCase()+e.slice(1),o=0;o<c.length;){if((r=(n=c[o])?n+i:e)in t)return r;o++}return s}var M=1;function O(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||i}var L="ontouchstart"in i,F=D(i,"PointerEvent")!==s,j=L&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),B="touch",G="mouse",U=25,V=1,q=4,z=8,H=1,$=2,W=4,K=8,Y=16,X=$|W,Q=K|Y,J=X|Q,Z=["x","y"],tt=["clientX","clientY"];function et(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){T(t.options.enable,[t])&&n.handler(e)},this.init()}function nt(t,e,n){var r=n.pointers.length,i=n.changedPointers.length,o=e&V&&r-i==0,a=e&(q|z)&&r-i==0;n.isFirst=!!o,n.isFinal=!!a,o&&(t.session={}),n.eventType=e,function(t,e){var n=t.session,r=e.pointers,i=r.length;n.firstInput||(n.firstInput=rt(e));i>1&&!n.firstMultiple?n.firstMultiple=rt(e):1===i&&(n.firstMultiple=!1);var o=n.firstInput,a=n.firstMultiple,u=a?a.center:o.center,c=e.center=it(r);e.timeStamp=p(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=ut(u,c),e.distance=st(u,c),function(t,e){var n=e.center,r=t.offsetDelta||{},i=t.prevDelta||{},o=t.prevInput||{};e.eventType!==V&&o.eventType!==q||(i=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=t.offsetDelta={x:n.x,y:n.y});e.deltaX=i.x+(n.x-r.x),e.deltaY=i.y+(n.y-r.y)}(n,e),e.offsetDirection=at(e.deltaX,e.deltaY);var l=ot(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=l.x,e.overallVelocityY=l.y,e.overallVelocity=f(l.x)>f(l.y)?l.x:l.y,e.scale=a?(h=a.pointers,d=r,st(d[0],d[1],tt)/st(h[0],h[1],tt)):1,e.rotation=a?function(t,e){return ut(e[1],e[0],tt)+ut(t[1],t[0],tt)}(a.pointers,r):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,function(t,e){var n,r,i,o,a=t.lastInterval||e,u=e.timeStamp-a.timeStamp;if(e.eventType!=z&&(u>U||a.velocity===s)){var c=e.deltaX-a.deltaX,l=e.deltaY-a.deltaY,h=ot(u,c,l);r=h.x,i=h.y,n=f(h.x)>f(h.y)?h.x:h.y,o=at(c,l),t.lastInterval=e}else n=a.velocity,r=a.velocityX,i=a.velocityY,o=a.direction;e.velocity=n,e.velocityX=r,e.velocityY=i,e.direction=o}(n,e);var h,d;var g=t.element;E(e.srcEvent.target,g)&&(g=e.srcEvent.target);e.target=g}(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function rt(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:d(t.pointers[n].clientX),clientY:d(t.pointers[n].clientY)},n++;return{timeStamp:p(),pointers:e,center:it(e),deltaX:t.deltaX,deltaY:t.deltaY}}function it(t){var e=t.length;if(1===e)return{x:d(t[0].clientX),y:d(t[0].clientY)};for(var n=0,r=0,i=0;i<e;)n+=t[i].clientX,r+=t[i].clientY,i++;return{x:d(n/e),y:d(r/e)}}function ot(t,e,n){return{x:e/t||0,y:n/t||0}}function at(t,e){return t===e?H:f(t)>=f(e)?t<0?$:W:e<0?K:Y}function st(t,e,n){n||(n=Z);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return Math.sqrt(r*r+i*i)}function ut(t,e,n){n||(n=Z);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return 180*Math.atan2(i,r)/Math.PI}et.prototype={handler:function(){},init:function(){this.evEl&&I(this.element,this.evEl,this.domHandler),this.evTarget&&I(this.target,this.evTarget,this.domHandler),this.evWin&&I(O(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&k(this.element,this.evEl,this.domHandler),this.evTarget&&k(this.target,this.evTarget,this.domHandler),this.evWin&&k(O(this.element),this.evWin,this.domHandler)}};var ct={mousedown:V,mousemove:2,mouseup:q},lt="mousedown",ht="mousemove mouseup";function dt(){this.evEl=lt,this.evWin=ht,this.pressed=!1,et.apply(this,arguments)}w(dt,et,{handler:function(t){var e=ct[t.type];e&V&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=q),this.pressed&&(e&q&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:G,srcEvent:t}))}});var ft={pointerdown:V,pointermove:2,pointerup:q,pointercancel:z,pointerout:z},pt={2:B,3:"pen",4:G,5:"kinect"},gt="pointerdown",mt="pointermove pointerup pointercancel";function vt(){this.evEl=gt,this.evWin=mt,et.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}i.MSPointerEvent&&!i.PointerEvent&&(gt="MSPointerDown",mt="MSPointerMove MSPointerUp MSPointerCancel"),w(vt,et,{handler:function(t){var e=this.store,n=!1,r=t.type.toLowerCase().replace("ms",""),i=ft[r],o=pt[t.pointerType]||t.pointerType,a=o==B,s=A(e,t.pointerId,"pointerId");i&V&&(0===t.button||a)?s<0&&(e.push(t),s=e.length-1):i&(q|z)&&(n=!0),s<0||(e[s]=t,this.callback(this.manager,i,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(s,1))}});var yt={touchstart:V,touchmove:2,touchend:q,touchcancel:z};function bt(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,et.apply(this,arguments)}function _t(t,e){var n=P(t.touches),r=P(t.changedTouches);return e&(q|z)&&(n=R(n.concat(r),"identifier",!0)),[n,r]}w(bt,et,{handler:function(t){var e=yt[t.type];if(e===V&&(this.started=!0),this.started){var n=_t.call(this,t,e);e&(q|z)&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:B,srcEvent:t})}}});var wt={touchstart:V,touchmove:2,touchend:q,touchcancel:z},St="touchstart touchmove touchend touchcancel";function Tt(){this.evTarget=St,this.targetIds={},et.apply(this,arguments)}function xt(t,e){var n=P(t.touches),r=this.targetIds;if(e&(2|V)&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o,a=P(t.changedTouches),s=[],u=this.target;if(o=n.filter((function(t){return E(t.target,u)})),e===V)for(i=0;i<o.length;)r[o[i].identifier]=!0,i++;for(i=0;i<a.length;)r[a[i].identifier]&&s.push(a[i]),e&(q|z)&&delete r[a[i].identifier],i++;return s.length?[R(o.concat(s),"identifier",!0),s]:void 0}w(Tt,et,{handler:function(t){var e=wt[t.type],n=xt.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:B,srcEvent:t})}});var It=2500;function kt(){et.apply(this,arguments);var t=S(this.handler,this);this.touch=new Tt(this.manager,t),this.mouse=new dt(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function Et(t,e){t&V?(this.primaryTouch=e.changedPointers[0].identifier,Ct.call(this,e)):t&(q|z)&&Ct.call(this,e)}function Ct(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var r=this.lastTouches;setTimeout((function(){var t=r.indexOf(n);t>-1&&r.splice(t,1)}),It)}}function Nt(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],o=Math.abs(e-i.x),a=Math.abs(n-i.y);if(o<=25&&a<=25)return!0}return!1}w(kt,et,{handler:function(t,e,n){var r=n.pointerType==B,i=n.pointerType==G;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)Et.call(this,e,n);else if(i&&Nt.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var At=D(l.style,"touchAction"),Pt=At!==s,Rt="compute",Dt="auto",Mt="manipulation",Ot="none",Lt="pan-x",Ft="pan-y",jt=function(){if(!Pt)return!1;var t={},e=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(n){t[n]=!e||i.CSS.supports("touch-action",n)})),t}();function Bt(t,e){this.manager=t,this.set(e)}Bt.prototype={set:function(t){t==Rt&&(t=this.compute()),Pt&&this.manager.element.style&&jt[t]&&(this.manager.element.style[At]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return v(this.manager.recognizers,(function(e){T(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(C(t,Ot))return Ot;var e=C(t,Lt),n=C(t,Ft);if(e&&n)return Ot;if(e||n)return e?Lt:Ft;if(C(t,Mt))return Mt;return Dt}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var r=this.actions,i=C(r,Ot)&&!jt[Ot],o=C(r,Ft)&&!jt[Ft],a=C(r,Lt)&&!jt[Lt];if(i){var s=1===t.pointers.length,u=t.distance<2,c=t.deltaTime<250;if(s&&u&&c)return}if(!a||!o)return i||o&&n&X||a&&n&Q?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var Gt=1,Ut=32;function Vt(t){this.options=u({},this.defaults,t||{}),this.id=M++,this.manager=null,this.options.enable=x(this.options.enable,!0),this.state=Gt,this.simultaneous={},this.requireFail=[]}function qt(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}function zt(t){return t==Y?"down":t==K?"up":t==$?"left":t==W?"right":""}function Ht(t,e){var n=e.manager;return n?n.get(t):t}function $t(){Vt.apply(this,arguments)}function Wt(){$t.apply(this,arguments),this.pX=null,this.pY=null}function Kt(){$t.apply(this,arguments)}function Yt(){Vt.apply(this,arguments),this._timer=null,this._input=null}function Xt(){$t.apply(this,arguments)}function Qt(){$t.apply(this,arguments)}function Jt(){Vt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Zt(t,e){return(e=e||{}).recognizers=x(e.recognizers,Zt.defaults.preset),new te(t,e)}Vt.prototype={defaults:{},set:function(t){return u(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(m(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=Ht(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return m(t,"dropRecognizeWith",this)||(t=Ht(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(m(t,"requireFailure",this))return this;var e=this.requireFail;return-1===A(e,t=Ht(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(m(t,"dropRequireFailure",this))return this;t=Ht(t,this);var e=A(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,n=this.state;function r(n){e.manager.emit(n,t)}n<8&&r(e.options.event+qt(n)),r(e.options.event),t.additionalEvent&&r(t.additionalEvent),n>=8&&r(e.options.event+qt(n))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=Ut},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(Ut|Gt)))return!1;t++}return!0},recognize:function(t){var e=u({},t);if(!T(this.options.enable,[this,e]))return this.reset(),void(this.state=Ut);56&this.state&&(this.state=Gt),this.state=this.process(e),30&this.state&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},w($t,Vt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,r=6&e,i=this.attrTest(t);return r&&(n&z||!i)?16|e:r||i?n&q?8|e:2&e?4|e:2:Ut}}),w(Wt,$t,{defaults:{event:"pan",threshold:10,pointers:1,direction:J},getTouchAction:function(){var t=this.options.direction,e=[];return t&X&&e.push(Ft),t&Q&&e.push(Lt),e},directionTest:function(t){var e=this.options,n=!0,r=t.distance,i=t.direction,o=t.deltaX,a=t.deltaY;return i&e.direction||(e.direction&X?(i=0===o?H:o<0?$:W,n=o!=this.pX,r=Math.abs(t.deltaX)):(i=0===a?H:a<0?K:Y,n=a!=this.pY,r=Math.abs(t.deltaY))),t.direction=i,n&&r>e.threshold&&i&e.direction},attrTest:function(t){return $t.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=zt(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),w(Kt,$t,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Ot]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),w(Yt,Vt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Dt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime>e.time;if(this._input=t,!r||!n||t.eventType&(q|z)&&!i)this.reset();else if(t.eventType&V)this.reset(),this._timer=g((function(){this.state=8,this.tryEmit()}),e.time,this);else if(t.eventType&q)return 8;return Ut},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&t.eventType&q?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=p(),this.manager.emit(this.options.event,this._input)))}}),w(Xt,$t,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Ot]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),w(Qt,$t,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:X|Q,pointers:1},getTouchAction:function(){return Wt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(X|Q)?e=t.overallVelocity:n&X?e=t.overallVelocityX:n&Q&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&f(e)>this.options.velocity&&t.eventType&q},emit:function(t){var e=zt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),w(Jt,Vt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Mt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime<e.time;if(this.reset(),t.eventType&V&&0===this.count)return this.failTimeout();if(r&&i&&n){if(t.eventType!=q)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,a=!this.pCenter||st(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,a&&o?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=g((function(){this.state=8,this.tryEmit()}),e.interval,this),2):8}return Ut},failTimeout:function(){return this._timer=g((function(){this.state=Ut}),this.options.interval,this),Ut},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Zt.VERSION="2.0.7",Zt.defaults={domEvents:!1,touchAction:Rt,enable:!0,inputTarget:null,inputClass:null,preset:[[Xt,{enable:!1}],[Kt,{enable:!1},["rotate"]],[Qt,{direction:X}],[Wt,{direction:X},["swipe"]],[Jt],[Jt,{event:"doubletap",taps:2},["tap"]],[Yt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function te(t,e){var n;this.options=u({},Zt.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((n=this).options.inputClass||(F?vt:j?Tt:L?kt:dt))(n,nt),this.touchAction=new Bt(this,this.options.touchAction),ee(this,!0),v(this.options.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}function ee(t,e){var n,r=t.element;r.style&&(v(t.options.cssProps,(function(i,o){n=D(r.style,o),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""})),e||(t.oldCssProps={}))}te.prototype={set:function(t){return u(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var n;this.touchAction.preventDefaults(t);var r=this.recognizers,i=e.curRecognizer;(!i||i&&8&i.state)&&(i=e.curRecognizer=null);for(var o=0;o<r.length;)n=r[o],2===e.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(t),!i&&14&n.state&&(i=e.curRecognizer=n),o++}},get:function(t){if(t instanceof Vt)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(m(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(m(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=A(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==s&&e!==s){var n=this.handlers;return v(N(t),(function(t){n[t]=n[t]||[],n[t].push(e)})),this}},off:function(t,e){if(t!==s){var n=this.handlers;return v(N(t),(function(t){e?n[t]&&n[t].splice(A(n[t],e),1):delete n[t]})),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var n=o.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](e),r++}},destroy:function(){this.element&&ee(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},u(Zt,{INPUT_START:V,INPUT_MOVE:2,INPUT_END:q,INPUT_CANCEL:z,STATE_POSSIBLE:Gt,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:Ut,DIRECTION_NONE:H,DIRECTION_LEFT:$,DIRECTION_RIGHT:W,DIRECTION_UP:K,DIRECTION_DOWN:Y,DIRECTION_HORIZONTAL:X,DIRECTION_VERTICAL:Q,DIRECTION_ALL:J,Manager:te,Input:et,TouchAction:Bt,TouchInput:Tt,MouseInput:dt,PointerEventInput:vt,TouchMouseInput:kt,SingleTouchInput:bt,Recognizer:Vt,AttrRecognizer:$t,Tap:Jt,Pan:Wt,Swipe:Qt,Pinch:Kt,Rotate:Xt,Press:Yt,on:I,off:k,each:v,merge:_,extend:b,assign:u,inherit:w,bindFn:S,prefixed:D}),(void 0!==i?i:"undefined"!=typeof self?self:{}).Hammer=Zt,(r=function(){return Zt}.call(e,n,e,t))===s||(t.exports=r)}(window,document)},1588:function(t,e){!function(t){"use strict";function e(t){return Array.prototype.slice.call(t)}function n(t){return new Promise((function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function r(t,e,r){var i,o=new Promise((function(o,a){n(i=t[e].apply(t,r)).then(o,a)}));return o.request=i,o}function i(t,e,n){var i=r(t,e,n);return i.then((function(t){if(t)return new l(t,i.request)}))}function o(t,e,n){n.forEach((function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})}))}function a(t,e,n,i){i.forEach((function(i){i in n.prototype&&(t.prototype[i]=function(){return r(this[e],i,arguments)})}))}function s(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)})}))}function u(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return i(this[e],r,arguments)})}))}function c(t){this._index=t}function l(t,e){this._cursor=t,this._request=e}function h(t){this._store=t}function d(t){this._tx=t,this.complete=new Promise((function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}}))}function f(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new d(n)}function p(t){this._db=t}function g(t,e,n){var i=r(indexedDB,"open",[t,e]),o=i.request;return o&&(o.onupgradeneeded=function(t){n&&n(new f(o.result,t.oldVersion,o.transaction))}),i.then((function(t){return new p(t)}))}function m(t){return r(indexedDB,"deleteDatabase",[t])}o(c,"_index",["name","keyPath","multiEntry","unique"]),a(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(l,"_cursor",["direction","key","primaryKey","value"]),a(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(t){t in IDBCursor.prototype&&(l.prototype[t]=function(){var e=this,r=arguments;return Promise.resolve().then((function(){return e._cursor[t].apply(e._cursor,r),n(e._request).then((function(t){if(t)return new l(t,e._request)}))}))})})),h.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},o(h,"_store",["name","keyPath","indexNames","autoIncrement"]),a(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),s(h,"_store",IDBObjectStore,["deleteIndex"]),d.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},o(d,"_tx",["objectStoreNames","mode"]),s(d,"_tx",IDBTransaction,["abort"]),f.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},o(f,"_db",["name","version","objectStoreNames"]),s(f,"_db",IDBDatabase,["deleteObjectStore","close"]),p.prototype.transaction=function(){return new d(this._db.transaction.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),s(p,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(t){[h,c].forEach((function(n){t in n.prototype&&(n.prototype[t.replace("open","iterate")]=function(){var n=e(arguments),r=n[n.length-1],i=this._store||this._index,o=i[t].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})}))})),[c,h].forEach((function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise((function(i){n.iterateCursor(t,(function(t){t?(r.push(t.value),void 0===e||r.length!=e?t.continue():i(r)):i(r)}))}))})})),t.openDb=g,t.deleteDb=m,Object.defineProperty(t,"__esModule",{value:!0})}(e)},4692:function(t,e){var n;!function(e,n){"use strict";"object"==typeof t.exports?t.exports=e.document?n(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return n(t)}:n(e)}("undefined"!=typeof window?window:this,(function(r,i){"use strict";var o=[],a=Object.getPrototypeOf,s=o.slice,u=o.flat?function(t){return o.flat.call(t)}:function(t){return o.concat.apply([],t)},c=o.push,l=o.indexOf,h={},d=h.toString,f=h.hasOwnProperty,p=f.toString,g=p.call(Object),m={},v=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType&&"function"!=typeof t.item},y=function(t){return null!=t&&t===t.window},b=r.document,_={type:!0,src:!0,nonce:!0,noModule:!0};function w(t,e,n){var r,i,o=(n=n||b).createElement("script");if(o.text=t,e)for(r in _)(i=e[r]||e.getAttribute&&e.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function S(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?h[d.call(t)]||"object":typeof t}var T="3.7.1",x=/HTML$/i,I=function(t,e){return new I.fn.init(t,e)};function k(t){var e=!!t&&"length"in t&&t.length,n=S(t);return!v(t)&&!y(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}function E(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}I.fn=I.prototype={jquery:T,constructor:I,length:0,toArray:function(){return s.call(this)},get:function(t){return null==t?s.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=I.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return I.each(this,t)},map:function(t){return this.pushStack(I.map(this,(function(e,n){return t.call(e,n,e)})))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(I.grep(this,(function(t,e){return(e+1)%2})))},odd:function(){return this.pushStack(I.grep(this,(function(t,e){return e%2})))},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:c,sort:o.sort,splice:o.splice},I.extend=I.fn.extend=function(){var t,e,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[s]||{},s++),"object"==typeof a||v(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(t=arguments[s]))for(e in t)r=t[e],"__proto__"!==e&&a!==r&&(c&&r&&(I.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[e],o=i&&!Array.isArray(n)?[]:i||I.isPlainObject(n)?n:{},i=!1,a[e]=I.extend(c,o,r)):void 0!==r&&(a[e]=r));return a},I.extend({expando:"jQuery"+(T+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==d.call(t))&&(!(e=a(t))||"function"==typeof(n=f.call(e,"constructor")&&e.constructor)&&p.call(n)===g)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e,n){w(t,{nonce:e&&e.nonce},n)},each:function(t,e){var n,r=0;if(k(t))for(n=t.length;r<n&&!1!==e.call(t[r],r,t[r]);r++);else for(r in t)if(!1===e.call(t[r],r,t[r]))break;return t},text:function(t){var e,n="",r=0,i=t.nodeType;if(!i)for(;e=t[r++];)n+=I.text(e);return 1===i||11===i?t.textContent:9===i?t.documentElement.textContent:3===i||4===i?t.nodeValue:n},makeArray:function(t,e){var n=e||[];return null!=t&&(k(Object(t))?I.merge(n,"string"==typeof t?[t]:t):c.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:l.call(e,t,n)},isXMLDoc:function(t){var e=t&&t.namespaceURI,n=t&&(t.ownerDocument||t).documentElement;return!x.test(e||n&&n.nodeName||"HTML")},merge:function(t,e){for(var n=+e.length,r=0,i=t.length;r<n;r++)t[i++]=e[r];return t.length=i,t},grep:function(t,e,n){for(var r=[],i=0,o=t.length,a=!n;i<o;i++)!e(t[i],i)!==a&&r.push(t[i]);return r},map:function(t,e,n){var r,i,o=0,a=[];if(k(t))for(r=t.length;o<r;o++)null!=(i=e(t[o],o,n))&&a.push(i);else for(o in t)null!=(i=e(t[o],o,n))&&a.push(i);return u(a)},guid:1,support:m}),"function"==typeof Symbol&&(I.fn[Symbol.iterator]=o[Symbol.iterator]),I.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(t,e){h["[object "+e+"]"]=e.toLowerCase()}));var C=o.pop,N=o.sort,A=o.splice,P="[\\x20\\t\\r\\n\\f]",R=new RegExp("^"+P+"+|((?:^|[^\\\\])(?:\\\\.)*)"+P+"+$","g");I.contains=function(t,e){var n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(t.contains?t.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))};var D=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function M(t,e){return e?"\0"===t?"":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t}I.escapeSelector=function(t){return(t+"").replace(D,M)};var O=b,L=c;!function(){var t,e,n,i,a,u,c,h,d,p,g=L,v=I.expando,y=0,b=0,_=tt(),w=tt(),S=tt(),T=tt(),x=function(t,e){return t===e&&(a=!0),0},k="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",D="(?:\\\\[\\da-fA-F]{1,6}"+P+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",M="\\["+P+"*("+D+")(?:"+P+"*([*^$|!~]?=)"+P+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+D+"))|)"+P+"*\\]",F=":("+D+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+M+")*)|.*)\\)|)",j=new RegExp(P+"+","g"),B=new RegExp("^"+P+"*,"+P+"*"),G=new RegExp("^"+P+"*([>+~]|"+P+")"+P+"*"),U=new RegExp(P+"|>"),V=new RegExp(F),q=new RegExp("^"+D+"$"),z={ID:new RegExp("^#("+D+")"),CLASS:new RegExp("^\\.("+D+")"),TAG:new RegExp("^("+D+"|[*])"),ATTR:new RegExp("^"+M),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+P+"*(even|odd|(([+-]|)(\\d*)n|)"+P+"*(?:([+-]|)"+P+"*(\\d+)|))"+P+"*\\)|)","i"),bool:new RegExp("^(?:"+k+")$","i"),needsContext:new RegExp("^"+P+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+P+"*((?:-\\d)?\\d*)"+P+"*\\)|)(?=[^-]|$)","i")},H=/^(?:input|select|textarea|button)$/i,$=/^h\d$/i,W=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,K=/[+~]/,Y=new RegExp("\\\\[\\da-fA-F]{1,6}"+P+"?|\\\\([^\\r\\n\\f])","g"),X=function(t,e){var n="0x"+t.slice(1)-65536;return e||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},Q=function(){ut()},J=dt((function(t){return!0===t.disabled&&E(t,"fieldset")}),{dir:"parentNode",next:"legend"});try{g.apply(o=s.call(O.childNodes),O.childNodes),o[O.childNodes.length].nodeType}catch(t){g={apply:function(t,e){L.apply(t,s.call(e))},call:function(t){L.apply(t,s.call(arguments,1))}}}function Z(t,e,n,r){var i,o,a,s,c,l,f,p=e&&e.ownerDocument,y=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==y&&9!==y&&11!==y)return n;if(!r&&(ut(e),e=e||u,h)){if(11!==y&&(c=W.exec(t)))if(i=c[1]){if(9===y){if(!(a=e.getElementById(i)))return n;if(a.id===i)return g.call(n,a),n}else if(p&&(a=p.getElementById(i))&&Z.contains(e,a)&&a.id===i)return g.call(n,a),n}else{if(c[2])return g.apply(n,e.getElementsByTagName(t)),n;if((i=c[3])&&e.getElementsByClassName)return g.apply(n,e.getElementsByClassName(i)),n}if(!(T[t+" "]||d&&d.test(t))){if(f=t,p=e,1===y&&(U.test(t)||G.test(t))){for((p=K.test(t)&&st(e.parentNode)||e)==e&&m.scope||((s=e.getAttribute("id"))?s=I.escapeSelector(s):e.setAttribute("id",s=v)),o=(l=lt(t)).length;o--;)l[o]=(s?"#"+s:":scope")+" "+ht(l[o]);f=l.join(",")}try{return g.apply(n,p.querySelectorAll(f)),n}catch(e){T(t,!0)}finally{s===v&&e.removeAttribute("id")}}}return yt(t.replace(R,"$1"),e,n,r)}function tt(){var t=[];return function n(r,i){return t.push(r+" ")>e.cacheLength&&delete n[t.shift()],n[r+" "]=i}}function et(t){return t[v]=!0,t}function nt(t){var e=u.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function rt(t){return function(e){return E(e,"input")&&e.type===t}}function it(t){return function(e){return(E(e,"input")||E(e,"button"))&&e.type===t}}function ot(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&J(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function at(t){return et((function(e){return e=+e,et((function(n,r){for(var i,o=t([],n.length,e),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))}))}))}function st(t){return t&&void 0!==t.getElementsByTagName&&t}function ut(t){var n,r=t?t.ownerDocument||t:O;return r!=u&&9===r.nodeType&&r.documentElement?(c=(u=r).documentElement,h=!I.isXMLDoc(u),p=c.matches||c.webkitMatchesSelector||c.msMatchesSelector,c.msMatchesSelector&&O!=u&&(n=u.defaultView)&&n.top!==n&&n.addEventListener("unload",Q),m.getById=nt((function(t){return c.appendChild(t).id=I.expando,!u.getElementsByName||!u.getElementsByName(I.expando).length})),m.disconnectedMatch=nt((function(t){return p.call(t,"*")})),m.scope=nt((function(){return u.querySelectorAll(":scope")})),m.cssHas=nt((function(){try{return u.querySelector(":has(*,:jqfake)"),!1}catch(t){return!0}})),m.getById?(e.filter.ID=function(t){var e=t.replace(Y,X);return function(t){return t.getAttribute("id")===e}},e.find.ID=function(t,e){if(void 0!==e.getElementById&&h){var n=e.getElementById(t);return n?[n]:[]}}):(e.filter.ID=function(t){var e=t.replace(Y,X);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},e.find.ID=function(t,e){if(void 0!==e.getElementById&&h){var n,r,i,o=e.getElementById(t);if(o){if((n=o.getAttributeNode("id"))&&n.value===t)return[o];for(i=e.getElementsByName(t),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===t)return[o]}return[]}}),e.find.TAG=function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):e.querySelectorAll(t)},e.find.CLASS=function(t,e){if(void 0!==e.getElementsByClassName&&h)return e.getElementsByClassName(t)},d=[],nt((function(t){var e;c.appendChild(t).innerHTML="<a id='"+v+"' href='' disabled='disabled'></a><select id='"+v+"-\r\\' disabled='disabled'><option selected=''></option></select>",t.querySelectorAll("[selected]").length||d.push("\\["+P+"*(?:value|"+k+")"),t.querySelectorAll("[id~="+v+"-]").length||d.push("~="),t.querySelectorAll("a#"+v+"+*").length||d.push(".#.+[+~]"),t.querySelectorAll(":checked").length||d.push(":checked"),(e=u.createElement("input")).setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),c.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&d.push(":enabled",":disabled"),(e=u.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||d.push("\\["+P+"*name"+P+"*="+P+"*(?:''|\"\")")})),m.cssHas||d.push(":has"),d=d.length&&new RegExp(d.join("|")),x=function(t,e){if(t===e)return a=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!m.sortDetached&&e.compareDocumentPosition(t)===n?t===u||t.ownerDocument==O&&Z.contains(O,t)?-1:e===u||e.ownerDocument==O&&Z.contains(O,e)?1:i?l.call(i,t)-l.call(i,e):0:4&n?-1:1)},u):u}for(t in Z.matches=function(t,e){return Z(t,null,null,e)},Z.matchesSelector=function(t,e){if(ut(t),h&&!T[e+" "]&&(!d||!d.test(e)))try{var n=p.call(t,e);if(n||m.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){T(e,!0)}return Z(e,u,null,[t]).length>0},Z.contains=function(t,e){return(t.ownerDocument||t)!=u&&ut(t),I.contains(t,e)},Z.attr=function(t,n){(t.ownerDocument||t)!=u&&ut(t);var r=e.attrHandle[n.toLowerCase()],i=r&&f.call(e.attrHandle,n.toLowerCase())?r(t,n,!h):void 0;return void 0!==i?i:t.getAttribute(n)},Z.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},I.uniqueSort=function(t){var e,n=[],r=0,o=0;if(a=!m.sortStable,i=!m.sortStable&&s.call(t,0),N.call(t,x),a){for(;e=t[o++];)e===t[o]&&(r=n.push(o));for(;r--;)A.call(t,n[r],1)}return i=null,t},I.fn.uniqueSort=function(){return this.pushStack(I.uniqueSort(s.apply(this)))},e=I.expr={cacheLength:50,createPseudo:et,match:z,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(Y,X),t[3]=(t[3]||t[4]||t[5]||"").replace(Y,X),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||Z.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&Z.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return z.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&V.test(n)&&(e=lt(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(Y,X).toLowerCase();return"*"===t?function(){return!0}:function(t){return E(t,e)}},CLASS:function(t){var e=_[t+" "];return e||(e=new RegExp("(^|"+P+")"+t+"("+P+"|$)"))&&_(t,(function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,n){return function(r){var i=Z.attr(r,t);return null==i?"!="===e:!e||(i+="","="===e?i===n:"!="===e?i!==n:"^="===e?n&&0===i.indexOf(n):"*="===e?n&&i.indexOf(n)>-1:"$="===e?n&&i.slice(-n.length)===n:"~="===e?(" "+i.replace(j," ")+" ").indexOf(n)>-1:"|="===e&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,r,i){var o="nth"!==t.slice(0,3),a="last"!==t.slice(-4),s="of-type"===e;return 1===r&&0===i?function(t){return!!t.parentNode}:function(e,n,u){var c,l,h,d,f,p=o!==a?"nextSibling":"previousSibling",g=e.parentNode,m=s&&e.nodeName.toLowerCase(),b=!u&&!s,_=!1;if(g){if(o){for(;p;){for(h=e;h=h[p];)if(s?E(h,m):1===h.nodeType)return!1;f=p="only"===t&&!f&&"nextSibling"}return!0}if(f=[a?g.firstChild:g.lastChild],a&&b){for(_=(d=(c=(l=g[v]||(g[v]={}))[t]||[])[0]===y&&c[1])&&c[2],h=d&&g.childNodes[d];h=++d&&h&&h[p]||(_=d=0)||f.pop();)if(1===h.nodeType&&++_&&h===e){l[t]=[y,d,_];break}}else if(b&&(_=d=(c=(l=e[v]||(e[v]={}))[t]||[])[0]===y&&c[1]),!1===_)for(;(h=++d&&h&&h[p]||(_=d=0)||f.pop())&&(!(s?E(h,m):1===h.nodeType)||!++_||(b&&((l=h[v]||(h[v]={}))[t]=[y,_]),h!==e)););return(_-=i)===r||_%r==0&&_/r>=0}}},PSEUDO:function(t,n){var r,i=e.pseudos[t]||e.setFilters[t.toLowerCase()]||Z.error("unsupported pseudo: "+t);return i[v]?i(n):i.length>1?(r=[t,t,"",n],e.setFilters.hasOwnProperty(t.toLowerCase())?et((function(t,e){for(var r,o=i(t,n),a=o.length;a--;)t[r=l.call(t,o[a])]=!(e[r]=o[a])})):function(t){return i(t,0,r)}):i}},pseudos:{not:et((function(t){var e=[],n=[],r=vt(t.replace(R,"$1"));return r[v]?et((function(t,e,n,i){for(var o,a=r(t,null,i,[]),s=t.length;s--;)(o=a[s])&&(t[s]=!(e[s]=o))})):function(t,i,o){return e[0]=t,r(e,null,o,n),e[0]=null,!n.pop()}})),has:et((function(t){return function(e){return Z(t,e).length>0}})),contains:et((function(t){return t=t.replace(Y,X),function(e){return(e.textContent||I.text(e)).indexOf(t)>-1}})),lang:et((function(t){return q.test(t||"")||Z.error("unsupported lang: "+t),t=t.replace(Y,X).toLowerCase(),function(e){var n;do{if(n=h?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(t){var e=r.location&&r.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===c},focus:function(t){return t===function(){try{return u.activeElement}catch(t){}}()&&u.hasFocus()&&!!(t.type||t.href||~t.tabIndex)},enabled:ot(!1),disabled:ot(!0),checked:function(t){return E(t,"input")&&!!t.checked||E(t,"option")&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!e.pseudos.empty(t)},header:function(t){return $.test(t.nodeName)},input:function(t){return H.test(t.nodeName)},button:function(t){return E(t,"input")&&"button"===t.type||E(t,"button")},text:function(t){var e;return E(t,"input")&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:at((function(){return[0]})),last:at((function(t,e){return[e-1]})),eq:at((function(t,e,n){return[n<0?n+e:n]})),even:at((function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t})),odd:at((function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t})),lt:at((function(t,e,n){var r;for(r=n<0?n+e:n>e?e:n;--r>=0;)t.push(r);return t})),gt:at((function(t,e,n){for(var r=n<0?n+e:n;++r<e;)t.push(r);return t}))}},e.pseudos.nth=e.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})e.pseudos[t]=rt(t);for(t in{submit:!0,reset:!0})e.pseudos[t]=it(t);function ct(){}function lt(t,n){var r,i,o,a,s,u,c,l=w[t+" "];if(l)return n?0:l.slice(0);for(s=t,u=[],c=e.preFilter;s;){for(a in r&&!(i=B.exec(s))||(i&&(s=s.slice(i[0].length)||s),u.push(o=[])),r=!1,(i=G.exec(s))&&(r=i.shift(),o.push({value:r,type:i[0].replace(R," ")}),s=s.slice(r.length)),e.filter)!(i=z[a].exec(s))||c[a]&&!(i=c[a](i))||(r=i.shift(),o.push({value:r,type:a,matches:i}),s=s.slice(r.length));if(!r)break}return n?s.length:s?Z.error(t):w(t,u).slice(0)}function ht(t){for(var e=0,n=t.length,r="";e<n;e++)r+=t[e].value;return r}function dt(t,e,n){var r=e.dir,i=e.next,o=i||r,a=n&&"parentNode"===o,s=b++;return e.first?function(e,n,i){for(;e=e[r];)if(1===e.nodeType||a)return t(e,n,i);return!1}:function(e,n,u){var c,l,h=[y,s];if(u){for(;e=e[r];)if((1===e.nodeType||a)&&t(e,n,u))return!0}else for(;e=e[r];)if(1===e.nodeType||a)if(l=e[v]||(e[v]={}),i&&E(e,i))e=e[r]||e;else{if((c=l[o])&&c[0]===y&&c[1]===s)return h[2]=c[2];if(l[o]=h,h[2]=t(e,n,u))return!0}return!1}}function ft(t){return t.length>1?function(e,n,r){for(var i=t.length;i--;)if(!t[i](e,n,r))return!1;return!0}:t[0]}function pt(t,e,n,r,i){for(var o,a=[],s=0,u=t.length,c=null!=e;s<u;s++)(o=t[s])&&(n&&!n(o,r,i)||(a.push(o),c&&e.push(s)));return a}function gt(t,e,n,r,i,o){return r&&!r[v]&&(r=gt(r)),i&&!i[v]&&(i=gt(i,o)),et((function(o,a,s,u){var c,h,d,f,p=[],m=[],v=a.length,y=o||function(t,e,n){for(var r=0,i=e.length;r<i;r++)Z(t,e[r],n);return n}(e||"*",s.nodeType?[s]:s,[]),b=!t||!o&&e?y:pt(y,p,t,s,u);if(n?n(b,f=i||(o?t:v||r)?[]:a,s,u):f=b,r)for(c=pt(f,m),r(c,[],s,u),h=c.length;h--;)(d=c[h])&&(f[m[h]]=!(b[m[h]]=d));if(o){if(i||t){if(i){for(c=[],h=f.length;h--;)(d=f[h])&&c.push(b[h]=d);i(null,f=[],c,u)}for(h=f.length;h--;)(d=f[h])&&(c=i?l.call(o,d):p[h])>-1&&(o[c]=!(a[c]=d))}}else f=pt(f===a?f.splice(v,f.length):f),i?i(null,a,f,u):g.apply(a,f)}))}function mt(t){for(var r,i,o,a=t.length,s=e.relative[t[0].type],u=s||e.relative[" "],c=s?1:0,h=dt((function(t){return t===r}),u,!0),d=dt((function(t){return l.call(r,t)>-1}),u,!0),f=[function(t,e,i){var o=!s&&(i||e!=n)||((r=e).nodeType?h(t,e,i):d(t,e,i));return r=null,o}];c<a;c++)if(i=e.relative[t[c].type])f=[dt(ft(f),i)];else{if((i=e.filter[t[c].type].apply(null,t[c].matches))[v]){for(o=++c;o<a&&!e.relative[t[o].type];o++);return gt(c>1&&ft(f),c>1&&ht(t.slice(0,c-1).concat({value:" "===t[c-2].type?"*":""})).replace(R,"$1"),i,c<o&&mt(t.slice(c,o)),o<a&&mt(t=t.slice(o)),o<a&&ht(t))}f.push(i)}return ft(f)}function vt(t,r){var i,o=[],a=[],s=S[t+" "];if(!s){for(r||(r=lt(t)),i=r.length;i--;)(s=mt(r[i]))[v]?o.push(s):a.push(s);s=S(t,function(t,r){var i=r.length>0,o=t.length>0,a=function(a,s,c,l,d){var f,p,m,v=0,b="0",_=a&&[],w=[],S=n,T=a||o&&e.find.TAG("*",d),x=y+=null==S?1:Math.random()||.1,k=T.length;for(d&&(n=s==u||s||d);b!==k&&null!=(f=T[b]);b++){if(o&&f){for(p=0,s||f.ownerDocument==u||(ut(f),c=!h);m=t[p++];)if(m(f,s||u,c)){g.call(l,f);break}d&&(y=x)}i&&((f=!m&&f)&&v--,a&&_.push(f))}if(v+=b,i&&b!==v){for(p=0;m=r[p++];)m(_,w,s,c);if(a){if(v>0)for(;b--;)_[b]||w[b]||(w[b]=C.call(l));w=pt(w)}g.apply(l,w),d&&!a&&w.length>0&&v+r.length>1&&I.uniqueSort(l)}return d&&(y=x,n=S),_};return i?et(a):a}(a,o)),s.selector=t}return s}function yt(t,n,r,i){var o,a,s,u,c,l="function"==typeof t&&t,d=!i&&lt(t=l.selector||t);if(r=r||[],1===d.length){if((a=d[0]=d[0].slice(0)).length>2&&"ID"===(s=a[0]).type&&9===n.nodeType&&h&&e.relative[a[1].type]){if(!(n=(e.find.ID(s.matches[0].replace(Y,X),n)||[])[0]))return r;l&&(n=n.parentNode),t=t.slice(a.shift().value.length)}for(o=z.needsContext.test(t)?0:a.length;o--&&(s=a[o],!e.relative[u=s.type]);)if((c=e.find[u])&&(i=c(s.matches[0].replace(Y,X),K.test(a[0].type)&&st(n.parentNode)||n))){if(a.splice(o,1),!(t=i.length&&ht(a)))return g.apply(r,i),r;break}}return(l||vt(t,d))(i,n,!h,r,!n||K.test(t)&&st(n.parentNode)||n),r}ct.prototype=e.filters=e.pseudos,e.setFilters=new ct,m.sortStable=v.split("").sort(x).join("")===v,ut(),m.sortDetached=nt((function(t){return 1&t.compareDocumentPosition(u.createElement("fieldset"))})),I.find=Z,I.expr[":"]=I.expr.pseudos,I.unique=I.uniqueSort,Z.compile=vt,Z.select=yt,Z.setDocument=ut,Z.tokenize=lt,Z.escape=I.escapeSelector,Z.getText=I.text,Z.isXML=I.isXMLDoc,Z.selectors=I.expr,Z.support=I.support,Z.uniqueSort=I.uniqueSort}();var F=function(t,e,n){for(var r=[],i=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(i&&I(t).is(n))break;r.push(t)}return r},j=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},B=I.expr.match.needsContext,G=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function U(t,e,n){return v(e)?I.grep(t,(function(t,r){return!!e.call(t,r,t)!==n})):e.nodeType?I.grep(t,(function(t){return t===e!==n})):"string"!=typeof e?I.grep(t,(function(t){return l.call(e,t)>-1!==n})):I.filter(e,t,n)}I.filter=function(t,e,n){var r=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?I.find.matchesSelector(r,t)?[r]:[]:I.find.matches(t,I.grep(e,(function(t){return 1===t.nodeType})))},I.fn.extend({find:function(t){var e,n,r=this.length,i=this;if("string"!=typeof t)return this.pushStack(I(t).filter((function(){for(e=0;e<r;e++)if(I.contains(i[e],this))return!0})));for(n=this.pushStack([]),e=0;e<r;e++)I.find(t,i[e],n);return r>1?I.uniqueSort(n):n},filter:function(t){return this.pushStack(U(this,t||[],!1))},not:function(t){return this.pushStack(U(this,t||[],!0))},is:function(t){return!!U(this,"string"==typeof t&&B.test(t)?I(t):t||[],!1).length}});var V,q=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(I.fn.init=function(t,e,n){var r,i;if(!t)return this;if(n=n||V,"string"==typeof t){if(!(r="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:q.exec(t))||!r[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(r[1]){if(e=e instanceof I?e[0]:e,I.merge(this,I.parseHTML(r[1],e&&e.nodeType?e.ownerDocument||e:b,!0)),G.test(r[1])&&I.isPlainObject(e))for(r in e)v(this[r])?this[r](e[r]):this.attr(r,e[r]);return this}return(i=b.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):v(t)?void 0!==n.ready?n.ready(t):t(I):I.makeArray(t,this)}).prototype=I.fn,V=I(b);var z=/^(?:parents|prev(?:Until|All))/,H={children:!0,contents:!0,next:!0,prev:!0};function $(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}I.fn.extend({has:function(t){var e=I(t,this),n=e.length;return this.filter((function(){for(var t=0;t<n;t++)if(I.contains(this,e[t]))return!0}))},closest:function(t,e){var n,r=0,i=this.length,o=[],a="string"!=typeof t&&I(t);if(!B.test(t))for(;r<i;r++)for(n=this[r];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&I.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(o.length>1?I.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?l.call(I(t),this[0]):l.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(I.uniqueSort(I.merge(this.get(),I(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),I.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return F(t,"parentNode")},parentsUntil:function(t,e,n){return F(t,"parentNode",n)},next:function(t){return $(t,"nextSibling")},prev:function(t){return $(t,"previousSibling")},nextAll:function(t){return F(t,"nextSibling")},prevAll:function(t){return F(t,"previousSibling")},nextUntil:function(t,e,n){return F(t,"nextSibling",n)},prevUntil:function(t,e,n){return F(t,"previousSibling",n)},siblings:function(t){return j((t.parentNode||{}).firstChild,t)},children:function(t){return j(t.firstChild)},contents:function(t){return null!=t.contentDocument&&a(t.contentDocument)?t.contentDocument:(E(t,"template")&&(t=t.content||t),I.merge([],t.childNodes))}},(function(t,e){I.fn[t]=function(n,r){var i=I.map(this,e,n);return"Until"!==t.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=I.filter(r,i)),this.length>1&&(H[t]||I.uniqueSort(i),z.test(t)&&i.reverse()),this.pushStack(i)}}));var W=/[^\x20\t\r\n\f]+/g;function K(t){return t}function Y(t){throw t}function X(t,e,n,r){var i;try{t&&v(i=t.promise)?i.call(t).done(e).fail(n):t&&v(i=t.then)?i.call(t,e,n):e.apply(void 0,[t].slice(r))}catch(t){n.apply(void 0,[t])}}I.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return I.each(t.match(W)||[],(function(t,n){e[n]=!0})),e}(t):I.extend({},t);var e,n,r,i,o=[],a=[],s=-1,u=function(){for(i=i||t.once,r=e=!0;a.length;s=-1)for(n=a.shift();++s<o.length;)!1===o[s].apply(n[0],n[1])&&t.stopOnFalse&&(s=o.length,n=!1);t.memory||(n=!1),e=!1,i&&(o=n?[]:"")},c={add:function(){return o&&(n&&!e&&(s=o.length-1,a.push(n)),function e(n){I.each(n,(function(n,r){v(r)?t.unique&&c.has(r)||o.push(r):r&&r.length&&"string"!==S(r)&&e(r)}))}(arguments),n&&!e&&u()),this},remove:function(){return I.each(arguments,(function(t,e){for(var n;(n=I.inArray(e,o,n))>-1;)o.splice(n,1),n<=s&&s--})),this},has:function(t){return t?I.inArray(t,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=a=[],n||e||(o=n=""),this},locked:function(){return!!i},fireWith:function(t,n){return i||(n=[t,(n=n||[]).slice?n.slice():n],a.push(n),e||u()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},I.extend({Deferred:function(t){var e=[["notify","progress",I.Callbacks("memory"),I.Callbacks("memory"),2],["resolve","done",I.Callbacks("once memory"),I.Callbacks("once memory"),0,"resolved"],["reject","fail",I.Callbacks("once memory"),I.Callbacks("once memory"),1,"rejected"]],n="pending",i={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},catch:function(t){return i.then(null,t)},pipe:function(){var t=arguments;return I.Deferred((function(n){I.each(e,(function(e,r){var i=v(t[r[4]])&&t[r[4]];o[r[1]]((function(){var t=i&&i.apply(this,arguments);t&&v(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,i?[t]:arguments)}))})),t=null})).promise()},then:function(t,n,i){var o=0;function a(t,e,n,i){return function(){var s=this,u=arguments,c=function(){var r,c;if(!(t<o)){if((r=n.apply(s,u))===e.promise())throw new TypeError("Thenable self-resolution");c=r&&("object"==typeof r||"function"==typeof r)&&r.then,v(c)?i?c.call(r,a(o,e,K,i),a(o,e,Y,i)):(o++,c.call(r,a(o,e,K,i),a(o,e,Y,i),a(o,e,K,e.notifyWith))):(n!==K&&(s=void 0,u=[r]),(i||e.resolveWith)(s,u))}},l=i?c:function(){try{c()}catch(r){I.Deferred.exceptionHook&&I.Deferred.exceptionHook(r,l.error),t+1>=o&&(n!==Y&&(s=void 0,u=[r]),e.rejectWith(s,u))}};t?l():(I.Deferred.getErrorHook?l.error=I.Deferred.getErrorHook():I.Deferred.getStackHook&&(l.error=I.Deferred.getStackHook()),r.setTimeout(l))}}return I.Deferred((function(r){e[0][3].add(a(0,r,v(i)?i:K,r.notifyWith)),e[1][3].add(a(0,r,v(t)?t:K)),e[2][3].add(a(0,r,v(n)?n:Y))})).promise()},promise:function(t){return null!=t?I.extend(t,i):i}},o={};return I.each(e,(function(t,r){var a=r[2],s=r[5];i[r[1]]=a.add,s&&a.add((function(){n=s}),e[3-t][2].disable,e[3-t][3].disable,e[0][2].lock,e[0][3].lock),a.add(r[3].fire),o[r[0]]=function(){return o[r[0]+"With"](this===o?void 0:this,arguments),this},o[r[0]+"With"]=a.fireWith})),i.promise(o),t&&t.call(o,o),o},when:function(t){var e=arguments.length,n=e,r=Array(n),i=s.call(arguments),o=I.Deferred(),a=function(t){return function(n){r[t]=this,i[t]=arguments.length>1?s.call(arguments):n,--e||o.resolveWith(r,i)}};if(e<=1&&(X(t,o.done(a(n)).resolve,o.reject,!e),"pending"===o.state()||v(i[n]&&i[n].then)))return o.then();for(;n--;)X(i[n],a(n),o.reject);return o.promise()}});var Q=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;I.Deferred.exceptionHook=function(t,e){r.console&&r.console.warn&&t&&Q.test(t.name)&&r.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},I.readyException=function(t){r.setTimeout((function(){throw t}))};var J=I.Deferred();function Z(){b.removeEventListener("DOMContentLoaded",Z),r.removeEventListener("load",Z),I.ready()}I.fn.ready=function(t){return J.then(t).catch((function(t){I.readyException(t)})),this},I.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--I.readyWait:I.isReady)||(I.isReady=!0,!0!==t&&--I.readyWait>0||J.resolveWith(b,[I]))}}),I.ready.then=J.then,"complete"===b.readyState||"loading"!==b.readyState&&!b.documentElement.doScroll?r.setTimeout(I.ready):(b.addEventListener("DOMContentLoaded",Z),r.addEventListener("load",Z));var tt=function(t,e,n,r,i,o,a){var s=0,u=t.length,c=null==n;if("object"===S(n))for(s in i=!0,n)tt(t,e,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,v(r)||(a=!0),c&&(a?(e.call(t,r),e=null):(c=e,e=function(t,e,n){return c.call(I(t),n)})),e))for(;s<u;s++)e(t[s],n,a?r:r.call(t[s],s,e(t[s],n)));return i?t:c?e.call(t):u?e(t[0],n):o},et=/^-ms-/,nt=/-([a-z])/g;function rt(t,e){return e.toUpperCase()}function it(t){return t.replace(et,"ms-").replace(nt,rt)}var ot=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function at(){this.expando=I.expando+at.uid++}at.uid=1,at.prototype={cache:function(t){var e=t[this.expando];return e||(e={},ot(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var r,i=this.cache(t);if("string"==typeof e)i[it(e)]=n;else for(r in e)i[it(r)]=e[r];return i},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][it(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,r=t[this.expando];if(void 0!==r){if(void 0!==e){n=(e=Array.isArray(e)?e.map(it):(e=it(e))in r?[e]:e.match(W)||[]).length;for(;n--;)delete r[e[n]]}(void 0===e||I.isEmptyObject(r))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!I.isEmptyObject(e)}};var st=new at,ut=new at,ct=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,lt=/[A-Z]/g;function ht(t,e,n){var r;if(void 0===n&&1===t.nodeType)if(r="data-"+e.replace(lt,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(r))){try{n=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:ct.test(t)?JSON.parse(t):t)}(n)}catch(t){}ut.set(t,e,n)}else n=void 0;return n}I.extend({hasData:function(t){return ut.hasData(t)||st.hasData(t)},data:function(t,e,n){return ut.access(t,e,n)},removeData:function(t,e){ut.remove(t,e)},_data:function(t,e,n){return st.access(t,e,n)},_removeData:function(t,e){st.remove(t,e)}}),I.fn.extend({data:function(t,e){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===t){if(this.length&&(i=ut.get(o),1===o.nodeType&&!st.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(r=a[n].name).indexOf("data-")&&(r=it(r.slice(5)),ht(o,r,i[r]));st.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof t?this.each((function(){ut.set(this,t)})):tt(this,(function(e){var n;if(o&&void 0===e)return void 0!==(n=ut.get(o,t))||void 0!==(n=ht(o,t))?n:void 0;this.each((function(){ut.set(this,t,e)}))}),null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each((function(){ut.remove(this,t)}))}}),I.extend({queue:function(t,e,n){var r;if(t)return e=(e||"fx")+"queue",r=st.get(t,e),n&&(!r||Array.isArray(n)?r=st.access(t,e,I.makeArray(n)):r.push(n)),r||[]},dequeue:function(t,e){e=e||"fx";var n=I.queue(t,e),r=n.length,i=n.shift(),o=I._queueHooks(t,e);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===e&&n.unshift("inprogress"),delete o.stop,i.call(t,(function(){I.dequeue(t,e)}),o)),!r&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return st.get(t,n)||st.access(t,n,{empty:I.Callbacks("once memory").add((function(){st.remove(t,[e+"queue",n])}))})}}),I.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?I.queue(this[0],t):void 0===e?this:this.each((function(){var n=I.queue(this,t,e);I._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&I.dequeue(this,t)}))},dequeue:function(t){return this.each((function(){I.dequeue(this,t)}))},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,r=1,i=I.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)(n=st.get(o[a],t+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(e)}});var dt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ft=new RegExp("^(?:([+-])=|)("+dt+")([a-z%]*)$","i"),pt=["Top","Right","Bottom","Left"],gt=b.documentElement,mt=function(t){return I.contains(t.ownerDocument,t)},vt={composed:!0};gt.getRootNode&&(mt=function(t){return I.contains(t.ownerDocument,t)||t.getRootNode(vt)===t.ownerDocument});var yt=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&mt(t)&&"none"===I.css(t,"display")};function bt(t,e,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return I.css(t,e,"")},u=s(),c=n&&n[3]||(I.cssNumber[e]?"":"px"),l=t.nodeType&&(I.cssNumber[e]||"px"!==c&&+u)&&ft.exec(I.css(t,e));if(l&&l[3]!==c){for(u/=2,c=c||l[3],l=+u||1;a--;)I.style(t,e,l+c),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),l/=o;l*=2,I.style(t,e,l+c),n=n||[]}return n&&(l=+l||+u||0,i=n[1]?l+(n[1]+1)*n[2]:+n[2],r&&(r.unit=c,r.start=l,r.end=i)),i}var _t={};function wt(t){var e,n=t.ownerDocument,r=t.nodeName,i=_t[r];return i||(e=n.body.appendChild(n.createElement(r)),i=I.css(e,"display"),e.parentNode.removeChild(e),"none"===i&&(i="block"),_t[r]=i,i)}function St(t,e){for(var n,r,i=[],o=0,a=t.length;o<a;o++)(r=t[o]).style&&(n=r.style.display,e?("none"===n&&(i[o]=st.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&yt(r)&&(i[o]=wt(r))):"none"!==n&&(i[o]="none",st.set(r,"display",n)));for(o=0;o<a;o++)null!=i[o]&&(t[o].style.display=i[o]);return t}I.fn.extend({show:function(){return St(this,!0)},hide:function(){return St(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each((function(){yt(this)?I(this).show():I(this).hide()}))}});var Tt,xt,It=/^(?:checkbox|radio)$/i,kt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Et=/^$|^module$|\/(?:java|ecma)script/i;Tt=b.createDocumentFragment().appendChild(b.createElement("div")),(xt=b.createElement("input")).setAttribute("type","radio"),xt.setAttribute("checked","checked"),xt.setAttribute("name","t"),Tt.appendChild(xt),m.checkClone=Tt.cloneNode(!0).cloneNode(!0).lastChild.checked,Tt.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!Tt.cloneNode(!0).lastChild.defaultValue,Tt.innerHTML="<option></option>",m.option=!!Tt.lastChild;var Ct={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Nt(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&E(t,e)?I.merge([t],n):n}function At(t,e){for(var n=0,r=t.length;n<r;n++)st.set(t[n],"globalEval",!e||st.get(e[n],"globalEval"))}Ct.tbody=Ct.tfoot=Ct.colgroup=Ct.caption=Ct.thead,Ct.th=Ct.td,m.option||(Ct.optgroup=Ct.option=[1,"<select multiple='multiple'>","</select>"]);var Pt=/<|&#?\w+;/;function Rt(t,e,n,r,i){for(var o,a,s,u,c,l,h=e.createDocumentFragment(),d=[],f=0,p=t.length;f<p;f++)if((o=t[f])||0===o)if("object"===S(o))I.merge(d,o.nodeType?[o]:o);else if(Pt.test(o)){for(a=a||h.appendChild(e.createElement("div")),s=(kt.exec(o)||["",""])[1].toLowerCase(),u=Ct[s]||Ct._default,a.innerHTML=u[1]+I.htmlPrefilter(o)+u[2],l=u[0];l--;)a=a.lastChild;I.merge(d,a.childNodes),(a=h.firstChild).textContent=""}else d.push(e.createTextNode(o));for(h.textContent="",f=0;o=d[f++];)if(r&&I.inArray(o,r)>-1)i&&i.push(o);else if(c=mt(o),a=Nt(h.appendChild(o),"script"),c&&At(a),n)for(l=0;o=a[l++];)Et.test(o.type||"")&&n.push(o);return h}var Dt=/^([^.]*)(?:\.(.+)|)/;function Mt(){return!0}function Ot(){return!1}function Lt(t,e,n,r,i,o){var a,s;if("object"==typeof e){for(s in"string"!=typeof n&&(r=r||n,n=void 0),e)Lt(t,s,n,r,e[s],o);return t}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Ot;else if(!i)return t;return 1===o&&(a=i,i=function(t){return I().off(t),a.apply(this,arguments)},i.guid=a.guid||(a.guid=I.guid++)),t.each((function(){I.event.add(this,e,i,r,n)}))}function Ft(t,e,n){n?(st.set(t,e,!1),I.event.add(t,e,{namespace:!1,handler:function(t){var n,r=st.get(this,e);if(1&t.isTrigger&&this[e]){if(r)(I.event.special[e]||{}).delegateType&&t.stopPropagation();else if(r=s.call(arguments),st.set(this,e,r),this[e](),n=st.get(this,e),st.set(this,e,!1),r!==n)return t.stopImmediatePropagation(),t.preventDefault(),n}else r&&(st.set(this,e,I.event.trigger(r[0],r.slice(1),this)),t.stopPropagation(),t.isImmediatePropagationStopped=Mt)}})):void 0===st.get(t,e)&&I.event.add(t,e,Mt)}I.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,c,l,h,d,f,p,g,m=st.get(t);if(ot(t))for(n.handler&&(n=(o=n).handler,i=o.selector),i&&I.find.matchesSelector(gt,i),n.guid||(n.guid=I.guid++),(u=m.events)||(u=m.events=Object.create(null)),(a=m.handle)||(a=m.handle=function(e){return void 0!==I&&I.event.triggered!==e.type?I.event.dispatch.apply(t,arguments):void 0}),c=(e=(e||"").match(W)||[""]).length;c--;)f=g=(s=Dt.exec(e[c])||[])[1],p=(s[2]||"").split(".").sort(),f&&(h=I.event.special[f]||{},f=(i?h.delegateType:h.bindType)||f,h=I.event.special[f]||{},l=I.extend({type:f,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&I.expr.match.needsContext.test(i),namespace:p.join(".")},o),(d=u[f])||((d=u[f]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(t,r,p,a)||t.addEventListener&&t.addEventListener(f,a)),h.add&&(h.add.call(t,l),l.handler.guid||(l.handler.guid=n.guid)),i?d.splice(d.delegateCount++,0,l):d.push(l),I.event.global[f]=!0)},remove:function(t,e,n,r,i){var o,a,s,u,c,l,h,d,f,p,g,m=st.hasData(t)&&st.get(t);if(m&&(u=m.events)){for(c=(e=(e||"").match(W)||[""]).length;c--;)if(f=g=(s=Dt.exec(e[c])||[])[1],p=(s[2]||"").split(".").sort(),f){for(h=I.event.special[f]||{},d=u[f=(r?h.delegateType:h.bindType)||f]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=d.length;o--;)l=d[o],!i&&g!==l.origType||n&&n.guid!==l.guid||s&&!s.test(l.namespace)||r&&r!==l.selector&&("**"!==r||!l.selector)||(d.splice(o,1),l.selector&&d.delegateCount--,h.remove&&h.remove.call(t,l));a&&!d.length&&(h.teardown&&!1!==h.teardown.call(t,p,m.handle)||I.removeEvent(t,f,m.handle),delete u[f])}else for(f in u)I.event.remove(t,f+e[c],n,r,!0);I.isEmptyObject(u)&&st.remove(t,"handle events")}},dispatch:function(t){var e,n,r,i,o,a,s=new Array(arguments.length),u=I.event.fix(t),c=(st.get(this,"events")||Object.create(null))[u.type]||[],l=I.event.special[u.type]||{};for(s[0]=u,e=1;e<arguments.length;e++)s[e]=arguments[e];if(u.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,u)){for(a=I.event.handlers.call(this,u,c),e=0;(i=a[e++])&&!u.isPropagationStopped();)for(u.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!u.isImmediatePropagationStopped();)u.rnamespace&&!1!==o.namespace&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,void 0!==(r=((I.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,u),u.result}},handlers:function(t,e){var n,r,i,o,a,s=[],u=e.delegateCount,c=t.target;if(u&&c.nodeType&&!("click"===t.type&&t.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==t.type||!0!==c.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=e[n]).selector+" "]&&(a[i]=r.needsContext?I(i,this).index(c)>-1:I.find(i,this,null,[c]).length),a[i]&&o.push(r);o.length&&s.push({elem:c,handlers:o})}return c=this,u<e.length&&s.push({elem:c,handlers:e.slice(u)}),s},addProp:function(t,e){Object.defineProperty(I.Event.prototype,t,{enumerable:!0,configurable:!0,get:v(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[I.expando]?t:new I.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return It.test(e.type)&&e.click&&E(e,"input")&&Ft(e,"click",!0),!1},trigger:function(t){var e=this||t;return It.test(e.type)&&e.click&&E(e,"input")&&Ft(e,"click"),!0},_default:function(t){var e=t.target;return It.test(e.type)&&e.click&&E(e,"input")&&st.get(e,"click")||E(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},I.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},I.Event=function(t,e){if(!(this instanceof I.Event))return new I.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?Mt:Ot,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&I.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[I.expando]=!0},I.Event.prototype={constructor:I.Event,isDefaultPrevented:Ot,isPropagationStopped:Ot,isImmediatePropagationStopped:Ot,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=Mt,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=Mt,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=Mt,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},I.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},I.event.addProp),I.each({focus:"focusin",blur:"focusout"},(function(t,e){function n(t){if(b.documentMode){var n=st.get(this,"handle"),r=I.event.fix(t);r.type="focusin"===t.type?"focus":"blur",r.isSimulated=!0,n(t),r.target===r.currentTarget&&n(r)}else I.event.simulate(e,t.target,I.event.fix(t))}I.event.special[t]={setup:function(){var r;if(Ft(this,t,!0),!b.documentMode)return!1;(r=st.get(this,e))||this.addEventListener(e,n),st.set(this,e,(r||0)+1)},trigger:function(){return Ft(this,t),!0},teardown:function(){var t;if(!b.documentMode)return!1;(t=st.get(this,e)-1)?st.set(this,e,t):(this.removeEventListener(e,n),st.remove(this,e))},_default:function(e){return st.get(e.target,t)},delegateType:e},I.event.special[e]={setup:function(){var r=this.ownerDocument||this.document||this,i=b.documentMode?this:r,o=st.get(i,e);o||(b.documentMode?this.addEventListener(e,n):r.addEventListener(t,n,!0)),st.set(i,e,(o||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,i=b.documentMode?this:r,o=st.get(i,e)-1;o?st.set(i,e,o):(b.documentMode?this.removeEventListener(e,n):r.removeEventListener(t,n,!0),st.remove(i,e))}}})),I.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(t,e){I.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,r=t.relatedTarget,i=t.handleObj;return r&&(r===this||I.contains(this,r))||(t.type=i.origType,n=i.handler.apply(this,arguments),t.type=e),n}}})),I.fn.extend({on:function(t,e,n,r){return Lt(this,t,e,n,r)},one:function(t,e,n,r){return Lt(this,t,e,n,r,1)},off:function(t,e,n){var r,i;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,I(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(i in t)this.off(i,e,t[i]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=Ot),this.each((function(){I.event.remove(this,t,n,e)}))}});var jt=/<script|<style|<link/i,Bt=/checked\s*(?:[^=]|=\s*.checked.)/i,Gt=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Ut(t,e){return E(t,"table")&&E(11!==e.nodeType?e:e.firstChild,"tr")&&I(t).children("tbody")[0]||t}function Vt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function qt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function zt(t,e){var n,r,i,o,a,s;if(1===e.nodeType){if(st.hasData(t)&&(s=st.get(t).events))for(i in st.remove(e,"handle events"),s)for(n=0,r=s[i].length;n<r;n++)I.event.add(e,i,s[i][n]);ut.hasData(t)&&(o=ut.access(t),a=I.extend({},o),ut.set(e,a))}}function Ht(t,e){var n=e.nodeName.toLowerCase();"input"===n&&It.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function $t(t,e,n,r){e=u(e);var i,o,a,s,c,l,h=0,d=t.length,f=d-1,p=e[0],g=v(p);if(g||d>1&&"string"==typeof p&&!m.checkClone&&Bt.test(p))return t.each((function(i){var o=t.eq(i);g&&(e[0]=p.call(this,i,o.html())),$t(o,e,n,r)}));if(d&&(o=(i=Rt(e,t[0].ownerDocument,!1,t,r)).firstChild,1===i.childNodes.length&&(i=o),o||r)){for(s=(a=I.map(Nt(i,"script"),Vt)).length;h<d;h++)c=i,h!==f&&(c=I.clone(c,!0,!0),s&&I.merge(a,Nt(c,"script"))),n.call(t[h],c,h);if(s)for(l=a[a.length-1].ownerDocument,I.map(a,qt),h=0;h<s;h++)c=a[h],Et.test(c.type||"")&&!st.access(c,"globalEval")&&I.contains(l,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?I._evalUrl&&!c.noModule&&I._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")},l):w(c.textContent.replace(Gt,""),c,l))}return t}function Wt(t,e,n){for(var r,i=e?I.filter(e,t):t,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||I.cleanData(Nt(r)),r.parentNode&&(n&&mt(r)&&At(Nt(r,"script")),r.parentNode.removeChild(r));return t}I.extend({htmlPrefilter:function(t){return t},clone:function(t,e,n){var r,i,o,a,s=t.cloneNode(!0),u=mt(t);if(!(m.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||I.isXMLDoc(t)))for(a=Nt(s),r=0,i=(o=Nt(t)).length;r<i;r++)Ht(o[r],a[r]);if(e)if(n)for(o=o||Nt(t),a=a||Nt(s),r=0,i=o.length;r<i;r++)zt(o[r],a[r]);else zt(t,s);return(a=Nt(s,"script")).length>0&&At(a,!u&&Nt(t,"script")),s},cleanData:function(t){for(var e,n,r,i=I.event.special,o=0;void 0!==(n=t[o]);o++)if(ot(n)){if(e=n[st.expando]){if(e.events)for(r in e.events)i[r]?I.event.remove(n,r):I.removeEvent(n,r,e.handle);n[st.expando]=void 0}n[ut.expando]&&(n[ut.expando]=void 0)}}}),I.fn.extend({detach:function(t){return Wt(this,t,!0)},remove:function(t){return Wt(this,t)},text:function(t){return tt(this,(function(t){return void 0===t?I.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)}))}),null,t,arguments.length)},append:function(){return $t(this,arguments,(function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ut(this,t).appendChild(t)}))},prepend:function(){return $t(this,arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Ut(this,t);e.insertBefore(t,e.firstChild)}}))},before:function(){return $t(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this)}))},after:function(){return $t(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)}))},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(I.cleanData(Nt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map((function(){return I.clone(this,t,e)}))},html:function(t){return tt(this,(function(t){var e=this[0]||{},n=0,r=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!jt.test(t)&&!Ct[(kt.exec(t)||["",""])[1].toLowerCase()]){t=I.htmlPrefilter(t);try{for(;n<r;n++)1===(e=this[n]||{}).nodeType&&(I.cleanData(Nt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)}),null,t,arguments.length)},replaceWith:function(){var t=[];return $t(this,arguments,(function(e){var n=this.parentNode;I.inArray(this,t)<0&&(I.cleanData(Nt(this)),n&&n.replaceChild(e,this))}),t)}}),I.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,e){I.fn[t]=function(t){for(var n,r=[],i=I(t),o=i.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),I(i[a])[e](n),c.apply(r,n.get());return this.pushStack(r)}}));var Kt=new RegExp("^("+dt+")(?!px)[a-z%]+$","i"),Yt=/^--/,Xt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=r),e.getComputedStyle(t)},Qt=function(t,e,n){var r,i,o={};for(i in e)o[i]=t.style[i],t.style[i]=e[i];for(i in r=n.call(t),e)t.style[i]=o[i];return r},Jt=new RegExp(pt.join("|"),"i");function Zt(t,e,n){var r,i,o,a,s=Yt.test(e),u=t.style;return(n=n||Xt(t))&&(a=n.getPropertyValue(e)||n[e],s&&a&&(a=a.replace(R,"$1")||void 0),""!==a||mt(t)||(a=I.style(t,e)),!m.pixelBoxStyles()&&Kt.test(a)&&Jt.test(e)&&(r=u.width,i=u.minWidth,o=u.maxWidth,u.minWidth=u.maxWidth=u.width=a,a=n.width,u.width=r,u.minWidth=i,u.maxWidth=o)),void 0!==a?a+"":a}function te(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function t(){if(l){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",gt.appendChild(c).appendChild(l);var t=r.getComputedStyle(l);n="1%"!==t.top,u=12===e(t.marginLeft),l.style.right="60%",a=36===e(t.right),i=36===e(t.width),l.style.position="absolute",o=12===e(l.offsetWidth/3),gt.removeChild(c),l=null}}function e(t){return Math.round(parseFloat(t))}var n,i,o,a,s,u,c=b.createElement("div"),l=b.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle="content-box"===l.style.backgroundClip,I.extend(m,{boxSizingReliable:function(){return t(),i},pixelBoxStyles:function(){return t(),a},pixelPosition:function(){return t(),n},reliableMarginLeft:function(){return t(),u},scrollboxSize:function(){return t(),o},reliableTrDimensions:function(){var t,e,n,i;return null==s&&(t=b.createElement("table"),e=b.createElement("tr"),n=b.createElement("div"),t.style.cssText="position:absolute;left:-11111px;border-collapse:separate",e.style.cssText="box-sizing:content-box;border:1px solid",e.style.height="1px",n.style.height="9px",n.style.display="block",gt.appendChild(t).appendChild(e).appendChild(n),i=r.getComputedStyle(e),s=parseInt(i.height,10)+parseInt(i.borderTopWidth,10)+parseInt(i.borderBottomWidth,10)===e.offsetHeight,gt.removeChild(t)),s}}))}();var ee=["Webkit","Moz","ms"],ne=b.createElement("div").style,re={};function ie(t){var e=I.cssProps[t]||re[t];return e||(t in ne?t:re[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),n=ee.length;n--;)if((t=ee[n]+e)in ne)return t}(t)||t)}var oe=/^(none|table(?!-c[ea]).+)/,ae={position:"absolute",visibility:"hidden",display:"block"},se={letterSpacing:"0",fontWeight:"400"};function ue(t,e,n){var r=ft.exec(e);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):e}function ce(t,e,n,r,i,o){var a="width"===e?1:0,s=0,u=0,c=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(c+=I.css(t,n+pt[a],!0,i)),r?("content"===n&&(u-=I.css(t,"padding"+pt[a],!0,i)),"margin"!==n&&(u-=I.css(t,"border"+pt[a]+"Width",!0,i))):(u+=I.css(t,"padding"+pt[a],!0,i),"padding"!==n?u+=I.css(t,"border"+pt[a]+"Width",!0,i):s+=I.css(t,"border"+pt[a]+"Width",!0,i));return!r&&o>=0&&(u+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-o-u-s-.5))||0),u+c}function le(t,e,n){var r=Xt(t),i=(!m.boxSizingReliable()||n)&&"border-box"===I.css(t,"boxSizing",!1,r),o=i,a=Zt(t,e,r),s="offset"+e[0].toUpperCase()+e.slice(1);if(Kt.test(a)){if(!n)return a;a="auto"}return(!m.boxSizingReliable()&&i||!m.reliableTrDimensions()&&E(t,"tr")||"auto"===a||!parseFloat(a)&&"inline"===I.css(t,"display",!1,r))&&t.getClientRects().length&&(i="border-box"===I.css(t,"boxSizing",!1,r),(o=s in t)&&(a=t[s])),(a=parseFloat(a)||0)+ce(t,e,n||(i?"border":"content"),o,r,a)+"px"}function he(t,e,n,r,i){return new he.prototype.init(t,e,n,r,i)}I.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Zt(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(t,e,n,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,o,a,s=it(e),u=Yt.test(e),c=t.style;if(u||(e=ie(s)),a=I.cssHooks[e]||I.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(t,!1,r))?i:c[e];"string"===(o=typeof n)&&(i=ft.exec(n))&&i[1]&&(n=bt(t,e,i),o="number"),null!=n&&n==n&&("number"!==o||u||(n+=i&&i[3]||(I.cssNumber[s]?"":"px")),m.clearCloneStyle||""!==n||0!==e.indexOf("background")||(c[e]="inherit"),a&&"set"in a&&void 0===(n=a.set(t,n,r))||(u?c.setProperty(e,n):c[e]=n))}},css:function(t,e,n,r){var i,o,a,s=it(e);return Yt.test(e)||(e=ie(s)),(a=I.cssHooks[e]||I.cssHooks[s])&&"get"in a&&(i=a.get(t,!0,n)),void 0===i&&(i=Zt(t,e,r)),"normal"===i&&e in se&&(i=se[e]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),I.each(["height","width"],(function(t,e){I.cssHooks[e]={get:function(t,n,r){if(n)return!oe.test(I.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?le(t,e,r):Qt(t,ae,(function(){return le(t,e,r)}))},set:function(t,n,r){var i,o=Xt(t),a=!m.scrollboxSize()&&"absolute"===o.position,s=(a||r)&&"border-box"===I.css(t,"boxSizing",!1,o),u=r?ce(t,e,r,s,o):0;return s&&a&&(u-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(o[e])-ce(t,e,"border",!1,o)-.5)),u&&(i=ft.exec(n))&&"px"!==(i[3]||"px")&&(t.style[e]=n,n=I.css(t,e)),ue(0,n,u)}}})),I.cssHooks.marginLeft=te(m.reliableMarginLeft,(function(t,e){if(e)return(parseFloat(Zt(t,"marginLeft"))||t.getBoundingClientRect().left-Qt(t,{marginLeft:0},(function(){return t.getBoundingClientRect().left})))+"px"})),I.each({margin:"",padding:"",border:"Width"},(function(t,e){I.cssHooks[t+e]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[t+pt[r]+e]=o[r]||o[r-2]||o[0];return i}},"margin"!==t&&(I.cssHooks[t+e].set=ue)})),I.fn.extend({css:function(t,e){return tt(this,(function(t,e,n){var r,i,o={},a=0;if(Array.isArray(e)){for(r=Xt(t),i=e.length;a<i;a++)o[e[a]]=I.css(t,e[a],!1,r);return o}return void 0!==n?I.style(t,e,n):I.css(t,e)}),t,e,arguments.length>1)}}),I.Tween=he,he.prototype={constructor:he,init:function(t,e,n,r,i,o){this.elem=t,this.prop=n,this.easing=i||I.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=o||(I.cssNumber[n]?"":"px")},cur:function(){var t=he.propHooks[this.prop];return t&&t.get?t.get(this):he.propHooks._default.get(this)},run:function(t){var e,n=he.propHooks[this.prop];return this.options.duration?this.pos=e=I.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):he.propHooks._default.set(this),this}},he.prototype.init.prototype=he.prototype,he.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=I.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){I.fx.step[t.prop]?I.fx.step[t.prop](t):1!==t.elem.nodeType||!I.cssHooks[t.prop]&&null==t.elem.style[ie(t.prop)]?t.elem[t.prop]=t.now:I.style(t.elem,t.prop,t.now+t.unit)}}},he.propHooks.scrollTop=he.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},I.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},I.fx=he.prototype.init,I.fx.step={};var de,fe,pe=/^(?:toggle|show|hide)$/,ge=/queueHooks$/;function me(){fe&&(!1===b.hidden&&r.requestAnimationFrame?r.requestAnimationFrame(me):r.setTimeout(me,I.fx.interval),I.fx.tick())}function ve(){return r.setTimeout((function(){de=void 0})),de=Date.now()}function ye(t,e){var n,r=0,i={height:t};for(e=e?1:0;r<4;r+=2-e)i["margin"+(n=pt[r])]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function be(t,e,n){for(var r,i=(_e.tweeners[e]||[]).concat(_e.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,e,t))return r}function _e(t,e,n){var r,i,o=0,a=_e.prefilters.length,s=I.Deferred().always((function(){delete u.elem})),u=function(){if(i)return!1;for(var e=de||ve(),n=Math.max(0,c.startTime+c.duration-e),r=1-(n/c.duration||0),o=0,a=c.tweens.length;o<a;o++)c.tweens[o].run(r);return s.notifyWith(t,[c,r,n]),r<1&&a?n:(a||s.notifyWith(t,[c,1,0]),s.resolveWith(t,[c]),!1)},c=s.promise({elem:t,props:I.extend({},e),opts:I.extend(!0,{specialEasing:{},easing:I.easing._default},n),originalProperties:e,originalOptions:n,startTime:de||ve(),duration:n.duration,tweens:[],createTween:function(e,n){var r=I.Tween(t,c.opts,e,n,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(r),r},stop:function(e){var n=0,r=e?c.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)c.tweens[n].run(1);return e?(s.notifyWith(t,[c,1,0]),s.resolveWith(t,[c,e])):s.rejectWith(t,[c,e]),this}}),l=c.props;for(!function(t,e){var n,r,i,o,a;for(n in t)if(i=e[r=it(n)],o=t[n],Array.isArray(o)&&(i=o[1],o=t[n]=o[0]),n!==r&&(t[r]=o,delete t[n]),(a=I.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete t[r],o)n in t||(t[n]=o[n],e[n]=i);else e[r]=i}(l,c.opts.specialEasing);o<a;o++)if(r=_e.prefilters[o].call(c,t,l,c.opts))return v(r.stop)&&(I._queueHooks(c.elem,c.opts.queue).stop=r.stop.bind(r)),r;return I.map(l,be,c),v(c.opts.start)&&c.opts.start.call(t,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),I.fx.timer(I.extend(u,{elem:t,anim:c,queue:c.opts.queue})),c}I.Animation=I.extend(_e,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return bt(n.elem,t,ft.exec(e),n),n}]},tweener:function(t,e){v(t)?(e=t,t=["*"]):t=t.match(W);for(var n,r=0,i=t.length;r<i;r++)n=t[r],_e.tweeners[n]=_e.tweeners[n]||[],_e.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var r,i,o,a,s,u,c,l,h="width"in e||"height"in e,d=this,f={},p=t.style,g=t.nodeType&&yt(t),m=st.get(t,"fxshow");for(r in n.queue||(null==(a=I._queueHooks(t,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,d.always((function(){d.always((function(){a.unqueued--,I.queue(t,"fx").length||a.empty.fire()}))}))),e)if(i=e[r],pe.test(i)){if(delete e[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!m||void 0===m[r])continue;g=!0}f[r]=m&&m[r]||I.style(t,r)}if((u=!I.isEmptyObject(e))||!I.isEmptyObject(f))for(r in h&&1===t.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(c=m&&m.display)&&(c=st.get(t,"display")),"none"===(l=I.css(t,"display"))&&(c?l=c:(St([t],!0),c=t.style.display||c,l=I.css(t,"display"),St([t]))),("inline"===l||"inline-block"===l&&null!=c)&&"none"===I.css(t,"float")&&(u||(d.done((function(){p.display=c})),null==c&&(l=p.display,c="none"===l?"":l)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",d.always((function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}))),u=!1,f)u||(m?"hidden"in m&&(g=m.hidden):m=st.access(t,"fxshow",{display:c}),o&&(m.hidden=!g),g&&St([t],!0),d.done((function(){for(r in g||St([t]),st.remove(t,"fxshow"),f)I.style(t,r,f[r])}))),u=be(g?m[r]:0,r,d),r in m||(m[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(t,e){e?_e.prefilters.unshift(t):_e.prefilters.push(t)}}),I.speed=function(t,e,n){var r=t&&"object"==typeof t?I.extend({},t):{complete:n||!n&&e||v(t)&&t,duration:t,easing:n&&e||e&&!v(e)&&e};return I.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in I.fx.speeds?r.duration=I.fx.speeds[r.duration]:r.duration=I.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){v(r.old)&&r.old.call(this),r.queue&&I.dequeue(this,r.queue)},r},I.fn.extend({fadeTo:function(t,e,n,r){return this.filter(yt).css("opacity",0).show().end().animate({opacity:e},t,n,r)},animate:function(t,e,n,r){var i=I.isEmptyObject(t),o=I.speed(e,n,r),a=function(){var e=_e(this,I.extend({},t),o);(i||st.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(t,e,n){var r=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&this.queue(t||"fx",[]),this.each((function(){var e=!0,i=null!=t&&t+"queueHooks",o=I.timers,a=st.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&ge.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=t&&o[i].queue!==t||(o[i].anim.stop(n),e=!1,o.splice(i,1));!e&&n||I.dequeue(this,t)}))},finish:function(t){return!1!==t&&(t=t||"fx"),this.each((function(){var e,n=st.get(this),r=n[t+"queue"],i=n[t+"queueHooks"],o=I.timers,a=r?r.length:0;for(n.finish=!0,I.queue(this,t,[]),i&&i.stop&&i.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<a;e++)r[e]&&r[e].finish&&r[e].finish.call(this);delete n.finish}))}}),I.each(["toggle","show","hide"],(function(t,e){var n=I.fn[e];I.fn[e]=function(t,r,i){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(ye(e,!0),t,r,i)}})),I.each({slideDown:ye("show"),slideUp:ye("hide"),slideToggle:ye("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(t,e){I.fn[t]=function(t,n,r){return this.animate(e,t,n,r)}})),I.timers=[],I.fx.tick=function(){var t,e=0,n=I.timers;for(de=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||I.fx.stop(),de=void 0},I.fx.timer=function(t){I.timers.push(t),I.fx.start()},I.fx.interval=13,I.fx.start=function(){fe||(fe=!0,me())},I.fx.stop=function(){fe=null},I.fx.speeds={slow:600,fast:200,_default:400},I.fn.delay=function(t,e){return t=I.fx&&I.fx.speeds[t]||t,e=e||"fx",this.queue(e,(function(e,n){var i=r.setTimeout(e,t);n.stop=function(){r.clearTimeout(i)}}))},function(){var t=b.createElement("input"),e=b.createElement("select").appendChild(b.createElement("option"));t.type="checkbox",m.checkOn=""!==t.value,m.optSelected=e.selected,(t=b.createElement("input")).value="t",t.type="radio",m.radioValue="t"===t.value}();var we,Se=I.expr.attrHandle;I.fn.extend({attr:function(t,e){return tt(this,I.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each((function(){I.removeAttr(this,t)}))}}),I.extend({attr:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?I.prop(t,e,n):(1===o&&I.isXMLDoc(t)||(i=I.attrHooks[e.toLowerCase()]||(I.expr.match.bool.test(e)?we:void 0)),void 0!==n?null===n?void I.removeAttr(t,e):i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:(t.setAttribute(e,n+""),n):i&&"get"in i&&null!==(r=i.get(t,e))?r:null==(r=I.find.attr(t,e))?void 0:r)},attrHooks:{type:{set:function(t,e){if(!m.radioValue&&"radio"===e&&E(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,r=0,i=e&&e.match(W);if(i&&1===t.nodeType)for(;n=i[r++];)t.removeAttribute(n)}}),we={set:function(t,e,n){return!1===e?I.removeAttr(t,n):t.setAttribute(n,n),n}},I.each(I.expr.match.bool.source.match(/\w+/g),(function(t,e){var n=Se[e]||I.find.attr;Se[e]=function(t,e,r){var i,o,a=e.toLowerCase();return r||(o=Se[a],Se[a]=i,i=null!=n(t,e,r)?a:null,Se[a]=o),i}}));var Te=/^(?:input|select|textarea|button)$/i,xe=/^(?:a|area)$/i;function Ie(t){return(t.match(W)||[]).join(" ")}function ke(t){return t.getAttribute&&t.getAttribute("class")||""}function Ee(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(W)||[]}I.fn.extend({prop:function(t,e){return tt(this,I.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each((function(){delete this[I.propFix[t]||t]}))}}),I.extend({prop:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&I.isXMLDoc(t)||(e=I.propFix[e]||e,i=I.propHooks[e]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:t[e]=n:i&&"get"in i&&null!==(r=i.get(t,e))?r:t[e]},propHooks:{tabIndex:{get:function(t){var e=I.find.attr(t,"tabindex");return e?parseInt(e,10):Te.test(t.nodeName)||xe.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(I.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),I.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){I.propFix[this.toLowerCase()]=this})),I.fn.extend({addClass:function(t){var e,n,r,i,o,a;return v(t)?this.each((function(e){I(this).addClass(t.call(this,e,ke(this)))})):(e=Ee(t)).length?this.each((function(){if(r=ke(this),n=1===this.nodeType&&" "+Ie(r)+" "){for(o=0;o<e.length;o++)i=e[o],n.indexOf(" "+i+" ")<0&&(n+=i+" ");a=Ie(n),r!==a&&this.setAttribute("class",a)}})):this},removeClass:function(t){var e,n,r,i,o,a;return v(t)?this.each((function(e){I(this).removeClass(t.call(this,e,ke(this)))})):arguments.length?(e=Ee(t)).length?this.each((function(){if(r=ke(this),n=1===this.nodeType&&" "+Ie(r)+" "){for(o=0;o<e.length;o++)for(i=e[o];n.indexOf(" "+i+" ")>-1;)n=n.replace(" "+i+" "," ");a=Ie(n),r!==a&&this.setAttribute("class",a)}})):this:this.attr("class","")},toggleClass:function(t,e){var n,r,i,o,a=typeof t,s="string"===a||Array.isArray(t);return v(t)?this.each((function(n){I(this).toggleClass(t.call(this,n,ke(this),e),e)})):"boolean"==typeof e&&s?e?this.addClass(t):this.removeClass(t):(n=Ee(t),this.each((function(){if(s)for(o=I(this),i=0;i<n.length;i++)r=n[i],o.hasClass(r)?o.removeClass(r):o.addClass(r);else void 0!==t&&"boolean"!==a||((r=ke(this))&&st.set(this,"__className__",r),this.setAttribute&&this.setAttribute("class",r||!1===t?"":st.get(this,"__className__")||""))})))},hasClass:function(t){var e,n,r=0;for(e=" "+t+" ";n=this[r++];)if(1===n.nodeType&&(" "+Ie(ke(n))+" ").indexOf(e)>-1)return!0;return!1}});var Ce=/\r/g;I.fn.extend({val:function(t){var e,n,r,i=this[0];return arguments.length?(r=v(t),this.each((function(n){var i;1===this.nodeType&&(null==(i=r?t.call(this,n,I(this).val()):t)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=I.map(i,(function(t){return null==t?"":t+""}))),(e=I.valHooks[this.type]||I.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,i,"value")||(this.value=i))}))):i?(e=I.valHooks[i.type]||I.valHooks[i.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(Ce,""):null==n?"":n:void 0}}),I.extend({valHooks:{option:{get:function(t){var e=I.find.attr(t,"value");return null!=e?e:Ie(I.text(t))}},select:{get:function(t){var e,n,r,i=t.options,o=t.selectedIndex,a="select-one"===t.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!E(n.parentNode,"optgroup"))){if(e=I(n).val(),a)return e;s.push(e)}return s},set:function(t,e){for(var n,r,i=t.options,o=I.makeArray(e),a=i.length;a--;)((r=i[a]).selected=I.inArray(I.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),I.each(["radio","checkbox"],(function(){I.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=I.inArray(I(t).val(),e)>-1}},m.checkOn||(I.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}));var Ne=r.location,Ae={guid:Date.now()},Pe=/\?/;I.parseXML=function(t){var e,n;if(!t||"string"!=typeof t)return null;try{e=(new r.DOMParser).parseFromString(t,"text/xml")}catch(t){}return n=e&&e.getElementsByTagName("parsererror")[0],e&&!n||I.error("Invalid XML: "+(n?I.map(n.childNodes,(function(t){return t.textContent})).join("\n"):t)),e};var Re=/^(?:focusinfocus|focusoutblur)$/,De=function(t){t.stopPropagation()};I.extend(I.event,{trigger:function(t,e,n,i){var o,a,s,u,c,l,h,d,p=[n||b],g=f.call(t,"type")?t.type:t,m=f.call(t,"namespace")?t.namespace.split("."):[];if(a=d=s=n=n||b,3!==n.nodeType&&8!==n.nodeType&&!Re.test(g+I.event.triggered)&&(g.indexOf(".")>-1&&(m=g.split("."),g=m.shift(),m.sort()),c=g.indexOf(":")<0&&"on"+g,(t=t[I.expando]?t:new I.Event(g,"object"==typeof t&&t)).isTrigger=i?2:3,t.namespace=m.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),e=null==e?[t]:I.makeArray(e,[t]),h=I.event.special[g]||{},i||!h.trigger||!1!==h.trigger.apply(n,e))){if(!i&&!h.noBubble&&!y(n)){for(u=h.delegateType||g,Re.test(u+g)||(a=a.parentNode);a;a=a.parentNode)p.push(a),s=a;s===(n.ownerDocument||b)&&p.push(s.defaultView||s.parentWindow||r)}for(o=0;(a=p[o++])&&!t.isPropagationStopped();)d=a,t.type=o>1?u:h.bindType||g,(l=(st.get(a,"events")||Object.create(null))[t.type]&&st.get(a,"handle"))&&l.apply(a,e),(l=c&&a[c])&&l.apply&&ot(a)&&(t.result=l.apply(a,e),!1===t.result&&t.preventDefault());return t.type=g,i||t.isDefaultPrevented()||h._default&&!1!==h._default.apply(p.pop(),e)||!ot(n)||c&&v(n[g])&&!y(n)&&((s=n[c])&&(n[c]=null),I.event.triggered=g,t.isPropagationStopped()&&d.addEventListener(g,De),n[g](),t.isPropagationStopped()&&d.removeEventListener(g,De),I.event.triggered=void 0,s&&(n[c]=s)),t.result}},simulate:function(t,e,n){var r=I.extend(new I.Event,n,{type:t,isSimulated:!0});I.event.trigger(r,null,e)}}),I.fn.extend({trigger:function(t,e){return this.each((function(){I.event.trigger(t,e,this)}))},triggerHandler:function(t,e){var n=this[0];if(n)return I.event.trigger(t,e,n,!0)}});var Me=/\[\]$/,Oe=/\r?\n/g,Le=/^(?:submit|button|image|reset|file)$/i,Fe=/^(?:input|select|textarea|keygen)/i;function je(t,e,n,r){var i;if(Array.isArray(e))I.each(e,(function(e,i){n||Me.test(t)?r(t,i):je(t+"["+("object"==typeof i&&null!=i?e:"")+"]",i,n,r)}));else if(n||"object"!==S(e))r(t,e);else for(i in e)je(t+"["+i+"]",e[i],n,r)}I.param=function(t,e){var n,r=[],i=function(t,e){var n=v(e)?e():e;r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!I.isPlainObject(t))I.each(t,(function(){i(this.name,this.value)}));else for(n in t)je(n,t[n],e,i);return r.join("&")},I.fn.extend({serialize:function(){return I.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var t=I.prop(this,"elements");return t?I.makeArray(t):this})).filter((function(){var t=this.type;return this.name&&!I(this).is(":disabled")&&Fe.test(this.nodeName)&&!Le.test(t)&&(this.checked||!It.test(t))})).map((function(t,e){var n=I(this).val();return null==n?null:Array.isArray(n)?I.map(n,(function(t){return{name:e.name,value:t.replace(Oe,"\r\n")}})):{name:e.name,value:n.replace(Oe,"\r\n")}})).get()}});var Be=/%20/g,Ge=/#.*$/,Ue=/([?&])_=[^&]*/,Ve=/^(.*?):[ \t]*([^\r\n]*)$/gm,qe=/^(?:GET|HEAD)$/,ze=/^\/\//,He={},$e={},We="*/".concat("*"),Ke=b.createElement("a");function Ye(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var r,i=0,o=e.toLowerCase().match(W)||[];if(v(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(t[r]=t[r]||[]).unshift(n)):(t[r]=t[r]||[]).push(n)}}function Xe(t,e,n,r){var i={},o=t===$e;function a(s){var u;return i[s]=!0,I.each(t[s]||[],(function(t,s){var c=s(e,n,r);return"string"!=typeof c||o||i[c]?o?!(u=c):void 0:(e.dataTypes.unshift(c),a(c),!1)})),u}return a(e.dataTypes[0])||!i["*"]&&a("*")}function Qe(t,e){var n,r,i=I.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((i[n]?t:r||(r={}))[n]=e[n]);return r&&I.extend(!0,t,r),t}Ke.href=Ne.href,I.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ne.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ne.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":We,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":I.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Qe(Qe(t,I.ajaxSettings),e):Qe(I.ajaxSettings,t)},ajaxPrefilter:Ye(He),ajaxTransport:Ye($e),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,i,o,a,s,u,c,l,h,d,f=I.ajaxSetup({},e),p=f.context||f,g=f.context&&(p.nodeType||p.jquery)?I(p):I.event,m=I.Deferred(),v=I.Callbacks("once memory"),y=f.statusCode||{},_={},w={},S="canceled",T={readyState:0,getResponseHeader:function(t){var e;if(c){if(!a)for(a={};e=Ve.exec(o);)a[e[1].toLowerCase()+" "]=(a[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=a[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return c?o:null},setRequestHeader:function(t,e){return null==c&&(t=w[t.toLowerCase()]=w[t.toLowerCase()]||t,_[t]=e),this},overrideMimeType:function(t){return null==c&&(f.mimeType=t),this},statusCode:function(t){var e;if(t)if(c)T.always(t[T.status]);else for(e in t)y[e]=[y[e],t[e]];return this},abort:function(t){var e=t||S;return n&&n.abort(e),x(0,e),this}};if(m.promise(T),f.url=((t||f.url||Ne.href)+"").replace(ze,Ne.protocol+"//"),f.type=e.method||e.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(W)||[""],null==f.crossDomain){u=b.createElement("a");try{u.href=f.url,u.href=u.href,f.crossDomain=Ke.protocol+"//"+Ke.host!=u.protocol+"//"+u.host}catch(t){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=I.param(f.data,f.traditional)),Xe(He,f,e,T),c)return T;for(h in(l=I.event&&f.global)&&0==I.active++&&I.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!qe.test(f.type),i=f.url.replace(Ge,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(Be,"+")):(d=f.url.slice(i.length),f.data&&(f.processData||"string"==typeof f.data)&&(i+=(Pe.test(i)?"&":"?")+f.data,delete f.data),!1===f.cache&&(i=i.replace(Ue,"$1"),d=(Pe.test(i)?"&":"?")+"_="+Ae.guid+++d),f.url=i+d),f.ifModified&&(I.lastModified[i]&&T.setRequestHeader("If-Modified-Since",I.lastModified[i]),I.etag[i]&&T.setRequestHeader("If-None-Match",I.etag[i])),(f.data&&f.hasContent&&!1!==f.contentType||e.contentType)&&T.setRequestHeader("Content-Type",f.contentType),T.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+We+"; q=0.01":""):f.accepts["*"]),f.headers)T.setRequestHeader(h,f.headers[h]);if(f.beforeSend&&(!1===f.beforeSend.call(p,T,f)||c))return T.abort();if(S="abort",v.add(f.complete),T.done(f.success),T.fail(f.error),n=Xe($e,f,e,T)){if(T.readyState=1,l&&g.trigger("ajaxSend",[T,f]),c)return T;f.async&&f.timeout>0&&(s=r.setTimeout((function(){T.abort("timeout")}),f.timeout));try{c=!1,n.send(_,x)}catch(t){if(c)throw t;x(-1,t)}}else x(-1,"No Transport");function x(t,e,a,u){var h,d,b,_,w,S=e;c||(c=!0,s&&r.clearTimeout(s),n=void 0,o=u||"",T.readyState=t>0?4:0,h=t>=200&&t<300||304===t,a&&(_=function(t,e,n){for(var r,i,o,a,s=t.contents,u=t.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||t.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(f,T,a)),!h&&I.inArray("script",f.dataTypes)>-1&&I.inArray("json",f.dataTypes)<0&&(f.converters["text script"]=function(){}),_=function(t,e,n,r){var i,o,a,s,u,c={},l=t.dataTypes.slice();if(l[1])for(a in t.converters)c[a.toLowerCase()]=t.converters[a];for(o=l.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!u&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),u=o,o=l.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=c[u+" "+o]||c["* "+o]))for(i in c)if((s=i.split(" "))[1]===o&&(a=c[u+" "+s[0]]||c["* "+s[0]])){!0===a?a=c[i]:!0!==c[i]&&(o=s[0],l.unshift(s[1]));break}if(!0!==a)if(a&&t.throws)e=a(e);else try{e=a(e)}catch(t){return{state:"parsererror",error:a?t:"No conversion from "+u+" to "+o}}}return{state:"success",data:e}}(f,_,T,h),h?(f.ifModified&&((w=T.getResponseHeader("Last-Modified"))&&(I.lastModified[i]=w),(w=T.getResponseHeader("etag"))&&(I.etag[i]=w)),204===t||"HEAD"===f.type?S="nocontent":304===t?S="notmodified":(S=_.state,d=_.data,h=!(b=_.error))):(b=S,!t&&S||(S="error",t<0&&(t=0))),T.status=t,T.statusText=(e||S)+"",h?m.resolveWith(p,[d,S,T]):m.rejectWith(p,[T,S,b]),T.statusCode(y),y=void 0,l&&g.trigger(h?"ajaxSuccess":"ajaxError",[T,f,h?d:b]),v.fireWith(p,[T,S]),l&&(g.trigger("ajaxComplete",[T,f]),--I.active||I.event.trigger("ajaxStop")))}return T},getJSON:function(t,e,n){return I.get(t,e,n,"json")},getScript:function(t,e){return I.get(t,void 0,e,"script")}}),I.each(["get","post"],(function(t,e){I[e]=function(t,n,r,i){return v(n)&&(i=i||r,r=n,n=void 0),I.ajax(I.extend({url:t,type:e,dataType:i,data:n,success:r},I.isPlainObject(t)&&t))}})),I.ajaxPrefilter((function(t){var e;for(e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")})),I._evalUrl=function(t,e,n){return I.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){I.globalEval(t,e,n)}})},I.fn.extend({wrapAll:function(t){var e;return this[0]&&(v(t)&&(t=t.call(this[0])),e=I(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t})).append(this)),this},wrapInner:function(t){return v(t)?this.each((function(e){I(this).wrapInner(t.call(this,e))})):this.each((function(){var e=I(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)}))},wrap:function(t){var e=v(t);return this.each((function(n){I(this).wrapAll(e?t.call(this,n):t)}))},unwrap:function(t){return this.parent(t).not("body").each((function(){I(this).replaceWith(this.childNodes)})),this}}),I.expr.pseudos.hidden=function(t){return!I.expr.pseudos.visible(t)},I.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},I.ajaxSettings.xhr=function(){try{return new r.XMLHttpRequest}catch(t){}};var Je={0:200,1223:204},Ze=I.ajaxSettings.xhr();m.cors=!!Ze&&"withCredentials"in Ze,m.ajax=Ze=!!Ze,I.ajaxTransport((function(t){var e,n;if(m.cors||Ze&&!t.crossDomain)return{send:function(i,o){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];for(a in t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)s.setRequestHeader(a,i[a]);e=function(t){return function(){e&&(e=n=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===t?s.abort():"error"===t?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Je[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=e(),n=s.onerror=s.ontimeout=e("error"),void 0!==s.onabort?s.onabort=n:s.onreadystatechange=function(){4===s.readyState&&r.setTimeout((function(){e&&n()}))},e=e("abort");try{s.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}})),I.ajaxPrefilter((function(t){t.crossDomain&&(t.contents.script=!1)})),I.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return I.globalEval(t),t}}}),I.ajaxPrefilter("script",(function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")})),I.ajaxTransport("script",(function(t){var e,n;if(t.crossDomain||t.scriptAttrs)return{send:function(r,i){e=I("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&i("error"===t.type?404:200,t.type)}),b.head.appendChild(e[0])},abort:function(){n&&n()}}}));var tn,en=[],nn=/(=)\?(?=&|$)|\?\?/;I.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=en.pop()||I.expando+"_"+Ae.guid++;return this[t]=!0,t}}),I.ajaxPrefilter("json jsonp",(function(t,e,n){var i,o,a,s=!1!==t.jsonp&&(nn.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&nn.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=v(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(nn,"$1"+i):!1!==t.jsonp&&(t.url+=(Pe.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return a||I.error(i+" was not called"),a[0]},t.dataTypes[0]="json",o=r[i],r[i]=function(){a=arguments},n.always((function(){void 0===o?I(r).removeProp(i):r[i]=o,t[i]&&(t.jsonpCallback=e.jsonpCallback,en.push(i)),a&&v(o)&&o(a[0]),a=o=void 0})),"script"})),m.createHTMLDocument=((tn=b.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===tn.childNodes.length),I.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(m.createHTMLDocument?((r=(e=b.implementation.createHTMLDocument("")).createElement("base")).href=b.location.href,e.head.appendChild(r)):e=b),o=!n&&[],(i=G.exec(t))?[e.createElement(i[1])]:(i=Rt([t],e,o),o&&o.length&&I(o).remove(),I.merge([],i.childNodes)));var r,i,o},I.fn.load=function(t,e,n){var r,i,o,a=this,s=t.indexOf(" ");return s>-1&&(r=Ie(t.slice(s)),t=t.slice(0,s)),v(e)?(n=e,e=void 0):e&&"object"==typeof e&&(i="POST"),a.length>0&&I.ajax({url:t,type:i||"GET",dataType:"html",data:e}).done((function(t){o=arguments,a.html(r?I("<div>").append(I.parseHTML(t)).find(r):t)})).always(n&&function(t,e){a.each((function(){n.apply(this,o||[t.responseText,e,t])}))}),this},I.expr.pseudos.animated=function(t){return I.grep(I.timers,(function(e){return t===e.elem})).length},I.offset={setOffset:function(t,e,n){var r,i,o,a,s,u,c=I.css(t,"position"),l=I(t),h={};"static"===c&&(t.style.position="relative"),s=l.offset(),o=I.css(t,"top"),u=I.css(t,"left"),("absolute"===c||"fixed"===c)&&(o+u).indexOf("auto")>-1?(a=(r=l.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),v(e)&&(e=e.call(t,n,I.extend({},s))),null!=e.top&&(h.top=e.top-s.top+a),null!=e.left&&(h.left=e.left-s.left+i),"using"in e?e.using.call(t,h):l.css(h)}},I.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each((function(e){I.offset.setOffset(this,t,e)}));var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,r=this[0],i={top:0,left:0};if("fixed"===I.css(r,"position"))e=r.getBoundingClientRect();else{for(e=this.offset(),n=r.ownerDocument,t=r.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===I.css(t,"position");)t=t.parentNode;t&&t!==r&&1===t.nodeType&&((i=I(t).offset()).top+=I.css(t,"borderTopWidth",!0),i.left+=I.css(t,"borderLeftWidth",!0))}return{top:e.top-i.top-I.css(r,"marginTop",!0),left:e.left-i.left-I.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent;t&&"static"===I.css(t,"position");)t=t.offsetParent;return t||gt}))}}),I.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(t,e){var n="pageYOffset"===e;I.fn[t]=function(r){return tt(this,(function(t,r,i){var o;if(y(t)?o=t:9===t.nodeType&&(o=t.defaultView),void 0===i)return o?o[e]:t[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):t[r]=i}),t,r,arguments.length)}})),I.each(["top","left"],(function(t,e){I.cssHooks[e]=te(m.pixelPosition,(function(t,n){if(n)return n=Zt(t,e),Kt.test(n)?I(t).position()[e]+"px":n}))})),I.each({Height:"height",Width:"width"},(function(t,e){I.each({padding:"inner"+t,content:e,"":"outer"+t},(function(n,r){I.fn[r]=function(i,o){var a=arguments.length&&(n||"boolean"!=typeof i),s=n||(!0===i||!0===o?"margin":"border");return tt(this,(function(e,n,i){var o;return y(e)?0===r.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===i?I.css(e,n,s):I.style(e,n,i,s)}),e,a?i:void 0,a)}}))})),I.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(t,e){I.fn[e]=function(t){return this.on(e,t)}})),I.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,r){return this.on(e,t,n,r)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},hover:function(t,e){return this.on("mouseenter",t).on("mouseleave",e||t)}}),I.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(t,e){I.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}));var rn=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;I.proxy=function(t,e){var n,r,i;if("string"==typeof e&&(n=t[e],e=t,t=n),v(t))return r=s.call(arguments,2),i=function(){return t.apply(e||this,r.concat(s.call(arguments)))},i.guid=t.guid=t.guid||I.guid++,i},I.holdReady=function(t){t?I.readyWait++:I.ready(!0)},I.isArray=Array.isArray,I.parseJSON=JSON.parse,I.nodeName=E,I.isFunction=v,I.isWindow=y,I.camelCase=it,I.type=S,I.now=Date.now,I.isNumeric=function(t){var e=I.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},I.trim=function(t){return null==t?"":(t+"").replace(rn,"$1")},void 0===(n=function(){return I}.apply(e,[]))||(t.exports=n);var on=r.jQuery,an=r.$;return I.noConflict=function(t){return r.$===I&&(r.$=an),t&&r.jQuery===I&&(r.jQuery=on),I},void 0===i&&(r.jQuery=r.$=I),I}))},3760:t=>{"use strict";var e,n,r,i,o,a,s,u,c=(e="https://api.spotify.com/v1",n=null,r=null,i=function(t,e){return t.abort=e,t},o=function(){var t=Array.prototype.slice.call(arguments),e=t[0],n=t.slice(1);return e=e||{},n.forEach((function(t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})),e},a=function(t,e){var o=new XMLHttpRequest,a=function(r,i){var a=t.type||"GET";if(o.open(a,function(t,e){var n="";for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];n+=encodeURIComponent(r)+"="+encodeURIComponent(i)+"&"}return n.length>0&&(t=t+"?"+(n=n.substring(0,n.length-1))),t}(t.url,t.params)),n&&o.setRequestHeader("Authorization","Bearer "+n),o.onreadystatechange=function(){if(4===o.readyState){var t=null;try{t=o.responseText?JSON.parse(o.responseText):""}catch(t){console.error(t)}o.status>=200&&o.status<300?function(t){r&&r(t),e&&e(null,t)}(t):(i&&i(o),e&&e(o,null))}},"GET"===a)o.send(null);else{var s=null;t.postData&&("image/jpeg"===t.contentType?(s=t.postData,o.setRequestHeader("Content-Type",t.contentType)):(s=JSON.stringify(t.postData),o.setRequestHeader("Content-Type","application/json"))),o.send(s)}};return e?(a(),null):function(t,e){var n;if(null!==r){var o=r.defer();t((function(t){o.resolve(t)}),(function(t){o.reject(t)})),n=o.promise}else window.Promise&&(n=new window.Promise(t));return n?new i(n,e):null}(a,(function(){o.abort()}))},s=function(t,e,n,r){var i={},s=null;return"object"==typeof e?(i=e,s=n):"function"==typeof e&&(s=e),"GET"!==(t.type||"GET")&&t.postData&&!r?t.postData=o(t.postData,i):t.params=o(t.params,i),a(t,s)},((u=function(){}).prototype={constructor:c}).getGeneric=function(t,e){return s({url:t},e)},u.prototype.getMe=function(t,n){return s({url:e+"/me"},t,n)},u.prototype.getMySavedTracks=function(t,n){return s({url:e+"/me/tracks"},t,n)},u.prototype.addToMySavedTracks=function(t,n,r){return s({url:e+"/me/tracks",type:"PUT",postData:t},n,r)},u.prototype.removeFromMySavedTracks=function(t,n,r){return s({url:e+"/me/tracks",type:"DELETE",postData:t},n,r)},u.prototype.containsMySavedTracks=function(t,n,r){var i={url:e+"/me/tracks/contains",params:{ids:t.join(",")}};return s(i,n,r)},u.prototype.getMySavedAlbums=function(t,n){return s({url:e+"/me/albums"},t,n)},u.prototype.addToMySavedAlbums=function(t,n,r){return s({url:e+"/me/albums",type:"PUT",postData:t},n,r)},u.prototype.removeFromMySavedAlbums=function(t,n,r){return s({url:e+"/me/albums",type:"DELETE",postData:t},n,r)},u.prototype.containsMySavedAlbums=function(t,n,r){var i={url:e+"/me/albums/contains",params:{ids:t.join(",")}};return s(i,n,r)},u.prototype.getMyTopArtists=function(t,n){return s({url:e+"/me/top/artists"},t,n)},u.prototype.getMyTopTracks=function(t,n){return s({url:e+"/me/top/tracks"},t,n)},u.prototype.getMyRecentlyPlayedTracks=function(t,n){return s({url:e+"/me/player/recently-played"},t,n)},u.prototype.followUsers=function(t,n){var r={url:e+"/me/following/",type:"PUT",params:{ids:t.join(","),type:"user"}};return s(r,n)},u.prototype.followArtists=function(t,n){var r={url:e+"/me/following/",type:"PUT",params:{ids:t.join(","),type:"artist"}};return s(r,n)},u.prototype.followPlaylist=function(t,n,r){return s({url:e+"/playlists/"+t+"/followers",type:"PUT",postData:{}},n,r)},u.prototype.unfollowUsers=function(t,n){var r={url:e+"/me/following/",type:"DELETE",params:{ids:t.join(","),type:"user"}};return s(r,n)},u.prototype.unfollowArtists=function(t,n){var r={url:e+"/me/following/",type:"DELETE",params:{ids:t.join(","),type:"artist"}};return s(r,n)},u.prototype.unfollowPlaylist=function(t,n){return s({url:e+"/playlists/"+t+"/followers",type:"DELETE"},n)},u.prototype.isFollowingUsers=function(t,n){var r={url:e+"/me/following/contains",type:"GET",params:{ids:t.join(","),type:"user"}};return s(r,n)},u.prototype.isFollowingArtists=function(t,n){var r={url:e+"/me/following/contains",type:"GET",params:{ids:t.join(","),type:"artist"}};return s(r,n)},u.prototype.areFollowingPlaylist=function(t,n,r){var i={url:e+"/playlists/"+t+"/followers/contains",type:"GET",params:{ids:n.join(",")}};return s(i,r)},u.prototype.getFollowedArtists=function(t,n){return s({url:e+"/me/following",type:"GET",params:{type:"artist"}},t,n)},u.prototype.getUser=function(t,n,r){var i={url:e+"/users/"+encodeURIComponent(t)};return s(i,n,r)},u.prototype.getUserPlaylists=function(t,n,r){var i;return"string"==typeof t?i={url:e+"/users/"+encodeURIComponent(t)+"/playlists"}:(i={url:e+"/me/playlists"},r=n,n=t),s(i,n,r)},u.prototype.getPlaylist=function(t,n,r){return s({url:e+"/playlists/"+t},n,r)},u.prototype.getPlaylistTracks=function(t,n,r){return s({url:e+"/playlists/"+t+"/tracks"},n,r)},u.prototype.getPlaylistCoverImage=function(t,n){return s({url:e+"/playlists/"+t+"/images"},n)},u.prototype.createPlaylist=function(t,n,r){var i={url:e+"/users/"+encodeURIComponent(t)+"/playlists",type:"POST",postData:n};return s(i,n,r)},u.prototype.changePlaylistDetails=function(t,n,r){return s({url:e+"/playlists/"+t,type:"PUT",postData:n},n,r)},u.prototype.addTracksToPlaylist=function(t,n,r,i){return s({url:e+"/playlists/"+t+"/tracks",type:"POST",postData:{uris:n}},r,i,!0)},u.prototype.replaceTracksInPlaylist=function(t,n,r){return s({url:e+"/playlists/"+t+"/tracks",type:"PUT",postData:{uris:n}},{},r)},u.prototype.reorderTracksInPlaylist=function(t,n,r,i,o){return s({url:e+"/playlists/"+t+"/tracks",type:"PUT",postData:{range_start:n,insert_before:r}},i,o)},u.prototype.removeTracksFromPlaylist=function(t,n,r){var i=n.map((function(t){return"string"==typeof t?{uri:t}:t}));return s({url:e+"/playlists/"+t+"/tracks",type:"DELETE",postData:{tracks:i}},{},r)},u.prototype.removeTracksFromPlaylistWithSnapshotId=function(t,n,r,i){var o=n.map((function(t){return"string"==typeof t?{uri:t}:t}));return s({url:e+"/playlists/"+t+"/tracks",type:"DELETE",postData:{tracks:o,snapshot_id:r}},{},i)},u.prototype.removeTracksFromPlaylistInPositions=function(t,n,r,i){return s({url:e+"/playlists/"+t+"/tracks",type:"DELETE",postData:{positions:n,snapshot_id:r}},{},i)},u.prototype.uploadCustomPlaylistCoverImage=function(t,n,r){var i={url:e+"/playlists/"+t+"/images",type:"PUT",postData:n.replace(/^data:image\/jpeg;base64,/,""),contentType:"image/jpeg"};return s(i,{},r)},u.prototype.getAlbum=function(t,n,r){return s({url:e+"/albums/"+t},n,r)},u.prototype.getAlbumTracks=function(t,n,r){return s({url:e+"/albums/"+t+"/tracks"},n,r)},u.prototype.getAlbums=function(t,n,r){var i={url:e+"/albums/",params:{ids:t.join(",")}};return s(i,n,r)},u.prototype.getTrack=function(t,n,r){var i={};return i.url=e+"/tracks/"+t,s(i,n,r)},u.prototype.getTracks=function(t,n,r){var i={url:e+"/tracks/",params:{ids:t.join(",")}};return s(i,n,r)},u.prototype.getArtist=function(t,n,r){return s({url:e+"/artists/"+t},n,r)},u.prototype.getArtists=function(t,n,r){var i={url:e+"/artists/",params:{ids:t.join(",")}};return s(i,n,r)},u.prototype.getArtistAlbums=function(t,n,r){return s({url:e+"/artists/"+t+"/albums"},n,r)},u.prototype.getArtistTopTracks=function(t,n,r,i){return s({url:e+"/artists/"+t+"/top-tracks",params:{country:n}},r,i)},u.prototype.getArtistRelatedArtists=function(t,n,r){return s({url:e+"/artists/"+t+"/related-artists"},n,r)},u.prototype.getFeaturedPlaylists=function(t,n){return s({url:e+"/browse/featured-playlists"},t,n)},u.prototype.getNewReleases=function(t,n){return s({url:e+"/browse/new-releases"},t,n)},u.prototype.getCategories=function(t,n){return s({url:e+"/browse/categories"},t,n)},u.prototype.getCategory=function(t,n,r){return s({url:e+"/browse/categories/"+t},n,r)},u.prototype.getCategoryPlaylists=function(t,n,r){return s({url:e+"/browse/categories/"+t+"/playlists"},n,r)},u.prototype.search=function(t,n,r,i){var o={url:e+"/search/",params:{q:t,type:n.join(",")}};return s(o,r,i)},u.prototype.searchAlbums=function(t,e,n){return this.search(t,["album"],e,n)},u.prototype.searchArtists=function(t,e,n){return this.search(t,["artist"],e,n)},u.prototype.searchTracks=function(t,e,n){return this.search(t,["track"],e,n)},u.prototype.searchPlaylists=function(t,e,n){return this.search(t,["playlist"],e,n)},u.prototype.searchShows=function(t,e,n){return this.search(t,["show"],e,n)},u.prototype.searchEpisodes=function(t,e,n){return this.search(t,["episode"],e,n)},u.prototype.getAudioFeaturesForTrack=function(t,n){var r={};return r.url=e+"/audio-features/"+t,s(r,{},n)},u.prototype.getAudioFeaturesForTracks=function(t,n){return s({url:e+"/audio-features",params:{ids:t}},{},n)},u.prototype.getAudioAnalysisForTrack=function(t,n){var r={};return r.url=e+"/audio-analysis/"+t,s(r,{},n)},u.prototype.getRecommendations=function(t,n){return s({url:e+"/recommendations"},t,n)},u.prototype.getAvailableGenreSeeds=function(t){return s({url:e+"/recommendations/available-genre-seeds"},{},t)},u.prototype.getMyDevices=function(t){return s({url:e+"/me/player/devices"},{},t)},u.prototype.getMyCurrentPlaybackState=function(t,n){return s({url:e+"/me/player"},t,n)},u.prototype.getMyCurrentPlayingTrack=function(t,n){return s({url:e+"/me/player/currently-playing"},t,n)},u.prototype.transferMyPlayback=function(t,n,r){var i=n||{};return i.device_ids=t,s({type:"PUT",url:e+"/me/player",postData:i},n,r)},u.prototype.play=function(t,n){var r="device_id"in(t=t||{})?{device_id:t.device_id}:null,i={};return["context_uri","uris","offset","position_ms"].forEach((function(e){e in t&&(i[e]=t[e])})),s({type:"PUT",url:e+"/me/player/play",params:r,postData:i},"function"==typeof t?t:{},n)},u.prototype.queue=function(t,n,r){var i="device_id"in(n=n||{})?{uri:t,device_id:n.device_id}:{uri:t};return s({type:"POST",url:e+"/me/player/queue",params:i},n,r)},u.prototype.pause=function(t,n){var r="device_id"in(t=t||{})?{device_id:t.device_id}:null;return s({type:"PUT",url:e+"/me/player/pause",params:r},t,n)},u.prototype.skipToNext=function(t,n){var r="device_id"in(t=t||{})?{device_id:t.device_id}:null;return s({type:"POST",url:e+"/me/player/next",params:r},t,n)},u.prototype.skipToPrevious=function(t,n){var r="device_id"in(t=t||{})?{device_id:t.device_id}:null;return s({type:"POST",url:e+"/me/player/previous",params:r},t,n)},u.prototype.seek=function(t,n,r){var i={position_ms:t};return"device_id"in(n=n||{})&&(i.device_id=n.device_id),s({type:"PUT",url:e+"/me/player/seek",params:i},n,r)},u.prototype.setRepeat=function(t,n,r){var i={state:t};return"device_id"in(n=n||{})&&(i.device_id=n.device_id),s({type:"PUT",url:e+"/me/player/repeat",params:i},n,r)},u.prototype.setVolume=function(t,n,r){var i={volume_percent:t};return"device_id"in(n=n||{})&&(i.device_id=n.device_id),s({type:"PUT",url:e+"/me/player/volume",params:i},n,r)},u.prototype.setShuffle=function(t,n,r){var i={state:t};return"device_id"in(n=n||{})&&(i.device_id=n.device_id),s({type:"PUT",url:e+"/me/player/shuffle",params:i},n,r)},u.prototype.getShow=function(t,n,r){var i={};return i.url=e+"/shows/"+t,s(i,n,r)},u.prototype.getShows=function(t,n,r){var i={url:e+"/shows/",params:{ids:t.join(",")}};return s(i,n,r)},u.prototype.getMySavedShows=function(t,n){return s({url:e+"/me/shows"},t,n)},u.prototype.addToMySavedShows=function(t,n,r){return s({url:e+"/me/shows",type:"PUT",postData:t},n,r)},u.prototype.removeFromMySavedShows=function(t,n,r){return s({url:e+"/me/shows",type:"DELETE",postData:t},n,r)},u.prototype.containsMySavedShows=function(t,n,r){var i={url:e+"/me/shows/contains",params:{ids:t.join(",")}};return s(i,n,r)},u.prototype.getShowEpisodes=function(t,n,r){return s({url:e+"/shows/"+t+"/episodes"},n,r)},u.prototype.getEpisode=function(t,n,r){var i={};return i.url=e+"/episodes/"+t,s(i,n,r)},u.prototype.getEpisodes=function(t,n,r){var i={url:e+"/episodes/",params:{ids:t.join(",")}};return s(i,n,r)},u.prototype.getAccessToken=function(){return n},u.prototype.setAccessToken=function(t){n=t},u.prototype.setPromiseImplementation=function(t){var e=!1;try{var n=new t((function(t){t()}));"function"==typeof n.then&&"function"==typeof n.catch&&(e=!0)}catch(t){console.error(t)}if(!e)throw new Error("Unsupported implementation of Promises/A+");r=t},u);"object"==typeof t.exports&&(t.exports=c)},4788:(t,e,n)=>{"use strict";var r=n(5072),i=n.n(r),o=n(7825),a=n.n(o),s=n(7659),u=n.n(s),c=n(5056),l=n.n(c),h=n(540),d=n.n(h),f=n(1113),p=n.n(f),g=n(365),m={};m.styleTagTransform=p(),m.setAttributes=l(),m.insert=u().bind(null,"head"),m.domAPI=a(),m.insertStyleElement=d();i()(g.A,m),g.A&&g.A.locals&&g.A.locals},5072:t=>{"use strict";var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var o={},a=[],s=0;s<t.length;s++){var u=t[s],c=r.base?u[0]+r.base:u[0],l=o[c]||0,h="".concat(c," ").concat(l);o[c]=l+1;var d=n(h),f={css:u[1],media:u[2],sourceMap:u[3],supports:u[4],layer:u[5]};if(-1!==d)e[d].references++,e[d].updater(f);else{var p=i(f,r);r.byIndex=s,e.splice(s,0,{identifier:h,updater:p,references:1})}a.push(h)}return a}function i(t,e){var n=e.domAPI(e);n.update(t);return function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,i){var o=r(t=t||[],i=i||{});return function(t){t=t||[];for(var a=0;a<o.length;a++){var s=n(o[a]);e[s].references--}for(var u=r(t,i),c=0;c<o.length;c++){var l=n(o[c]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}o=u}}},7659:t=>{"use strict";var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},540:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},5056:(t,e,n)=>{"use strict";t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},7825:t=>{"use strict";t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},1113:t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},44:(t,e,n)=>{"use strict";n.a(t,(async(t,e)=>{try{n(4788),n(1128);var r=n(3973),i=n(3583),o=n(3374),a=n(7492),s=n(9460),u=n(5543),c=n(2649),l=n(3112),h=n(6307),d=n(7127),f=n(4225),p=n(1822),g=n(7128);async function m(){(0,f.U)(),console.log("Welcome to Onix",r.xv,r.g),1===r.g&&((0,p.d4)(),(0,p.HS)(),(0,p.Qt)()),(0,c.oh)(),console.log(window.location.href),"https://vanis.io/#skipo"!==window.location.href&&(0,c.Pj)();try{if(await(0,o.S)(),!i.tG)return console.error("Error with credentials, please contact Fohz.")}catch(t){throw new Error(t)}await(0,a.Hz)(),await(0,s.t)(),await(0,u.EV)(!0),(0,l.N)(),await(0,h.F)(),r.g>1&&(0,d.A)(),$(SELECT.loadingPage)?.remove(),$(SELECT.loadingOnix)?.remove(),(0,g.D)()}"submitLoading"===document.readyState?document.addEventListener("DOMContentLoaded",m):await m(),e()}catch(v){e(v)}}),1)},3583:(t,e,n)=>{"use strict";n.d(e,{LA:()=>u,Qe:()=>s,Qj:()=>a,tG:()=>o});var r=n(3973),i=n(4684);let o=null,a={server:"",mode:"",anonymous:0,color:COLORS.defaultColor,gif:{a:1,f:"",p:"",i:""},skinAuth:null,spotifyStatus:[null,!1]};function s(t){o=t,a.server=STRINGS.lobby,a.mode=[STRINGS.modeVanilla,STRINGS.modeDual,STRINGS.modeSingle,STRINGS.modeTest][r.g-1],console.log(`Logged to your Onix account: ${t.email}`)}function u(t){o=t}window.isAdmin=!1,window.SETTINGS=function(){const t=parseJson((0,i.$)(STRINGS.typeSettings,null)),e=t?Object.keys(t).length:0,n=e>0&&t[STRINGS.typeDualNickname]||"",o=e>0&&t[STRINGS.typeDualSkin]||"",s=e>0?function(t){for(const e in t)if(Object.hasOwnProperty.call(t,e)){const n=t[e];"string"==typeof n&&n.length>=100&&(t[e]="")}return stringifierJson(t)}(t):STRINGS.defaultObject;return{skins:(0,i.$)(STRINGS.typeSkins,STRINGS.defaultObject),hotkeys:(0,i.$)(STRINGS.typeHotkeys,STRINGS.defaultObject),settings:s,d:(new Date).toLocaleDateString(STRINGS.localTime),ga:(0,i.$)(STRINGS.typeGifActivated,STRINGS.checked),m:r.a3,n:(0,i.$)(STRINGS.typeNickname,""),n2:n,s:(0,i.$)(STRINGS.typeSkinUrl,""),s2:o,sa:a.skinAuth=(0,i.$)(STRINGS.dbSkinAuth,STRINGS.defaultSkinAuth),ss:(0,i.$)(STRINGS.typeSelectedIndex,"0")}}()},3112:(t,e,n)=>{"use strict";function r(){$(SELECT.ad).css("display","none")}function i(){setTimeout((function(){$(SELECT.cmp)&&($(SELECT.cmpButton).click(),$(SELECT.cmp).remove())}),1e3)}n.d(e,{N:()=>r,z:()=>i})},7127:(t,e,n)=>{"use strict";n.d(e,{A:()=>d});var r=n(8944),i=n(4861),o=n(3583),a=n(3973),s=n(7492),u=n(206);function c(t){t&&t.c&&t.p?t.c!==STRINGS.commandAlert?t.c!==STRINGS.commandTestAlert?(0,u.C)(STRINGS.errorSwalTitle,STRINGS.commandNotExist,STRINGS.errorIcon,STRINGS.errorSwalTime):(0,u.C)(STRINGS.titleSwalTestAlert+t.p[0],t.p[1],t.p[2],t.p[3]):function(t){if(!t)return;const e=(new Date).getTime();(0,u.C)(STRINGS.alertSent,STRINGS.alertSentContent,STRINGS.successIcon,STRINGS.errorSwalTime),setTimeout((async()=>{await(0,s.Mh)(i.tf.allBroadcasts.child(e),t,!1)}),5e3),setTimeout((async()=>{await(0,s._s)(i.tf.allBroadcasts.child(e))}),1e4)}({t:t.p[0]||STRINGS.exempleAlertTitle,c:t.p[1]||STRINGS.exempleAlertContent,i:t.p[2]||STRINGS.errorIcon,tm:t.p[3]||STRINGS.errorSwalTime}):(0,u.C)(STRINGS.errorSwalTitle,STRINGS.invalidCommand,STRINGS.errorIcon,STRINGS.errorSwalTime)}var l=n(5543);async function h(t,e,n,r=1){if(!(0,l._x)(t,r))return;const o=t.p[1],a=i.cX.ref(`U/${o}`);await async function(t,e,n,r,i){let o={b:n},a=t+r;await(0,s.Mh)(e,o),DELTA.sendServer(a),o.b=null,i&&setTimeout((async()=>await(0,s.Mh)(e,o)),1e3)}(o,a,e,n,1!==r)}function d(){$(SELECT.loadingText).text("Attaching client events..."),window.getMetricsDataSync=()=>r.Ej,window.addEventListener("DELTA_EVENT_PID_CHANGED",(async()=>{o.Qj.pid=window.getPid(),await(0,s.p6)(i.tf.meUser,STRINGS.typePid)})),window.addEventListener("DELTA_EVENT_COMMAND_RECEIVED",(async()=>{if(o.tG.isAdmin){const t=window.getCommand();t.c===STRINGS.commandAlert?c(t):t.c===STRINGS.commandBan?await h(t,STRINGS.bannedMessage,STRINGS.bannedSuccessContent,1):t.c===STRINGS.commandKick&&await h(t,STRINGS.kickedMessage,STRINGS.kickedSuccessContent,2)}else(0,u.C)(STRINGS.actionBlocked,STRINGS.sorryCantPerform,STRINGS.errorIcon,STRINGS.errorSwalTime)})),3!==a.g&&(window.addEventListener("DELTA_EVENT_DUAL_PID_CHANGED",(async()=>{o.Qj.pid2=window.getPid(),await(0,s.p6)(i.tf.meUser,STRINGS.typePidDual)})),window.addEventListener("DELTA_EVENT_DUAL_NICKNAME_CHANGED",(async()=>{SETTINGS.n2=window.getDualName(),await(0,s.p6)(i.tf.meUser,STRINGS.typeDualNickname)})),window.addEventListener("DELTA_EVENT_DUAL_SKIN_CHANGED",(async()=>{SETTINGS.s2=window.getDualSkin(),await(0,s.p6)(i.tf.meUser,STRINGS.typeDualSkin)}))),$(SELECT.loadingText).text("Events attaching: OK.")}},1128:(t,e,n)=>{"use strict";var r=n(4692),i=n.n(r),o=(n(6432),n(3973));window.SELECT={head:"head",link:"link[rel*='icon']",overlay:"#overlay",barHud:".bar",bodyHud:"body",signIn:".signIn",loadingText:".loadingPageContent",loadingPage:".loadingPage",level:".xp-data>div:first-child",xp:".xp-data>div:last-child",teamTag:"#teamtag",nickname:"#nickname",chatboxContainer:1===o.g?".chatbox":"#chatbox",messageList:1===o.g?".message-list":"#message-list",messageName:1===o.g?".message-from-name":".message-from",messageToast:".message-row.toast",resizeChatboxIcon:".chatbox-resize-icon",colorBox:".perks",colorPickerGui:".colorPickerGui",colorPickerInput:"#colorPickerInput",colorPickerSelector:"#colorPickerSelector",colorSwitchCell:"#colorSwitchNickCell",colorSwitchChatbox:"#colorSwitchNickChatbox",colorSwitchLeaderboard:"#colorSwitchNickLeaderboard",colorSwitchNickCell:"#colorSwitchNickCell",discordBtn:".discord",discordName:1===o.g?".account-name":"#account-name",discordPhoto:".avatar",cmp:"#cmpbox",cmpButton:".cmpboxbtn",ad:'div[data-v-5190ae12][style*="height: 286px;"]',bar:1===o.g?"#overlay>.container:nth-child(3)":".bar>.statBar",mainContainer:"#main-container",menuContainer:"#menu-container",socialContainer:".social-container",gifPickerContainer:".gifPickerContainer",topBarPlayerContainerButtons:"#player-container>.tabs>.tab",leaderboard:"#leaderboard",leaderboardText:1===o.g?".leaderboard-text":".leaderboard-label[data-v-8a0c31c6]>:last-child ",playButton:"#play-button",playerContainer:"#player-container",playerData:"#player-container #player-data",playerListTitle:".player-list-title",spectateButton:"#spec-button",serverList:".server-list",serverListItem:".server-list-item",serverName:".server-name",skinContainer:".skin-container",skinElem:".skin",skinProfile:".skinProfile",skinUrl:"#skinurl",skinsId:"#skins",overlaySkin:".overlaySkin",skinAdd:".add-skin",skinsVanisButton:".skinsVanisButton",skinsImgbbButton:".skinsImgbbButton",skinsGifButton:".skinsGifButton",skinsVanisPage:".skinsVanisPage",skinsImgbbPage:".skinsImgbbPage",skinsGifPage:".skinsGifPage",skinsNavAllButton:".skinsNavAllButton",skinsNavMeButton:".skinsNavMeButton",skinsNavFavButton:".skinsNavFavButton",skinsNavAllPage:".skinsNavAllPage",skinsNavMePage:".skinsNavMePage",skinsNavFavPage:".skinsNavFavPage",statKills:1===o.g?"#overlay>.container>.fade-box.scroll>div>div:nth-child(3)":".statBarKills",statScore:1===o.g?"#overlay>.container>.fade-box.scroll>div>div:nth-child(2)":".statBarScore",statTime:1===o.g?"#overlay>.container>.fade-box.scroll>div>div:nth-child(1)":".statBarTime",anonymousStatus:".anonymousStatus",minimapContainer:1===o.g?".minimap-wrapper>.container":".container[data-v-4c95bd45]",statBox:".statBox",toolBox:".toolBox",userBox:".userBox",skinBox:".skinBox",modalHud:".modal",gameLogsItem:".gameLog",backupNumber:".backupNumber",leaderboardBox:".leaderboardBox",userNickLine:".userNickLine",boxTitle:".customBoxTitle",loadingOnix:".loadingOnix",emailInput:"#email-input",passwordInput:"#password-input",submitButton:"#submit-account",submitText:"#submit-text",toolsPagePerks:".toolsPagePerks",toolsPageButtonPerks:".toolsNavPerksTab",toolsPageSettings:".toolsPageSettings",toolsPageButtonSettings:".toolsNavSettingsTab",toolsPageBackups:".toolsPageBackups",toolsPageButtonBackups:".toolsNavBackupsTab",statisticsOptionsSection:".statisticsOptionsSection",userDetailsTabStatistics:".userDetailsTabStatistics",userDetailsTabPerks:".userDetailsTabPerks",userDetailsTabClips:".userDetailsTabClips",userDetailsPageStatistics:".userDetailsPageStatistics",userDetailsPagePerks:".userDetailsPagePerks",userDetailsPageClips:".userDetailsPageClips",leaderboardList:".leaderboardList",leaderbordKdaButton:".leaderbordKdaButton",leaderbordKillsButton:".leaderbordKillsButton",leaderbordGamesButton:".leaderbordGamesButton",leaderbordMassTotalButton:".leaderbordMassTotalButton",leaderbordMassAvgButton:".leaderbordMassAvgButton",leaderbordTimeButton:".leaderbordTimeButton",spotifyPrevButton:"#spotifyPrevButton",spotifyPlayPauseButton:"#spotifyPlayPauseButton",spotifyNextButton:"#spotifyNextButton",spotifyVolumeControl:"#spotifyVolumeControl",spotifyPlayer:"#spotifyPlayer",spotifyImageAlbum:"#spotifyImageAlbum",spotifyMusicName:".spotifyMusicName",spotifyArtistName:".spotifyArtistName"};n(7356),n(2125),n(9726),n(5847);var a=n(4861),s=n(3583),u=n(7492);function c(t){return t===STRINGS.checked?STRINGS.unchecked:STRINGS.checked}window.switchManager=async function(t){let e=null,n=null;t===STRINGS.typeAnonymous?(e=s.Qj.anonymous=c(s.Qj.anonymous),n=a.tf.meUser):t===STRINGS.typeGifActivated&&(e=s.Qj.gif.a=c(s.Qj.gif.a),n=a.tf.meGif,e===STRINGS.unchecked?$(SELECT.gifPickerContainer).addClass(STRINGS.hidden):$(SELECT.gifPickerContainer).removeClass(STRINGS.hidden)),e&&n&&await async function(t,e){await(0,u.Mh)(e,{a:t===STRINGS.checked?1:0},!1)}(e,n)};var l=n(134);async function h(t,e,n){n?s.Qj.gif=t:s.Qj.gif[e]=t,await(0,u.p6)(a.tf.meUser,STRINGS.typeGif)}window.applyGif=async function(t,e,n){await h({a:s.Qj.gif.a,p:t,f:e,i:n},null,!0),fireTimedSwal(STRINGS.gifActivatedTitle,STRINGS.gifActivatedText,STRINGS.shortSwalTime)},window.onGifChanged=async function(t,e){if(s.Qj.gif.a===STRINGS.unchecked)return;const n=$(t).val();if(""===n||e===STRINGS.gifTypePath&&/^[a-zA-Z0-9]+$/.test(n)||e===STRINGS.gifTypeFrames&&n&&n>=2&&n<=1e3||e===STRINGS.gifTypeInterval&&n&&n>=5&&n<=1e3)await h(n,e,!1);else{const t=e===STRINGS.gifTypePath?STRINGS.folder:e===STRINGS.gifTypeFrames?STRINGS.frameNumber:STRINGS.intervalNumber,n=e===STRINGS.gifTypePath?STRINGS.badFolderFormat:e===STRINGS.gifTypeFrames?STRINGS.badFrameNumber:STRINGS.badIntervalNumber;fireTimedSwal(`${STRINGS.badFormat} ${t} ${STRINGS.format}`,n,STRINGS.errorSwalTime,STRINGS.okButton)}},window.onColorChanged=async function(t){const e=$(t).val();e&&/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(e)?await async function(t){s.Qj.color=t,$(SELECT.colorPickerInput).val(t),$(SELECT.colorPickerSelector).val(t),await(0,u.p6)(a.tf.meUser,STRINGS.typeColor)}(e):fireTimedSwal(STRINGS.badColorSelectedTitle,STRINGS.badColorSelected,STRINGS.errorSwalTime,STRINGS.okButton)};n(2649),n(8944),n(2886);var d=n(1566);window.deleteBackup=function(t){Swal.fire({title:STRINGS.confirmDeletion,text:STRINGS.confirmContent,showCancelButton:!0,confirmButtonText:STRINGS.yes,cancelButton:STRINGS.no}).then((e=>{!0===e.value&&function(t){const e=$("#"+t);function n(){e.remove(),delete d.Gk[t]}function r(){const t=d.Gk?Object.keys(d.Gk).length:0;$(SELECT.backupNumber).html(t+" backup"+(t>1?"s":"")+" saved")}a.tf.meBackups.child(t).remove().then((()=>{e.length&&d.Gk[t]?(n(),r(),fireTimedSwal(STRINGS.success,STRINGS.successDeletedBackup,STRINGS.shortSwalTime,!1)):fireTimedSwal(STRINGS.errorSwalTitle,STRINGS.errorDeletedBackup,STRINGS.errorSwalTime,STRINGS.okButton)})).catch((t=>{fireTimedSwal(STRINGS.errorSwalTitle,t.message,STRINGS.errorSwalTime,STRINGS.okButton)}))}(t)}))},window.applyBackup=function(t){Swal.fire({title:STRINGS.confirmApply,text:STRINGS.confirmApplyContent,showCancelButton:!0,confirmButtonText:STRINGS.yes,cancelButton:STRINGS.no}).then((e=>{!0===e.value&&function(t){const e=d.Gk[t];["skins","hotkeys","settings","n","s","s2","n2","m","d","ss"].forEach((async t=>{let n=t;t===STRINGS.dbName?n=STRINGS.typeNickname:t===STRINGS.dbSkin?n=STRINGS.typeSkinUrl:t===STRINGS.dbSkinIndex&&(n=STRINGS.typeSelectedIndex),e[t]&&""!==e[t]&&"{}"!==e[t]&&localStorage.setItem(n,e[t])})),localStorage.removeItem(STRINGS.typeMachineId),localStorage.setItem(STRINGS.typeMachineId,(0,o.D1)()),fireTimedSwal(STRINGS.success,STRINGS.backupUpdated,STRINGS.errorSwalTime,!1),setTimeout((()=>window.location.reload()),STRINGS.errorSwalTime)}(t)}))};n(7009);var f=n(7576),p=n(3253),g=n(6092);window.createUserProfileModal=async function(t){const e=parseJson(decodeURIComponent(t));if(0===Object.keys(e).length)fireTimedSwal(STRINGS.userNotFound,STRINGS.userDeleted,STRINGS.errorSwalTime,STRINGS.okButton);else{const t=await async function(t){const e=(0,l.$9)(t.s),n=(0,g.R2)(t.st),r=`<p class="userDetailsStatusText">${n===STRINGS.online?STRINGS.now:secureHTML(n)}</p>`,i=t.n===STRINGS.unnamed?COLORS.defaultColor:t.c,o=t.a?t.s:""===e.type?IMAGES.transparentSkin:e.url,a=""===e.type||t.a?"":`onclick="renderSkin('${encodeURIComponent(stringifierJson(e))}')"`,s=f.c7&&f.c7[t.u]?f.c7[t.u]:f.c7[t.u]=await(0,f.DM)(t.u),u=t.ba&&t.ba.u?`<img class="userDetailsBadge" alt="" src="${secureHTML(t.ba.u)}" tip="${secureHTML(t.ba.t)}">`:"",c=n===STRINGS.online?COLORS.onlineColor:COLORS.offlineColor,h=secureHTML((0,g.Y7)(s.sT)),d=secureHTML((0,g.Y7)(s.sT/s.sG)),p=secureHTML((0,g.nR)(s.sM)),m=secureHTML((0,g.nR)(s.sM/s.sG));return`\n        <div>\n            <div class="userDetailsHeaderFlex">\n                <div class="userDetails">\n                    <div class="userDetailsItem">\n                        ${u}\n                        <p class="userDetailsNick" style="color: ${i}">${secureHTML(t.n)}</p>\n                    </div>\n                    <div class="userDetailsItem">\n                        <p><span class="userDetailsItemInfos">${STRINGS.userProfileLevel}</span>${secureHTML(t.l)}</p>\n                    </div>\n                    <div class="userDetailsItem">\n                        <p><span class="userDetailsItemInfos">${STRINGS.userProfileMode}</span>${secureHTML(t.m)}</p>\n                    </div>\n                    <div class="userDetailsItem">\n                        <p><span class="userDetailsItemInfos">${STRINGS.userProfileServer}</span>${secureHTML(t.se)}</p>\n                    </div>\n                </div>\n                <img class="userDetailsPhoto beautifulSkin" alt="" src="${secureHTML(o)}" onerror="this.src = '${IMAGES.transparentSkin}'" ${a}>\n                <div class="userDetailsStatus" style="background-color: ${c}">\n                    ${r}\n                </div>\n            </div>\n            <div class="userDetailsBody">\n                <div class="buttonTabContainer">\n                    <div class="buttonTab buttonTabDisabled userDetailsTabStatistics" onclick="showPage(0, [SELECT.userDetailsTabStatistics, SELECT.userDetailsTabPerks, SELECT.userDetailsTabClips], [SELECT.userDetailsPageStatistics, SELECT.userDetailsPagePerks, SELECT.userDetailsPageClips])">\n                        <p class="buttonTabText">Statistics</p>\n                    </div>\n                    <div class="buttonTab buttonTabActive userDetailsTabPerks" onclick="showPage(1, [SELECT.userDetailsTabStatistics, SELECT.userDetailsTabPerks, SELECT.userDetailsTabClips], [SELECT.userDetailsPageStatistics, SELECT.userDetailsPagePerks, SELECT.userDetailsPageClips])">\n                        <p class="buttonTabText">Perks</p>\n                    </div>\n                    <div class="buttonTab buttonTabActive userDetailsTabClips" onclick="showPage(2, [SELECT.userDetailsTabStatistics, SELECT.userDetailsTabPerks, SELECT.userDetailsTabClips], [SELECT.userDetailsPageStatistics, SELECT.userDetailsPagePerks, SELECT.userDetailsPageClips])">\n                        <p class="buttonTabText">Clips</p>\n                    </div>\n                </div>\n                <div class="userDetailsPageStatistics">\n                    <div class="userDetailsStatisticsGrid">\n                        <div class="userDetailsStatisticsItem">\n                            <p class="userDetailsStatTitle">Kills</p>\n                            <p class="userDetailsStatContent"><span class="userDetailsItemInfos">Total: </span>${secureHTML(s.sK)}</p>\n                            <p class="userDetailsStatContent"><span class="userDetailsItemInfos">K/D: </span>${secureHTML((s.sK/s.sG).toFixed(2))}</p>\n                        </div>\n                        <div class="userDetailsStatisticsItem">\n                            <p class="userDetailsStatTitle">Games</p>\n                            <p class="userDetailsStatContent"><span class="userDetailsItemInfos">Played: </span>${secureHTML(s.sG)}</p>\n                        </div>\n                        <div class="userDetailsStatisticsItem">\n                            <p class="userDetailsStatTitle">Time</p>\n                            <p class="userDetailsStatContent"><span class="userDetailsItemInfos">Pased: </span>${h}</p>\n                            <p class="userDetailsStatContent"><span class="userDetailsItemInfos">Pased avg: </span>${d}</p>\n                        </div>\n                        <div class="userDetailsStatisticsItem">\n                            <p class="userDetailsStatTitle">Mass</p>\n                            <p class="userDetailsStatContent"><span class="userDetailsItemInfos">Ate: </span>${p}</p>\n                            <p class="userDetailsStatContent"><span class="userDetailsItemInfos">Ate avg: </span>${m}</p>\n                        </div>\n                    </div>\n                </div>\n                <div class="userDetailsPagePerks hidden">Soon</div>\n                <div class="userDetailsPageClips hidden">Soon</div>\n            </div>\n        </div>\n    `}(e);(0,p.s)(t,STRINGS.userProfile)}};n(3790),n(1799);window.$=n.g.$=i()},2649:(t,e,n)=>{"use strict";n.d(e,{HN:()=>o,Pj:()=>a,oh:()=>i});var r=n(3973);function i(){$(SELECT.loadingText).text("Init page...");const t=[STRINGS.modeVanillaPage,STRINGS.modeDualPage,STRINGS.modeSinglePage,STRINGS.modeTestPage];let e=document.querySelector(SELECT.link)||document.createElement("link");e.type="image/x-icon",e.rel="shortcut icon",e.href=IMAGES.onixLogo,document.getElementsByTagName(SELECT.head)[0].appendChild(e),document.title=t[r.g-1]}function o(t){const e=$(SELECT.bodyHud);e.empty(),e.css("background-color","black");const n=$("<error>").text(t).css({"font-size":"28px",color:"white","text-align":"left",margin:"50px",position:"absolute"});throw e.append(n),new Error(t)}function a(){if($(SELECT.loadingText).text("Validating version..."),window.DELTA_SCRIPT_VERSION!==r.yS.versionMandatory)throw document.body.innerHTML=`\n            <div class="updatePage">\n                <h2 class="onixTitleUpdate gradientTextAnim">${STRINGS.onixUpdate}</h2>\n                <h4 class="onixSubtitleUpdate">${STRINGS.onixSubTitleUpdate} <i class="fal fa-lock"></i></h4>\n                <div class="onixButtonUpdate" onclick="window.location = STRINGS.updateLink">\n                    <p class="onixButtonUpdateText">${STRINGS.onixButtonUpdate}</p>\n                </div>\n            </div>\n        `,new Error(STRINGS.badVersion)}window.secureHTML=function(t){return null==t?"":(t=String(t))?t.replace(/[&<>"']/g,(function(t){switch(t){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&#39;";default:return t}})):""},window.showPage=function(t,e,n,r){"function"==typeof r&&r(),e&&e.forEach(((e,n)=>{n===t?($(e).removeClass("buttonTabActive"),$(e).addClass("buttonTabDisabled")):($(e).removeClass("buttonTabDisabled"),$(e).addClass("buttonTabActive"))})),n&&n.forEach(((e,n)=>{n===t?$(e).removeClass(STRINGS.hidden):$(e).addClass(STRINGS.hidden)}))}},5847:()=>{window.parseJson=function(t){if("string"!=typeof t||!t)return{};try{return JSON.parse(t)}catch(t){return{}}},window.stringifierJson=function(t){if("object"!=typeof t||!t)return"";try{return JSON.stringify(t)}catch(t){return""}}},4225:(t,e,n)=>{"use strict";function r(){const t=document.createElement("div");t.innerHTML=`\n        <div class="loadingPage">\n            <h2 class="loadingPageContent">${STRINGS.loadingStart}</h2>\n        </div>\n    `,document.body.appendChild(t)}n.d(e,{U:()=>r})},4684:(t,e,n)=>{"use strict";function r(t,e){return localStorage.getItem(t)||e}function i(t,e){localStorage.setItem(t,String(e))}n.d(e,{$:()=>r,n:()=>i})},6092:(t,e,n)=>{"use strict";function r(t){return"string"!=typeof t?0:t.split(" ").reduce(((t,e)=>{const n=parseFloat(e);return e.endsWith("s")?t+n:e.endsWith("min")?t+60*n:e.endsWith("h")?t+3600*n:t}),0)}function i(t){if("string"!=typeof t)return 0;const e=parseFloat(t);return Number.isNaN(e)?0:t.endsWith("k")?1e3*e:t.endsWith("M")?1e6*e:e}function o(t){const e=(new Date).getTime()-t,n=Math.floor(e/6e4),r=Math.floor(n/1440),i=n-24*r*60,o=Math.floor(i/60),a=i%60;return e<STRINGS.timeToOnline?STRINGS.online:function(t,e,n){return t>=2?null:t>0?`${t}d ago`:e>0?`${e}h ago`:n>0?`${n}m ago`:STRINGS.offline}(r,o%24,a)}function a(t,e=!0,n=!0,r=!0,i=!0,o=!0,a=!0){if(0===t)return STRINGS.zeroSecond;let s=0,u=0,c=0,l=0,h=0;e&&(s=Math.floor(t/31536e3),t%=31536e3),n&&(u=Math.floor(t/2629800),t%=2629800),r&&(c=Math.floor(t/86400),t%=86400),i&&(l=Math.floor(t/3600),t%=3600),o&&(h=Math.floor(t/60),t%=60),a&&(t=Math.round(t));let d="";return e&&s>0&&(d+=`${s}y `),n&&u>0&&(d+=`${u}m `),r&&c>0&&(d+=`${c}d `),i&&l>0&&(d+=`${l}h `),o&&h>0&&(d+=`${h}min `),a&&t>0&&(d+=`${t}s`),d.trim()}function s(t){return t>=1e15?u(t,1e15,"Qd"):t>=1e12?u(t,1e12,"Td"):t>=1e9?u(t,1e9,"Md"):t>=1e6?u(t,1e6,"M"):t>=1e3?u(t,1e3,"k"):Math.round(t).toString()}function u(t,e,n){let r=t/e,i=t%e,o=Math.round(i/(e/10));return o>0?`${Math.round(r)},${o}${n} `:`${Math.round(r)}${n}`}function c(t){const e=new Date(t);return("0"+e.getDate()).slice(-2)+"/"+("0"+(e.getMonth()+1)).slice(-2)+"/"+e.getFullYear()}function l(t){const e=t.toString();return`${e.slice(0,2)}/${e.slice(2,4)}/${e.slice(4)}`}function h(t){const e=t.split("/");return new Date(e[2],e[1]-1,e[0])}n.d(e,{Cl:()=>i,Dl:()=>l,R2:()=>o,Y7:()=>a,_U:()=>h,nR:()=>s,rj:()=>c,st:()=>r})},6307:(t,e,n)=>{"use strict";n.d(e,{F:()=>je});var r=n(3973),i=n(4861),o=n(3583);function a(){!function(){const t='<i class="fa-solid fa-up-right-and-down-left-from-center chatbox-resize-icon"></i>';$(SELECT.chatboxContainer).prepend(t)}();const t=$(SELECT.chatboxContainer);$(SELECT.resizeChatboxIcon).on("mousedown",(function(e){const n=e.clientX,r=e.clientY,i=parseInt(t.css("width"),10),o=parseInt(t.css("height"),10);function a(e){const a=i+e.clientX-n,s=o+r-e.clientY;t.css("width",`${a}px`),t.css("height",`${s}px`)}$(document).on("mousemove",a),$(document).on("mouseup",(function t(){$(document).off("mousemove",a),$(document).off("mouseup",t)}))}))}function s(){0===r.yS.resize&&(r.yS.resize=1,a())}var u=n(134),c=n(7492);function l(){o.Qj.spotifyStatus[1]||(o.Qj.spotifyStatus[1]=!0,o.Qj.spotifyStatus[0]&&(!function(){const t='\n        <div id="spotifyPlayer" class="spotifyPlayer">\n            <div class="spotifyPlayerMusicInfos">\n                <img id="spotifyImageAlbum" class="spotifyImageAlbum" alt="" src=""/>\n                <div class="spotifyPlayerMusicInfosTexts">\n                    <p id="spotifyMusicName" class="spotifyMusicName">Music name</p>\n                    <p id="spotifyArtistName" class="spotifyArtistName">Artist name</p>\n                </div>\n            </div>\n            <div class="spotifyPlayerButtons">\n                <i id="spotifyPrevButton" class="fa-solid fa-backward spotifyPrevButton"></i>\n                <i id="spotifyPlayPauseButton" class="fa-solid fa-play spotifyPlayPauseButton"></i>\n                <i id="spotifyNextButton" class="fa-solid fa-forward spotifyNextButton"></i>\n            </div>\n            <input data-v-e893ba3c id="spotifyVolumeControl" class="spotifyVolumeControl slider hidden" type="range" min="0" max="1" step="0.01" />\n        </div>\n    ';$(SELECT.chatboxContainer).prepend(t),$(SELECT.spotifyPlayer).show(),$(SELECT.spotifyPrevButton).on("click",(()=>{window.spotifyApi.skipToPrevious().then((()=>h(!1)))})),$(SELECT.spotifyPlayPauseButton).on("click",(()=>{window.spotifyApi.getMyCurrentPlaybackState().then((t=>{t&&t.is_playing?window.spotifyApi.pause().then((()=>h(!1))):window.spotifyApi.play().then((()=>h(!1)))}))})),$(SELECT.spotifyNextButton).on("click",(()=>{window.spotifyApi.skipToNext().then((()=>h(!1)))})),$(SELECT.spotifyVolumeControl).on("input",(t=>{window.spotifyApi.setVolume(100*t.target.value)})),h(!1)}(),h(!1)))}function h(t){window.spotifyApi.getMyCurrentPlaybackState().then((e=>{if(e&&e.item){const i=e.item.name,o=e.item.artists.map((t=>t.name)).join(", "),a=e.item.album.images[0].url;d(SELECT.spotifyMusicName,i),d(SELECT.spotifyArtistName,o),n=SELECT.spotifyImageAlbum,r=a,$(n).attr("src",r),function(t){const e="fa-play",n="fa-pause",r=$(SELECT.spotifyPlayPauseButton);t?r.removeClass(e).addClass(n):r.removeClass(n).addClass(e)}(e.is_playing),e.is_playing?t?window.spotifyApi.pause().then((()=>f(e.item.duration_ms-e.progress_ms))):f(e.item.duration_ms-e.progress_ms):t&&window.spotifyApi.play().then((()=>f(e.item.duration_ms-e.progress_ms)))}var n,r})).catch(p)}function d(t,e){$(t).text(e)}function f(t){setTimeout((()=>h(!1)),t+1e3)}function p(){$(SELECT.spotifyPlayer).remove()}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function v(t,e,n){return e&&m(t.prototype,e),n&&m(t,n),t}function y(t){return+t.replace(/px/,"")}function b(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Math.random()*(e-t)+t;return Math.floor(r*Math.pow(10,n))/Math.pow(10,n)}function _(t){return t[b(0,t.length)]}var w=["#fcf403","#62fc03","#f4fc03","#03e7fc","#03fca5","#a503fc","#fc03ad","#fc03c2"];function S(t){return Math.log(t)/Math.log(1920)}var T=function(){function t(e){g(this,t);var n=e.initialPosition,r=e.direction,i=e.confettiRadius,o=e.confettiColors,a=e.emojis,s=e.emojiSize,u=e.canvasWidth,c=b(.9,1.7,3)*S(u);this.confettiSpeed={x:c,y:c},this.finalConfettiSpeedX=b(.2,.6,3),this.rotationSpeed=a.length?.01:b(.03,.07,3)*S(u),this.dragForceCoefficient=b(5e-4,9e-4,6),this.radius={x:i,y:i},this.initialRadius=i,this.rotationAngle="left"===r?b(0,.2,3):b(-.2,0,3),this.emojiSize=s,this.emojiRotationAngle=b(0,2*Math.PI),this.radiusYUpdateDirection="down";var l="left"===r?b(82,15)*Math.PI/180:b(-15,-82)*Math.PI/180;this.absCos=Math.abs(Math.cos(l)),this.absSin=Math.abs(Math.sin(l));var h=b(-150,0),d={x:n.x+("left"===r?-h:h)*this.absCos,y:n.y-h*this.absSin};this.currentPosition=Object.assign({},d),this.initialPosition=Object.assign({},d),this.color=a.length?null:_(o),this.emoji=a.length?_(a):null,this.createdAt=(new Date).getTime(),this.direction=r}return v(t,[{key:"draw",value:function(t){var e=this.currentPosition,n=this.radius,r=this.color,i=this.emoji,o=this.rotationAngle,a=this.emojiRotationAngle,s=this.emojiSize,u=window.devicePixelRatio;r?(t.fillStyle=r,t.beginPath(),t.ellipse(e.x*u,e.y*u,n.x*u,n.y*u,o,0,2*Math.PI),t.fill()):i&&(t.font="".concat(s,"px serif"),t.save(),t.translate(u*e.x,u*e.y),t.rotate(a),t.textAlign="center",t.fillText(i,0,0),t.restore())}},{key:"updatePosition",value:function(t,e){var n=this.confettiSpeed,r=this.dragForceCoefficient,i=this.finalConfettiSpeedX,o=this.radiusYUpdateDirection,a=this.rotationSpeed,s=this.createdAt,u=this.direction,c=e-s;n.x>i&&(this.confettiSpeed.x-=r*t),this.currentPosition.x+=n.x*("left"===u?-this.absCos:this.absCos)*t,this.currentPosition.y=this.initialPosition.y-n.y*this.absSin*c+.00125*Math.pow(c,2)/2,this.rotationSpeed-=this.emoji?1e-4:1e-5*t,this.rotationSpeed<0&&(this.rotationSpeed=0),this.emoji?this.emojiRotationAngle+=this.rotationSpeed*t%(2*Math.PI):"down"===o?(this.radius.y-=t*a,this.radius.y<=0&&(this.radius.y=0,this.radiusYUpdateDirection="up")):(this.radius.y+=t*a,this.radius.y>=this.initialRadius&&(this.radius.y=this.initialRadius,this.radiusYUpdateDirection="down"))}},{key:"getIsVisibleOnCanvas",value:function(t){return this.currentPosition.y<t+100}}]),t}();var x=function(){function t(e){var n=this;g(this,t),this.canvasContext=e,this.shapes=[],this.promise=new Promise((function(t){return n.resolvePromise=t}))}return v(t,[{key:"getBatchCompletePromise",value:function(){return this.promise}},{key:"addShapes",value:function(){var t;(t=this.shapes).push.apply(t,arguments)}},{key:"complete",value:function(){var t;return!this.shapes.length&&(null===(t=this.resolvePromise)||void 0===t||t.call(this),!0)}},{key:"processShapes",value:function(t,e,n){var r=this,i=t.timeDelta,o=t.currentTime;this.shapes=this.shapes.filter((function(t){return t.updatePosition(i,o),t.draw(r.canvasContext),!n||t.getIsVisibleOnCanvas(e)}))}}]),t}();const I=new(function(){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};g(this,t),this.activeConfettiBatches=[],this.canvas=n.canvas||((e=document.createElement("canvas")).style.position="fixed",e.style.width="100%",e.style.height="100%",e.style.top="0",e.style.left="0",e.style.zIndex="1000",e.style.pointerEvents="none",document.body.appendChild(e),e),this.canvasContext=this.canvas.getContext("2d"),this.requestAnimationFrameRequested=!1,this.lastUpdated=(new Date).getTime(),this.iterationIndex=0,this.loop=this.loop.bind(this),requestAnimationFrame(this.loop)}return v(t,[{key:"loop",value:function(){var t,e,n,r,i;this.requestAnimationFrameRequested=!1,t=this.canvas,e=window.devicePixelRatio,n=getComputedStyle(t),r=y(n.getPropertyValue("width")),i=y(n.getPropertyValue("height")),t.setAttribute("width",(r*e).toString()),t.setAttribute("height",(i*e).toString());var o=(new Date).getTime(),a=o-this.lastUpdated,s=this.canvas.offsetHeight,u=this.iterationIndex%10==0;this.activeConfettiBatches=this.activeConfettiBatches.filter((function(t){return t.processShapes({timeDelta:a,currentTime:o},s,u),!u||!t.complete()})),this.iterationIndex++,this.queueAnimationFrameIfNeeded(o)}},{key:"queueAnimationFrameIfNeeded",value:function(t){this.requestAnimationFrameRequested||this.activeConfettiBatches.length<1||(this.requestAnimationFrameRequested=!0,this.lastUpdated=t||(new Date).getTime(),requestAnimationFrame(this.loop))}},{key:"addConfetti",value:function(){for(var t=function(t){var e=t.confettiRadius,n=void 0===e?6:e,r=t.confettiNumber,i=void 0===r?t.confettiesNumber||(t.emojis?40:250):r,o=t.confettiColors,a=void 0===o?w:o,s=t.emojis,u=void 0===s?t.emojies||[]:s,c=t.emojiSize,l=void 0===c?80:c;return t.emojies&&console.error("emojies argument is deprecated, please use emojis instead"),t.confettiesNumber&&console.error("confettiesNumber argument is deprecated, please use confettiNumber instead"),{confettiRadius:n,confettiNumber:i,confettiColors:a,emojis:u,emojiSize:l}}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),e=t.confettiRadius,n=t.confettiNumber,r=t.confettiColors,i=t.emojis,o=t.emojiSize,a=this.canvas.getBoundingClientRect(),s=a.width,u=5*a.height/7,c={x:0,y:u},l={x:s,y:u},h=new x(this.canvasContext),d=0;d<n/2;d++){var f=new T({initialPosition:c,direction:"right",confettiRadius:e,confettiColors:r,confettiNumber:n,emojis:i,emojiSize:o,canvasWidth:s}),p=new T({initialPosition:l,direction:"left",confettiRadius:e,confettiColors:r,confettiNumber:n,emojis:i,emojiSize:o,canvasWidth:s});h.addShapes(f,p)}return this.activeConfettiBatches.push(h),this.queueAnimationFrameIfNeeded(),h.getBatchCompletePromise()}},{key:"clearCanvas",value:function(){this.activeConfettiBatches=[]}},{key:"destroyCanvas",value:function(){this.canvas.remove()}}]),t}());function k(t,e,n){if(t<e.length){const r=e[t];n.textContent=r.text,I.addConfetti(r.confettiConfig).then(),setTimeout((()=>{k(t+1,e,n)}),2e3)}else n.textContent=""}function E(t){const e=document.createElement("div");Object.assign(e.style,{fontSize:"60px",textShadow:"0 0 50px black",textAlign:"center",position:"fixed",top:"50%",left:"50%",fontWeight:"700",transform:"translate(-50%, -50%)",width:"100%",color:"white",zIndex:"1000"}),document.body.appendChild(e);k(0,[[{text:"HAPPY",confettiConfig:{emojis:["","",""],emojiSize:100,confettiNumber:300,confettiColors:["#00f","#03f","#60aef0"]}},{text:"BIRTHDAY",confettiConfig:{emojis:["","",""],emojiSize:100,confettiNumber:300,confettiColors:["#ff0","#ffc107","#fff200"]}},{text:"LUKA",confettiConfig:{emojis:["","",""],emojiSize:100,confettiNumber:300,confettiColors:["#0f0","#4caf50","#8bc34a"]}},{text:"WE ALL LOVE YOU",confettiConfig:{emojis:["","",""],emojiSize:100,confettiNumber:300,confettiColors:["#f00","#e63946","#ff3838"]}},{text:"ESPECIALLY FOHZ",confettiConfig:{emojis:["","",""],emojiSize:100,confettiNumber:300,confettiColors:["#ffcc80","#ffb74d","#ffa726"]}}],[{text:"ZULIS.IO",confettiConfig:{emojis:["","",""],emojiSize:40,confettiNumber:80,confettiColors:["#00f","#03f","#60aef0"]}},{text:"SOON",confettiConfig:{emojis:["","",""],emojiSize:40,confettiNumber:80,confettiColors:["#00f","#03f","#60aef0"]}}]][t],e)}var C=n(3948);const N=["2000 Jugadores en Onix","Terron Extensin","Ests listo?","YouTube:Terronvanis","Delta X Onix","Vanis.io","Nuevas ideas","2+5=?","Hola Todos!!","Elmikins","nete a mi comunidad TWITCH","Oro puro","Sugerencias?","Eres el mejor!","Aveces necesitamos descansar un poco","Extensin en Espaol","El silencio es la mejor Respuesta","Oxin.io La mejor Extensin","TERRON","nete al Discord","La mejor Extensin de Vanis.io","Rumbo al XITO!","Una ballena es peligrosa??","$$$$$$","Ahora eres parte de mi Familia","Usa nombre de mi equipo MOON","2024","TIWTCH:TerronGaming_","Nos vemos!","Bienvenido! Qu jugaremos hoy?","Te gusta la extensin?","Kreed el YouTuber","Eres el Nmero 1","Ya viste que hay de nuevo?","Discord:terron0001","Para ser el mejor, sintete el mejor!"];function A(){(function(){const t=new Date,e=new Date(t.getFullYear(),6,1);t>=e&&e.setFullYear(e.getFullYear()+1);const n=e-t,r=Math.floor(n/1e3%60),i=Math.floor(n/6e4%60),o=Math.floor(n/36e5%24),a=Math.floor(n/864e5%30);String(a).padStart(2,"0"),String(o).padStart(2,"0"),String(i).padStart(2,"0"),String(r).padStart(2,"0")})(),$(SELECT.barHud).html(`\n        <titleMod>Vanilla mode</titleMod>\n        <titleExtension>${N[Math.floor(Math.random()*N.length)]}</titleExtension>\n    `),function(){const t=$(SELECT.socialContainer);if(!t)return;const e=`\n        <a data-v-3f8f826c href="${STRINGS.discordInviteLink}" target="_blank" rel="noopener" class="discord-link">\n            <i class="fal fa-heart"></i> Onix Discord\n        </a>\n    `,n=`\n        <a data-v-3f8f826c href="${STRINGS.supportDiscordLink}" target="_blank" rel="noopener" class="bug-link">\n            <i class="fal fa-bug"></i> Report a bug\n        </a>\n    `;t.append(e,n),t.mouseover((function(){t.fadeTo(250,1)})),t.mouseleave((function(){t.stop(!0,!0).fadeTo(250,.1)}))}(),function(){const t=$(SELECT.level).text().trim(),e=t&&0===$(SELECT.discordBtn).length&&t.match(/\d+/)[0]>=5,n=e?"":"opacity:.3;",r=e?STRINGS.onixRiseMessage:STRINGS.notEnoughLevel,i=e?`window.location.href = '${LIBRARIES.onixDual}'`:"";$(SELECT.mainContainer).append(`\n        <div class="divSwitch">\n            <div class="switchDual switchButton" style="${n}" tip='${r}' onclick="${i}">\n                <p>Dual</p>\n                <img class="imageSwitch" alt="" style="margin-top: 4px" src="${IMAGES.dualMode}">\n            </div>\n            <div class="switchSingle switchButton" tip='${STRINGS.singleModeDetails}' onclick="window.location.href = '${LIBRARIES.onixSingle}'">\n                <p>Single</p>\n                <img class="imageSwitch" alt="" style="margin-top: 4px" src="${IMAGES.singleMode}">\n            </div>\n        </div>\n    `)}(),$(SELECT.overlay).append('\n        <div class="leetchiContainer" onclick="window.open(\'https://www.leetchi.com/fr/c/support-delta-1739775\', \'_blank\')">\n            <p>Support Onix </p>\n            <i class="fa-solid fa-arrow-right"></i>\n        </div>\n    ')}var P=n(3253);function R(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function D(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?R(Object(n),!0).forEach((function(e){O(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function M(t){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M(t)}function O(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function L(){return L=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},L.apply(this,arguments)}function F(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function j(t){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(t)}var B=j(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),G=j(/Edge/i),U=j(/firefox/i),V=j(/safari/i)&&!j(/chrome/i)&&!j(/android/i),q=j(/iP(ad|od|hone)/i),z=j(/chrome/i)&&j(/android/i),H={capture:!1,passive:!1};function W(t,e,n){t.addEventListener(e,n,!B&&H)}function K(t,e,n){t.removeEventListener(e,n,!B&&H)}function Y(t,e){if(e){if(">"===e[0]&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(t){return!1}return!1}}function X(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function Q(t,e,n,r){if(t){n=n||document;do{if(null!=e&&(">"===e[0]?t.parentNode===n&&Y(t,e):Y(t,e))||r&&t===n)return t;if(t===n)break}while(t=X(t))}return null}var J,Z=/\s+/g;function tt(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var r=(" "+t.className+" ").replace(Z," ").replace(" "+e+" "," ");t.className=(r+(n?" "+e:"")).replace(Z," ")}}function et(t,e,n){var r=t&&t.style;if(r){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),void 0===e?n:n[e];e in r||-1!==e.indexOf("webkit")||(e="-webkit-"+e),r[e]=n+("string"==typeof n?"":"px")}}function nt(t,e){var n="";if("string"==typeof t)n=t;else do{var r=et(t,"transform");r&&"none"!==r&&(n=r+" "+n)}while(!e&&(t=t.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function rt(t,e,n){if(t){var r=t.getElementsByTagName(e),i=0,o=r.length;if(n)for(;i<o;i++)n(r[i],i);return r}return[]}function it(){var t=document.scrollingElement;return t||document.documentElement}function ot(t,e,n,r,i){if(t.getBoundingClientRect||t===window){var o,a,s,u,c,l,h;if(t!==window&&t.parentNode&&t!==it()?(a=(o=t.getBoundingClientRect()).top,s=o.left,u=o.bottom,c=o.right,l=o.height,h=o.width):(a=0,s=0,u=window.innerHeight,c=window.innerWidth,l=window.innerHeight,h=window.innerWidth),(e||n)&&t!==window&&(i=i||t.parentNode,!B))do{if(i&&i.getBoundingClientRect&&("none"!==et(i,"transform")||n&&"static"!==et(i,"position"))){var d=i.getBoundingClientRect();a-=d.top+parseInt(et(i,"border-top-width")),s-=d.left+parseInt(et(i,"border-left-width")),u=a+o.height,c=s+o.width;break}}while(i=i.parentNode);if(r&&t!==window){var f=nt(i||t),p=f&&f.a,g=f&&f.d;f&&(u=(a/=g)+(l/=g),c=(s/=p)+(h/=p))}return{top:a,left:s,bottom:u,right:c,width:h,height:l}}}function at(t,e,n){for(var r=ht(t,!0),i=ot(t)[e];r;){var o=ot(r)[n];if(!("top"===n||"left"===n?i>=o:i<=o))return r;if(r===it())break;r=ht(r,!1)}return!1}function st(t,e,n,r){for(var i=0,o=0,a=t.children;o<a.length;){if("none"!==a[o].style.display&&a[o]!==me.ghost&&(r||a[o]!==me.dragged)&&Q(a[o],n.draggable,t,!1)){if(i===e)return a[o];i++}o++}return null}function ut(t,e){for(var n=t.lastElementChild;n&&(n===me.ghost||"none"===et(n,"display")||e&&!Y(n,e));)n=n.previousElementSibling;return n||null}function ct(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)"TEMPLATE"===t.nodeName.toUpperCase()||t===me.clone||e&&!Y(t,e)||n++;return n}function lt(t){var e=0,n=0,r=it();if(t)do{var i=nt(t),o=i.a,a=i.d;e+=t.scrollLeft*o,n+=t.scrollTop*a}while(t!==r&&(t=t.parentNode));return[e,n]}function ht(t,e){if(!t||!t.getBoundingClientRect)return it();var n=t,r=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=et(n);if(n.clientWidth<n.scrollWidth&&("auto"==i.overflowX||"scroll"==i.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==i.overflowY||"scroll"==i.overflowY)){if(!n.getBoundingClientRect||n===document.body)return it();if(r||e)return n;r=!0}}}while(n=n.parentNode);return it()}function dt(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}function ft(t,e){return function(){if(!J){var n=arguments;1===n.length?t.call(this,n[0]):t.apply(this,n),J=setTimeout((function(){J=void 0}),e)}}}function pt(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function gt(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function mt(t,e,n){var r={};return Array.from(t.children).forEach((function(i){var o,a,s,u;if(Q(i,e.draggable,t,!1)&&!i.animated&&i!==n){var c=ot(i);r.left=Math.min(null!==(o=r.left)&&void 0!==o?o:1/0,c.left),r.top=Math.min(null!==(a=r.top)&&void 0!==a?a:1/0,c.top),r.right=Math.max(null!==(s=r.right)&&void 0!==s?s:-1/0,c.right),r.bottom=Math.max(null!==(u=r.bottom)&&void 0!==u?u:-1/0,c.bottom)}})),r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}var vt="Sortable"+(new Date).getTime();function yt(){var t,e=[];return{captureAnimationState:function(){(e=[],this.options.animation)&&[].slice.call(this.el.children).forEach((function(t){if("none"!==et(t,"display")&&t!==me.ghost){e.push({target:t,rect:ot(t)});var n=D({},e[e.length-1].rect);if(t.thisAnimationDuration){var r=nt(t,!0);r&&(n.top-=r.f,n.left-=r.e)}t.fromRect=n}}))},addAnimationState:function(t){e.push(t)},removeAnimationState:function(t){e.splice(function(t,e){for(var n in t)if(t.hasOwnProperty(n))for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t[n][r])return Number(n);return-1}(e,{target:t}),1)},animateAll:function(n){var r=this;if(!this.options.animation)return clearTimeout(t),void("function"==typeof n&&n());var i=!1,o=0;e.forEach((function(t){var e=0,n=t.target,a=n.fromRect,s=ot(n),u=n.prevFromRect,c=n.prevToRect,l=t.rect,h=nt(n,!0);h&&(s.top-=h.f,s.left-=h.e),n.toRect=s,n.thisAnimationDuration&&dt(u,s)&&!dt(a,s)&&(l.top-s.top)/(l.left-s.left)==(a.top-s.top)/(a.left-s.left)&&(e=function(t,e,n,r){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*r.animation}(l,u,c,r.options)),dt(s,a)||(n.prevFromRect=a,n.prevToRect=s,e||(e=r.options.animation),r.animate(n,l,s,e)),e&&(i=!0,o=Math.max(o,e),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout((function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null}),e),n.thisAnimationDuration=e)})),clearTimeout(t),i?t=setTimeout((function(){"function"==typeof n&&n()}),o):"function"==typeof n&&n(),e=[]},animate:function(t,e,n,r){if(r){et(t,"transition",""),et(t,"transform","");var i=nt(this.el),o=i&&i.a,a=i&&i.d,s=(e.left-n.left)/(o||1),u=(e.top-n.top)/(a||1);t.animatingX=!!s,t.animatingY=!!u,et(t,"transform","translate3d("+s+"px,"+u+"px,0)"),this.forRepaintDummy=function(t){return t.offsetWidth}(t),et(t,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),et(t,"transform","translate3d(0,0,0)"),"number"==typeof t.animated&&clearTimeout(t.animated),t.animated=setTimeout((function(){et(t,"transition",""),et(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1}),r)}}}}var bt=[],_t={initializeByDefault:!0},wt={mount:function(t){for(var e in _t)_t.hasOwnProperty(e)&&!(e in t)&&(t[e]=_t[e]);bt.forEach((function(e){if(e.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")})),bt.push(t)},pluginEvent:function(t,e,n){var r=this;this.eventCanceled=!1,n.cancel=function(){r.eventCanceled=!0};var i=t+"Global";bt.forEach((function(r){e[r.pluginName]&&(e[r.pluginName][i]&&e[r.pluginName][i](D({sortable:e},n)),e.options[r.pluginName]&&e[r.pluginName][t]&&e[r.pluginName][t](D({sortable:e},n)))}))},initializePlugins:function(t,e,n,r){for(var i in bt.forEach((function(r){var i=r.pluginName;if(t.options[i]||r.initializeByDefault){var o=new r(t,e,t.options);o.sortable=t,o.options=t.options,t[i]=o,L(n,o.defaults)}})),t.options)if(t.options.hasOwnProperty(i)){var o=this.modifyOption(t,i,t.options[i]);void 0!==o&&(t.options[i]=o)}},getEventProperties:function(t,e){var n={};return bt.forEach((function(r){"function"==typeof r.eventProperties&&L(n,r.eventProperties.call(e[r.pluginName],t))})),n},modifyOption:function(t,e,n){var r;return bt.forEach((function(i){t[i.pluginName]&&i.optionListeners&&"function"==typeof i.optionListeners[e]&&(r=i.optionListeners[e].call(t[i.pluginName],n))})),r}};function St(t){var e=t.sortable,n=t.rootEl,r=t.name,i=t.targetEl,o=t.cloneEl,a=t.toEl,s=t.fromEl,u=t.oldIndex,c=t.newIndex,l=t.oldDraggableIndex,h=t.newDraggableIndex,d=t.originalEvent,f=t.putSortable,p=t.extraEventProperties;if(e=e||n&&n[vt]){var g,m=e.options,v="on"+r.charAt(0).toUpperCase()+r.substr(1);!window.CustomEvent||B||G?(g=document.createEvent("Event")).initEvent(r,!0,!0):g=new CustomEvent(r,{bubbles:!0,cancelable:!0}),g.to=a||n,g.from=s||n,g.item=i||n,g.clone=o,g.oldIndex=u,g.newIndex=c,g.oldDraggableIndex=l,g.newDraggableIndex=h,g.originalEvent=d,g.pullMode=f?f.lastPutMode:void 0;var y=D(D({},p),wt.getEventProperties(r,e));for(var b in y)g[b]=y[b];n&&n.dispatchEvent(g),m[v]&&m[v].call(e,g)}}var Tt=["evt"],xt=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.evt,i=F(n,Tt);wt.pluginEvent.bind(me)(t,e,D({dragEl:kt,parentEl:Et,ghostEl:Ct,rootEl:Nt,nextEl:At,lastDownEl:Pt,cloneEl:Rt,cloneHidden:Dt,dragStarted:$t,putSortable:Bt,activeSortable:me.active,originalEvent:r,oldIndex:Mt,oldDraggableIndex:Lt,newIndex:Ot,newDraggableIndex:Ft,hideGhostForTarget:de,unhideGhostForTarget:fe,cloneNowHidden:function(){Dt=!0},cloneNowShown:function(){Dt=!1},dispatchSortableEvent:function(t){It({sortable:e,name:t,originalEvent:r})}},i))};function It(t){St(D({putSortable:Bt,cloneEl:Rt,targetEl:kt,rootEl:Nt,oldIndex:Mt,oldDraggableIndex:Lt,newIndex:Ot,newDraggableIndex:Ft},t))}var kt,Et,Ct,Nt,At,Pt,Rt,Dt,Mt,Ot,Lt,Ft,jt,Bt,Gt,Ut,Vt,qt,zt,Ht,$t,Wt,Kt,Yt,Xt,Qt=!1,Jt=!1,Zt=[],te=!1,ee=!1,ne=[],re=!1,ie=[],oe="undefined"!=typeof document,ae=q,se=G||B?"cssFloat":"float",ue=oe&&!z&&!q&&"draggable"in document.createElement("div"),ce=function(){if(oe){if(B)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}}(),le=function(t,e){var n=et(t),r=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),i=st(t,0,e),o=st(t,1,e),a=i&&et(i),s=o&&et(o),u=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+ot(i).width,c=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+ot(o).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&a.float&&"none"!==a.float){var l="left"===a.float?"left":"right";return!o||"both"!==s.clear&&s.clear!==l?"horizontal":"vertical"}return i&&("block"===a.display||"flex"===a.display||"table"===a.display||"grid"===a.display||u>=r&&"none"===n[se]||o&&"none"===n[se]&&u+c>r)?"vertical":"horizontal"},he=function(t){function e(t,n){return function(r,i,o,a){var s=r.options.group.name&&i.options.group.name&&r.options.group.name===i.options.group.name;if(null==t&&(n||s))return!0;if(null==t||!1===t)return!1;if(n&&"clone"===t)return t;if("function"==typeof t)return e(t(r,i,o,a),n)(r,i,o,a);var u=(n?r:i).options.group.name;return!0===t||"string"==typeof t&&t===u||t.join&&t.indexOf(u)>-1}}var n={},r=t.group;r&&"object"==M(r)||(r={name:r}),n.name=r.name,n.checkPull=e(r.pull,!0),n.checkPut=e(r.put),n.revertClone=r.revertClone,t.group=n},de=function(){!ce&&Ct&&et(Ct,"display","none")},fe=function(){!ce&&Ct&&et(Ct,"display","")};oe&&!z&&document.addEventListener("click",(function(t){if(Jt)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Jt=!1,!1}),!0);var pe=function(t){if(kt){t=t.touches?t.touches[0]:t;var e=(i=t.clientX,o=t.clientY,Zt.some((function(t){var e=t[vt].options.emptyInsertThreshold;if(e&&!ut(t)){var n=ot(t),r=i>=n.left-e&&i<=n.right+e,s=o>=n.top-e&&o<=n.bottom+e;return r&&s?a=t:void 0}})),a);if(e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);n.target=n.rootEl=e,n.preventDefault=void 0,n.stopPropagation=void 0,e[vt]._onDragOver(n)}}var i,o,a},ge=function(t){kt&&kt.parentNode[vt]._isOutsideThisEl(t.target)};function me(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=L({},e),t[vt]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return le(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==me.supportPointer&&"PointerEvent"in window&&!V,emptyInsertThreshold:5};for(var r in wt.initializePlugins(this,t,n),n)!(r in e)&&(e[r]=n[r]);for(var i in he(e),this)"_"===i.charAt(0)&&"function"==typeof this[i]&&(this[i]=this[i].bind(this));this.nativeDraggable=!e.forceFallback&&ue,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?W(t,"pointerdown",this._onTapStart):(W(t,"mousedown",this._onTapStart),W(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(W(t,"dragover",this),W(t,"dragenter",this)),Zt.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),L(this,yt())}function ve(t,e,n,r,i,o,a,s){var u,c,l=t[vt],h=l.options.onMove;return!window.CustomEvent||B||G?(u=document.createEvent("Event")).initEvent("move",!0,!0):u=new CustomEvent("move",{bubbles:!0,cancelable:!0}),u.to=e,u.from=t,u.dragged=n,u.draggedRect=r,u.related=i||e,u.relatedRect=o||ot(e),u.willInsertAfter=s,u.originalEvent=a,t.dispatchEvent(u),h&&(c=h.call(l,u,a)),c}function ye(t){t.draggable=!1}function be(){re=!1}function _e(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,r=0;n--;)r+=e.charCodeAt(n);return r.toString(36)}function we(t){return setTimeout(t,0)}function Se(t){return clearTimeout(t)}me.prototype={constructor:me,_isOutsideThisEl:function(t){this.el.contains(t)||t===this.el||(Wt=null)},_getDirection:function(t,e){return"function"==typeof this.options.direction?this.options.direction.call(this,t,e,kt):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,n=this.el,r=this.options,i=r.preventOnFilter,o=t.type,a=t.touches&&t.touches[0]||t.pointerType&&"touch"===t.pointerType&&t,s=(a||t).target,u=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||s,c=r.filter;if(function(t){ie.length=0;var e=t.getElementsByTagName("input"),n=e.length;for(;n--;){var r=e[n];r.checked&&ie.push(r)}}(n),!kt&&!(/mousedown|pointerdown/.test(o)&&0!==t.button||r.disabled)&&!u.isContentEditable&&(this.nativeDraggable||!V||!s||"SELECT"!==s.tagName.toUpperCase())&&!((s=Q(s,r.draggable,n,!1))&&s.animated||Pt===s)){if(Mt=ct(s),Lt=ct(s,r.draggable),"function"==typeof c){if(c.call(this,t,s,this))return It({sortable:e,rootEl:u,name:"filter",targetEl:s,toEl:n,fromEl:n}),xt("filter",e,{evt:t}),void(i&&t.cancelable&&t.preventDefault())}else if(c&&(c=c.split(",").some((function(r){if(r=Q(u,r.trim(),n,!1))return It({sortable:e,rootEl:r,name:"filter",targetEl:s,fromEl:n,toEl:n}),xt("filter",e,{evt:t}),!0}))))return void(i&&t.cancelable&&t.preventDefault());r.handle&&!Q(u,r.handle,n,!1)||this._prepareDragStart(t,a,s)}}},_prepareDragStart:function(t,e,n){var r,i=this,o=i.el,a=i.options,s=o.ownerDocument;if(n&&!kt&&n.parentNode===o){var u=ot(n);if(Nt=o,Et=(kt=n).parentNode,At=kt.nextSibling,Pt=n,jt=a.group,me.dragged=kt,Gt={target:kt,clientX:(e||t).clientX,clientY:(e||t).clientY},zt=Gt.clientX-u.left,Ht=Gt.clientY-u.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,kt.style["will-change"]="all",r=function(){xt("delayEnded",i,{evt:t}),me.eventCanceled?i._onDrop():(i._disableDelayedDragEvents(),!U&&i.nativeDraggable&&(kt.draggable=!0),i._triggerDragStart(t,e),It({sortable:i,name:"choose",originalEvent:t}),tt(kt,a.chosenClass,!0))},a.ignore.split(",").forEach((function(t){rt(kt,t.trim(),ye)})),W(s,"dragover",pe),W(s,"mousemove",pe),W(s,"touchmove",pe),W(s,"mouseup",i._onDrop),W(s,"touchend",i._onDrop),W(s,"touchcancel",i._onDrop),U&&this.nativeDraggable&&(this.options.touchStartThreshold=4,kt.draggable=!0),xt("delayStart",this,{evt:t}),!a.delay||a.delayOnTouchOnly&&!e||this.nativeDraggable&&(G||B))r();else{if(me.eventCanceled)return void this._onDrop();W(s,"mouseup",i._disableDelayedDrag),W(s,"touchend",i._disableDelayedDrag),W(s,"touchcancel",i._disableDelayedDrag),W(s,"mousemove",i._delayedDragTouchMoveHandler),W(s,"touchmove",i._delayedDragTouchMoveHandler),a.supportPointer&&W(s,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(r,a.delay)}}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){kt&&ye(kt),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;K(t,"mouseup",this._disableDelayedDrag),K(t,"touchend",this._disableDelayedDrag),K(t,"touchcancel",this._disableDelayedDrag),K(t,"mousemove",this._delayedDragTouchMoveHandler),K(t,"touchmove",this._delayedDragTouchMoveHandler),K(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||"touch"==t.pointerType&&t,!this.nativeDraggable||e?this.options.supportPointer?W(document,"pointermove",this._onTouchMove):W(document,e?"touchmove":"mousemove",this._onTouchMove):(W(kt,"dragend",this),W(Nt,"dragstart",this._onDragStart));try{document.selection?we((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(t,e){if(Qt=!1,Nt&&kt){xt("dragStarted",this,{evt:e}),this.nativeDraggable&&W(document,"dragover",ge);var n=this.options;!t&&tt(kt,n.dragClass,!1),tt(kt,n.ghostClass,!0),me.active=this,t&&this._appendGhost(),It({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(Ut){this._lastX=Ut.clientX,this._lastY=Ut.clientY,de();for(var t=document.elementFromPoint(Ut.clientX,Ut.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(Ut.clientX,Ut.clientY))!==e;)e=t;if(kt.parentNode[vt]._isOutsideThisEl(t),e)do{if(e[vt]){if(e[vt]._onDragOver({clientX:Ut.clientX,clientY:Ut.clientY,target:t,rootEl:e})&&!this.options.dragoverBubble)break}t=e}while(e=e.parentNode);fe()}},_onTouchMove:function(t){if(Gt){var e=this.options,n=e.fallbackTolerance,r=e.fallbackOffset,i=t.touches?t.touches[0]:t,o=Ct&&nt(Ct,!0),a=Ct&&o&&o.a,s=Ct&&o&&o.d,u=ae&&Xt&&lt(Xt),c=(i.clientX-Gt.clientX+r.x)/(a||1)+(u?u[0]-ne[0]:0)/(a||1),l=(i.clientY-Gt.clientY+r.y)/(s||1)+(u?u[1]-ne[1]:0)/(s||1);if(!me.active&&!Qt){if(n&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<n)return;this._onDragStart(t,!0)}if(Ct){o?(o.e+=c-(Vt||0),o.f+=l-(qt||0)):o={a:1,b:0,c:0,d:1,e:c,f:l};var h="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");et(Ct,"webkitTransform",h),et(Ct,"mozTransform",h),et(Ct,"msTransform",h),et(Ct,"transform",h),Vt=c,qt=l,Ut=i}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!Ct){var t=this.options.fallbackOnBody?document.body:Nt,e=ot(kt,!0,ae,!0,t),n=this.options;if(ae){for(Xt=t;"static"===et(Xt,"position")&&"none"===et(Xt,"transform")&&Xt!==document;)Xt=Xt.parentNode;Xt!==document.body&&Xt!==document.documentElement?(Xt===document&&(Xt=it()),e.top+=Xt.scrollTop,e.left+=Xt.scrollLeft):Xt=it(),ne=lt(Xt)}tt(Ct=kt.cloneNode(!0),n.ghostClass,!1),tt(Ct,n.fallbackClass,!0),tt(Ct,n.dragClass,!0),et(Ct,"transition",""),et(Ct,"transform",""),et(Ct,"box-sizing","border-box"),et(Ct,"margin",0),et(Ct,"top",e.top),et(Ct,"left",e.left),et(Ct,"width",e.width),et(Ct,"height",e.height),et(Ct,"opacity","0.8"),et(Ct,"position",ae?"absolute":"fixed"),et(Ct,"zIndex","100000"),et(Ct,"pointerEvents","none"),me.ghost=Ct,t.appendChild(Ct),et(Ct,"transform-origin",zt/parseInt(Ct.style.width)*100+"% "+Ht/parseInt(Ct.style.height)*100+"%")}},_onDragStart:function(t,e){var n=this,r=t.dataTransfer,i=n.options;xt("dragStart",this,{evt:t}),me.eventCanceled?this._onDrop():(xt("setupClone",this),me.eventCanceled||((Rt=gt(kt)).removeAttribute("id"),Rt.draggable=!1,Rt.style["will-change"]="",this._hideClone(),tt(Rt,this.options.chosenClass,!1),me.clone=Rt),n.cloneId=we((function(){xt("clone",n),me.eventCanceled||(n.options.removeCloneOnHide||Nt.insertBefore(Rt,kt),n._hideClone(),It({sortable:n,name:"clone"}))})),!e&&tt(kt,i.dragClass,!0),e?(Jt=!0,n._loopId=setInterval(n._emulateDragOver,50)):(K(document,"mouseup",n._onDrop),K(document,"touchend",n._onDrop),K(document,"touchcancel",n._onDrop),r&&(r.effectAllowed="move",i.setData&&i.setData.call(n,r,kt)),W(document,"drop",n),et(kt,"transform","translateZ(0)")),Qt=!0,n._dragStartId=we(n._dragStarted.bind(n,e,t)),W(document,"selectstart",n),$t=!0,V&&et(document.body,"user-select","none"))},_onDragOver:function(t){var e,n,r,i,o=this.el,a=t.target,s=this.options,u=s.group,c=me.active,l=jt===u,h=s.sort,d=Bt||c,f=this,p=!1;if(!re){if(void 0!==t.preventDefault&&t.cancelable&&t.preventDefault(),a=Q(a,s.draggable,o,!0),N("dragOver"),me.eventCanceled)return p;if(kt.contains(t.target)||a.animated&&a.animatingX&&a.animatingY||f._ignoreWhileAnimating===a)return P(!1);if(Jt=!1,c&&!s.disabled&&(l?h||(r=Et!==Nt):Bt===this||(this.lastPutMode=jt.checkPull(this,c,kt,t))&&u.checkPut(this,c,kt,t))){if(i="vertical"===this._getDirection(t,a),e=ot(kt),N("dragOverValid"),me.eventCanceled)return p;if(r)return Et=Nt,A(),this._hideClone(),N("revert"),me.eventCanceled||(At?Nt.insertBefore(kt,At):Nt.appendChild(kt)),P(!0);var g=ut(o,s.draggable);if(!g||function(t,e,n){var r=ot(ut(n.el,n.options.draggable)),i=mt(n.el,n.options,Ct),o=10;return e?t.clientX>i.right+o||t.clientY>r.bottom&&t.clientX>r.left:t.clientY>i.bottom+o||t.clientX>r.right&&t.clientY>r.top}(t,i,this)&&!g.animated){if(g===kt)return P(!1);if(g&&o===t.target&&(a=g),a&&(n=ot(a)),!1!==ve(Nt,o,kt,e,a,n,t,!!a))return A(),g&&g.nextSibling?o.insertBefore(kt,g.nextSibling):o.appendChild(kt),Et=o,R(),P(!0)}else if(g&&function(t,e,n){var r=ot(st(n.el,0,n.options,!0)),i=mt(n.el,n.options,Ct),o=10;return e?t.clientX<i.left-o||t.clientY<r.top&&t.clientX<r.right:t.clientY<i.top-o||t.clientY<r.bottom&&t.clientX<r.left}(t,i,this)){var m=st(o,0,s,!0);if(m===kt)return P(!1);if(n=ot(a=m),!1!==ve(Nt,o,kt,e,a,n,t,!1))return A(),o.insertBefore(kt,m),Et=o,R(),P(!0)}else if(a.parentNode===o){n=ot(a);var v,y,b,_=kt.parentNode!==o,w=!function(t,e,n){var r=n?t.left:t.top,i=n?t.right:t.bottom,o=n?t.width:t.height,a=n?e.left:e.top,s=n?e.right:e.bottom,u=n?e.width:e.height;return r===a||i===s||r+o/2===a+u/2}(kt.animated&&kt.toRect||e,a.animated&&a.toRect||n,i),S=i?"top":"left",T=at(a,"top","top")||at(kt,"top","top"),x=T?T.scrollTop:void 0;if(Wt!==a&&(y=n[S],te=!1,ee=!w&&s.invertSwap||_),v=function(t,e,n,r,i,o,a,s){var u=r?t.clientY:t.clientX,c=r?n.height:n.width,l=r?n.top:n.left,h=r?n.bottom:n.right,d=!1;if(!a)if(s&&Yt<c*i){if(!te&&(1===Kt?u>l+c*o/2:u<h-c*o/2)&&(te=!0),te)d=!0;else if(1===Kt?u<l+Yt:u>h-Yt)return-Kt}else if(u>l+c*(1-i)/2&&u<h-c*(1-i)/2)return function(t){return ct(kt)<ct(t)?1:-1}(e);if((d=d||a)&&(u<l+c*o/2||u>h-c*o/2))return u>l+c/2?1:-1;return 0}(t,a,n,i,w?1:s.swapThreshold,null==s.invertedSwapThreshold?s.swapThreshold:s.invertedSwapThreshold,ee,Wt===a),0!==v){var I=ct(kt);do{I-=v,b=Et.children[I]}while(b&&("none"===et(b,"display")||b===Ct))}if(0===v||b===a)return P(!1);Wt=a,Kt=v;var k=a.nextElementSibling,E=!1,C=ve(Nt,o,kt,e,a,n,t,E=1===v);if(!1!==C)return 1!==C&&-1!==C||(E=1===C),re=!0,setTimeout(be,30),A(),E&&!k?o.appendChild(kt):a.parentNode.insertBefore(kt,E?k:a),T&&pt(T,0,x-T.scrollTop),Et=kt.parentNode,void 0===y||ee||(Yt=Math.abs(y-ot(a)[S])),R(),P(!0)}if(o.contains(kt))return P(!1)}return!1}function N(s,u){xt(s,f,D({evt:t,isOwner:l,axis:i?"vertical":"horizontal",revert:r,dragRect:e,targetRect:n,canSort:h,fromSortable:d,target:a,completed:P,onMove:function(n,r){return ve(Nt,o,kt,e,n,ot(n),t,r)},changed:R},u))}function A(){N("dragOverAnimationCapture"),f.captureAnimationState(),f!==d&&d.captureAnimationState()}function P(e){return N("dragOverCompleted",{insertion:e}),e&&(l?c._hideClone():c._showClone(f),f!==d&&(tt(kt,Bt?Bt.options.ghostClass:c.options.ghostClass,!1),tt(kt,s.ghostClass,!0)),Bt!==f&&f!==me.active?Bt=f:f===me.active&&Bt&&(Bt=null),d===f&&(f._ignoreWhileAnimating=a),f.animateAll((function(){N("dragOverAnimationComplete"),f._ignoreWhileAnimating=null})),f!==d&&(d.animateAll(),d._ignoreWhileAnimating=null)),(a===kt&&!kt.animated||a===o&&!a.animated)&&(Wt=null),s.dragoverBubble||t.rootEl||a===document||(kt.parentNode[vt]._isOutsideThisEl(t.target),!e&&pe(t)),!s.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),p=!0}function R(){Ot=ct(kt),Ft=ct(kt,s.draggable),It({sortable:f,name:"change",toEl:o,newIndex:Ot,newDraggableIndex:Ft,originalEvent:t})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){K(document,"mousemove",this._onTouchMove),K(document,"touchmove",this._onTouchMove),K(document,"pointermove",this._onTouchMove),K(document,"dragover",pe),K(document,"mousemove",pe),K(document,"touchmove",pe)},_offUpEvents:function(){var t=this.el.ownerDocument;K(t,"mouseup",this._onDrop),K(t,"touchend",this._onDrop),K(t,"pointerup",this._onDrop),K(t,"touchcancel",this._onDrop),K(document,"selectstart",this)},_onDrop:function(t){var e=this.el,n=this.options;Ot=ct(kt),Ft=ct(kt,n.draggable),xt("drop",this,{evt:t}),Et=kt&&kt.parentNode,Ot=ct(kt),Ft=ct(kt,n.draggable),me.eventCanceled||(Qt=!1,ee=!1,te=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Se(this.cloneId),Se(this._dragStartId),this.nativeDraggable&&(K(document,"drop",this),K(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),V&&et(document.body,"user-select",""),et(kt,"transform",""),t&&($t&&(t.cancelable&&t.preventDefault(),!n.dropBubble&&t.stopPropagation()),Ct&&Ct.parentNode&&Ct.parentNode.removeChild(Ct),(Nt===Et||Bt&&"clone"!==Bt.lastPutMode)&&Rt&&Rt.parentNode&&Rt.parentNode.removeChild(Rt),kt&&(this.nativeDraggable&&K(kt,"dragend",this),ye(kt),kt.style["will-change"]="",$t&&!Qt&&tt(kt,Bt?Bt.options.ghostClass:this.options.ghostClass,!1),tt(kt,this.options.chosenClass,!1),It({sortable:this,name:"unchoose",toEl:Et,newIndex:null,newDraggableIndex:null,originalEvent:t}),Nt!==Et?(Ot>=0&&(It({rootEl:Et,name:"add",toEl:Et,fromEl:Nt,originalEvent:t}),It({sortable:this,name:"remove",toEl:Et,originalEvent:t}),It({rootEl:Et,name:"sort",toEl:Et,fromEl:Nt,originalEvent:t}),It({sortable:this,name:"sort",toEl:Et,originalEvent:t})),Bt&&Bt.save()):Ot!==Mt&&Ot>=0&&(It({sortable:this,name:"update",toEl:Et,originalEvent:t}),It({sortable:this,name:"sort",toEl:Et,originalEvent:t})),me.active&&(null!=Ot&&-1!==Ot||(Ot=Mt,Ft=Lt),It({sortable:this,name:"end",toEl:Et,originalEvent:t}),this.save())))),this._nulling()},_nulling:function(){xt("nulling",this),Nt=kt=Et=Ct=At=Rt=Pt=Dt=Gt=Ut=$t=Ot=Ft=Mt=Lt=Wt=Kt=Bt=jt=me.dragged=me.ghost=me.clone=me.active=null,ie.forEach((function(t){t.checked=!0})),ie.length=Vt=qt=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":kt&&(this._onDragOver(t),function(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move");t.cancelable&&t.preventDefault()}(t));break;case"selectstart":t.preventDefault()}},toArray:function(){for(var t,e=[],n=this.el.children,r=0,i=n.length,o=this.options;r<i;r++)Q(t=n[r],o.draggable,this.el,!1)&&e.push(t.getAttribute(o.dataIdAttr)||_e(t));return e},sort:function(t,e){var n={},r=this.el;this.toArray().forEach((function(t,e){var i=r.children[e];Q(i,this.options.draggable,r,!1)&&(n[t]=i)}),this),e&&this.captureAnimationState(),t.forEach((function(t){n[t]&&(r.removeChild(n[t]),r.appendChild(n[t]))})),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return Q(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var n=this.options;if(void 0===e)return n[t];var r=wt.modifyOption(this,t,e);n[t]=void 0!==r?r:e,"group"===t&&he(n)},destroy:function(){xt("destroy",this);var t=this.el;t[vt]=null,K(t,"mousedown",this._onTapStart),K(t,"touchstart",this._onTapStart),K(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(K(t,"dragover",this),K(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),(function(t){t.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),Zt.splice(Zt.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!Dt){if(xt("hideClone",this),me.eventCanceled)return;et(Rt,"display","none"),this.options.removeCloneOnHide&&Rt.parentNode&&Rt.parentNode.removeChild(Rt),Dt=!0}},_showClone:function(t){if("clone"===t.lastPutMode){if(Dt){if(xt("showClone",this),me.eventCanceled)return;kt.parentNode!=Nt||this.options.group.revertClone?At?Nt.insertBefore(Rt,At):Nt.appendChild(Rt):Nt.insertBefore(Rt,kt),this.options.group.revertClone&&this.animate(kt,Rt),et(Rt,"display",""),Dt=!1}}else this._hideClone()}},oe&&W(document,"touchmove",(function(t){(me.active||Qt)&&t.cancelable&&t.preventDefault()})),me.utils={on:W,off:K,css:et,find:rt,is:function(t,e){return!!Q(t,e,t,!1)},extend:function(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},throttle:ft,closest:Q,toggleClass:tt,clone:gt,index:ct,nextTick:we,cancelNextTick:Se,detectDirection:le,getChild:st},me.get=function(t){return t[vt]},me.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach((function(t){if(!t.prototype||!t.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(t));t.utils&&(me.utils=D(D({},me.utils),t.utils)),wt.mount(t)}))},me.create=function(t,e){return new me(t,e)},me.version="1.15.2";var Te,xe,Ie,ke,Ee,Ce,Ne=[],Ae=!1;function Pe(){Ne.forEach((function(t){clearInterval(t.pid)})),Ne=[]}function Re(){clearInterval(Ce)}var De=ft((function(t,e,n,r){if(e.scroll){var i,o=(t.touches?t.touches[0]:t).clientX,a=(t.touches?t.touches[0]:t).clientY,s=e.scrollSensitivity,u=e.scrollSpeed,c=it(),l=!1;xe!==n&&(xe=n,Pe(),Te=e.scroll,i=e.scrollFn,!0===Te&&(Te=ht(n,!0)));var h=0,d=Te;do{var f=d,p=ot(f),g=p.top,m=p.bottom,v=p.left,y=p.right,b=p.width,_=p.height,w=void 0,S=void 0,T=f.scrollWidth,x=f.scrollHeight,I=et(f),k=f.scrollLeft,E=f.scrollTop;f===c?(w=b<T&&("auto"===I.overflowX||"scroll"===I.overflowX||"visible"===I.overflowX),S=_<x&&("auto"===I.overflowY||"scroll"===I.overflowY||"visible"===I.overflowY)):(w=b<T&&("auto"===I.overflowX||"scroll"===I.overflowX),S=_<x&&("auto"===I.overflowY||"scroll"===I.overflowY));var C=w&&(Math.abs(y-o)<=s&&k+b<T)-(Math.abs(v-o)<=s&&!!k),N=S&&(Math.abs(m-a)<=s&&E+_<x)-(Math.abs(g-a)<=s&&!!E);if(!Ne[h])for(var A=0;A<=h;A++)Ne[A]||(Ne[A]={});Ne[h].vx==C&&Ne[h].vy==N&&Ne[h].el===f||(Ne[h].el=f,Ne[h].vx=C,Ne[h].vy=N,clearInterval(Ne[h].pid),0==C&&0==N||(l=!0,Ne[h].pid=setInterval(function(){r&&0===this.layer&&me.active._onTouchMove(Ee);var e=Ne[this.layer].vy?Ne[this.layer].vy*u:0,n=Ne[this.layer].vx?Ne[this.layer].vx*u:0;"function"==typeof i&&"continue"!==i.call(me.dragged.parentNode[vt],n,e,t,Ee,Ne[this.layer].el)||pt(Ne[this.layer].el,n,e)}.bind({layer:h}),24))),h++}while(e.bubbleScroll&&d!==c&&(d=ht(d,!1)));Ae=l}}),30),Me=function(t){var e=t.originalEvent,n=t.putSortable,r=t.dragEl,i=t.activeSortable,o=t.dispatchSortableEvent,a=t.hideGhostForTarget,s=t.unhideGhostForTarget;if(e){var u=n||i;a();var c=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,l=document.elementFromPoint(c.clientX,c.clientY);s(),u&&!u.el.contains(l)&&(o("spill"),this.onSpill({dragEl:r,putSortable:n}))}};function Oe(){}function Le(){}Oe.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,n=t.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var r=st(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(e,r):this.sortable.el.appendChild(e),this.sortable.animateAll(),n&&n.animateAll()},drop:Me},L(Oe,{pluginName:"revertOnSpill"}),Le.prototype={onSpill:function(t){var e=t.dragEl,n=t.putSortable||this.sortable;n.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),n.animateAll()},drop:Me},L(Le,{pluginName:"removeOnSpill"});me.mount(new function(){function t(){for(var t in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this))}return t.prototype={dragStarted:function(t){var e=t.originalEvent;this.sortable.nativeDraggable?W(document,"dragover",this._handleAutoScroll):this.options.supportPointer?W(document,"pointermove",this._handleFallbackAutoScroll):e.touches?W(document,"touchmove",this._handleFallbackAutoScroll):W(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var e=t.originalEvent;this.options.dragOverBubble||e.rootEl||this._handleAutoScroll(e)},drop:function(){this.sortable.nativeDraggable?K(document,"dragover",this._handleAutoScroll):(K(document,"pointermove",this._handleFallbackAutoScroll),K(document,"touchmove",this._handleFallbackAutoScroll),K(document,"mousemove",this._handleFallbackAutoScroll)),Re(),Pe(),clearTimeout(J),J=void 0},nulling:function(){Ee=xe=Te=Ae=Ce=Ie=ke=null,Ne.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,e){var n=this,r=(t.touches?t.touches[0]:t).clientX,i=(t.touches?t.touches[0]:t).clientY,o=document.elementFromPoint(r,i);if(Ee=t,e||this.options.forceAutoScrollFallback||G||B||V){De(t,this.options,o,e);var a=ht(o,!0);!Ae||Ce&&r===Ie&&i===ke||(Ce&&Re(),Ce=setInterval((function(){var o=ht(document.elementFromPoint(r,i),!0);o!==a&&(a=o,Pe()),De(t,n.options,o,e)}),10),Ie=r,ke=i)}else{if(!this.options.bubbleScroll||ht(o,!0)===it())return void Pe();De(t,this.options,ht(o,!1),!1)}}},L(t,{pluginName:"scroll",initializeByDefault:!0})}),me.mount(Le,Oe);const Fe=me;async function je(){$(SELECT.loadingText).text("Building components..."),await async function(){1===r.g&&(await async function(){const t=$(SELECT.skinUrl),e=t?t.val():IMAGES.transparentSkin;$(SELECT.playerData).before(`\n        <div class="profile-image">\n            <img class="skinProfile beautifulSkin" alt="" src="${secureHTML(e)}">\n        </div>\n    `),await(0,u.sY)(e,!1)}(),A());(0,P.v)(),function(){const t=document.getElementById("skins");new Fe(t,{handle:".skin-container",onEnd:function(){(0,u.TW)()}})}()}(),function(){$(SELECT.skinUrl).on("change",(async function(){await(0,u.sY)($(this).val(),!0)})),$(SELECT.skinElem).on("click",(async function(){await(0,u.sY)($(this).attr("src"),!0)})),$(SELECT.nickname).on("input",(function(){SETTINGS.n=$(this).val()})).on("change",(async function(){await(0,c.p6)(i.tf.meUser,STRINGS.typeNickname)})),$(SELECT.serverListItem).on("click",(async function(){o.Qj.server=$(this).find(SELECT.serverName).text(),r.yS.resize=0,await(0,c.p6)(i.tf.meUser,STRINGS.typeServer)})),$(SELECT.playButton).on("click",(async()=>{await(0,c.p6)(i.tf.meUser,STRINGS.typeStatus),l(),s()})),$(SELECT.spectateButton).on("click",(async()=>{await(0,c.p6)(i.tf.meUser,STRINGS.typeSpectator),s()}));let t=0;$(SELECT.barHud).on("click",(()=>{t++,20===t&&(E(1),t=0)}))}(),function(){const t=document.querySelector(SELECT.bar);new MutationObserver((async function(t){for(let e of t)if("childList"===e.type||"characterData"===e.type){r.g>1&&await(0,c.p6)(i.tf.meUser,STRINGS.typeStatus),o.Qj.server!==STRINGS.lobbies&&(new Date).getTime()-1e3>r.yS.updated&&1===r.g&&(0,C.Zf)();break}})).observe(t,{characterData:!0,childList:!0,subtree:!0})}()}},3253:(t,e,n)=>{"use strict";n.d(e,{v:()=>Xs,s:()=>Js});var r=n(9460),i=n(4046),o=n(3583),a=n(6092),s=n(134);var u=n(5543);function c(){if($(SELECT.userBox).length>0)return;if(!r.x.users)return void fireTimedSwal(STRINGS.tooFastForOnixTitle,STRINGS.tooFastForOnixContent,STRINGS.errorSwalTime,STRINGS.okButton);const t=function(t){const e=i.J[o.tG.uid];let{listOnline:n,listOffline:r,userCount:s}=function(t,e){let n="",r="",i={online:0,offline:0,total:0};return Object.values(t).forEach((t=>{if(t===e)return;const o=(0,a.R2)(t.st),s=l(t,o);o===STRINGS.online?(n+=s,i.online++):o&&(r+=s,i.offline++),i.total++})),{listOnline:n,listOffline:r,userCount:i}}(t,e);return{meHeader:`<h3 class="titleSubBox">${STRINGS.meProfileTitle}</h3>`,onlineHeader:`<h3 class="titleSubBox">${s.online} ${STRINGS.onlinePlayersTitle}</h3>`,offlineHeader:`<h3 class="titleSubBox">${s.offline} ${STRINGS.offlinePlayersTitle}</h3>`,profileHeader:l(e,(0,a.R2)(e.st)),onlineList:n,offlineList:r,counts:s}}(i.J);Js(t.meHeader+t.profileHeader+t.onlineHeader+t.onlineList+t.offlineHeader+t.offlineList,STRINGS.userModalTitle,`\n        <div data-v-3ddebeb3="" class="p-switch pretty switchAnonymous" p-checkbox="">\n            <input type="checkbox" ${o.Qj.anonymous}="" onchange="switchManager(STRINGS.typeAnonymous)" tip="${STRINGS.anonymousDetails}"> \n            <div class="state">\n                <label>${STRINGS.anonymous}</label>\n            </div>\n        </div>\n    `,function(){const t=(new Date).getTime()-72e5,e=(new Date).getTime()-STRINGS.timeToOnline;let n=0,r=0;for(let o in i.J)if(i.J.hasOwnProperty(o)){const a=i.J[o].st;a>=t&&n++,a>=e&&r++}return`${STRINGS.onlineUsersTip} ${r}\n${STRINGS.dailyOnlineUsersTip} ${n}`}())}function l(t,e){const n=(0,u.WE)(t),r=(0,s.$9)(n.s),i=n.a?"":`onclick="createUserProfileModal('${encodeURIComponent(stringifierJson(n))}')"`,o=n.a?n.s:""===r.type?IMAGES.transparentSkin:r.url,a=""===r.type||n.a?"":`onclick="renderSkin('${encodeURIComponent(stringifierJson(r))}'), event.stopPropagation();"`,c=n.ba&&n.ba.u?`<img class="userBadgeDiv" alt="" src="${secureHTML(n.ba.u)}" tip="${secureHTML(n.ba.t)}">`:"",l=e===STRINGS.online?COLORS.onlineColor:COLORS.offlineColor,h=n.n===STRINGS.unnamed?COLORS.defaultColor:secureHTML(n.c),d=function(t,e){return e===STRINGS.anonymous&&t===STRINGS.online?STRINGS.online:e.includes(STRINGS.spectator)&&STRINGS.online?e:t+STRINGS.onWord+e.replace(STRINGS.spectatorOn,"")}(e,n.se),f=function(t){return t===STRINGS.modeSingle?IMAGES.singleMode:t===STRINGS.modeDual?IMAGES.dualMode:t===STRINGS.modeTest?IMAGES.testMode:t===STRINGS.modeVanilla?IMAGES.vanillaMode:IMAGES.undefMode}(n.m),p=n.m!==STRINGS.anonymous?`tip="${secureHTML(n.m)+" mode"}"`:"";return`\n        <div class="listItem userItem ${secureHTML(e)}" ${i}>\n            <img class="userPhoto beautifulSkin" alt="" src="${secureHTML(o)}" onerror="this.src = '${IMAGES.transparentSkin}'" ${a}>\n            <div class="userOnline" style="background-color: ${secureHTML(l)}"></div>\n            <div class="listTextItem userTextElem">\n                <div class="userNickLine">\n                    ${c}\n                    <p class="userNickname" style="color: ${secureHTML(h)}">${secureHTML(n.n)}</p>\n                </div>\n                <p class="userOnlineText">${secureHTML(d)}\n                    <img class="userModeImg" alt="" src="${secureHTML(f)}" ${p}>\n                </p>\n            </div>\n            <i class="fal fa-chevron-right userGoDetails"></i>\n        </div>\n    `}var h=n(3973),d=n(7576);function f(t){return t+.5|0}const p=(t,e,n)=>Math.max(Math.min(t,n),e);function g(t){return p(f(2.55*t),0,255)}function m(t){return p(f(255*t),0,255)}function v(t){return p(f(t/2.55)/100,0,1)}function y(t){return p(f(100*t),0,100)}const b={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},_=[..."0123456789ABCDEF"],w=t=>_[15&t],S=t=>_[(240&t)>>4]+_[15&t],T=t=>(240&t)>>4==(15&t);function x(t){var e=(t=>T(t.r)&&T(t.g)&&T(t.b)&&T(t.a))(t)?w:S;return t?"#"+e(t.r)+e(t.g)+e(t.b)+((t,e)=>t<255?e(t):"")(t.a,e):void 0}const I=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function k(t,e,n){const r=e*Math.min(n,1-n),i=(e,i=(e+t/30)%12)=>n-r*Math.max(Math.min(i-3,9-i,1),-1);return[i(0),i(8),i(4)]}function E(t,e,n){const r=(r,i=(r+t/60)%6)=>n-n*e*Math.max(Math.min(i,4-i,1),0);return[r(5),r(3),r(1)]}function C(t,e,n){const r=k(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function N(t){const e=t.r/255,n=t.g/255,r=t.b/255,i=Math.max(e,n,r),o=Math.min(e,n,r),a=(i+o)/2;let s,u,c;return i!==o&&(c=i-o,u=a>.5?c/(2-i-o):c/(i+o),s=function(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}(e,n,r,c,i),s=60*s+.5),[0|s,u||0,a]}function A(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(m)}function P(t,e,n){return A(k,t,e,n)}function R(t){return(t%360+360)%360}function D(t){const e=I.exec(t);let n,r=255;if(!e)return;e[5]!==n&&(r=e[6]?g(+e[5]):m(+e[5]));const i=R(+e[2]),o=+e[3]/100,a=+e[4]/100;return n="hwb"===e[1]?function(t,e,n){return A(C,t,e,n)}(i,o,a):"hsv"===e[1]?function(t,e,n){return A(E,t,e,n)}(i,o,a):P(i,o,a),{r:n[0],g:n[1],b:n[2],a:r}}const M={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},O={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let L;function F(t){L||(L=function(){const t={},e=Object.keys(O),n=Object.keys(M);let r,i,o,a,s;for(r=0;r<e.length;r++){for(a=s=e[r],i=0;i<n.length;i++)o=n[i],s=s.replace(o,M[o]);o=parseInt(O[a],16),t[s]=[o>>16&255,o>>8&255,255&o]}return t}(),L.transparent=[0,0,0,0]);const e=L[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}const j=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const B=t=>t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,G=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function U(t,e,n){if(t){let r=N(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,0===e?360:1)),r=P(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function V(t,e){return t?Object.assign(e||{},t):t}function q(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=m(t[3]))):(e=V(t,{r:0,g:0,b:0,a:1})).a=m(e.a),e}function z(t){return"r"===t.charAt(0)?function(t){const e=j.exec(t);let n,r,i,o=255;if(e){if(e[7]!==n){const t=+e[7];o=e[8]?g(t):p(255*t,0,255)}return n=+e[1],r=+e[3],i=+e[5],n=255&(e[2]?g(n):p(n,0,255)),r=255&(e[4]?g(r):p(r,0,255)),i=255&(e[6]?g(i):p(i,0,255)),{r:n,g:r,b:i,a:o}}}(t):D(t)}class H{constructor(t){if(t instanceof H)return t;const e=typeof t;let n;var r,i,o;"object"===e?n=q(t):"string"===e&&(o=(r=t).length,"#"===r[0]&&(4===o||5===o?i={r:255&17*b[r[1]],g:255&17*b[r[2]],b:255&17*b[r[3]],a:5===o?17*b[r[4]]:255}:7!==o&&9!==o||(i={r:b[r[1]]<<4|b[r[2]],g:b[r[3]]<<4|b[r[4]],b:b[r[5]]<<4|b[r[6]],a:9===o?b[r[7]]<<4|b[r[8]]:255})),n=i||F(t)||z(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=V(this._rgb);return t&&(t.a=v(t.a)),t}set rgb(t){this._rgb=q(t)}rgbString(){return this._valid?(t=this._rgb)&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${v(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`):void 0;var t}hexString(){return this._valid?x(this._rgb):void 0}hslString(){return this._valid?function(t){if(!t)return;const e=N(t),n=e[0],r=y(e[1]),i=y(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${i}%, ${v(t.a)})`:`hsl(${n}, ${r}%, ${i}%)`}(this._rgb):void 0}mix(t,e){if(t){const n=this.rgb,r=t.rgb;let i;const o=e===i?.5:e,a=2*o-1,s=n.a-r.a,u=((a*s==-1?a:(a+s)/(1+a*s))+1)/2;i=1-u,n.r=255&u*n.r+i*r.r+.5,n.g=255&u*n.g+i*r.g+.5,n.b=255&u*n.b+i*r.b+.5,n.a=o*n.a+(1-o)*r.a,this.rgb=n}return this}interpolate(t,e){return t&&(this._rgb=function(t,e,n){const r=G(v(t.r)),i=G(v(t.g)),o=G(v(t.b));return{r:m(B(r+n*(G(v(e.r))-r))),g:m(B(i+n*(G(v(e.g))-i))),b:m(B(o+n*(G(v(e.b))-o))),a:t.a+n*(e.a-t.a)}}(this._rgb,t._rgb,e)),this}clone(){return new H(this.rgb)}alpha(t){return this._rgb.a=m(t),this}clearer(t){return this._rgb.a*=1-t,this}greyscale(){const t=this._rgb,e=f(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){return this._rgb.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return U(this._rgb,2,t),this}darken(t){return U(this._rgb,2,-t),this}saturate(t){return U(this._rgb,1,t),this}desaturate(t){return U(this._rgb,1,-t),this}rotate(t){return function(t,e){var n=N(t);n[0]=R(n[0]+e),n=P(n),t.r=n[0],t.g=n[1],t.b=n[2]}(this._rgb,t),this}}function W(){}const K=(()=>{let t=0;return()=>t++})();function Y(t){return null==t}function X(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return"[object"===e.slice(0,7)&&"Array]"===e.slice(-6)}function Q(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)}function J(t){return("number"==typeof t||t instanceof Number)&&isFinite(+t)}function Z(t,e){return J(t)?t:e}function tt(t,e){return void 0===t?e:t}const et=(t,e)=>"string"==typeof t&&t.endsWith("%")?parseFloat(t)/100*e:+t;function nt(t,e,n){if(t&&"function"==typeof t.call)return t.apply(n,e)}function rt(t,e,n,r){let i,o,a;if(X(t))if(o=t.length,r)for(i=o-1;i>=0;i--)e.call(n,t[i],i);else for(i=0;i<o;i++)e.call(n,t[i],i);else if(Q(t))for(a=Object.keys(t),o=a.length,i=0;i<o;i++)e.call(n,t[a[i]],a[i])}function it(t,e){let n,r,i,o;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],o=e[n],i.datasetIndex!==o.datasetIndex||i.index!==o.index)return!1;return!0}function ot(t){if(X(t))return t.map(ot);if(Q(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let i=0;for(;i<r;++i)e[n[i]]=ot(t[n[i]]);return e}return t}function at(t){return-1===["__proto__","prototype","constructor"].indexOf(t)}function st(t,e,n,r){if(!at(t))return;const i=e[t],o=n[t];Q(i)&&Q(o)?ut(i,o,r):e[t]=ot(o)}function ut(t,e,n){const r=X(e)?e:[e],i=r.length;if(!Q(t))return t;const o=(n=n||{}).merger||st;let a;for(let e=0;e<i;++e){if(a=r[e],!Q(a))continue;const i=Object.keys(a);for(let e=0,r=i.length;e<r;++e)o(i[e],t,a,n)}return t}function ct(t,e){return ut(t,e,{merger:lt})}function lt(t,e,n){if(!at(t))return;const r=e[t],i=n[t];Q(r)&&Q(i)?ct(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=ot(i))}const ht={"":t=>t,x:t=>t.x,y:t=>t.y};function dt(t,e){const n=ht[e]||(ht[e]=function(t){const e=function(t){const e=t.split("."),n=[];let r="";for(const t of e)r+=t,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}(t);return t=>{for(const n of e){if(""===n)break;t=t&&t[n]}return t}}(e));return n(t)}function ft(t){return t.charAt(0).toUpperCase()+t.slice(1)}const pt=t=>void 0!==t,gt=t=>"function"==typeof t,mt=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};const vt=Math.PI,yt=2*vt,bt=yt+vt,_t=Number.POSITIVE_INFINITY,wt=vt/180,St=vt/2,Tt=vt/4,xt=2*vt/3,It=Math.log10,kt=Math.sign;function Et(t,e,n){return Math.abs(t-e)<n}function Ct(t){const e=Math.round(t);t=Et(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(It(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function Nt(t){return!isNaN(parseFloat(t))&&isFinite(t)}function At(t,e,n){let r,i,o;for(r=0,i=t.length;r<i;r++)o=t[r][n],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function Pt(t){return t*(vt/180)}function Rt(t){return t*(180/vt)}function Dt(t){if(!J(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function Mt(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);let o=Math.atan2(r,n);return o<-.5*vt&&(o+=yt),{angle:o,distance:i}}function Ot(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Lt(t,e){return(t-e+bt)%yt-vt}function Ft(t){return(t%yt+yt)%yt}function jt(t,e,n,r){const i=Ft(t),o=Ft(e),a=Ft(n),s=Ft(o-i),u=Ft(a-i),c=Ft(i-o),l=Ft(i-a);return i===o||i===a||r&&o===a||s>u&&c<l}function Bt(t,e,n){return Math.max(e,Math.min(n,t))}function Gt(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function Ut(t,e,n){n=n||(n=>t[n]<e);let r,i=t.length-1,o=0;for(;i-o>1;)r=o+i>>1,n(r)?o=r:i=r;return{lo:o,hi:i}}const Vt=(t,e,n,r)=>Ut(t,n,r?r=>{const i=t[r][e];return i<n||i===n&&t[r+1][e]===n}:r=>t[r][e]<n),qt=(t,e,n)=>Ut(t,n,(r=>t[r][e]>=n));const zt=["push","pop","shift","splice","unshift"];function Ht(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(e);-1!==i&&r.splice(i,1),r.length>0||(zt.forEach((e=>{delete t[e]})),delete t._chartjs)}function $t(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const Wt="undefined"==typeof window?function(t){return t()}:window.requestAnimationFrame;function Kt(t,e){let n=[],r=!1;return function(...i){n=i,r||(r=!0,Wt.call(window,(()=>{r=!1,t.apply(e,n)})))}}const Yt=t=>"start"===t?"left":"end"===t?"right":"center",Xt=(t,e,n)=>"start"===t?e:"end"===t?n:(e+n)/2;function Qt(t,e,n){const r=e.length;let i=0,o=r;if(t._sorted){const{iScale:a,_parsed:s}=t,u=a.axis,{min:c,max:l,minDefined:h,maxDefined:d}=a.getUserBounds();h&&(i=Bt(Math.min(Vt(s,u,c).lo,n?r:Vt(e,u,a.getPixelForValue(c)).lo),0,r-1)),o=d?Bt(Math.max(Vt(s,a.axis,l,!0).hi+1,n?0:Vt(e,u,a.getPixelForValue(l),!0).hi+1),i,r)-i:r-i}return{start:i,count:o}}function Jt(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=i,!0;const o=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),o}const Zt=t=>0===t||1===t,te=(t,e,n)=>-Math.pow(2,10*(t-=1))*Math.sin((t-e)*yt/n),ee=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*yt/n)+1,ne={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>1-Math.cos(t*St),easeOutSine:t=>Math.sin(t*St),easeInOutSine:t=>-.5*(Math.cos(vt*t)-1),easeInExpo:t=>0===t?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>1===t?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>Zt(t)?t:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(2-Math.pow(2,-10*(2*t-1))),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Zt(t)?t:te(t,.075,.3),easeOutElastic:t=>Zt(t)?t:ee(t,.075,.3),easeInOutElastic(t){const e=.1125;return Zt(t)?t:t<.5?.5*te(2*t,e,.45):.5+.5*ee(2*t-1,e,.45)},easeInBack(t){const e=1.70158;return t*t*((e+1)*t-e)},easeOutBack(t){const e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:t=>1-ne.easeOutBounce(1-t),easeOutBounce(t){const e=7.5625,n=2.75;return t<1/n?e*t*t:t<2/n?e*(t-=1.5/n)*t+.75:t<2.5/n?e*(t-=2.25/n)*t+.9375:e*(t-=2.625/n)*t+.984375},easeInOutBounce:t=>t<.5?.5*ne.easeInBounce(2*t):.5*ne.easeOutBounce(2*t-1)+.5};function re(t){if(t&&"object"==typeof t){const e=t.toString();return"[object CanvasPattern]"===e||"[object CanvasGradient]"===e}return!1}function ie(t){return re(t)?t:new H(t)}function oe(t){return re(t)?t:new H(t).saturate(.5).darken(.1).hexString()}const ae=["x","y","borderWidth","radius","tension"],se=["color","borderColor","backgroundColor"];const ue=new Map;function ce(t,e,n){return function(t,e){e=e||{};const n=t+JSON.stringify(e);let r=ue.get(n);return r||(r=new Intl.NumberFormat(t,e),ue.set(n,r)),r}(e,n).format(t)}const le={values:t=>X(t)?t:""+t,numeric(t,e,n){if(0===t)return"0";const r=this.chart.options.locale;let i,o=t;if(n.length>1){const e=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(e<1e-4||e>1e15)&&(i="scientific"),o=function(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t));return n}(t,n)}const a=It(Math.abs(o)),s=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),u={notation:i,minimumFractionDigits:s,maximumFractionDigits:s};return Object.assign(u,this.options.ticks.format),ce(t,r,u)},logarithmic(t,e,n){if(0===t)return"0";const r=n[e].significand||t/Math.pow(10,Math.floor(It(t)));return[1,2,3,5,10,15].includes(r)||e>.8*n.length?le.numeric.call(this,t,e,n):""}};var he={formatters:le};const de=Object.create(null),fe=Object.create(null);function pe(t,e){if(!e)return t;const n=e.split(".");for(let e=0,r=n.length;e<r;++e){const r=n[e];t=t[r]||(t[r]=Object.create(null))}return t}function ge(t,e,n){return"string"==typeof e?ut(pe(t,e),n):ut(pe(t,""),e)}class me{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,e)=>oe(e.backgroundColor),this.hoverBorderColor=(t,e)=>oe(e.borderColor),this.hoverColor=(t,e)=>oe(e.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return ge(this,t,e)}get(t){return pe(this,t)}describe(t,e){return ge(fe,t,e)}override(t,e){return ge(de,t,e)}route(t,e,n,r){const i=pe(this,t),o=pe(this,n),a="_"+e;Object.defineProperties(i,{[a]:{value:i[e],writable:!0},[e]:{enumerable:!0,get(){const t=this[a],e=o[r];return Q(t)?Object.assign({},e,t):tt(t,e)},set(t){this[a]=t}}})}apply(t){t.forEach((t=>t(this)))}}var ve=new me({_scriptable:t=>!t.startsWith("on"),_indexable:t=>"events"!==t,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}),t.set("animations",{colors:{type:"color",properties:se},numbers:{type:"number",properties:ae}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}})},function(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:he.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t,_indexable:t=>"borderDash"!==t&&"tickBorderDash"!==t&&"dash"!==t}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:t=>"backdropPadding"!==t&&"callback"!==t,_indexable:t=>"backdropPadding"!==t})}]);function ye(t,e,n,r,i){let o=e[i];return o||(o=e[i]=t.measureText(i).width,n.push(i)),o>r&&(r=o),r}function be(t,e,n,r){let i=(r=r||{}).data=r.data||{},o=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},o=r.garbageCollect=[],r.font=e),t.save(),t.font=e;let a=0;const s=n.length;let u,c,l,h,d;for(u=0;u<s;u++)if(h=n[u],null==h||X(h)){if(X(h))for(c=0,l=h.length;c<l;c++)d=h[c],null==d||X(d)||(a=ye(t,i,o,a,d))}else a=ye(t,i,o,a,h);t.restore();const f=o.length/2;if(f>n.length){for(u=0;u<f;u++)delete i[o[u]];o.splice(0,f)}return a}function _e(t,e,n){const r=t.currentDevicePixelRatio,i=0!==n?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function we(t,e){(e=e||t.getContext("2d")).save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function Se(t,e,n,r){Te(t,e,n,r,null)}function Te(t,e,n,r,i){let o,a,s,u,c,l,h,d;const f=e.pointStyle,p=e.rotation,g=e.radius;let m=(p||0)*wt;if(f&&"object"==typeof f&&(o=f.toString(),"[object HTMLImageElement]"===o||"[object HTMLCanvasElement]"===o))return t.save(),t.translate(n,r),t.rotate(m),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),void t.restore();if(!(isNaN(g)||g<=0)){switch(t.beginPath(),f){default:i?t.ellipse(n,r,i/2,g,0,0,yt):t.arc(n,r,g,0,yt),t.closePath();break;case"triangle":l=i?i/2:g,t.moveTo(n+Math.sin(m)*l,r-Math.cos(m)*g),m+=xt,t.lineTo(n+Math.sin(m)*l,r-Math.cos(m)*g),m+=xt,t.lineTo(n+Math.sin(m)*l,r-Math.cos(m)*g),t.closePath();break;case"rectRounded":c=.516*g,u=g-c,a=Math.cos(m+Tt)*u,h=Math.cos(m+Tt)*(i?i/2-c:u),s=Math.sin(m+Tt)*u,d=Math.sin(m+Tt)*(i?i/2-c:u),t.arc(n-h,r-s,c,m-vt,m-St),t.arc(n+d,r-a,c,m-St,m),t.arc(n+h,r+s,c,m,m+St),t.arc(n-d,r+a,c,m+St,m+vt),t.closePath();break;case"rect":if(!p){u=Math.SQRT1_2*g,l=i?i/2:u,t.rect(n-l,r-u,2*l,2*u);break}m+=Tt;case"rectRot":h=Math.cos(m)*(i?i/2:g),a=Math.cos(m)*g,s=Math.sin(m)*g,d=Math.sin(m)*(i?i/2:g),t.moveTo(n-h,r-s),t.lineTo(n+d,r-a),t.lineTo(n+h,r+s),t.lineTo(n-d,r+a),t.closePath();break;case"crossRot":m+=Tt;case"cross":h=Math.cos(m)*(i?i/2:g),a=Math.cos(m)*g,s=Math.sin(m)*g,d=Math.sin(m)*(i?i/2:g),t.moveTo(n-h,r-s),t.lineTo(n+h,r+s),t.moveTo(n+d,r-a),t.lineTo(n-d,r+a);break;case"star":h=Math.cos(m)*(i?i/2:g),a=Math.cos(m)*g,s=Math.sin(m)*g,d=Math.sin(m)*(i?i/2:g),t.moveTo(n-h,r-s),t.lineTo(n+h,r+s),t.moveTo(n+d,r-a),t.lineTo(n-d,r+a),m+=Tt,h=Math.cos(m)*(i?i/2:g),a=Math.cos(m)*g,s=Math.sin(m)*g,d=Math.sin(m)*(i?i/2:g),t.moveTo(n-h,r-s),t.lineTo(n+h,r+s),t.moveTo(n+d,r-a),t.lineTo(n-d,r+a);break;case"line":a=i?i/2:Math.cos(m)*g,s=Math.sin(m)*g,t.moveTo(n-a,r-s),t.lineTo(n+a,r+s);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(m)*(i?i/2:g),r+Math.sin(m)*g);break;case!1:t.closePath()}t.fill(),e.borderWidth>0&&t.stroke()}}function xe(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Ie(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function ke(t){t.restore()}function Ee(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if("middle"===i){const r=(e.x+n.x)/2;t.lineTo(r,e.y),t.lineTo(r,n.y)}else"after"===i!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function Ce(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function Ne(t,e,n,r,i){if(i.strikethrough||i.underline){const o=t.measureText(r),a=e-o.actualBoundingBoxLeft,s=e+o.actualBoundingBoxRight,u=n-o.actualBoundingBoxAscent,c=n+o.actualBoundingBoxDescent,l=i.strikethrough?(u+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(a,l),t.lineTo(s,l),t.stroke()}}function Ae(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Pe(t,e,n,r,i,o={}){const a=X(e)?e:[e],s=o.strokeWidth>0&&""!==o.strokeColor;let u,c;for(t.save(),t.font=i.string,function(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Y(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}(t,o),u=0;u<a.length;++u)c=a[u],o.backdrop&&Ae(t,o.backdrop),s&&(o.strokeColor&&(t.strokeStyle=o.strokeColor),Y(o.strokeWidth)||(t.lineWidth=o.strokeWidth),t.strokeText(c,n,r,o.maxWidth)),t.fillText(c,n,r,o.maxWidth),Ne(t,n,r,c,o),r+=Number(i.lineHeight);t.restore()}function Re(t,e){const{x:n,y:r,w:i,h:o,radius:a}=e;t.arc(n+a.topLeft,r+a.topLeft,a.topLeft,1.5*vt,vt,!0),t.lineTo(n,r+o-a.bottomLeft),t.arc(n+a.bottomLeft,r+o-a.bottomLeft,a.bottomLeft,vt,St,!0),t.lineTo(n+i-a.bottomRight,r+o),t.arc(n+i-a.bottomRight,r+o-a.bottomRight,a.bottomRight,St,0,!0),t.lineTo(n+i,r+a.topRight),t.arc(n+i-a.topRight,r+a.topRight,a.topRight,0,-St,!0),t.lineTo(n+a.topLeft,r)}const De=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Me=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Oe(t,e){const n=(""+t).match(De);if(!n||"normal"===n[1])return 1.2*e;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100}return e*t}const Le=t=>+t||0;function Fe(t,e){const n={},r=Q(e),i=r?Object.keys(e):e,o=Q(t)?r?n=>tt(t[n],t[e[n]]):e=>t[e]:()=>t;for(const t of i)n[t]=Le(o(t));return n}function je(t){return Fe(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Be(t){return Fe(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Ge(t){const e=je(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Ue(t,e){t=t||{},e=e||ve.font;let n=tt(t.size,e.size);"string"==typeof n&&(n=parseInt(n,10));let r=tt(t.style,e.style);r&&!(""+r).match(Me)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:tt(t.family,e.family),lineHeight:Oe(tt(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:tt(t.weight,e.weight),string:""};return i.string=function(t){return!t||Y(t.size)||Y(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}(i),i}function Ve(t,e,n,r){let i,o,a,s=!0;for(i=0,o=t.length;i<o;++i)if(a=t[i],void 0!==a&&(void 0!==e&&"function"==typeof a&&(a=a(e),s=!1),void 0!==n&&X(a)&&(a=a[n%a.length],s=!1),void 0!==a))return r&&!s&&(r.cacheable=!1),a}function qe(t,e){return Object.assign(Object.create(t),e)}function ze(t,e=[""],n,r,i=(()=>t[0])){const o=n||t;void 0===r&&(r=en("_fallback",t));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:o,_fallback:r,_getTarget:i,override:n=>ze([n,...t],e,o,r)};return new Proxy(a,{deleteProperty:(e,n)=>(delete e[n],delete e._keys,delete t[0][n],!0),get:(n,r)=>Ye(n,r,(()=>function(t,e,n,r){let i;for(const o of e)if(i=en(We(o,t),n),void 0!==i)return Ke(t,i)?Ze(n,r,t,i):i}(r,e,t,n))),getOwnPropertyDescriptor:(t,e)=>Reflect.getOwnPropertyDescriptor(t._scopes[0],e),getPrototypeOf:()=>Reflect.getPrototypeOf(t[0]),has:(t,e)=>nn(t).includes(e),ownKeys:t=>nn(t),set(t,e,n){const r=t._storage||(t._storage=i());return t[e]=r[e]=n,delete t._keys,!0}})}function He(t,e,n,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:$e(t,r),setContext:e=>He(t,e,n,r),override:i=>He(t.override(i),e,n,r)};return new Proxy(i,{deleteProperty:(e,n)=>(delete e[n],delete t[n],!0),get:(t,e,n)=>Ye(t,e,(()=>function(t,e,n){const{_proxy:r,_context:i,_subProxy:o,_descriptors:a}=t;let s=r[e];gt(s)&&a.isScriptable(e)&&(s=function(t,e,n,r){const{_proxy:i,_context:o,_subProxy:a,_stack:s}=n;if(s.has(t))throw new Error("Recursion detected: "+Array.from(s).join("->")+"->"+t);s.add(t);let u=e(o,a||r);s.delete(t),Ke(t,u)&&(u=Ze(i._scopes,i,t,u));return u}(e,s,t,n));X(s)&&s.length&&(s=function(t,e,n,r){const{_proxy:i,_context:o,_subProxy:a,_descriptors:s}=n;if(void 0!==o.index&&r(t))return e[o.index%e.length];if(Q(e[0])){const n=e,r=i._scopes.filter((t=>t!==n));e=[];for(const u of n){const n=Ze(r,i,t,u);e.push(He(n,o,a&&a[t],s))}}return e}(e,s,t,a.isIndexable));Ke(e,s)&&(s=He(s,i,o&&o[e],a));return s}(t,e,n))),getOwnPropertyDescriptor:(e,n)=>e._descriptors.allKeys?Reflect.has(t,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,n),getPrototypeOf:()=>Reflect.getPrototypeOf(t),has:(e,n)=>Reflect.has(t,n),ownKeys:()=>Reflect.ownKeys(t),set:(e,n,r)=>(t[n]=r,delete e[n],!0)})}function $e(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:gt(n)?n:()=>n,isIndexable:gt(r)?r:()=>r}}const We=(t,e)=>t?t+ft(e):e,Ke=(t,e)=>Q(e)&&"adapters"!==t&&(null===Object.getPrototypeOf(e)||e.constructor===Object);function Ye(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const r=n();return t[e]=r,r}function Xe(t,e,n){return gt(t)?t(e,n):t}const Qe=(t,e)=>!0===t?e:"string"==typeof t?dt(e,t):void 0;function Je(t,e,n,r,i){for(const o of e){const e=Qe(n,o);if(e){t.add(e);const o=Xe(e._fallback,n,i);if(void 0!==o&&o!==n&&o!==r)return o}else if(!1===e&&void 0!==r&&n!==r)return null}return!1}function Ze(t,e,n,r){const i=e._rootScopes,o=Xe(e._fallback,n,r),a=[...t,...i],s=new Set;s.add(r);let u=tn(s,a,n,o||n,r);return null!==u&&((void 0===o||o===n||(u=tn(s,a,o,u,r),null!==u))&&ze(Array.from(s),[""],i,o,(()=>function(t,e,n){const r=t._getTarget();e in r||(r[e]={});const i=r[e];if(X(i)&&Q(n))return n;return i||{}}(e,n,r))))}function tn(t,e,n,r,i){for(;n;)n=Je(t,e,n,r,i);return n}function en(t,e){for(const n of e){if(!n)continue;const e=n[t];if(void 0!==e)return e}}function nn(t){let e=t._keys;return e||(e=t._keys=function(t){const e=new Set;for(const n of t)for(const t of Object.keys(n).filter((t=>!t.startsWith("_"))))e.add(t);return Array.from(e)}(t._scopes)),e}function rn(t,e,n,r){const{iScale:i}=t,{key:o="r"}=this._parsing,a=new Array(r);let s,u,c,l;for(s=0,u=r;s<u;++s)c=s+n,l=e[c],a[s]={r:i.parse(dt(l,o),c)};return a}const on=Number.EPSILON||1e-14,an=(t,e)=>e<t.length&&!t[e].skip&&t[e],sn=t=>"x"===t?"y":"x";function un(t,e,n,r){const i=t.skip?e:t,o=e,a=n.skip?e:n,s=Ot(o,i),u=Ot(a,o);let c=s/(s+u),l=u/(s+u);c=isNaN(c)?0:c,l=isNaN(l)?0:l;const h=r*c,d=r*l;return{previous:{x:o.x-h*(a.x-i.x),y:o.y-h*(a.y-i.y)},next:{x:o.x+d*(a.x-i.x),y:o.y+d*(a.y-i.y)}}}function cn(t,e="x"){const n=sn(e),r=t.length,i=Array(r).fill(0),o=Array(r);let a,s,u,c=an(t,0);for(a=0;a<r;++a)if(s=u,u=c,c=an(t,a+1),u){if(c){const t=c[e]-u[e];i[a]=0!==t?(c[n]-u[n])/t:0}o[a]=s?c?kt(i[a-1])!==kt(i[a])?0:(i[a-1]+i[a])/2:i[a-1]:i[a]}!function(t,e,n){const r=t.length;let i,o,a,s,u,c=an(t,0);for(let l=0;l<r-1;++l)u=c,c=an(t,l+1),u&&c&&(Et(e[l],0,on)?n[l]=n[l+1]=0:(i=n[l]/e[l],o=n[l+1]/e[l],s=Math.pow(i,2)+Math.pow(o,2),s<=9||(a=3/Math.sqrt(s),n[l]=i*a*e[l],n[l+1]=o*a*e[l])))}(t,i,o),function(t,e,n="x"){const r=sn(n),i=t.length;let o,a,s,u=an(t,0);for(let c=0;c<i;++c){if(a=s,s=u,u=an(t,c+1),!s)continue;const i=s[n],l=s[r];a&&(o=(i-a[n])/3,s[`cp1${n}`]=i-o,s[`cp1${r}`]=l-o*e[c]),u&&(o=(u[n]-i)/3,s[`cp2${n}`]=i+o,s[`cp2${r}`]=l+o*e[c])}}(t,o,e)}function ln(t,e,n){return Math.max(Math.min(t,n),e)}function hn(t,e,n,r,i){let o,a,s,u;if(e.spanGaps&&(t=t.filter((t=>!t.skip))),"monotone"===e.cubicInterpolationMode)cn(t,i);else{let n=r?t[t.length-1]:t[0];for(o=0,a=t.length;o<a;++o)s=t[o],u=un(n,s,t[Math.min(o+1,a-(r?0:1))%a],e.tension),s.cp1x=u.previous.x,s.cp1y=u.previous.y,s.cp2x=u.next.x,s.cp2y=u.next.y,n=s}e.capBezierPoints&&function(t,e){let n,r,i,o,a,s=xe(t[0],e);for(n=0,r=t.length;n<r;++n)a=o,o=s,s=n<r-1&&xe(t[n+1],e),o&&(i=t[n],a&&(i.cp1x=ln(i.cp1x,e.left,e.right),i.cp1y=ln(i.cp1y,e.top,e.bottom)),s&&(i.cp2x=ln(i.cp2x,e.left,e.right),i.cp2y=ln(i.cp2y,e.top,e.bottom)))}(t,n)}function dn(){return"undefined"!=typeof window&&"undefined"!=typeof document}function fn(t){let e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function pn(t,e,n){let r;return"string"==typeof t?(r=parseInt(t,10),-1!==t.indexOf("%")&&(r=r/100*e.parentNode[n])):r=t,r}const gn=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);const mn=["top","right","bottom","left"];function vn(t,e,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const o=mn[i];r[o]=parseFloat(t[e+"-"+o+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const yn=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function bn(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,i=gn(n),o="border-box"===i.boxSizing,a=vn(i,"padding"),s=vn(i,"border","width"),{x:u,y:c,box:l}=function(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:o}=r;let a,s,u=!1;if(yn(i,o,t.target))a=i,s=o;else{const t=e.getBoundingClientRect();a=r.clientX-t.left,s=r.clientY-t.top,u=!0}return{x:a,y:s,box:u}}(t,n),h=a.left+(l&&s.left),d=a.top+(l&&s.top);let{width:f,height:p}=e;return o&&(f-=a.width+s.width,p-=a.height+s.height),{x:Math.round((u-h)/f*n.width/r),y:Math.round((c-d)/p*n.height/r)}}const _n=t=>Math.round(10*t)/10;function wn(t,e,n,r){const i=gn(t),o=vn(i,"margin"),a=pn(i.maxWidth,t,"clientWidth")||_t,s=pn(i.maxHeight,t,"clientHeight")||_t,u=function(t,e,n){let r,i;if(void 0===e||void 0===n){const o=fn(t);if(o){const t=o.getBoundingClientRect(),a=gn(o),s=vn(a,"border","width"),u=vn(a,"padding");e=t.width-u.width-s.width,n=t.height-u.height-s.height,r=pn(a.maxWidth,o,"clientWidth"),i=pn(a.maxHeight,o,"clientHeight")}else e=t.clientWidth,n=t.clientHeight}return{width:e,height:n,maxWidth:r||_t,maxHeight:i||_t}}(t,e,n);let{width:c,height:l}=u;if("content-box"===i.boxSizing){const t=vn(i,"border","width"),e=vn(i,"padding");c-=e.width+t.width,l-=e.height+t.height}c=Math.max(0,c-o.width),l=Math.max(0,r?c/r:l-o.height),c=_n(Math.min(c,a,u.maxWidth)),l=_n(Math.min(l,s,u.maxHeight)),c&&!l&&(l=_n(c/2));return(void 0!==e||void 0!==n)&&r&&u.height&&l>u.height&&(l=u.height,c=_n(Math.floor(l*r))),{width:c,height:l}}function Sn(t,e,n){const r=e||1,i=Math.floor(t.height*r),o=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const a=t.canvas;return a.style&&(n||!a.style.height&&!a.style.width)&&(a.style.height=`${t.height}px`,a.style.width=`${t.width}px`),(t.currentDevicePixelRatio!==r||a.height!==i||a.width!==o)&&(t.currentDevicePixelRatio=r,a.height=i,a.width=o,t.ctx.setTransform(r,0,0,r,0,0),!0)}const Tn=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};dn()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch(t){}return t}();function xn(t,e){const n=function(t,e){return gn(t).getPropertyValue(e)}(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function In(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function kn(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:"middle"===r?n<.5?t.y:e.y:"after"===r?n<1?t.y:e.y:n>0?e.y:t.y}}function En(t,e,n,r){const i={x:t.cp2x,y:t.cp2y},o={x:e.cp1x,y:e.cp1y},a=In(t,i,n),s=In(i,o,n),u=In(o,e,n),c=In(a,s,n),l=In(s,u,n);return In(c,l,n)}function Cn(t,e,n){return t?function(t,e){return{x:n=>t+t+e-n,setWidth(t){e=t},textAlign:t=>"center"===t?t:"right"===t?"left":"right",xPlus:(t,e)=>t-e,leftForLtr:(t,e)=>t-e}}(e,n):{x:t=>t,setWidth(t){},textAlign:t=>t,xPlus:(t,e)=>t+e,leftForLtr:(t,e)=>t}}function Nn(t,e){let n,r;"ltr"!==e&&"rtl"!==e||(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function An(t,e){void 0!==e&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Pn(t){return"angle"===t?{between:jt,compare:Lt,normalize:Ft}:{between:Gt,compare:(t,e)=>t-e,normalize:t=>t}}function Rn({start:t,end:e,count:n,loop:r,style:i}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n==0,style:i}}function Dn(t,e,n){if(!n)return[t];const{property:r,start:i,end:o}=n,a=e.length,{compare:s,between:u,normalize:c}=Pn(r),{start:l,end:h,loop:d,style:f}=function(t,e,n){const{property:r,start:i,end:o}=n,{between:a,normalize:s}=Pn(r),u=e.length;let c,l,{start:h,end:d,loop:f}=t;if(f){for(h+=u,d+=u,c=0,l=u;c<l&&a(s(e[h%u][r]),i,o);++c)h--,d--;h%=u,d%=u}return d<h&&(d+=u),{start:h,end:d,loop:f,style:t.style}}(t,e,n),p=[];let g,m,v,y=!1,b=null;const _=()=>y||u(i,v,g)&&0!==s(i,v),w=()=>!y||0===s(o,g)||u(o,v,g);for(let t=l,n=l;t<=h;++t)m=e[t%a],m.skip||(g=c(m[r]),g!==v&&(y=u(g,i,o),null===b&&_()&&(b=0===s(g,i)?t:n),null!==b&&w()&&(p.push(Rn({start:b,end:t,loop:d,count:a,style:f})),b=null),n=t,v=g));return null!==b&&p.push(Rn({start:b,end:h,loop:d,count:a,style:f})),p}function Mn(t,e){const n=[],r=t.segments;for(let i=0;i<r.length;i++){const o=Dn(r[i],t.points,e);o.length&&n.push(...o)}return n}function On(t,e,n,r){return r&&r.setContext&&n?function(t,e,n,r){const i=t._chart.getContext(),o=Ln(t.options),{_datasetIndex:a,options:{spanGaps:s}}=t,u=n.length,c=[];let l=o,h=e[0].start,d=h;function f(t,e,r,i){const o=s?-1:1;if(t!==e){for(t+=u;n[t%u].skip;)t-=o;for(;n[e%u].skip;)e+=o;t%u!=e%u&&(c.push({start:t%u,end:e%u,loop:r,style:i}),l=i,h=e%u)}}for(const t of e){h=s?h:t.start;let e,o=n[h%u];for(d=h+1;d<=t.end;d++){const s=n[d%u];e=Ln(r.setContext(qe(i,{type:"segment",p0:o,p1:s,p0DataIndex:(d-1)%u,p1DataIndex:d%u,datasetIndex:a}))),Fn(e,l)&&f(h,d-1,t.loop,l),o=s,l=e}h<d-1&&f(h,d-1,t.loop,l)}return c}(t,e,n,r):e}function Ln(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function Fn(t,e){if(!e)return!1;const n=[],r=function(t,e){return re(e)?(n.includes(e)||n.push(e),n.indexOf(e)):e};return JSON.stringify(t,r)!==JSON.stringify(e,r)}class jn{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,n,r){const i=e.listeners[r],o=e.duration;i.forEach((r=>r({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(n-e.start,o)})))}_refresh(){this._request||(this._running=!0,this._request=Wt.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(t=Date.now()){let e=0;this._charts.forEach(((n,r)=>{if(!n.running||!n.items.length)return;const i=n.items;let o,a=i.length-1,s=!1;for(;a>=0;--a)o=i[a],o._active?(o._total>n.duration&&(n.duration=o._total),o.tick(t),s=!0):(i[a]=i[i.length-1],i.pop());s&&(r.draw(),this._notify(r,n,t,"progress")),i.length||(n.running=!1,this._notify(r,n,t,"complete"),n.initial=!1),e+=i.length})),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){const e=this._charts;let n=e.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,n)),n}listen(t,e,n){this._getAnims(t).listeners[e].push(n)}add(t,e){e&&e.length&&this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce(((t,e)=>Math.max(t,e._duration)),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!!(e&&e.running&&e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const n=e.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Bn=new jn;const Gn="transparent",Un={boolean:(t,e,n)=>n>.5?e:t,color(t,e,n){const r=ie(t||Gn),i=r.valid&&ie(e||Gn);return i&&i.valid?i.mix(r,n).hexString():e},number:(t,e,n)=>t+(e-t)*n};class Vn{constructor(t,e,n,r){const i=e[n];r=Ve([t.to,r,i,t.from]);const o=Ve([t.from,i,r]);this._active=!0,this._fn=t.fn||Un[t.type||typeof o],this._easing=ne[t.easing]||ne.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=n,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(t,e,n){if(this._active){this._notify(!1);const r=this._target[this._prop],i=n-this._start,o=this._duration-i;this._start=n,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=i,this._loop=!!t.loop,this._to=Ve([t.to,e,r,t.from]),this._from=Ve([t.from,r,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,n=this._duration,r=this._prop,i=this._from,o=this._loop,a=this._to;let s;if(this._active=i!==a&&(o||e<n),!this._active)return this._target[r]=a,void this._notify(!0);e<0?this._target[r]=i:(s=e/n%2,s=o&&s>1?2-s:s,s=this._easing(Math.min(1,Math.max(0,s))),this._target[r]=this._fn(i,a,s))}wait(){const t=this._promises||(this._promises=[]);return new Promise(((e,n)=>{t.push({res:e,rej:n})}))}_notify(t){const e=t?"res":"rej",n=this._promises||[];for(let t=0;t<n.length;t++)n[t][e]()}}class qn{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Q(t))return;const e=Object.keys(ve.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach((r=>{const i=t[r];if(!Q(i))return;const o={};for(const t of e)o[t]=i[t];(X(i.properties)&&i.properties||[r]).forEach((t=>{t!==r&&n.has(t)||n.set(t,o)}))}))}_animateOptions(t,e){const n=e.options,r=function(t,e){if(!e)return;let n=t.options;if(!n)return void(t.options=e);n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(t,n);if(!r)return[];const i=this._createAnimations(r,n);return n.$shared&&function(t,e){const n=[],r=Object.keys(e);for(let e=0;e<r.length;e++){const i=t[r[e]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}(t.options.$animations,n).then((()=>{t.options=n}),(()=>{})),i}_createAnimations(t,e){const n=this._properties,r=[],i=t.$animations||(t.$animations={}),o=Object.keys(e),a=Date.now();let s;for(s=o.length-1;s>=0;--s){const u=o[s];if("$"===u.charAt(0))continue;if("options"===u){r.push(...this._animateOptions(t,e));continue}const c=e[u];let l=i[u];const h=n.get(u);if(l){if(h&&l.active()){l.update(h,c,a);continue}l.cancel()}h&&h.duration?(i[u]=l=new Vn(h,t,u,c),r.push(l)):t[u]=c}return r}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);const n=this._createAnimations(t,e);return n.length?(Bn.add(this._chart,n),!0):void 0}}function zn(t,e){const n=t&&t.options||{},r=n.reverse,i=void 0===n.min?e:0,o=void 0===n.max?e:0;return{start:r?o:i,end:r?i:o}}function Hn(t,e){const n=[],r=t._getSortedDatasetMetas(e);let i,o;for(i=0,o=r.length;i<o;++i)n.push(r[i].index);return n}function $n(t,e,n,r={}){const i=t.keys,o="single"===r.mode;let a,s,u,c;if(null!==e){for(a=0,s=i.length;a<s;++a){if(u=+i[a],u===n){if(r.all)continue;break}c=t.values[u],J(c)&&(o||0===e||kt(e)===kt(c))&&(e+=c)}return e}}function Wn(t,e){const n=t&&t.options.stacked;return n||void 0===n&&void 0!==e.stack}function Kn(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function Yn(t,e,n,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const e=t[i.index];if(n&&e>0||!n&&e<0)return i.index}return null}function Xn(t,e){const{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:o,vScale:a,index:s}=r,u=o.axis,c=a.axis,l=function(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}(o,a,r),h=e.length;let d;for(let t=0;t<h;++t){const n=e[t],{[u]:o,[c]:h}=n;d=(n._stacks||(n._stacks={}))[c]=Kn(i,l,o),d[s]=h,d._top=Yn(d,a,!0,r.type),d._bottom=Yn(d,a,!1,r.type);(d._visualValues||(d._visualValues={}))[s]=h}}function Qn(t,e){const n=t.scales;return Object.keys(n).filter((t=>n[t].axis===e)).shift()}function Jn(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const t of e){const e=t._stacks;if(!e||void 0===e[r]||void 0===e[r][n])return;delete e[r][n],void 0!==e[r]._visualValues&&void 0!==e[r]._visualValues[n]&&delete e[r]._visualValues[n]}}}const Zn=t=>"reset"===t||"none"===t,tr=(t,e)=>e?t:Object.assign({},t);class er{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Wn(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Jn(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,n=this.getDataset(),r=(t,e,n,r)=>"x"===t?e:"r"===t?r:n,i=e.xAxisID=tt(n.xAxisID,Qn(t,"x")),o=e.yAxisID=tt(n.yAxisID,Qn(t,"y")),a=e.rAxisID=tt(n.rAxisID,Qn(t,"r")),s=e.indexAxis,u=e.iAxisID=r(s,i,o,a),c=e.vAxisID=r(s,o,i,a);e.xScale=this.getScaleForId(i),e.yScale=this.getScaleForId(o),e.rScale=this.getScaleForId(a),e.iScale=this.getScaleForId(u),e.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Ht(this._data,this),t._stacked&&Jn(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),n=this._data;if(Q(e))this._data=function(t){const e=Object.keys(t),n=new Array(e.length);let r,i,o;for(r=0,i=e.length;r<i;++r)o=e[r],n[r]={x:o,y:t[o]};return n}(e);else if(n!==e){if(n){Ht(n,this);const t=this._cachedMeta;Jn(t),t._parsed=[]}e&&Object.isExtensible(e)&&(i=this,(r=e)._chartjs?r._chartjs.listeners.push(i):(Object.defineProperty(r,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[i]}}),zt.forEach((t=>{const e="_onData"+ft(t),n=r[t];Object.defineProperty(r,t,{configurable:!0,enumerable:!1,value(...t){const i=n.apply(this,t);return r._chartjs.listeners.forEach((n=>{"function"==typeof n[e]&&n[e](...t)})),i}})})))),this._syncList=[],this._data=e}var r,i}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const i=e._stacked;e._stacked=Wn(e.vScale,e),e.stack!==n.stack&&(r=!0,Jn(e),e.stack=n.stack),this._resyncElements(t),(r||i!==e._stacked)&&Xn(this,e._parsed)}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:n,_data:r}=this,{iScale:i,_stacked:o}=n,a=i.axis;let s,u,c,l=0===t&&e===r.length||n._sorted,h=t>0&&n._parsed[t-1];if(!1===this._parsing)n._parsed=r,n._sorted=!0,c=r;else{c=X(r[t])?this.parseArrayData(n,r,t,e):Q(r[t])?this.parseObjectData(n,r,t,e):this.parsePrimitiveData(n,r,t,e);const i=()=>null===u[a]||h&&u[a]<h[a];for(s=0;s<e;++s)n._parsed[s+t]=u=c[s],l&&(i()&&(l=!1),h=u);n._sorted=l}o&&Xn(this,c)}parsePrimitiveData(t,e,n,r){const{iScale:i,vScale:o}=t,a=i.axis,s=o.axis,u=i.getLabels(),c=i===o,l=new Array(r);let h,d,f;for(h=0,d=r;h<d;++h)f=h+n,l[h]={[a]:c||i.parse(u[f],f),[s]:o.parse(e[f],f)};return l}parseArrayData(t,e,n,r){const{xScale:i,yScale:o}=t,a=new Array(r);let s,u,c,l;for(s=0,u=r;s<u;++s)c=s+n,l=e[c],a[s]={x:i.parse(l[0],c),y:o.parse(l[1],c)};return a}parseObjectData(t,e,n,r){const{xScale:i,yScale:o}=t,{xAxisKey:a="x",yAxisKey:s="y"}=this._parsing,u=new Array(r);let c,l,h,d;for(c=0,l=r;c<l;++c)h=c+n,d=e[h],u[c]={x:i.parse(dt(d,a),h),y:o.parse(dt(d,s),h)};return u}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,n){const r=this.chart,i=this._cachedMeta,o=e[t.axis];return $n({keys:Hn(r,!0),values:e._stacks[t.axis]._visualValues},o,i.index,{mode:n})}updateRangeFromParsed(t,e,n,r){const i=n[e.axis];let o=null===i?NaN:i;const a=r&&n._stacks[e.axis];r&&a&&(r.values=a,o=$n(r,i,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,e){const n=this._cachedMeta,r=n._parsed,i=n._sorted&&t===n.iScale,o=r.length,a=this._getOtherScale(t),s=((t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:Hn(n,!0),values:null})(e,n,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:l}=function(t){const{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}(a);let h,d;function f(){d=r[h];const e=d[a.axis];return!J(d[t.axis])||c>e||l<e}for(h=0;h<o&&(f()||(this.updateRangeFromParsed(u,t,d,s),!i));++h);if(i)for(h=o-1;h>=0;--h)if(!f()){this.updateRangeFromParsed(u,t,d,s);break}return u}getAllParsedValues(t){const e=this._cachedMeta._parsed,n=[];let r,i,o;for(r=0,i=e.length;r<i;++r)o=e[r][t.axis],J(o)&&n.push(o);return n}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,n=e.iScale,r=e.vScale,i=this.getParsed(t);return{label:n?""+n.getLabelForValue(i[n.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=function(t){let e,n,r,i;return Q(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:!1===t}}(tt(this.options.clip,function(t,e,n){if(!1===n)return!1;const r=zn(t,n),i=zn(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,n=this._cachedMeta,r=n.data||[],i=e.chartArea,o=[],a=this._drawStart||0,s=this._drawCount||r.length-a,u=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(t,i,a,s),c=a;c<a+s;++c){const e=r[c];e.hidden||(e.active&&u?o.push(e):e.draw(t,i))}for(c=0;c<o.length;++c)o[c].draw(t,i)}getStyle(t,e){const n=e?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,e,n){const r=this.getDataset();let i;if(t>=0&&t<this._cachedMeta.data.length){const e=this._cachedMeta.data[t];i=e.$context||(e.$context=function(t,e,n){return qe(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}(this.getContext(),t,e)),i.parsed=this.getParsed(t),i.raw=r.data[t],i.index=i.dataIndex=t}else i=this.$context||(this.$context=function(t,e){return qe(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!e,i.mode=n,i}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",n){const r="active"===e,i=this._cachedDataOpts,o=t+"-"+e,a=i[o],s=this.enableOptionSharing&&pt(n);if(a)return tr(a,s);const u=this.chart.config,c=u.datasetElementScopeKeys(this._type,t),l=r?[`${t}Hover`,"hover",t,""]:[t,""],h=u.getOptionScopes(this.getDataset(),c),d=Object.keys(ve.elements[t]),f=u.resolveNamedOptions(h,d,(()=>this.getContext(n,r,e)),l);return f.$shared&&(f.$shared=s,i[o]=Object.freeze(tr(f,s))),f}_resolveAnimations(t,e,n){const r=this.chart,i=this._cachedDataOpts,o=`animation-${e}`,a=i[o];if(a)return a;let s;if(!1!==r.options.animation){const r=this.chart.config,i=r.datasetAnimationScopeKeys(this._type,e),o=r.getOptionScopes(this.getDataset(),i);s=r.createResolver(o,this.getContext(t,n,e))}const u=new qn(r,s&&s.animations);return s&&s._cacheable&&(i[o]=Object.freeze(u)),u}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Zn(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const n=this.resolveDataElementOptions(t,e),r=this._sharedOptions,i=this.getSharedOptions(n),o=this.includeOptions(e,i)||i!==r;return this.updateSharedOptions(i,e,n),{sharedOptions:i,includeOptions:o}}updateElement(t,e,n,r){Zn(r)?Object.assign(t,n):this._resolveAnimations(e,r).update(t,n)}updateSharedOptions(t,e,n){t&&!Zn(e)&&this._resolveAnimations(void 0,e).update(t,n)}_setStyle(t,e,n,r){t.active=r;const i=this.getStyle(e,r);this._resolveAnimations(e,n,r).update(t,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(t,e,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,e,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,n=this._cachedMeta.data;for(const[t,e,n]of this._syncList)this[t](e,n);this._syncList=[];const r=n.length,i=e.length,o=Math.min(i,r);o&&this.parse(0,o),i>r?this._insertElements(r,i-r,t):i<r&&this._removeElements(i,r-i)}_insertElements(t,e,n=!0){const r=this._cachedMeta,i=r.data,o=t+e;let a;const s=t=>{for(t.length+=e,a=t.length-1;a>=o;a--)t[a]=t[a-e]};for(s(i),a=t;a<o;++a)i[a]=new this.dataElementType;this._parsing&&s(r._parsed),this.parse(t,e),n&&this.updateElements(i,t,e,"reset")}updateElements(t,e,n,r){}_removeElements(t,e){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(t,e);n._stacked&&Jn(n,r)}n.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,n,r]=t;this[e](n,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function nr(t){const e=t.iScale,n=function(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let e=0,i=n.length;e<i;e++)r=r.concat(n[e].controller.getAllParsedValues(t));t._cache.$bar=$t(r.sort(((t,e)=>t-e)))}return t._cache.$bar}(e,t.type);let r,i,o,a,s=e._length;const u=()=>{32767!==o&&-32768!==o&&(pt(a)&&(s=Math.min(s,Math.abs(o-a)||s)),a=o)};for(r=0,i=n.length;r<i;++r)o=e.getPixelForValue(n[r]),u();for(a=void 0,r=0,i=e.ticks.length;r<i;++r)o=e.getPixelForTick(r),u();return s}function rr(t,e,n,r){return X(t)?function(t,e,n,r){const i=n.parse(t[0],r),o=n.parse(t[1],r),a=Math.min(i,o),s=Math.max(i,o);let u=a,c=s;Math.abs(a)>Math.abs(s)&&(u=s,c=a),e[n.axis]=c,e._custom={barStart:u,barEnd:c,start:i,end:o,min:a,max:s}}(t,e,n,r):e[n.axis]=n.parse(t,r),e}function ir(t,e,n,r){const i=t.iScale,o=t.vScale,a=i.getLabels(),s=i===o,u=[];let c,l,h,d;for(c=n,l=n+r;c<l;++c)d=e[c],h={},h[i.axis]=s||i.parse(a[c],c),u.push(rr(d,h,o,c));return u}function or(t){return t&&void 0!==t.barStart&&void 0!==t.barEnd}function ar(t,e,n,r){let i=e.borderSkipped;const o={};if(!i)return void(t.borderSkipped=o);if(!0===i)return void(t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:a,end:s,reverse:u,top:c,bottom:l}=function(t){let e,n,r,i,o;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(i="end",o="start"):(i="start",o="end"),{start:n,end:r,reverse:e,top:i,bottom:o}}(t);"middle"===i&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?i=c:(n._bottom||0)===r?i=l:(o[sr(l,a,s,u)]=!0,i=c)),o[sr(i,a,s,u)]=!0,t.borderSkipped=o}function sr(t,e,n,r){var i,o,a;return r?(a=n,t=ur(t=(i=t)===(o=e)?a:i===a?o:i,n,e)):t=ur(t,e,n),t}function ur(t,e,n){return"start"===t?e:"end"===t?n:t}function cr(t,{inflateAmount:e},n){t.inflateAmount="auto"===e?1===n?.33:0:e}class lr extends er{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n,color:r}}=t.legend.options;return e.labels.map(((e,i)=>{const o=t.getDatasetMeta(0).controller.getStyle(i);return{text:e,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,fontColor:r,lineWidth:o.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(i),index:i}}))}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}}};constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const n=this.getDataset().data,r=this._cachedMeta;if(!1===this._parsing)r._parsed=n;else{let i,o,a=t=>+n[t];if(Q(n[t])){const{key:t="value"}=this._parsing;a=e=>+dt(n[e],t)}for(i=t,o=t+e;i<o;++i)r._parsed[i]=a(i)}}_getRotation(){return Pt(this.options.rotation-90)}_getCircumference(){return Pt(this.options.circumference)}_getRotationExtents(){let t=yt,e=-yt;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const r=this.chart.getDatasetMeta(n).controller,i=r._getRotation(),o=r._getCircumference();t=Math.min(t,i),e=Math.max(e,i+o)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:n}=e,r=this._cachedMeta,i=r.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-o)/2,0),s=Math.min((u=this.options.cutout,c=a,"string"==typeof u&&u.endsWith("%")?parseFloat(u)/100:+u/c),1);var u,c;const l=this._getRingWeight(this.index),{circumference:h,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:g,offsetY:m}=function(t,e,n){let r=1,i=1,o=0,a=0;if(e<yt){const s=t,u=s+e,c=Math.cos(s),l=Math.sin(s),h=Math.cos(u),d=Math.sin(u),f=(t,e,r)=>jt(t,s,u,!0)?1:Math.max(e,e*n,r,r*n),p=(t,e,r)=>jt(t,s,u,!0)?-1:Math.min(e,e*n,r,r*n),g=f(0,c,h),m=f(St,l,d),v=p(vt,c,h),y=p(vt+St,l,d);r=(g-v)/2,i=(m-y)/2,o=-(g+v)/2,a=-(m+y)/2}return{ratioX:r,ratioY:i,offsetX:o,offsetY:a}}(d,h,s),v=(n.width-o)/f,y=(n.height-o)/p,b=Math.max(Math.min(v,y)/2,0),_=et(this.options.radius,b),w=(_-Math.max(_*s,0))/this._getVisibleDatasetWeightTotal();this.offsetX=g*_,this.offsetY=m*_,r.total=this.calculateTotal(),this.outerRadius=_-w*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-w*l,0),this.updateElements(i,0,i.length,t)}_circumference(t,e){const n=this.options,r=this._cachedMeta,i=this._getCircumference();return e&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||null===r._parsed[t]||r.data[t].hidden?0:this.calculateCircumference(r._parsed[t]*i/yt)}updateElements(t,e,n,r){const i="reset"===r,o=this.chart,a=o.chartArea,s=o.options.animation,u=(a.left+a.right)/2,c=(a.top+a.bottom)/2,l=i&&s.animateScale,h=l?0:this.innerRadius,d=l?0:this.outerRadius,{sharedOptions:f,includeOptions:p}=this._getSharedOptions(e,r);let g,m=this._getRotation();for(g=0;g<e;++g)m+=this._circumference(g,i);for(g=e;g<e+n;++g){const e=this._circumference(g,i),n=t[g],o={x:u+this.offsetX,y:c+this.offsetY,startAngle:m,endAngle:m+e,circumference:e,outerRadius:d,innerRadius:h};p&&(o.options=f||this.resolveDataElementOptions(g,n.active?"active":r)),m+=e,this.updateElement(n,g,o,r)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let n,r=0;for(n=0;n<e.length;n++){const i=t._parsed[n];null===i||isNaN(i)||!this.chart.getDataVisibility(n)||e[n].hidden||(r+=Math.abs(i))}return r}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?yt*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=ce(e._parsed[t],n.options.locale);return{label:r[t]||"",value:i}}getMaxBorderWidth(t){let e=0;const n=this.chart;let r,i,o,a,s;if(!t)for(r=0,i=n.data.datasets.length;r<i;++r)if(n.isDatasetVisible(r)){o=n.getDatasetMeta(r),t=o.data,a=o.controller;break}if(!t)return 0;for(r=0,i=t.length;r<i;++r)s=a.resolveDataElementOptions(r),"inner"!==s.borderAlign&&(e=Math.max(e,s.borderWidth||0,s.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let n=0,r=t.length;n<r;++n){const t=this.resolveDataElementOptions(n);e=Math.max(e,t.offset||0,t.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(e+=this._getRingWeight(n));return e}_getRingWeight(t){return Math.max(tt(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class hr extends er{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n,color:r}}=t.legend.options;return e.labels.map(((e,i)=>{const o=t.getDatasetMeta(0).controller.getStyle(i);return{text:e,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,fontColor:r,lineWidth:o.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(i),index:i}}))}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=ce(e._parsed[t].r,n.options.locale);return{label:r[t]||"",value:i}}parseObjectData(t,e,n,r){return rn.bind(this)(t,e,n,r)}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach(((t,n)=>{const r=this.getParsed(n).r;!isNaN(r)&&this.chart.getDataVisibility(n)&&(r<e.min&&(e.min=r),r>e.max&&(e.max=r))})),e}_updateRadius(){const t=this.chart,e=t.chartArea,n=t.options,r=Math.min(e.right-e.left,e.bottom-e.top),i=Math.max(r/2,0),o=(i-Math.max(n.cutoutPercentage?i/100*n.cutoutPercentage:1,0))/t.getVisibleDatasetCount();this.outerRadius=i-o*this.index,this.innerRadius=this.outerRadius-o}updateElements(t,e,n,r){const i="reset"===r,o=this.chart,a=o.options.animation,s=this._cachedMeta.rScale,u=s.xCenter,c=s.yCenter,l=s.getIndexAngle(0)-.5*vt;let h,d=l;const f=360/this.countVisibleElements();for(h=0;h<e;++h)d+=this._computeAngle(h,r,f);for(h=e;h<e+n;h++){const e=t[h];let n=d,p=d+this._computeAngle(h,r,f),g=o.getDataVisibility(h)?s.getDistanceFromCenterForValue(this.getParsed(h).r):0;d=p,i&&(a.animateScale&&(g=0),a.animateRotate&&(n=p=l));const m={x:u,y:c,innerRadius:0,outerRadius:g,startAngle:n,endAngle:p,options:this.resolveDataElementOptions(h,e.active?"active":r)};this.updateElement(e,h,m,r)}}countVisibleElements(){const t=this._cachedMeta;let e=0;return t.data.forEach(((t,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&e++})),e}_computeAngle(t,e,n){return this.chart.getDataVisibility(t)?Pt(this.resolveDataElementOptions(t,e).angle||n):0}}var dr=Object.freeze({__proto__:null,BarController:class extends er{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,e,n,r){return ir(t,e,n,r)}parseArrayData(t,e,n,r){return ir(t,e,n,r)}parseObjectData(t,e,n,r){const{iScale:i,vScale:o}=t,{xAxisKey:a="x",yAxisKey:s="y"}=this._parsing,u="x"===i.axis?a:s,c="x"===o.axis?a:s,l=[];let h,d,f,p;for(h=n,d=n+r;h<d;++h)p=e[h],f={},f[i.axis]=i.parse(dt(p,u),h),l.push(rr(dt(p,c),f,o,h));return l}updateRangeFromParsed(t,e,n,r){super.updateRangeFromParsed(t,e,n,r);const i=n._custom;i&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,i.min),t.max=Math.max(t.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:n,vScale:r}=e,i=this.getParsed(t),o=i._custom,a=or(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+n.getLabelForValue(i[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,n,r){const i="reset"===r,{index:o,_cachedMeta:{vScale:a}}=this,s=a.getBasePixel(),u=a.isHorizontal(),c=this._getRuler(),{sharedOptions:l,includeOptions:h}=this._getSharedOptions(e,r);for(let d=e;d<e+n;d++){const e=this.getParsed(d),n=i||Y(e[a.axis])?{base:s,head:s}:this._calculateBarValuePixels(d),f=this._calculateBarIndexPixels(d,c),p=(e._stacks||{})[a.axis],g={horizontal:u,base:n.base,enableBorderRadius:!p||or(e._custom)||o===p._top||o===p._bottom,x:u?n.head:f.center,y:u?f.center:n.head,height:u?f.size:Math.abs(n.size),width:u?Math.abs(n.size):f.size};h&&(g.options=l||this.resolveDataElementOptions(d,t[d].active?"active":r));const m=g.options||t[d].options;ar(g,m,p,o),cr(g,m,c.ratio),this.updateElement(t[d],d,g,r)}}_getStacks(t,e){const{iScale:n}=this._cachedMeta,r=n.getMatchingVisibleMetas(this._type).filter((t=>t.controller.options.grouped)),i=n.options.stacked,o=[],a=t=>{const n=t.controller.getParsed(e),r=n&&n[t.vScale.axis];if(Y(r)||isNaN(r))return!0};for(const n of r)if((void 0===e||!a(n))&&((!1===i||-1===o.indexOf(n.stack)||void 0===i&&void 0===n.stack)&&o.push(n.stack),n.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,e,n){const r=this._getStacks(t,n),i=void 0!==e?r.indexOf(e):-1;return-1===i?r.length-1:i}_getRuler(){const t=this.options,e=this._cachedMeta,n=e.iScale,r=[];let i,o;for(i=0,o=e.data.length;i<o;++i)r.push(n.getPixelForValue(this.getParsed(i)[n.axis],i));const a=t.barThickness;return{min:a||nr(e),pixels:r,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:n,index:r},options:{base:i,minBarLength:o}}=this,a=i||0,s=this.getParsed(t),u=s._custom,c=or(u);let l,h,d=s[e.axis],f=0,p=n?this.applyStack(e,s,n):d;p!==d&&(f=p-d,p=d),c&&(d=u.barStart,p=u.barEnd-u.barStart,0!==d&&kt(d)!==kt(u.barEnd)&&(f=0),f+=d);const g=Y(i)||c?f:i;let m=e.getPixelForValue(g);if(l=this.chart.getDataVisibility(t)?e.getPixelForValue(f+p):m,h=l-m,Math.abs(h)<o){h=function(t,e,n){return 0!==t?kt(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}(h,e,a)*o,d===a&&(m-=h/2);const t=e.getPixelForDecimal(0),i=e.getPixelForDecimal(1),u=Math.min(t,i),f=Math.max(t,i);m=Math.max(Math.min(m,f),u),l=m+h,n&&!c&&(s._stacks[e.axis]._visualValues[r]=e.getValueForPixel(l)-e.getValueForPixel(m))}if(m===e.getPixelForValue(a)){const t=kt(h)*e.getLineWidthForValue(a)/2;m+=t,h-=t}return{size:h,base:m,head:l,center:l+h/2}}_calculateBarIndexPixels(t,e){const n=e.scale,r=this.options,i=r.skipNull,o=tt(r.maxBarThickness,1/0);let a,s;if(e.grouped){const n=i?this._getStackCount(t):e.stackCount,u="flex"===r.barThickness?function(t,e,n,r){const i=e.pixels,o=i[t];let a=t>0?i[t-1]:null,s=t<i.length-1?i[t+1]:null;const u=n.categoryPercentage;null===a&&(a=o-(null===s?e.end-e.start:s-o)),null===s&&(s=o+o-a);const c=o-(o-Math.min(a,s))/2*u;return{chunk:Math.abs(s-a)/2*u/r,ratio:n.barPercentage,start:c}}(t,e,r,n):function(t,e,n,r){const i=n.barThickness;let o,a;return Y(i)?(o=e.min*n.categoryPercentage,a=n.barPercentage):(o=i*r,a=1),{chunk:o/r,ratio:a,start:e.pixels[t]-o/2}}(t,e,r,n),c=this._getStackIndex(this.index,this._cachedMeta.stack,i?t:void 0);a=u.start+u.chunk*c+u.chunk/2,s=Math.min(o,u.chunk*u.ratio)}else a=n.getPixelForValue(this.getParsed(t)[n.axis],t),s=Math.min(o,e.min*e.ratio);return{base:a-s/2,head:a+s/2,center:a,size:s}}draw(){const t=this._cachedMeta,e=t.vScale,n=t.data,r=n.length;let i=0;for(;i<r;++i)null!==this.getParsed(i)[e.axis]&&n[i].draw(this._ctx)}},BubbleController:class extends er{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,n,r){const i=super.parsePrimitiveData(t,e,n,r);for(let t=0;t<i.length;t++)i[t]._custom=this.resolveDataElementOptions(t+n).radius;return i}parseArrayData(t,e,n,r){const i=super.parseArrayData(t,e,n,r);for(let t=0;t<i.length;t++){const r=e[n+t];i[t]._custom=tt(r[2],this.resolveDataElementOptions(t+n).radius)}return i}parseObjectData(t,e,n,r){const i=super.parseObjectData(t,e,n,r);for(let t=0;t<i.length;t++){const r=e[n+t];i[t]._custom=tt(r&&r.r&&+r.r,this.resolveDataElementOptions(t+n).radius)}return i}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:i}=e,o=this.getParsed(t),a=r.getLabelForValue(o.x),s=i.getLabelForValue(o.y),u=o._custom;return{label:n[t]||"",value:"("+a+", "+s+(u?", "+u:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,n,r){const i="reset"===r,{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:s,includeOptions:u}=this._getSharedOptions(e,r),c=o.axis,l=a.axis;for(let h=e;h<e+n;h++){const e=t[h],n=!i&&this.getParsed(h),d={},f=d[c]=i?o.getPixelForDecimal(.5):o.getPixelForValue(n[c]),p=d[l]=i?a.getBasePixel():a.getPixelForValue(n[l]);d.skip=isNaN(f)||isNaN(p),u&&(d.options=s||this.resolveDataElementOptions(h,e.active?"active":r),i&&(d.options.radius=0)),this.updateElement(e,h,d,r)}}resolveDataElementOptions(t,e){const n=this.getParsed(t);let r=super.resolveDataElementOptions(t,e);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const i=r.radius;return"active"!==e&&(r.radius=0),r.radius+=tt(n&&n._custom,i),r}},DoughnutController:lr,LineController:class extends er{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:n,data:r=[],_dataset:i}=e,o=this.chart._animationsDisabled;let{start:a,count:s}=Qt(e,r,o);this._drawStart=a,this._drawCount=s,Jt(e)&&(a=0,s=r.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!i._decimated,n.points=r;const u=this.resolveDatasetElementOptions(t);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(n,void 0,{animated:!o,options:u},t),this.updateElements(r,a,s,t)}updateElements(t,e,n,r){const i="reset"===r,{iScale:o,vScale:a,_stacked:s,_dataset:u}=this._cachedMeta,{sharedOptions:c,includeOptions:l}=this._getSharedOptions(e,r),h=o.axis,d=a.axis,{spanGaps:f,segment:p}=this.options,g=Nt(f)?f:Number.POSITIVE_INFINITY,m=this.chart._animationsDisabled||i||"none"===r,v=e+n,y=t.length;let b=e>0&&this.getParsed(e-1);for(let n=0;n<y;++n){const f=t[n],y=m?f:{};if(n<e||n>=v){y.skip=!0;continue}const _=this.getParsed(n),w=Y(_[d]),S=y[h]=o.getPixelForValue(_[h],n),T=y[d]=i||w?a.getBasePixel():a.getPixelForValue(s?this.applyStack(a,_,s):_[d],n);y.skip=isNaN(S)||isNaN(T)||w,y.stop=n>0&&Math.abs(_[h]-b[h])>g,p&&(y.parsed=_,y.raw=u.data[n]),l&&(y.options=c||this.resolveDataElementOptions(n,f.active?"active":r)),m||this.updateElement(f,n,y,r),b=_}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,n=e.options&&e.options.borderWidth||0,r=t.data||[];if(!r.length)return n;const i=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,i,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}},PieController:class extends lr{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}},PolarAreaController:hr,RadarController:class extends er{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(t){const e=this._cachedMeta.vScale,n=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(n[e.axis])}}parseObjectData(t,e,n,r){return rn.bind(this)(t,e,n,r)}update(t){const e=this._cachedMeta,n=e.dataset,r=e.data||[],i=e.iScale.getLabels();if(n.points=r,"resize"!==t){const e=this.resolveDatasetElementOptions(t);this.options.showLine||(e.borderWidth=0);const o={_loop:!0,_fullLoop:i.length===r.length,options:e};this.updateElement(n,void 0,o,t)}this.updateElements(r,0,r.length,t)}updateElements(t,e,n,r){const i=this._cachedMeta.rScale,o="reset"===r;for(let a=e;a<e+n;a++){const e=t[a],n=this.resolveDataElementOptions(a,e.active?"active":r),s=i.getPointPositionForValue(a,this.getParsed(a).r),u=o?i.xCenter:s.x,c=o?i.yCenter:s.y,l={x:u,y:c,angle:s.angle,skip:isNaN(u)||isNaN(c),options:n};this.updateElement(e,a,l,r)}}},ScatterController:class extends er{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){const e=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:i}=e,o=this.getParsed(t),a=r.getLabelForValue(o.x),s=i.getLabelForValue(o.y);return{label:n[t]||"",value:"("+a+", "+s+")"}}update(t){const e=this._cachedMeta,{data:n=[]}=e,r=this.chart._animationsDisabled;let{start:i,count:o}=Qt(e,n,r);if(this._drawStart=i,this._drawCount=o,Jt(e)&&(i=0,o=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:i,_dataset:o}=e;i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!o._decimated,i.points=n;const a=this.resolveDatasetElementOptions(t);a.segment=this.options.segment,this.updateElement(i,void 0,{animated:!r,options:a},t)}else this.datasetElementType&&(delete e.dataset,this.datasetElementType=!1);this.updateElements(n,i,o,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,n,r){const i="reset"===r,{iScale:o,vScale:a,_stacked:s,_dataset:u}=this._cachedMeta,c=this.resolveDataElementOptions(e,r),l=this.getSharedOptions(c),h=this.includeOptions(r,l),d=o.axis,f=a.axis,{spanGaps:p,segment:g}=this.options,m=Nt(p)?p:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||i||"none"===r;let y=e>0&&this.getParsed(e-1);for(let c=e;c<e+n;++c){const e=t[c],n=this.getParsed(c),p=v?e:{},b=Y(n[f]),_=p[d]=o.getPixelForValue(n[d],c),w=p[f]=i||b?a.getBasePixel():a.getPixelForValue(s?this.applyStack(a,n,s):n[f],c);p.skip=isNaN(_)||isNaN(w)||b,p.stop=c>0&&Math.abs(n[d]-y[d])>m,g&&(p.parsed=n,p.raw=u.data[c]),h&&(p.options=l||this.resolveDataElementOptions(c,e.active?"active":r)),v||this.updateElement(e,c,p,r),y=n}this.updateSharedOptions(l,r,c)}getMaxOverflow(){const t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}const n=t.dataset,r=n.options&&n.options.borderWidth||0;if(!e.length)return r;const i=e[0].size(this.resolveDataElementOptions(0)),o=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(r,i,o)/2}}});function fr(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class pr{static override(t){Object.assign(pr.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return fr()}parse(){return fr()}format(){return fr()}add(){return fr()}diff(){return fr()}startOf(){return fr()}endOf(){return fr()}}var gr=pr;function mr(t,e,n,r){const{controller:i,data:o,_sorted:a}=t,s=i._cachedMeta.iScale;if(s&&e===s.axis&&"r"!==e&&a&&o.length){const t=s._reversePixels?qt:Vt;if(!r)return t(o,e,n);if(i._sharedOptions){const r=o[0],i="function"==typeof r.getRange&&r.getRange(e);if(i){const r=t(o,e,n-i),a=t(o,e,n+i);return{lo:r.lo,hi:a.hi}}}}return{lo:0,hi:o.length-1}}function vr(t,e,n,r,i){const o=t.getSortedVisibleDatasetMetas(),a=n[e];for(let t=0,n=o.length;t<n;++t){const{index:n,data:s}=o[t],{lo:u,hi:c}=mr(o[t],e,a,i);for(let t=u;t<=c;++t){const e=s[t];e.skip||r(e,n,t)}}}function yr(t,e,n,r,i){const o=[];if(!i&&!t.isPointInArea(e))return o;return vr(t,n,e,(function(n,a,s){(i||xe(n,t.chartArea,0))&&n.inRange(e.x,e.y,r)&&o.push({element:n,datasetIndex:a,index:s})}),!0),o}function br(t,e,n,r,i,o){let a=[];const s=function(t){const e=-1!==t.indexOf("x"),n=-1!==t.indexOf("y");return function(t,r){const i=e?Math.abs(t.x-r.x):0,o=n?Math.abs(t.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}(n);let u=Number.POSITIVE_INFINITY;return vr(t,n,e,(function(n,c,l){const h=n.inRange(e.x,e.y,i);if(r&&!h)return;const d=n.getCenterPoint(i);if(!(!!o||t.isPointInArea(d))&&!h)return;const f=s(e,d);f<u?(a=[{element:n,datasetIndex:c,index:l}],u=f):f===u&&a.push({element:n,datasetIndex:c,index:l})})),a}function _r(t,e,n,r,i,o){return o||t.isPointInArea(e)?"r"!==n||r?br(t,e,n,r,i,o):function(t,e,n,r){let i=[];return vr(t,n,e,(function(t,n,o){const{startAngle:a,endAngle:s}=t.getProps(["startAngle","endAngle"],r),{angle:u}=Mt(t,{x:e.x,y:e.y});jt(u,a,s)&&i.push({element:t,datasetIndex:n,index:o})})),i}(t,e,n,i):[]}function wr(t,e,n,r,i){const o=[],a="x"===n?"inXRange":"inYRange";let s=!1;return vr(t,n,e,((t,r,u)=>{t[a](e[n],i)&&(o.push({element:t,datasetIndex:r,index:u}),s=s||t.inRange(e.x,e.y,i))})),r&&!s?[]:o}var Sr={evaluateInteractionItems:vr,modes:{index(t,e,n,r){const i=bn(e,t),o=n.axis||"x",a=n.includeInvisible||!1,s=n.intersect?yr(t,i,o,r,a):_r(t,i,o,!1,r,a),u=[];return s.length?(t.getSortedVisibleDatasetMetas().forEach((t=>{const e=s[0].index,n=t.data[e];n&&!n.skip&&u.push({element:n,datasetIndex:t.index,index:e})})),u):[]},dataset(t,e,n,r){const i=bn(e,t),o=n.axis||"xy",a=n.includeInvisible||!1;let s=n.intersect?yr(t,i,o,r,a):_r(t,i,o,!1,r,a);if(s.length>0){const e=s[0].datasetIndex,n=t.getDatasetMeta(e).data;s=[];for(let t=0;t<n.length;++t)s.push({element:n[t],datasetIndex:e,index:t})}return s},point:(t,e,n,r)=>yr(t,bn(e,t),n.axis||"xy",r,n.includeInvisible||!1),nearest(t,e,n,r){const i=bn(e,t),o=n.axis||"xy",a=n.includeInvisible||!1;return _r(t,i,o,n.intersect,r,a)},x:(t,e,n,r)=>wr(t,bn(e,t),"x",n.intersect,r),y:(t,e,n,r)=>wr(t,bn(e,t),"y",n.intersect,r)}};const Tr=["left","top","right","bottom"];function xr(t,e){return t.filter((t=>t.pos===e))}function Ir(t,e){return t.filter((t=>-1===Tr.indexOf(t.pos)&&t.box.axis===e))}function kr(t,e){return t.sort(((t,n)=>{const r=e?n:t,i=e?t:n;return r.weight===i.weight?r.index-i.index:r.weight-i.weight}))}function Er(t,e){const n=function(t){const e={};for(const n of t){const{stack:t,pos:r,stackWeight:i}=n;if(!t||!Tr.includes(r))continue;const o=e[t]||(e[t]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let o,a,s;for(o=0,a=t.length;o<a;++o){s=t[o];const{fullSize:a}=s.box,u=n[s.stack],c=u&&s.stackWeight/u.weight;s.horizontal?(s.width=c?c*r:a&&e.availableWidth,s.height=i):(s.width=r,s.height=c?c*i:a&&e.availableHeight)}return n}function Cr(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function Nr(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Ar(t,e,n,r){const{pos:i,box:o}=n,a=t.maxPadding;if(!Q(i)){n.size&&(t[i]-=n.size);const e=r[n.stack]||{size:0,count:1};e.size=Math.max(e.size,n.horizontal?o.height:o.width),n.size=e.size/e.count,t[i]+=n.size}o.getPadding&&Nr(a,o.getPadding());const s=Math.max(0,e.outerWidth-Cr(a,t,"left","right")),u=Math.max(0,e.outerHeight-Cr(a,t,"top","bottom")),c=s!==t.w,l=u!==t.h;return t.w=s,t.h=u,n.horizontal?{same:c,other:l}:{same:l,other:c}}function Pr(t,e){const n=e.maxPadding;function r(t){const r={left:0,top:0,right:0,bottom:0};return t.forEach((t=>{r[t]=Math.max(e[t],n[t])})),r}return r(t?["left","right"]:["top","bottom"])}function Rr(t,e,n,r){const i=[];let o,a,s,u,c,l;for(o=0,a=t.length,c=0;o<a;++o){s=t[o],u=s.box,u.update(s.width||e.w,s.height||e.h,Pr(s.horizontal,e));const{same:a,other:h}=Ar(e,n,s,r);c|=a&&i.length,l=l||h,u.fullSize||i.push(s)}return c&&Rr(i,e,n,r)||l}function Dr(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function Mr(t,e,n,r){const i=n.padding;let{x:o,y:a}=e;for(const s of t){const t=s.box,u=r[s.stack]||{count:1,placed:0,weight:1},c=s.stackWeight/u.weight||1;if(s.horizontal){const r=e.w*c,o=u.size||t.height;pt(u.start)&&(a=u.start),t.fullSize?Dr(t,i.left,a,n.outerWidth-i.right-i.left,o):Dr(t,e.left+u.placed,a,r,o),u.start=a,u.placed+=r,a=t.bottom}else{const r=e.h*c,a=u.size||t.width;pt(u.start)&&(o=u.start),t.fullSize?Dr(t,o,i.top,a,n.outerHeight-i.bottom-i.top):Dr(t,o,e.top+u.placed,a,r),u.start=o,u.placed+=r,o=t.right}}e.x=o,e.y=a}var Or={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;-1!==n&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const i=Ge(t.options.layout.padding),o=Math.max(e-i.width,0),a=Math.max(n-i.height,0),s=function(t){const e=function(t){const e=[];let n,r,i,o,a,s;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],({position:o,options:{stack:a,stackWeight:s=1}}=i),e.push({index:n,box:i,pos:o,horizontal:i.isHorizontal(),weight:i.weight,stack:a&&o+a,stackWeight:s});return e}(t),n=kr(e.filter((t=>t.box.fullSize)),!0),r=kr(xr(e,"left"),!0),i=kr(xr(e,"right")),o=kr(xr(e,"top"),!0),a=kr(xr(e,"bottom")),s=Ir(e,"x"),u=Ir(e,"y");return{fullSize:n,leftAndTop:r.concat(o),rightAndBottom:i.concat(u).concat(a).concat(s),chartArea:xr(e,"chartArea"),vertical:r.concat(i).concat(u),horizontal:o.concat(a).concat(s)}}(t.boxes),u=s.vertical,c=s.horizontal;rt(t.boxes,(t=>{"function"==typeof t.beforeLayout&&t.beforeLayout()}));const l=u.reduce(((t,e)=>e.box.options&&!1===e.box.options.display?t:t+1),0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:o,availableHeight:a,vBoxMaxWidth:o/2/l,hBoxMaxHeight:a/2}),d=Object.assign({},i);Nr(d,Ge(r));const f=Object.assign({maxPadding:d,w:o,h:a,x:i.left,y:i.top},i),p=Er(u.concat(c),h);Rr(s.fullSize,f,h,p),Rr(u,f,h,p),Rr(c,f,h,p)&&Rr(u,f,h,p),function(t){const e=t.maxPadding;function n(n){const r=Math.max(e[n]-t[n],0);return t[n]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}(f),Mr(s.leftAndTop,f,h,p),f.x+=f.w,f.y+=f.h,Mr(s.rightAndBottom,f,h,p),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},rt(s.chartArea,(e=>{const n=e.box;Object.assign(n,t.chartArea),n.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})}))}};class Lr{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,n){}removeEventListener(t,e,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,n,r){return e=Math.max(0,e||t.width),n=n||t.height,{width:e,height:Math.max(0,r?Math.floor(e/r):n)}}isAttached(t){return!0}updateConfig(t){}}class Fr extends Lr{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const jr="$chartjs",Br={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Gr=t=>null===t||""===t;const Ur=!!Tn&&{passive:!0};function Vr(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,Ur)}function qr(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function zr(t,e,n){const r=t.canvas,i=new MutationObserver((t=>{let e=!1;for(const n of t)e=e||qr(n.addedNodes,r),e=e&&!qr(n.removedNodes,r);e&&n()}));return i.observe(document,{childList:!0,subtree:!0}),i}function Hr(t,e,n){const r=t.canvas,i=new MutationObserver((t=>{let e=!1;for(const n of t)e=e||qr(n.removedNodes,r),e=e&&!qr(n.addedNodes,r);e&&n()}));return i.observe(document,{childList:!0,subtree:!0}),i}const $r=new Map;let Wr=0;function Kr(){const t=window.devicePixelRatio;t!==Wr&&(Wr=t,$r.forEach(((e,n)=>{n.currentDevicePixelRatio!==t&&e()})))}function Yr(t,e,n){const r=t.canvas,i=r&&fn(r);if(!i)return;const o=Kt(((t,e)=>{const r=i.clientWidth;n(t,e),r<i.clientWidth&&n()}),window),a=new ResizeObserver((t=>{const e=t[0],n=e.contentRect.width,r=e.contentRect.height;0===n&&0===r||o(n,r)}));return a.observe(i),function(t,e){$r.size||window.addEventListener("resize",Kr),$r.set(t,e)}(t,o),a}function Xr(t,e,n){n&&n.disconnect(),"resize"===e&&function(t){$r.delete(t),$r.size||window.removeEventListener("resize",Kr)}(t)}function Qr(t,e,n){const r=t.canvas,i=Kt((e=>{null!==t.ctx&&n(function(t,e){const n=Br[t.type]||t.type,{x:r,y:i}=bn(t,e);return{type:n,chart:e,native:t,x:void 0!==r?r:null,y:void 0!==i?i:null}}(e,t))}),t);return function(t,e,n){t&&t.addEventListener(e,n,Ur)}(r,e,i),i}class Jr extends Lr{acquireContext(t,e){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(function(t,e){const n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[jr]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Gr(i)){const e=xn(t,"width");void 0!==e&&(t.width=e)}if(Gr(r))if(""===t.style.height)t.height=t.width/(e||2);else{const e=xn(t,"height");void 0!==e&&(t.height=e)}}(t,e),n):null}releaseContext(t){const e=t.canvas;if(!e[jr])return!1;const n=e[jr].initial;["height","width"].forEach((t=>{const r=n[t];Y(r)?e.removeAttribute(t):e.setAttribute(t,r)}));const r=n.style||{};return Object.keys(r).forEach((t=>{e.style[t]=r[t]})),e.width=e.width,delete e[jr],!0}addEventListener(t,e,n){this.removeEventListener(t,e);const r=t.$proxies||(t.$proxies={}),i={attach:zr,detach:Hr,resize:Yr}[e]||Qr;r[e]=i(t,e,n)}removeEventListener(t,e){const n=t.$proxies||(t.$proxies={}),r=n[e];if(!r)return;({attach:Xr,detach:Xr,resize:Xr}[e]||Vr)(t,e,r),n[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,n,r){return wn(t,e,n,r)}isAttached(t){const e=fn(t);return!(!e||!e.isConnected)}}class Zr{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}hasValue(){return Nt(this.x)&&Nt(this.y)}getProps(t,e){const n=this.$animations;if(!e||!n)return this;const r={};return t.forEach((t=>{r[t]=n[t]&&n[t].active()?n[t]._to:this[t]})),r}}function ti(t,e){const n=t.options.ticks,r=function(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}(t),i=Math.min(n.maxTicksLimit||r,r),o=n.major.enabled?function(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}(e):[],a=o.length,s=o[0],u=o[a-1],c=[];if(a>i)return function(t,e,n,r){let i,o=0,a=n[0];for(r=Math.ceil(r),i=0;i<t.length;i++)i===a&&(e.push(t[i]),o++,a=n[o*r])}(e,c,o,a/i),c;const l=function(t,e,n){const r=function(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}(t),i=e.length/n;if(!r)return Math.max(i,1);const o=function(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r==0&&(e.push(r),e.push(t/r));return n===(0|n)&&e.push(n),e.sort(((t,e)=>t-e)).pop(),e}(r);for(let t=0,e=o.length-1;t<e;t++){const e=o[t];if(e>i)return e}return Math.max(i,1)}(o,e,i);if(a>0){let t,n;const r=a>1?Math.round((u-s)/(a-1)):null;for(ei(e,c,l,Y(r)?0:s-r,s),t=0,n=a-1;t<n;t++)ei(e,c,l,o[t],o[t+1]);return ei(e,c,l,u,Y(r)?e.length:u+r),c}return ei(e,c,l),c}function ei(t,e,n,r,i){const o=tt(r,0),a=Math.min(tt(i,t.length),t.length);let s,u,c,l=0;for(n=Math.ceil(n),i&&(s=i-r,n=s/Math.floor(s/n)),c=o;c<0;)l++,c=Math.round(o+l*n);for(u=Math.max(o,0);u<a;u++)u===c&&(e.push(t[u]),l++,c=Math.round(o+l*n))}const ni=(t,e,n)=>"top"===e||"left"===e?t[e]+n:t[e]-n,ri=(t,e)=>Math.min(e||t,t);function ii(t,e){const n=[],r=t.length/e,i=t.length;let o=0;for(;o<i;o+=r)n.push(t[Math.floor(o)]);return n}function oi(t,e,n){const r=t.ticks.length,i=Math.min(e,r-1),o=t._startPixel,a=t._endPixel,s=1e-6;let u,c=t.getPixelForTick(i);if(!(n&&(u=1===r?Math.max(c-o,a-c):0===e?(t.getPixelForTick(1)-c)/2:(c-t.getPixelForTick(i-1))/2,c+=i<e?u:-u,c<o-s||c>a+s)))return c}function ai(t){return t.drawTicks?t.tickLength:0}function si(t,e){if(!t.display)return 0;const n=Ue(t.font,e),r=Ge(t.padding);return(X(t.text)?t.text.length:1)*n.lineHeight+r.height}function ui(t,e,n){let r=Yt(t);return(n&&"right"!==e||!n&&"right"===e)&&(r=(t=>"left"===t?"right":"right"===t?"left":t)(r)),r}class ci extends Zr{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:n,_suggestedMax:r}=this;return t=Z(t,Number.POSITIVE_INFINITY),e=Z(e,Number.NEGATIVE_INFINITY),n=Z(n,Number.POSITIVE_INFINITY),r=Z(r,Number.NEGATIVE_INFINITY),{min:Z(t,n),max:Z(e,r),minDefined:J(t),maxDefined:J(e)}}getMinMax(t){let e,{min:n,max:r,minDefined:i,maxDefined:o}=this.getUserBounds();if(i&&o)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let s=0,u=a.length;s<u;++s)e=a[s].controller.getMinMax(this,t),i||(n=Math.min(n,e.min)),o||(r=Math.max(r,e.max));return n=o&&n>r?r:n,r=i&&n>r?n:r,{min:Z(n,Z(r,n)),max:Z(r,Z(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){nt(this.options.beforeUpdate,[this])}update(t,e,n){const{beginAtZero:r,grace:i,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(t,e,n){const{min:r,max:i}=t,o=et(e,(i-r)/2),a=(t,e)=>n&&0===t?0:t+e;return{min:a(r,-Math.abs(o)),max:a(i,o)}}(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const s=a<this.ticks.length;this._convertTicksToLabels(s?ii(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(this.ticks=ti(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),s&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,e,n=this.options.reverse;this.isHorizontal()?(t=this.left,e=this.right):(t=this.top,e=this.bottom,n=!n),this._startPixel=t,this._endPixel=e,this._reversePixels=n,this._length=e-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){nt(this.options.afterUpdate,[this])}beforeSetDimensions(){nt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){nt(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),nt(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){nt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let n,r,i;for(n=0,r=t.length;n<r;n++)i=t[n],i.label=nt(e.callback,[i.value,n,t],this)}afterTickToLabelConversion(){nt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){nt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,n=ri(this.ticks.length,t.ticks.maxTicksLimit),r=e.minRotation||0,i=e.maxRotation;let o,a,s,u=r;if(!this._isVisible()||!e.display||r>=i||n<=1||!this.isHorizontal())return void(this.labelRotation=r);const c=this._getLabelSizes(),l=c.widest.width,h=c.highest.height,d=Bt(this.chart.width-l,0,this.maxWidth);o=t.offset?this.maxWidth/n:d/(n-1),l+6>o&&(o=d/(n-(t.offset?.5:1)),a=this.maxHeight-ai(t.grid)-e.padding-si(t.title,this.chart.options.font),s=Math.sqrt(l*l+h*h),u=Rt(Math.min(Math.asin(Bt((c.highest.height+6)/o,-1,1)),Math.asin(Bt(a/s,-1,1))-Math.asin(Bt(h/s,-1,1)))),u=Math.max(r,Math.min(i,u))),this.labelRotation=u}afterCalculateLabelRotation(){nt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){nt(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:n,title:r,grid:i}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const o=si(r,e.options.font);if(a?(t.width=this.maxWidth,t.height=ai(i)+o):(t.height=this.maxHeight,t.width=ai(i)+o),n.display&&this.ticks.length){const{first:e,last:r,widest:i,highest:o}=this._getLabelSizes(),s=2*n.padding,u=Pt(this.labelRotation),c=Math.cos(u),l=Math.sin(u);if(a){const e=n.mirror?0:l*i.width+c*o.height;t.height=Math.min(this.maxHeight,t.height+e+s)}else{const e=n.mirror?0:c*i.width+l*o.height;t.width=Math.min(this.maxWidth,t.width+e+s)}this._calculatePadding(e,r,l,c)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,n,r){const{ticks:{align:i,padding:o},position:a}=this.options,s=0!==this.labelRotation,u="top"!==a&&"x"===this.axis;if(this.isHorizontal()){const a=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let l=0,h=0;s?u?(l=r*t.width,h=n*e.height):(l=n*t.height,h=r*e.width):"start"===i?h=e.width:"end"===i?l=t.width:"inner"!==i&&(l=t.width/2,h=e.width/2),this.paddingLeft=Math.max((l-a+o)*this.width/(this.width-a),0),this.paddingRight=Math.max((h-c+o)*this.width/(this.width-c),0)}else{let n=e.height/2,r=t.height/2;"start"===i?(n=0,r=t.height):"end"===i&&(n=e.height,r=0),this.paddingTop=n+o,this.paddingBottom=r+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){nt(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,n=t.length;e<n;e++)Y(t[e].label)&&(t.splice(e,1),n--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let n=this.ticks;e<n.length&&(n=ii(n,e)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,n){const{ctx:r,_longestTextCache:i}=this,o=[],a=[],s=Math.floor(e/ri(e,n));let u,c,l,h,d,f,p,g,m,v,y,b=0,_=0;for(u=0;u<e;u+=s){if(h=t[u].label,d=this._resolveTickFontOptions(u),r.font=f=d.string,p=i[f]=i[f]||{data:{},gc:[]},g=d.lineHeight,m=v=0,Y(h)||X(h)){if(X(h))for(c=0,l=h.length;c<l;++c)y=h[c],Y(y)||X(y)||(m=ye(r,p.data,p.gc,m,y),v+=g)}else m=ye(r,p.data,p.gc,m,h),v=g;o.push(m),a.push(v),b=Math.max(m,b),_=Math.max(v,_)}!function(t,e){rt(t,(t=>{const n=t.gc,r=n.length/2;let i;if(r>e){for(i=0;i<r;++i)delete t.data[n[i]];n.splice(0,r)}}))}(i,e);const w=o.indexOf(b),S=a.indexOf(_),T=t=>({width:o[t]||0,height:a[t]||0});return{first:T(0),last:T(e-1),widest:T(w),highest:T(S),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return Bt(this._alignToPixels?_e(this.chart,e,0):e,-32768,32767)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const n=e[t];return n.$context||(n.$context=function(t,e,n){return qe(t,{tick:n,index:e,type:"tick"})}(this.getContext(),t,n))}return this.$context||(this.$context=qe(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const t=this.options.ticks,e=Pt(this.labelRotation),n=Math.abs(Math.cos(e)),r=Math.abs(Math.sin(e)),i=this._getLabelSizes(),o=t.autoSkipPadding||0,a=i?i.widest.width+o:0,s=i?i.highest.height+o:0;return this.isHorizontal()?s*n>a*r?a/n:s/r:s*r<a*n?s/n:a/r}_isVisible(){const t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,n=this.chart,r=this.options,{grid:i,position:o,border:a}=r,s=i.offset,u=this.isHorizontal(),c=this.ticks.length+(s?1:0),l=ai(i),h=[],d=a.setContext(this.getContext()),f=d.display?d.width:0,p=f/2,g=function(t){return _e(n,t,f)};let m,v,y,b,_,w,S,T,x,I,k,E;if("top"===o)m=g(this.bottom),w=this.bottom-l,T=m-p,I=g(t.top)+p,E=t.bottom;else if("bottom"===o)m=g(this.top),I=t.top,E=g(t.bottom)-p,w=m+p,T=this.top+l;else if("left"===o)m=g(this.right),_=this.right-l,S=m-p,x=g(t.left)+p,k=t.right;else if("right"===o)m=g(this.left),x=t.left,k=g(t.right)-p,_=m+p,S=this.left+l;else if("x"===e){if("center"===o)m=g((t.top+t.bottom)/2+.5);else if(Q(o)){const t=Object.keys(o)[0],e=o[t];m=g(this.chart.scales[t].getPixelForValue(e))}I=t.top,E=t.bottom,w=m+p,T=w+l}else if("y"===e){if("center"===o)m=g((t.left+t.right)/2);else if(Q(o)){const t=Object.keys(o)[0],e=o[t];m=g(this.chart.scales[t].getPixelForValue(e))}_=m-p,S=_-l,x=t.left,k=t.right}const C=tt(r.ticks.maxTicksLimit,c),N=Math.max(1,Math.ceil(c/C));for(v=0;v<c;v+=N){const t=this.getContext(v),e=i.setContext(t),r=a.setContext(t),o=e.lineWidth,c=e.color,l=r.dash||[],d=r.dashOffset,f=e.tickWidth,p=e.tickColor,g=e.tickBorderDash||[],m=e.tickBorderDashOffset;y=oi(this,v,s),void 0!==y&&(b=_e(n,y,o),u?_=S=x=k=b:w=T=I=E=b,h.push({tx1:_,ty1:w,tx2:S,ty2:T,x1:x,y1:I,x2:k,y2:E,width:o,color:c,borderDash:l,borderDashOffset:d,tickWidth:f,tickColor:p,tickBorderDash:g,tickBorderDashOffset:m}))}return this._ticksLength=c,this._borderValue=m,h}_computeLabelItems(t){const e=this.axis,n=this.options,{position:r,ticks:i}=n,o=this.isHorizontal(),a=this.ticks,{align:s,crossAlign:u,padding:c,mirror:l}=i,h=ai(n.grid),d=h+c,f=l?-c:d,p=-Pt(this.labelRotation),g=[];let m,v,y,b,_,w,S,T,x,I,k,E,C="middle";if("top"===r)w=this.bottom-f,S=this._getXAxisLabelAlignment();else if("bottom"===r)w=this.top+f,S=this._getXAxisLabelAlignment();else if("left"===r){const t=this._getYAxisLabelAlignment(h);S=t.textAlign,_=t.x}else if("right"===r){const t=this._getYAxisLabelAlignment(h);S=t.textAlign,_=t.x}else if("x"===e){if("center"===r)w=(t.top+t.bottom)/2+d;else if(Q(r)){const t=Object.keys(r)[0],e=r[t];w=this.chart.scales[t].getPixelForValue(e)+d}S=this._getXAxisLabelAlignment()}else if("y"===e){if("center"===r)_=(t.left+t.right)/2-d;else if(Q(r)){const t=Object.keys(r)[0],e=r[t];_=this.chart.scales[t].getPixelForValue(e)}S=this._getYAxisLabelAlignment(h).textAlign}"y"===e&&("start"===s?C="top":"end"===s&&(C="bottom"));const N=this._getLabelSizes();for(m=0,v=a.length;m<v;++m){y=a[m],b=y.label;const t=i.setContext(this.getContext(m));T=this.getPixelForTick(m)+i.labelOffset,x=this._resolveTickFontOptions(m),I=x.lineHeight,k=X(b)?b.length:1;const e=k/2,n=t.color,s=t.textStrokeColor,c=t.textStrokeWidth;let h,d=S;if(o?(_=T,"inner"===S&&(d=m===v-1?this.options.reverse?"left":"right":0===m?this.options.reverse?"right":"left":"center"),E="top"===r?"near"===u||0!==p?-k*I+I/2:"center"===u?-N.highest.height/2-e*I+I:-N.highest.height+I/2:"near"===u||0!==p?I/2:"center"===u?N.highest.height/2-e*I:N.highest.height-k*I,l&&(E*=-1),0===p||t.showLabelBackdrop||(_+=I/2*Math.sin(p))):(w=T,E=(1-k)*I/2),t.showLabelBackdrop){const e=Ge(t.backdropPadding),n=N.heights[m],r=N.widths[m];let i=E-e.top,o=0-e.left;switch(C){case"middle":i-=n/2;break;case"bottom":i-=n}switch(S){case"center":o-=r/2;break;case"right":o-=r;break;case"inner":m===v-1?o-=r:m>0&&(o-=r/2)}h={left:o,top:i,width:r+e.width,height:n+e.height,color:t.backdropColor}}g.push({label:b,font:x,textOffset:E,options:{rotation:p,color:n,strokeColor:s,strokeWidth:c,textAlign:d,textBaseline:C,translation:[_,w],backdrop:h}})}return g}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-Pt(this.labelRotation))return"top"===t?"left":"right";let n="center";return"start"===e.align?n="left":"end"===e.align?n="right":"inner"===e.align&&(n="inner"),n}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:n,mirror:r,padding:i}}=this.options,o=t+i,a=this._getLabelSizes().widest.width;let s,u;return"left"===e?r?(u=this.right+i,"near"===n?s="left":"center"===n?(s="center",u+=a/2):(s="right",u+=a)):(u=this.right-o,"near"===n?s="right":"center"===n?(s="center",u-=a/2):(s="left",u=this.left)):"right"===e?r?(u=this.left+i,"near"===n?s="right":"center"===n?(s="center",u-=a/2):(s="left",u-=a)):(u=this.left+o,"near"===n?s="left":"center"===n?(s="center",u+=a/2):(s="right",u=this.right)):s="right",{textAlign:s,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:n,top:r,width:i,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(n,r,i,o),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const n=this.ticks.findIndex((e=>e.value===t));if(n>=0){return e.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(t){const e=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let i,o;const a=(t,e,r)=>{r.width&&r.color&&(n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.setLineDash(r.borderDash||[]),n.lineDashOffset=r.borderDashOffset,n.beginPath(),n.moveTo(t.x,t.y),n.lineTo(e.x,e.y),n.stroke(),n.restore())};if(e.display)for(i=0,o=r.length;i<o;++i){const t=r[i];e.drawOnChartArea&&a({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},t),e.drawTicks&&a({x:t.tx1,y:t.ty1},{x:t.tx2,y:t.ty2},{color:t.tickColor,width:t.tickWidth,borderDash:t.tickBorderDash,borderDashOffset:t.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:n,grid:r}}=this,i=n.setContext(this.getContext()),o=n.display?i.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,s=this._borderValue;let u,c,l,h;this.isHorizontal()?(u=_e(t,this.left,o)-o/2,c=_e(t,this.right,a)+a/2,l=h=s):(l=_e(t,this.top,o)-o/2,h=_e(t,this.bottom,a)+a/2,u=c=s),e.save(),e.lineWidth=i.width,e.strokeStyle=i.color,e.beginPath(),e.moveTo(u,l),e.lineTo(c,h),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const e=this.ctx,n=this._computeLabelArea();n&&Ie(e,n);const r=this.getLabelItems(t);for(const t of r){const n=t.options,r=t.font;Pe(e,t.label,0,t.textOffset,r,n)}n&&ke(e)}drawTitle(){const{ctx:t,options:{position:e,title:n,reverse:r}}=this;if(!n.display)return;const i=Ue(n.font),o=Ge(n.padding),a=n.align;let s=i.lineHeight/2;"bottom"===e||"center"===e||Q(e)?(s+=o.bottom,X(n.text)&&(s+=i.lineHeight*(n.text.length-1))):s+=o.top;const{titleX:u,titleY:c,maxWidth:l,rotation:h}=function(t,e,n,r){const{top:i,left:o,bottom:a,right:s,chart:u}=t,{chartArea:c,scales:l}=u;let h,d,f,p=0;const g=a-i,m=s-o;if(t.isHorizontal()){if(d=Xt(r,o,s),Q(n)){const t=Object.keys(n)[0],r=n[t];f=l[t].getPixelForValue(r)+g-e}else f="center"===n?(c.bottom+c.top)/2+g-e:ni(t,n,e);h=s-o}else{if(Q(n)){const t=Object.keys(n)[0],r=n[t];d=l[t].getPixelForValue(r)-m+e}else d="center"===n?(c.left+c.right)/2-m+e:ni(t,n,e);f=Xt(r,a,i),p="left"===n?-St:St}return{titleX:d,titleY:f,maxWidth:h,rotation:p}}(this,s,e,a);Pe(t,n.text,0,0,i,{color:n.color,maxWidth:l,rotation:h,textAlign:ui(a,e,r),textBaseline:"middle",translation:[u,c]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,n=tt(t.grid&&t.grid.z,-1),r=tt(t.border&&t.border.z,0);return this._isVisible()&&this.draw===ci.prototype.draw?[{z:n,draw:t=>{this.drawBackground(),this.drawGrid(t),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:e,draw:t=>{this.drawLabels(t)}}]:[{z:e,draw:t=>{this.draw(t)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let i,o;for(i=0,o=e.length;i<o;++i){const o=e[i];o[n]!==this.id||t&&o.type!==t||r.push(o)}return r}_resolveTickFontOptions(t){return Ue(this.options.ticks.setContext(this.getContext(t)).font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class li{constructor(t,e,n){this.type=t,this.scope=e,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let n;(function(t){return"id"in t&&"defaults"in t})(e)&&(n=this.register(e));const r=this.items,i=t.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+t);return i in r||(r[i]=t,function(t,e,n){const r=ut(Object.create(null),[n?ve.get(n):{},ve.get(e),t.defaults]);ve.set(e,r),t.defaultRoutes&&function(t,e){Object.keys(e).forEach((n=>{const r=n.split("."),i=r.pop(),o=[t].concat(r).join("."),a=e[n].split("."),s=a.pop(),u=a.join(".");ve.route(o,i,u,s)}))}(e,t.defaultRoutes);t.descriptors&&ve.describe(e,t.descriptors)}(t,o,n),this.override&&ve.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const e=this.items,n=t.id,r=this.scope;n in e&&delete e[n],r&&n in ve[r]&&(delete ve[r][n],this.override&&delete de[n])}}class hi{constructor(){this.controllers=new li(er,"datasets",!0),this.elements=new li(Zr,"elements"),this.plugins=new li(Object,"plugins"),this.scales=new li(ci,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,n){[...e].forEach((e=>{const r=n||this._getRegistryForType(e);n||r.isForType(e)||r===this.plugins&&e.id?this._exec(t,r,e):rt(e,(e=>{const r=n||this._getRegistryForType(e);this._exec(t,r,e)}))}))}_exec(t,e,n){const r=ft(t);nt(n["before"+r],[],n),e[t](n),nt(n["after"+r],[],n)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const n=this._typedRegistries[e];if(n.isForType(t))return n}return this.plugins}_get(t,e,n){const r=e.get(t);if(void 0===r)throw new Error('"'+t+'" is not a registered '+n+".");return r}}var di=new hi;class fi{constructor(){this._init=[]}notify(t,e,n,r){"beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const i=r?this._descriptors(t).filter(r):this._descriptors(t),o=this._notify(i,t,e,n);return"afterDestroy"===e&&(this._notify(i,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,e,n,r){r=r||{};for(const i of t){const t=i.plugin;if(!1===nt(t[n],[e,r,i.options],t)&&r.cancelable)return!1}return!0}invalidate(){Y(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const n=t&&t.config,r=tt(n.options&&n.options.plugins,{}),i=function(t){const e={},n=[],r=Object.keys(di.plugins.items);for(let t=0;t<r.length;t++)n.push(di.getPlugin(r[t]));const i=t.plugins||[];for(let t=0;t<i.length;t++){const r=i[t];-1===n.indexOf(r)&&(n.push(r),e[r.id]=!0)}return{plugins:n,localIds:e}}(n);return!1!==r||e?function(t,{plugins:e,localIds:n},r,i){const o=[],a=t.getContext();for(const s of e){const e=s.id,u=pi(r[e],i);null!==u&&o.push({plugin:s,options:gi(t.config,{plugin:s,local:n[e]},u,a)})}return o}(t,i,r,e):[]}_notifyStateChanges(t){const e=this._oldCache||[],n=this._cache,r=(t,e)=>t.filter((t=>!e.some((e=>t.plugin.id===e.plugin.id))));this._notify(r(e,n),t,"stop"),this._notify(r(n,e),t,"start")}}function pi(t,e){return e||!1!==t?!0===t?{}:t:null}function gi(t,{plugin:e,local:n},r,i){const o=t.pluginScopeKeys(e),a=t.getOptionScopes(r,o);return n&&e.defaults&&a.push(e.defaults),t.createResolver(a,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function mi(t,e){const n=ve.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function vi(t){if("x"===t||"y"===t||"r"===t)return t}function yi(t,...e){if(vi(t))return t;for(const r of e){const e=r.axis||("top"===(n=r.position)||"bottom"===n?"x":"left"===n||"right"===n?"y":void 0)||t.length>1&&vi(t[0].toLowerCase());if(e)return e}var n;throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function bi(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function _i(t,e){const n=de[t.type]||{scales:{}},r=e.scales||{},i=mi(t.type,e),o=Object.create(null);return Object.keys(r).forEach((e=>{const a=r[e];if(!Q(a))return console.error(`Invalid scale configuration for scale: ${e}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${e}`);const s=yi(e,a,function(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter((e=>e.xAxisID===t||e.yAxisID===t));if(n.length)return bi(t,"x",n[0])||bi(t,"y",n[0])}return{}}(e,t),ve.scales[a.type]),u=function(t,e){return t===e?"_index_":"_value_"}(s,i),c=n.scales||{};o[e]=ct(Object.create(null),[{axis:s},a,c[s],c[u]])})),t.data.datasets.forEach((n=>{const i=n.type||t.type,a=n.indexAxis||mi(i,e),s=(de[i]||{}).scales||{};Object.keys(s).forEach((t=>{const e=function(t,e){let n=t;return"_index_"===t?n=e:"_value_"===t&&(n="x"===e?"y":"x"),n}(t,a),i=n[e+"AxisID"]||e;o[i]=o[i]||Object.create(null),ct(o[i],[{axis:e},r[i],s[t]])}))})),Object.keys(o).forEach((t=>{const e=o[t];ct(e,[ve.scales[e.type],ve.scale])})),o}function wi(t){const e=t.options||(t.options={});e.plugins=tt(e.plugins,{}),e.scales=_i(t,e)}function Si(t){return(t=t||{}).datasets=t.datasets||[],t.labels=t.labels||[],t}const Ti=new Map,xi=new Set;function Ii(t,e){let n=Ti.get(t);return n||(n=e(),Ti.set(t,n),xi.add(n)),n}const ki=(t,e,n)=>{const r=dt(e,n);void 0!==r&&t.add(r)};class Ei{constructor(t){this._config=function(t){return(t=t||{}).data=Si(t.data),wi(t),t}(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Si(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),wi(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Ii(t,(()=>[[`datasets.${t}`,""]]))}datasetAnimationScopeKeys(t,e){return Ii(`${t}.transition.${e}`,(()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]]))}datasetElementScopeKeys(t,e){return Ii(`${t}-${e}`,(()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]]))}pluginScopeKeys(t){const e=t.id;return Ii(`${this.type}-plugin-${e}`,(()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]]))}_cachedScopes(t,e){const n=this._scopeCache;let r=n.get(t);return r&&!e||(r=new Map,n.set(t,r)),r}getOptionScopes(t,e,n){const{options:r,type:i}=this,o=this._cachedScopes(t,n),a=o.get(e);if(a)return a;const s=new Set;e.forEach((e=>{t&&(s.add(t),e.forEach((e=>ki(s,t,e)))),e.forEach((t=>ki(s,r,t))),e.forEach((t=>ki(s,de[i]||{},t))),e.forEach((t=>ki(s,ve,t))),e.forEach((t=>ki(s,fe,t)))}));const u=Array.from(s);return 0===u.length&&u.push(Object.create(null)),xi.has(e)&&o.set(e,u),u}chartOptionScopes(){const{options:t,type:e}=this;return[t,de[e]||{},ve.datasets[e]||{},{type:e},ve,fe]}resolveNamedOptions(t,e,n,r=[""]){const i={$shared:!0},{resolver:o,subPrefixes:a}=Ci(this._resolverCache,t,r);let s=o;if(function(t,e){const{isScriptable:n,isIndexable:r}=$e(t);for(const i of e){const e=n(i),o=r(i),a=(o||e)&&t[i];if(e&&(gt(a)||Ni(a))||o&&X(a))return!0}return!1}(o,e)){i.$shared=!1;s=He(o,n=gt(n)?n():n,this.createResolver(t,n,a))}for(const t of e)i[t]=s[t];return i}createResolver(t,e,n=[""],r){const{resolver:i}=Ci(this._resolverCache,t,n);return Q(e)?He(i,e,void 0,r):i}}function Ci(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const i=n.join();let o=r.get(i);if(!o){o={resolver:ze(e,n),subPrefixes:n.filter((t=>!t.toLowerCase().includes("hover")))},r.set(i,o)}return o}const Ni=t=>Q(t)&&Object.getOwnPropertyNames(t).some((e=>gt(t[e])));const Ai=["top","bottom","left","right","chartArea"];function Pi(t,e){return"top"===t||"bottom"===t||-1===Ai.indexOf(t)&&"x"===e}function Ri(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function Di(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),nt(n&&n.onComplete,[t],e)}function Mi(t){const e=t.chart,n=e.options.animation;nt(n&&n.onProgress,[t],e)}function Oi(t){return dn()&&"string"==typeof t?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Li={},Fi=t=>{const e=Oi(t);return Object.values(Li).filter((t=>t.canvas===e)).pop()};function ji(t,e,n){const r=Object.keys(t);for(const i of r){const r=+i;if(r>=e){const o=t[i];delete t[i],(n>0||r>e)&&(t[r+n]=o)}}}function Bi(t,e,n){return t.options.clip?t[n]:e[n]}class Gi{static defaults=ve;static instances=Li;static overrides=de;static registry=di;static version="4.4.2";static getChart=Fi;static register(...t){di.add(...t),Ui()}static unregister(...t){di.remove(...t),Ui()}constructor(t,e){const n=this.config=new Ei(e),r=Oi(t),i=Fi(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(t){return!dn()||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas?Fr:Jr}(r)),this.platform.updateConfig(n);const a=this.platform.acquireContext(r,o.aspectRatio),s=a&&a.canvas,u=s&&s.height,c=s&&s.width;this.id=K(),this.ctx=a,this.canvas=s,this.width=c,this.height=u,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new fi,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}((t=>this.update(t)),o.resizeDelay||0),this._dataChanges=[],Li[this.id]=this,a&&s?(Bn.listen(this,"complete",Di),Bn.listen(this,"progress",Mi),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:n,height:r,_aspectRatio:i}=this;return Y(t)?e&&i?i:r?n/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return di}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Sn(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return we(this.canvas,this.ctx),this}stop(){return Bn.stop(this),this}resize(t,e){Bn.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const n=this.options,r=this.canvas,i=n.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,t,e,i),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),s=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Sn(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),nt(n.onResize,[this,o],this),this.attached&&this._doResize(s)&&this.render())}ensureScalesHaveIDs(){rt(this.options.scales||{},((t,e)=>{t.id=e}))}buildOrUpdateScales(){const t=this.options,e=t.scales,n=this.scales,r=Object.keys(n).reduce(((t,e)=>(t[e]=!1,t)),{});let i=[];e&&(i=i.concat(Object.keys(e).map((t=>{const n=e[t],r=yi(t,n),i="r"===r,o="x"===r;return{options:n,dposition:i?"chartArea":o?"bottom":"left",dtype:i?"radialLinear":o?"category":"linear"}})))),rt(i,(e=>{const i=e.options,o=i.id,a=yi(o,i),s=tt(i.type,e.dtype);void 0!==i.position&&Pi(i.position,a)===Pi(e.dposition)||(i.position=e.dposition),r[o]=!0;let u=null;if(o in n&&n[o].type===s)u=n[o];else{u=new(di.getScale(s))({id:o,type:s,ctx:this.ctx,chart:this}),n[u.id]=u}u.init(i,t)})),rt(r,((t,e)=>{t||delete n[e]})),rt(n,(t=>{Or.configure(this,t,t.options),Or.addBox(this,t)}))}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,n=t.length;if(t.sort(((t,e)=>t.index-e.index)),n>e){for(let t=e;t<n;++t)this._destroyDatasetMeta(t);t.splice(e,n-e)}this._sortedMetasets=t.slice(0).sort(Ri("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach(((t,n)=>{0===e.filter((e=>e===t._dataset)).length&&this._destroyDatasetMeta(n)}))}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=e.length;n<r;n++){const r=e[n];let i=this.getDatasetMeta(n);const o=r.type||this.config.type;if(i.type&&i.type!==o&&(this._destroyDatasetMeta(n),i=this.getDatasetMeta(n)),i.type=o,i.indexAxis=r.indexAxis||mi(o,this.options),i.order=r.order||0,i.index=n,i.label=""+r.label,i.visible=this.isDatasetVisible(n),i.controller)i.controller.updateIndex(n),i.controller.linkScales();else{const e=di.getController(o),{datasetElementType:r,dataElementType:a}=ve.datasets[o];Object.assign(e,{dataElementType:di.getElement(a),datasetElementType:r&&di.getElement(r)}),i.controller=new e(this,n),t.push(i.controller)}}return this._updateMetasets(),t}_resetElements(){rt(this.data.datasets,((t,e)=>{this.getDatasetMeta(e).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const n=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let t=0,e=this.data.datasets.length;t<e;t++){const{controller:e}=this.getDatasetMeta(t),n=!r&&-1===i.indexOf(e);e.buildOrUpdateElements(n),o=Math.max(+e.getMaxOverflow(),o)}o=this._minPadding=n.layout.autoPadding?o:0,this._updateLayout(o),r||rt(i,(t=>{t.reset()})),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Ri("z","_idx"));const{_active:a,_lastEvent:s}=this;s?this._eventHandler(s,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){rt(this.scales,(t=>{Or.removeBox(this,t)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),n=new Set(t.events);mt(e,n)&&!!this._responsiveListeners===t.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:i}of e){ji(t,r,"_removeElements"===n?-i:i)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,n=e=>new Set(t.filter((t=>t[0]===e)).map(((t,e)=>e+","+t.splice(1).join(",")))),r=n(0);for(let t=1;t<e;t++)if(!mt(r,n(t)))return;return Array.from(r).map((t=>t.split(","))).map((t=>({method:t[1],start:+t[2],count:+t[3]})))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Or.update(this,this.width,this.height,t);const e=this.chartArea,n=e.width<=0||e.height<=0;this._layers=[],rt(this.boxes,(t=>{n&&"chartArea"===t.position||(t.configure&&t.configure(),this._layers.push(...t._layers()))}),this),this._layers.forEach(((t,e)=>{t._idx=e})),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let t=0,e=this.data.datasets.length;t<e;++t)this.getDatasetMeta(t).controller.configure();for(let e=0,n=this.data.datasets.length;e<n;++e)this._updateDataset(e,gt(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const n=this.getDatasetMeta(t),r={meta:n,index:t,mode:e,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(n.controller._update(e),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(Bn.has(this)?this.attached&&!Bn.running(this)&&Bn.start(this):(this.draw(),Di({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:t,height:e}=this._resizeBeforeDraw;this._resize(t,e),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,n=[];let r,i;for(r=0,i=e.length;r<i;++r){const i=e[r];t&&!i.visible||n.push(i)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,n=t._clip,r=!n.disabled,i=function(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:Bi(n,e,"left"),right:Bi(n,e,"right"),top:Bi(r,e,"top"),bottom:Bi(r,e,"bottom")}:e}(t,this.chartArea),o={meta:t,index:t.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",o)&&(r&&Ie(e,{left:!1===n.left?0:i.left-n.left,right:!1===n.right?this.width:i.right+n.right,top:!1===n.top?0:i.top-n.top,bottom:!1===n.bottom?this.height:i.bottom+n.bottom}),t.controller.draw(),r&&ke(e),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(t){return xe(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,n,r){const i=Sr.modes[e];return"function"==typeof i?i(this,t,n,r):[]}getDatasetMeta(t){const e=this.data.datasets[t],n=this._metasets;let r=n.filter((t=>t&&t._dataset===e)).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=qe(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const n=this.getDatasetMeta(t);return"boolean"==typeof n.hidden?!n.hidden:!e.hidden}setDatasetVisibility(t,e){this.getDatasetMeta(t).hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,n){const r=n?"show":"hide",i=this.getDatasetMeta(t),o=i.controller._resolveAnimations(void 0,r);pt(e)?(i.data[e].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),o.update(i,{visible:n}),this.update((e=>e.datasetIndex===t?r:void 0)))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),Bn.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),we(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete Li[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,n=(n,r)=>{e.addEventListener(this,n,r),t[n]=r},r=(t,e,n)=>{t.offsetX=e,t.offsetY=n,this._eventHandler(t)};rt(this.options.events,(t=>n(t,r)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,n=(n,r)=>{e.addEventListener(this,n,r),t[n]=r},r=(n,r)=>{t[n]&&(e.removeEventListener(this,n,r),delete t[n])},i=(t,e)=>{this.canvas&&this.resize(t,e)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),n("resize",i),n("detach",o)};o=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),n("attach",a)},e.isAttached(this.canvas)?a():o()}unbindEvents(){rt(this._listeners,((t,e)=>{this.platform.removeEventListener(this,e,t)})),this._listeners={},rt(this._responsiveListeners,((t,e)=>{this.platform.removeEventListener(this,e,t)})),this._responsiveListeners=void 0}updateHoverStyle(t,e,n){const r=n?"set":"remove";let i,o,a,s;for("dataset"===e&&(i=this.getDatasetMeta(t[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),a=0,s=t.length;a<s;++a){o=t[a];const e=o&&this.getDatasetMeta(o.datasetIndex).controller;e&&e[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],n=t.map((({datasetIndex:t,index:e})=>{const n=this.getDatasetMeta(t);if(!n)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:n.data[e],index:e}}));!it(n,e)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,e))}notifyPlugins(t,e,n){return this._plugins.notify(this,t,e,n)}isPluginEnabled(t){return 1===this._plugins._cache.filter((e=>e.plugin.id===t)).length}_updateHoverStyles(t,e,n){const r=this.options.hover,i=(t,e)=>t.filter((t=>!e.some((e=>t.datasetIndex===e.datasetIndex&&t.index===e.index)))),o=i(e,t),a=n?t:i(t,e);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(t,e){const n={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},r=e=>(e.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",n,r))return;const i=this._handleEvent(t,e,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(i||n.changed)&&this.render(),this}_handleEvent(t,e,n){const{_active:r=[],options:i}=this,o=e,a=this._getActiveElements(t,r,n,o),s=function(t){return"mouseup"===t.type||"click"===t.type||"contextmenu"===t.type}(t),u=function(t,e,n,r){return n&&"mouseout"!==t.type?r?e:t:null}(t,this._lastEvent,n,s);n&&(this._lastEvent=null,nt(i.onHover,[t,a,this],this),s&&nt(i.onClick,[t,a,this],this));const c=!it(a,r);return(c||e)&&(this._active=a,this._updateHoverStyles(a,r,e)),this._lastEvent=u,c}_getActiveElements(t,e,n,r){if("mouseout"===t.type)return[];if(!n)return e;const i=this.options.hover;return this.getElementsAtEventForMode(t,i.mode,i,r)}}function Ui(){return rt(Gi.instances,(t=>t._plugins.invalidate()))}function Vi(t,e,n,r){const i=Fe(t.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const o=(n-e)/2,a=Math.min(o,r*e/2),s=t=>{const e=(n-Math.min(o,t))*r/2;return Bt(t,0,Math.min(o,e))};return{outerStart:s(i.outerStart),outerEnd:s(i.outerEnd),innerStart:Bt(i.innerStart,0,a),innerEnd:Bt(i.innerEnd,0,a)}}function qi(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function zi(t,e,n,r,i,o){const{x:a,y:s,startAngle:u,pixelMargin:c,innerRadius:l}=e,h=Math.max(e.outerRadius+r+n-c,0),d=l>0?l+r+n+c:0;let f=0;const p=i-u;if(r){const t=((l>0?l-r:0)+(h>0?h-r:0))/2;f=(p-(0!==t?p*t/(t+r):p))/2}const g=(p-Math.max(.001,p*h-n/vt)/h)/2,m=u+g+f,v=i-g-f,{outerStart:y,outerEnd:b,innerStart:_,innerEnd:w}=Vi(e,d,h,v-m),S=h-y,T=h-b,x=m+y/S,I=v-b/T,k=d+_,E=d+w,C=m+_/k,N=v-w/E;if(t.beginPath(),o){const e=(x+I)/2;if(t.arc(a,s,h,x,e),t.arc(a,s,h,e,I),b>0){const e=qi(T,I,a,s);t.arc(e.x,e.y,b,I,v+St)}const n=qi(E,v,a,s);if(t.lineTo(n.x,n.y),w>0){const e=qi(E,N,a,s);t.arc(e.x,e.y,w,v+St,N+Math.PI)}const r=(v-w/d+(m+_/d))/2;if(t.arc(a,s,d,v-w/d,r,!0),t.arc(a,s,d,r,m+_/d,!0),_>0){const e=qi(k,C,a,s);t.arc(e.x,e.y,_,C+Math.PI,m-St)}const i=qi(S,m,a,s);if(t.lineTo(i.x,i.y),y>0){const e=qi(S,x,a,s);t.arc(e.x,e.y,y,m-St,x)}}else{t.moveTo(a,s);const e=Math.cos(x)*h+a,n=Math.sin(x)*h+s;t.lineTo(e,n);const r=Math.cos(I)*h+a,i=Math.sin(I)*h+s;t.lineTo(r,i)}t.closePath()}function Hi(t,e,n,r,i){const{fullCircles:o,startAngle:a,circumference:s,options:u}=e,{borderWidth:c,borderJoinStyle:l,borderDash:h,borderDashOffset:d}=u,f="inner"===u.borderAlign;if(!c)return;t.setLineDash(h||[]),t.lineDashOffset=d,f?(t.lineWidth=2*c,t.lineJoin=l||"round"):(t.lineWidth=c,t.lineJoin=l||"bevel");let p=e.endAngle;if(o){zi(t,e,n,r,p,i);for(let e=0;e<o;++e)t.stroke();isNaN(s)||(p=a+(s%yt||yt))}f&&function(t,e,n){const{startAngle:r,pixelMargin:i,x:o,y:a,outerRadius:s,innerRadius:u}=e;let c=i/s;t.beginPath(),t.arc(o,a,s,r-c,n+c),u>i?(c=i/u,t.arc(o,a,u,n+c,r-c,!0)):t.arc(o,a,i,n+St,r-St),t.closePath(),t.clip()}(t,e,p),o||(zi(t,e,n,r,p,i),t.stroke())}function $i(t,e,n=e){t.lineCap=tt(n.borderCapStyle,e.borderCapStyle),t.setLineDash(tt(n.borderDash,e.borderDash)),t.lineDashOffset=tt(n.borderDashOffset,e.borderDashOffset),t.lineJoin=tt(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=tt(n.borderWidth,e.borderWidth),t.strokeStyle=tt(n.borderColor,e.borderColor)}function Wi(t,e,n){t.lineTo(n.x,n.y)}function Ki(t,e,n={}){const r=t.length,{start:i=0,end:o=r-1}=n,{start:a,end:s}=e,u=Math.max(i,a),c=Math.min(o,s),l=i<a&&o<a||i>s&&o>s;return{count:r,start:u,loop:e.loop,ilen:c<u&&!l?r+c-u:c-u}}function Yi(t,e,n,r){const{points:i,options:o}=e,{count:a,start:s,loop:u,ilen:c}=Ki(i,n,r),l=function(t){return t.stepped?Ee:t.tension||"monotone"===t.cubicInterpolationMode?Ce:Wi}(o);let h,d,f,{move:p=!0,reverse:g}=r||{};for(h=0;h<=c;++h)d=i[(s+(g?c-h:h))%a],d.skip||(p?(t.moveTo(d.x,d.y),p=!1):l(t,f,d,g,o.stepped),f=d);return u&&(d=i[(s+(g?c:0))%a],l(t,f,d,g,o.stepped)),!!u}function Xi(t,e,n,r){const i=e.points,{count:o,start:a,ilen:s}=Ki(i,n,r),{move:u=!0,reverse:c}=r||{};let l,h,d,f,p,g,m=0,v=0;const y=t=>(a+(c?s-t:t))%o,b=()=>{f!==p&&(t.lineTo(m,p),t.lineTo(m,f),t.lineTo(m,g))};for(u&&(h=i[y(0)],t.moveTo(h.x,h.y)),l=0;l<=s;++l){if(h=i[y(l)],h.skip)continue;const e=h.x,n=h.y,r=0|e;r===d?(n<f?f=n:n>p&&(p=n),m=(v*m+e)/++v):(b(),t.lineTo(e,n),d=r,v=0,f=p=n),g=n}b()}function Qi(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!(t._decimated||t._loop||e.tension||"monotone"===e.cubicInterpolationMode||e.stepped||n)?Xi:Yi}const Ji="function"==typeof Path2D;function Zi(t,e,n,r){Ji&&!e.options.segment?function(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),$i(t,e.options),t.stroke(i)}(t,e,n,r):function(t,e,n,r){const{segments:i,options:o}=e,a=Qi(e);for(const s of i)$i(t,o,s.style),t.beginPath(),a(t,e,s,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}(t,e,n,r)}class to extends Zr{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const r=n.spanGaps?this._loop:this._fullLoop;hn(this._points,n,t,r,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(t,e){const n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];const o=!!t._loop,{start:a,end:s}=function(t,e,n,r){let i=0,o=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(o+=i);o>i&&t[o%e].skip;)o--;return o%=e,{start:i,end:o}}(n,i,o,r);return On(t,!0===r?[{start:a,end:s,loop:o}]:function(t,e,n,r){const i=t.length,o=[];let a,s=e,u=t[e];for(a=e+1;a<=n;++a){const n=t[a%i];n.skip||n.stop?u.skip||(r=!1,o.push({start:e%i,end:(a-1)%i,loop:r}),e=s=n.stop?a:null):(s=a,u.skip&&(e=a)),u=n}return null!==s&&o.push({start:e%i,end:s%i,loop:r}),o}(n,a,s<a?s+i:s,!!t._fullLoop&&0===a&&s===i-1),n,e)}(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,n=t.length;return n&&e[t[n-1].end]}interpolate(t,e){const n=this.options,r=t[e],i=this.points,o=Mn(this,{property:e,start:r,end:r});if(!o.length)return;const a=[],s=function(t){return t.stepped?kn:t.tension||"monotone"===t.cubicInterpolationMode?En:In}(n);let u,c;for(u=0,c=o.length;u<c;++u){const{start:c,end:l}=o[u],h=i[c],d=i[l];if(h===d){a.push(h);continue}const f=s(h,d,Math.abs((r-h[e])/(d[e]-h[e])),n.stepped);f[e]=t[e],a.push(f)}return 1===a.length?a[0]:a}pathSegment(t,e,n){return Qi(this)(t,this,e,n)}path(t,e,n){const r=this.segments,i=Qi(this);let o=this._loop;e=e||0,n=n||this.points.length-e;for(const a of r)o&=i(t,this,a,{start:e,end:e+n-1});return!!o}draw(t,e,n,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(t.save(),Zi(t,this,n,r),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function eo(t,e,n,r){const i=t.options,{[n]:o}=t.getProps([n],r);return Math.abs(e-o)<i.radius+i.hitRadius}function no(t,e){const{x:n,y:r,base:i,width:o,height:a}=t.getProps(["x","y","base","width","height"],e);let s,u,c,l,h;return t.horizontal?(h=a/2,s=Math.min(n,i),u=Math.max(n,i),c=r-h,l=r+h):(h=o/2,s=n-h,u=n+h,c=Math.min(r,i),l=Math.max(r,i)),{left:s,top:c,right:u,bottom:l}}function ro(t,e,n,r){return t?0:Bt(e,n,r)}function io(t){const e=no(t),n=e.right-e.left,r=e.bottom-e.top,i=function(t,e,n){const r=t.options.borderWidth,i=t.borderSkipped,o=je(r);return{t:ro(i.top,o.top,0,n),r:ro(i.right,o.right,0,e),b:ro(i.bottom,o.bottom,0,n),l:ro(i.left,o.left,0,e)}}(t,n/2,r/2),o=function(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,o=Be(i),a=Math.min(e,n),s=t.borderSkipped,u=r||Q(i);return{topLeft:ro(!u||s.top||s.left,o.topLeft,0,a),topRight:ro(!u||s.top||s.right,o.topRight,0,a),bottomLeft:ro(!u||s.bottom||s.left,o.bottomLeft,0,a),bottomRight:ro(!u||s.bottom||s.right,o.bottomRight,0,a)}}(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:o},inner:{x:e.left+i.l,y:e.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,o.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(i.b,i.r))}}}}function oo(t,e,n,r){const i=null===e,o=null===n,a=t&&!(i&&o)&&no(t,r);return a&&(i||Gt(e,a.left,a.right))&&(o||Gt(n,a.top,a.bottom))}function ao(t,e){t.rect(e.x,e.y,e.w,e.h)}function so(t,e,n={}){const r=t.x!==n.x?-e:0,i=t.y!==n.y?-e:0,o=(t.x+t.w!==n.x+n.w?e:0)-r,a=(t.y+t.h!==n.y+n.h?e:0)-i;return{x:t.x+r,y:t.y+i,w:t.w+o,h:t.h+a,radius:t.radius}}var uo=Object.freeze({__proto__:null,ArcElement:class extends Zr{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,n){const r=this.getProps(["x","y"],n),{angle:i,distance:o}=Mt(r,{x:t,y:e}),{startAngle:a,endAngle:s,innerRadius:u,outerRadius:c,circumference:l}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),h=(this.options.spacing+this.options.borderWidth)/2,d=tt(l,s-a)>=yt||jt(i,a,s),f=Gt(o,u+h,c+h);return d&&f}getCenterPoint(t){const{x:e,y:n,startAngle:r,endAngle:i,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:s,spacing:u}=this.options,c=(r+i)/2,l=(o+a+u+s)/2;return{x:e+Math.cos(c)*l,y:n+Math.sin(c)*l}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:n}=this,r=(e.offset||0)/4,i=(e.spacing||0)/2,o=e.circular;if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=n>yt?Math.floor(n/yt):0,0===n||this.innerRadius<0||this.outerRadius<0)return;t.save();const a=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(a)*r,Math.sin(a)*r);const s=r*(1-Math.sin(Math.min(vt,n||0)));t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,function(t,e,n,r,i){const{fullCircles:o,startAngle:a,circumference:s}=e;let u=e.endAngle;if(o){zi(t,e,n,r,u,i);for(let e=0;e<o;++e)t.fill();isNaN(s)||(u=a+(s%yt||yt))}zi(t,e,n,r,u,i),t.fill()}(t,this,s,i,o),Hi(t,this,s,i,o),t.restore()}},BarElement:class extends Zr{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:n,backgroundColor:r}}=this,{inner:i,outer:o}=io(this),a=(s=o.radius).topLeft||s.topRight||s.bottomLeft||s.bottomRight?Re:ao;var s;t.save(),o.w===i.w&&o.h===i.h||(t.beginPath(),a(t,so(o,e,i)),t.clip(),a(t,so(i,-e,o)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),a(t,so(i,e)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,e,n){return oo(this,t,e,n)}inXRange(t,e){return oo(this,t,null,e)}inYRange(t,e){return oo(this,null,t,e)}getCenterPoint(t){const{x:e,y:n,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],t);return{x:i?(e+r)/2:e,y:i?n:(n+r)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}},LineElement:to,PointElement:class extends Zr{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,n){const r=this.options,{x:i,y:o}=this.getProps(["x","y"],n);return Math.pow(t-i,2)+Math.pow(e-o,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(t,e){return eo(this,t,"x",e)}inYRange(t,e){return eo(this,t,"y",e)}getCenterPoint(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}size(t){let e=(t=t||this.options||{}).radius||0;e=Math.max(e,e&&t.hoverRadius||0);return 2*(e+(e&&t.borderWidth||0))}draw(t,e){const n=this.options;this.skip||n.radius<.1||!xe(this,e,this.size(n)/2)||(t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.fillStyle=n.backgroundColor,Se(t,n,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}});const co=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],lo=co.map((t=>t.replace("rgb(","rgba(").replace(")",", 0.5)")));function ho(t){return co[t%co.length]}function fo(t){return lo[t%lo.length]}function po(t){let e=0;return(n,r)=>{const i=t.getDatasetMeta(r).controller;i instanceof lr?e=function(t,e){return t.backgroundColor=t.data.map((()=>ho(e++))),e}(n,e):i instanceof hr?e=function(t,e){return t.backgroundColor=t.data.map((()=>fo(e++))),e}(n,e):i&&(e=function(t,e){return t.borderColor=ho(e),t.backgroundColor=fo(e),++e}(n,e))}}function go(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}var mo={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,n){if(!n.enabled)return;const{data:{datasets:r},options:i}=t.config,{elements:o}=i;if(!n.forceOverride&&(go(r)||(a=i)&&(a.borderColor||a.backgroundColor)||o&&go(o)))return;var a;const s=po(t);r.forEach(s)}};function vo(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function yo(t){t.data.datasets.forEach((t=>{vo(t)}))}var bo={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled)return void yo(t);const r=t.width;t.data.datasets.forEach(((e,i)=>{const{_data:o,indexAxis:a}=e,s=t.getDatasetMeta(i),u=o||e.data;if("y"===Ve([a,t.options.indexAxis]))return;if(!s.controller.supportsDecimation)return;const c=t.scales[s.xAxisID];if("linear"!==c.type&&"time"!==c.type)return;if(t.options.parsing)return;let{start:l,count:h}=function(t,e){const n=e.length;let r,i=0;const{iScale:o}=t,{min:a,max:s,minDefined:u,maxDefined:c}=o.getUserBounds();return u&&(i=Bt(Vt(e,o.axis,a).lo,0,n-1)),r=c?Bt(Vt(e,o.axis,s).hi+1,i,n)-i:n-i,{start:i,count:r}}(s,u);if(h<=(n.threshold||4*r))return void vo(e);let d;switch(Y(o)&&(e._data=u,delete e.data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(t){this._data=t}})),n.algorithm){case"lttb":d=function(t,e,n,r,i){const o=i.samples||r;if(o>=n)return t.slice(e,e+n);const a=[],s=(n-2)/(o-2);let u=0;const c=e+n-1;let l,h,d,f,p,g=e;for(a[u++]=t[g],l=0;l<o-2;l++){let r,i=0,o=0;const c=Math.floor((l+1)*s)+1+e,m=Math.min(Math.floor((l+2)*s)+1,n)+e,v=m-c;for(r=c;r<m;r++)i+=t[r].x,o+=t[r].y;i/=v,o/=v;const y=Math.floor(l*s)+1+e,b=Math.min(Math.floor((l+1)*s)+1,n)+e,{x:_,y:w}=t[g];for(d=f=-1,r=y;r<b;r++)f=.5*Math.abs((_-i)*(t[r].y-w)-(_-t[r].x)*(o-w)),f>d&&(d=f,h=t[r],p=r);a[u++]=h,g=p}return a[u++]=t[c],a}(u,l,h,r,n);break;case"min-max":d=function(t,e,n,r){let i,o,a,s,u,c,l,h,d,f,p=0,g=0;const m=[],v=e+n-1,y=t[e].x,b=t[v].x-y;for(i=e;i<e+n;++i){o=t[i],a=(o.x-y)/b*r,s=o.y;const e=0|a;if(e===u)s<d?(d=s,c=i):s>f&&(f=s,l=i),p=(g*p+o.x)/++g;else{const n=i-1;if(!Y(c)&&!Y(l)){const e=Math.min(c,l),r=Math.max(c,l);e!==h&&e!==n&&m.push({...t[e],x:p}),r!==h&&r!==n&&m.push({...t[r],x:p})}i>0&&n!==h&&m.push(t[n]),m.push(o),u=e,g=0,d=f=s,c=l=h=i}}return m}(u,l,h,r);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}e._decimated=d}))},destroy(t){yo(t)}};function _o(t,e,n,r){if(r)return;let i=e[t],o=n[t];return"angle"===t&&(i=Ft(i),o=Ft(o)),{property:t,start:i,end:o}}function wo(t,e,n){for(;e>t;e--){const t=n[e];if(!isNaN(t.x)&&!isNaN(t.y))break}return e}function So(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function To(t,e){let n=[],r=!1;return X(t)?(r=!0,n=t):n=function(t,e){const{x:n=null,y:r=null}=t||{},i=e.points,o=[];return e.segments.forEach((({start:t,end:e})=>{e=wo(t,e,i);const a=i[t],s=i[e];null!==r?(o.push({x:a.x,y:r}),o.push({x:s.x,y:r})):null!==n&&(o.push({x:n,y:a.y}),o.push({x:n,y:s.y}))})),o}(t,e),n.length?new to({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function xo(t){return t&&!1!==t.fill}function Io(t,e,n){let r=t[e].fill;const i=[e];let o;if(!n)return r;for(;!1!==r&&-1===i.indexOf(r);){if(!J(r))return r;if(o=t[r],!o)return!1;if(o.visible)return r;i.push(r),r=o.fill}return!1}function ko(t,e,n){const r=function(t){const e=t.options,n=e.fill;let r=tt(n&&n.target,n);void 0===r&&(r=!!e.backgroundColor);if(!1===r||null===r)return!1;if(!0===r)return"origin";return r}(t);if(Q(r))return!isNaN(r.value)&&r;let i=parseFloat(r);return J(i)&&Math.floor(i)===i?function(t,e,n,r){"-"!==t&&"+"!==t||(n=e+n);if(n===e||n<0||n>=r)return!1;return n}(r[0],e,i,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function Eo(t,e,n){const r=[];for(let i=0;i<n.length;i++){const o=n[i],{first:a,last:s,point:u}=Co(o,e,"x");if(!(!u||a&&s))if(a)r.unshift(u);else if(t.push(u),!s)break}t.push(...r)}function Co(t,e,n){const r=t.interpolate(e,n);if(!r)return{};const i=r[n],o=t.segments,a=t.points;let s=!1,u=!1;for(let t=0;t<o.length;t++){const e=o[t],r=a[e.start][n],c=a[e.end][n];if(Gt(i,r,c)){s=i===r,u=i===c;break}}return{first:s,last:u,point:r}}class No{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,n){const{x:r,y:i,radius:o}=this;return e=e||{start:0,end:yt},t.arc(r,i,o,e.end,e.start,!0),!n.bounds}interpolate(t){const{x:e,y:n,radius:r}=this,i=t.angle;return{x:e+Math.cos(i)*r,y:n+Math.sin(i)*r,angle:i}}}function Ao(t){const{chart:e,fill:n,line:r}=t;if(J(n))return function(t,e){const n=t.getDatasetMeta(e),r=n&&t.isDatasetVisible(e);return r?n.dataset:null}(e,n);if("stack"===n)return function(t){const{scale:e,index:n,line:r}=t,i=[],o=r.segments,a=r.points,s=function(t,e){const n=[],r=t.getMatchingVisibleMetas("line");for(let t=0;t<r.length;t++){const i=r[t];if(i.index===e)break;i.hidden||n.unshift(i.dataset)}return n}(e,n);s.push(To({x:null,y:e.bottom},r));for(let t=0;t<o.length;t++){const e=o[t];for(let t=e.start;t<=e.end;t++)Eo(i,a[t],s)}return new to({points:i,options:{}})}(t);if("shape"===n)return!0;const i=function(t){const e=t.scale||{};if(e.getPointPositionForValue)return function(t){const{scale:e,fill:n}=t,r=e.options,i=e.getLabels().length,o=r.reverse?e.max:e.min,a=function(t,e,n){let r;return r="start"===t?n:"end"===t?e.options.reverse?e.min:e.max:Q(t)?t.value:e.getBaseValue(),r}(n,e,o),s=[];if(r.grid.circular){const t=e.getPointPositionForValue(0,o);return new No({x:t.x,y:t.y,radius:e.getDistanceFromCenterForValue(a)})}for(let t=0;t<i;++t)s.push(e.getPointPositionForValue(t,a));return s}(t);return function(t){const{scale:e={},fill:n}=t,r=function(t,e){let n=null;return"start"===t?n=e.bottom:"end"===t?n=e.top:Q(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}(n,e);if(J(r)){const t=e.isHorizontal();return{x:t?r:null,y:t?null:r}}return null}(t)}(t);return i instanceof No?i:To(i,r)}function Po(t,e,n){const r=Ao(e),{line:i,scale:o,axis:a}=e,s=i.options,u=s.fill,c=s.backgroundColor,{above:l=c,below:h=c}=u||{};r&&i.points.length&&(Ie(t,n),function(t,e){const{line:n,target:r,above:i,below:o,area:a,scale:s}=e,u=n._loop?"angle":e.axis;t.save(),"x"===u&&o!==i&&(Ro(t,r,a.top),Do(t,{line:n,target:r,color:i,scale:s,property:u}),t.restore(),t.save(),Ro(t,r,a.bottom));Do(t,{line:n,target:r,color:o,scale:s,property:u}),t.restore()}(t,{line:i,target:r,above:l,below:h,area:n,scale:o,axis:a}),ke(t))}function Ro(t,e,n){const{segments:r,points:i}=e;let o=!0,a=!1;t.beginPath();for(const s of r){const{start:r,end:u}=s,c=i[r],l=i[wo(r,u,i)];o?(t.moveTo(c.x,c.y),o=!1):(t.lineTo(c.x,n),t.lineTo(c.x,c.y)),a=!!e.pathSegment(t,s,{move:a}),a?t.closePath():t.lineTo(l.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function Do(t,e){const{line:n,target:r,property:i,color:o,scale:a}=e,s=function(t,e,n){const r=t.segments,i=t.points,o=e.points,a=[];for(const t of r){let{start:r,end:s}=t;s=wo(r,s,i);const u=_o(n,i[r],i[s],t.loop);if(!e.segments){a.push({source:t,target:u,start:i[r],end:i[s]});continue}const c=Mn(e,u);for(const e of c){const r=_o(n,o[e.start],o[e.end],e.loop),s=Dn(t,i,r);for(const t of s)a.push({source:t,target:e,start:{[n]:So(u,r,"start",Math.max)},end:{[n]:So(u,r,"end",Math.min)}})}}return a}(n,r,i);for(const{source:e,target:u,start:c,end:l}of s){const{style:{backgroundColor:s=o}={}}=e,h=!0!==r;t.save(),t.fillStyle=s,Mo(t,a,h&&_o(i,c,l)),t.beginPath();const d=!!n.pathSegment(t,e);let f;if(h){d?t.closePath():Oo(t,r,l,i);const e=!!r.pathSegment(t,u,{move:d,reverse:!0});f=d&&e,f||Oo(t,r,c,i)}t.closePath(),t.fill(f?"evenodd":"nonzero"),t.restore()}}function Mo(t,e,n){const{top:r,bottom:i}=e.chart.chartArea,{property:o,start:a,end:s}=n||{};"x"===o&&(t.beginPath(),t.rect(a,r,s-a,i-r),t.clip())}function Oo(t,e,n,r){const i=e.interpolate(n,r);i&&t.lineTo(i.x,i.y)}var Lo={id:"filler",afterDatasetsUpdate(t,e,n){const r=(t.data.datasets||[]).length,i=[];let o,a,s,u;for(a=0;a<r;++a)o=t.getDatasetMeta(a),s=o.dataset,u=null,s&&s.options&&s instanceof to&&(u={visible:t.isDatasetVisible(a),index:a,fill:ko(s,a,r),chart:t,axis:o.controller.options.indexAxis,scale:o.vScale,line:s}),o.$filler=u,i.push(u);for(a=0;a<r;++a)u=i[a],u&&!1!==u.fill&&(u.fill=Io(i,a,n.propagate))},beforeDraw(t,e,n){const r="beforeDraw"===n.drawTime,i=t.getSortedVisibleDatasetMetas(),o=t.chartArea;for(let e=i.length-1;e>=0;--e){const n=i[e].$filler;n&&(n.line.updateControlPoints(o,n.axis),r&&n.fill&&Po(t.ctx,n,o))}},beforeDatasetsDraw(t,e,n){if("beforeDatasetsDraw"!==n.drawTime)return;const r=t.getSortedVisibleDatasetMetas();for(let e=r.length-1;e>=0;--e){const n=r[e].$filler;xo(n)&&Po(t.ctx,n,t.chartArea)}},beforeDatasetDraw(t,e,n){const r=e.meta.$filler;xo(r)&&"beforeDatasetDraw"===n.drawTime&&Po(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Fo=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}};class jo extends Zr{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,n){this.maxWidth=t,this.maxHeight=e,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=nt(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter((e=>t.filter(e,this.chart.data)))),t.sort&&(e=e.sort(((e,n)=>t.sort(e,n,this.chart.data)))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display)return void(this.width=this.height=0);const n=t.labels,r=Ue(n.font),i=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:s}=Fo(n,i);let u,c;e.font=r.string,this.isHorizontal()?(u=this.maxWidth,c=this._fitRows(o,i,a,s)+10):(c=this.maxHeight,u=this._fitCols(o,r,a,s)+10),this.width=Math.min(u,t.maxWidth||this.maxWidth),this.height=Math.min(c,t.maxHeight||this.maxHeight)}_fitRows(t,e,n,r){const{ctx:i,maxWidth:o,options:{labels:{padding:a}}}=this,s=this.legendHitBoxes=[],u=this.lineWidths=[0],c=r+a;let l=t;i.textAlign="left",i.textBaseline="middle";let h=-1,d=-c;return this.legendItems.forEach(((t,f)=>{const p=n+e/2+i.measureText(t.text).width;(0===f||u[u.length-1]+p+2*a>o)&&(l+=c,u[u.length-(f>0?0:1)]=0,d+=c,h++),s[f]={left:0,top:d,row:h,width:p,height:r},u[u.length-1]+=p+a})),l}_fitCols(t,e,n,r){const{ctx:i,maxHeight:o,options:{labels:{padding:a}}}=this,s=this.legendHitBoxes=[],u=this.columnSizes=[],c=o-t;let l=a,h=0,d=0,f=0,p=0;return this.legendItems.forEach(((t,o)=>{const{itemWidth:g,itemHeight:m}=function(t,e,n,r,i){const o=function(t,e,n,r){let i=t.text;i&&"string"!=typeof i&&(i=i.reduce(((t,e)=>t.length>e.length?t:e)));return e+n.size/2+r.measureText(i).width}(r,t,e,n),a=function(t,e,n){let r=t;"string"!=typeof e.text&&(r=Bo(e,n));return r}(i,r,e.lineHeight);return{itemWidth:o,itemHeight:a}}(n,e,i,t,r);o>0&&d+m+2*a>c&&(l+=h+a,u.push({width:h,height:d}),f+=h+a,p++,h=d=0),s[o]={left:f,top:d,col:p,width:g,height:m},h=Math.max(h,g),d+=m+a})),l+=h,u.push({width:h,height:d}),l}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:n,labels:{padding:r},rtl:i}}=this,o=Cn(i,this.left,this.width);if(this.isHorizontal()){let i=0,a=Xt(n,this.left+r,this.right-this.lineWidths[i]);for(const s of e)i!==s.row&&(i=s.row,a=Xt(n,this.left+r,this.right-this.lineWidths[i])),s.top+=this.top+t+r,s.left=o.leftForLtr(o.x(a),s.width),a+=s.width+r}else{let i=0,a=Xt(n,this.top+t+r,this.bottom-this.columnSizes[i].height);for(const s of e)s.col!==i&&(i=s.col,a=Xt(n,this.top+t+r,this.bottom-this.columnSizes[i].height)),s.top=a,s.left+=this.left+r,s.left=o.leftForLtr(o.x(s.left),s.width),a+=s.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const t=this.ctx;Ie(t,this),this._draw(),ke(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:n,ctx:r}=this,{align:i,labels:o}=t,a=ve.color,s=Cn(t.rtl,this.left,this.width),u=Ue(o.font),{padding:c}=o,l=u.size,h=l/2;let d;this.drawTitle(),r.textAlign=s.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=u.string;const{boxWidth:f,boxHeight:p,itemHeight:g}=Fo(o,l),m=this.isHorizontal(),v=this._computeTitleHeight();d=m?{x:Xt(i,this.left+c,this.right-n[0]),y:this.top+c+v,line:0}:{x:this.left+c,y:Xt(i,this.top+v+c,this.bottom-e[0].height),line:0},Nn(this.ctx,t.textDirection);const y=g+c;this.legendItems.forEach(((b,_)=>{r.strokeStyle=b.fontColor,r.fillStyle=b.fontColor;const w=r.measureText(b.text).width,S=s.textAlign(b.textAlign||(b.textAlign=o.textAlign)),T=f+h+w;let x=d.x,I=d.y;s.setWidth(this.width),m?_>0&&x+T+c>this.right&&(I=d.y+=y,d.line++,x=d.x=Xt(i,this.left+c,this.right-n[d.line])):_>0&&I+y>this.bottom&&(x=d.x=x+e[d.line].width+c,d.line++,I=d.y=Xt(i,this.top+v+c,this.bottom-e[d.line].height));if(function(t,e,n){if(isNaN(f)||f<=0||isNaN(p)||p<0)return;r.save();const i=tt(n.lineWidth,1);if(r.fillStyle=tt(n.fillStyle,a),r.lineCap=tt(n.lineCap,"butt"),r.lineDashOffset=tt(n.lineDashOffset,0),r.lineJoin=tt(n.lineJoin,"miter"),r.lineWidth=i,r.strokeStyle=tt(n.strokeStyle,a),r.setLineDash(tt(n.lineDash,[])),o.usePointStyle){const a={radius:p*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:i},u=s.xPlus(t,f/2);Te(r,a,u,e+h,o.pointStyleWidth&&f)}else{const o=e+Math.max((l-p)/2,0),a=s.leftForLtr(t,f),u=Be(n.borderRadius);r.beginPath(),Object.values(u).some((t=>0!==t))?Re(r,{x:a,y:o,w:f,h:p,radius:u}):r.rect(a,o,f,p),r.fill(),0!==i&&r.stroke()}r.restore()}(s.x(x),I,b),x=((t,e,n,r)=>t===(r?"left":"right")?n:"center"===t?(e+n)/2:e)(S,x+f+h,m?x+T:this.right,t.rtl),function(t,e,n){Pe(r,n.text,t,e+g/2,u,{strikethrough:n.hidden,textAlign:s.textAlign(n.textAlign)})}(s.x(x),I,b),m)d.x+=T+c;else if("string"!=typeof b.text){const t=u.lineHeight;d.y+=Bo(b,t)+c}else d.y+=y})),An(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,n=Ue(e.font),r=Ge(e.padding);if(!e.display)return;const i=Cn(t.rtl,this.left,this.width),o=this.ctx,a=e.position,s=n.size/2,u=r.top+s;let c,l=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),c=this.top+u,l=Xt(t.align,l,this.right-h);else{const e=this.columnSizes.reduce(((t,e)=>Math.max(t,e.height)),0);c=u+Xt(t.align,this.top,this.bottom-e-t.labels.padding-this._computeTitleHeight())}const d=Xt(a,l,l+h);o.textAlign=i.textAlign(Yt(a)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=n.string,Pe(o,e.text,d,c,n)}_computeTitleHeight(){const t=this.options.title,e=Ue(t.font),n=Ge(t.padding);return t.display?e.lineHeight+n.height:0}_getLegendItemAt(t,e){let n,r,i;if(Gt(t,this.left,this.right)&&Gt(e,this.top,this.bottom))for(i=this.legendHitBoxes,n=0;n<i.length;++n)if(r=i[n],Gt(t,r.left,r.left+r.width)&&Gt(e,r.top,r.top+r.height))return this.legendItems[n];return null}handleEvent(t){const e=this.options;if(!function(t,e){if(("mousemove"===t||"mouseout"===t)&&(e.onHover||e.onLeave))return!0;if(e.onClick&&("click"===t||"mouseup"===t))return!0;return!1}(t.type,e))return;const n=this._getLegendItemAt(t.x,t.y);if("mousemove"===t.type||"mouseout"===t.type){const o=this._hoveredItem,a=(i=n,null!==(r=o)&&null!==i&&r.datasetIndex===i.datasetIndex&&r.index===i.index);o&&!a&&nt(e.onLeave,[t,o,this],this),this._hoveredItem=n,n&&!a&&nt(e.onHover,[t,n,this],this)}else n&&nt(e.onClick,[t,n,this],this);var r,i}}function Bo(t,e){return e*(t.text?t.text.length:0)}var Go={id:"legend",_element:jo,start(t,e,n){const r=t.legend=new jo({ctx:t.ctx,options:n,chart:t});Or.configure(t,r,n),Or.addBox(t,r)},stop(t){Or.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;Or.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:o,useBorderRadius:a,borderRadius:s}}=t.legend.options;return t._getSortedDatasetMetas().map((t=>{const u=t.controller.getStyle(n?0:void 0),c=Ge(u.borderWidth);return{text:e[t.index].label,fillStyle:u.backgroundColor,fontColor:o,hidden:!t.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:u.borderColor,pointStyle:r||u.pointStyle,rotation:u.rotation,textAlign:i||u.textAlign,borderRadius:a&&(s||u.borderRadius),datasetIndex:t.index}}),this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class Uo extends Zr{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=t,this.height=this.bottom=e;const r=X(n.text)?n.text.length:1;this._padding=Ge(n.padding);const i=r*Ue(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const t=this.options.position;return"top"===t||"bottom"===t}_drawArgs(t){const{top:e,left:n,bottom:r,right:i,options:o}=this,a=o.align;let s,u,c,l=0;return this.isHorizontal()?(u=Xt(a,n,i),c=e+t,s=i-n):("left"===o.position?(u=n+t,c=Xt(a,r,e),l=-.5*vt):(u=i-t,c=Xt(a,e,r),l=.5*vt),s=r-e),{titleX:u,titleY:c,maxWidth:s,rotation:l}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const n=Ue(e.font),r=n.lineHeight/2+this._padding.top,{titleX:i,titleY:o,maxWidth:a,rotation:s}=this._drawArgs(r);Pe(t,e.text,0,0,n,{color:e.color,maxWidth:a,rotation:s,textAlign:Yt(e.align),textBaseline:"middle",translation:[i,o]})}}var Vo={id:"title",_element:Uo,start(t,e,n){!function(t,e){const n=new Uo({ctx:t.ctx,options:e,chart:t});Or.configure(t,n,e),Or.addBox(t,n),t.titleBlock=n}(t,n)},stop(t){const e=t.titleBlock;Or.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;Or.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const qo=new WeakMap;var zo={id:"subtitle",start(t,e,n){const r=new Uo({ctx:t.ctx,options:n,chart:t});Or.configure(t,r,n),Or.addBox(t,r),qo.set(t,r)},stop(t){Or.removeBox(t,qo.get(t)),qo.delete(t)},beforeUpdate(t,e,n){const r=qo.get(t);Or.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ho={average(t){if(!t.length)return!1;let e,n,r=new Set,i=0,o=0;for(e=0,n=t.length;e<n;++e){const n=t[e].element;if(n&&n.hasValue()){const t=n.tooltipPosition();r.add(t.x),i+=t.y,++o}}return{x:[...r].reduce(((t,e)=>t+e))/r.size,y:i/o}},nearest(t,e){if(!t.length)return!1;let n,r,i,o=e.x,a=e.y,s=Number.POSITIVE_INFINITY;for(n=0,r=t.length;n<r;++n){const r=t[n].element;if(r&&r.hasValue()){const t=Ot(e,r.getCenterPoint());t<s&&(s=t,i=r)}}if(i){const t=i.tooltipPosition();o=t.x,a=t.y}return{x:o,y:a}}};function $o(t,e){return e&&(X(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Wo(t){return("string"==typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function Ko(t,e){const{element:n,datasetIndex:r,index:i}=e,o=t.getDatasetMeta(r).controller,{label:a,value:s}=o.getLabelAndValue(i);return{chart:t,label:a,parsed:o.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:s,dataset:o.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function Yo(t,e){const n=t.chart.ctx,{body:r,footer:i,title:o}=t,{boxWidth:a,boxHeight:s}=e,u=Ue(e.bodyFont),c=Ue(e.titleFont),l=Ue(e.footerFont),h=o.length,d=i.length,f=r.length,p=Ge(e.padding);let g=p.height,m=0,v=r.reduce(((t,e)=>t+e.before.length+e.lines.length+e.after.length),0);if(v+=t.beforeBody.length+t.afterBody.length,h&&(g+=h*c.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),v){g+=f*(e.displayColors?Math.max(s,u.lineHeight):u.lineHeight)+(v-f)*u.lineHeight+(v-1)*e.bodySpacing}d&&(g+=e.footerMarginTop+d*l.lineHeight+(d-1)*e.footerSpacing);let y=0;const b=function(t){m=Math.max(m,n.measureText(t).width+y)};return n.save(),n.font=c.string,rt(t.title,b),n.font=u.string,rt(t.beforeBody.concat(t.afterBody),b),y=e.displayColors?a+2+e.boxPadding:0,rt(r,(t=>{rt(t.before,b),rt(t.lines,b),rt(t.after,b)})),y=0,n.font=l.string,rt(t.footer,b),n.restore(),m+=p.width,{width:m,height:g}}function Xo(t,e,n,r){const{x:i,width:o}=n,{width:a,chartArea:{left:s,right:u}}=t;let c="center";return"center"===r?c=i<=(s+u)/2?"left":"right":i<=o/2?c="left":i>=a-o/2&&(c="right"),function(t,e,n,r){const{x:i,width:o}=r,a=n.caretSize+n.caretPadding;return"left"===t&&i+o+a>e.width||"right"===t&&i-o-a<0||void 0}(c,t,e,n)&&(c="center"),c}function Qo(t,e,n){const r=n.yAlign||e.yAlign||function(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}(t,n);return{xAlign:n.xAlign||e.xAlign||Xo(t,e,n,r),yAlign:r}}function Jo(t,e,n,r){const{caretSize:i,caretPadding:o,cornerRadius:a}=t,{xAlign:s,yAlign:u}=n,c=i+o,{topLeft:l,topRight:h,bottomLeft:d,bottomRight:f}=Be(a);let p=function(t,e){let{x:n,width:r}=t;return"right"===e?n-=r:"center"===e&&(n-=r/2),n}(e,s);const g=function(t,e,n){let{y:r,height:i}=t;return"top"===e?r+=n:r-="bottom"===e?i+n:i/2,r}(e,u,c);return"center"===u?"left"===s?p+=c:"right"===s&&(p-=c):"left"===s?p-=Math.max(l,d)+i:"right"===s&&(p+=Math.max(h,f)+i),{x:Bt(p,0,r.width-e.width),y:Bt(g,0,r.height-e.height)}}function Zo(t,e,n){const r=Ge(n.padding);return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-r.right:t.x+r.left}function ta(t){return $o([],Wo(t))}function ea(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const na={beforeTitle:W,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:W,beforeBody:W,beforeLabel:W,label(t){if(this&&this.options&&"dataset"===this.options.mode)return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Y(n)||(e+=n),e},labelColor(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:W,afterBody:W,beforeFooter:W,footer:W,afterFooter:W};function ra(t,e,n,r){const i=t[e].call(n,r);return void 0===i?na[e].call(n,r):i}class ia extends Zr{static positioners=Ho;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&e.options.animation&&n.animations,i=new qn(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=(t=this.chart.getContext(),e=this,n=this._tooltipItems,qe(t,{tooltip:e,tooltipItems:n,type:"tooltip"})));var t,e,n}getTitle(t,e){const{callbacks:n}=e,r=ra(n,"beforeTitle",this,t),i=ra(n,"title",this,t),o=ra(n,"afterTitle",this,t);let a=[];return a=$o(a,Wo(r)),a=$o(a,Wo(i)),a=$o(a,Wo(o)),a}getBeforeBody(t,e){return ta(ra(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:n}=e,r=[];return rt(t,(t=>{const e={before:[],lines:[],after:[]},i=ea(n,t);$o(e.before,Wo(ra(i,"beforeLabel",this,t))),$o(e.lines,ra(i,"label",this,t)),$o(e.after,Wo(ra(i,"afterLabel",this,t))),r.push(e)})),r}getAfterBody(t,e){return ta(ra(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:n}=e,r=ra(n,"beforeFooter",this,t),i=ra(n,"footer",this,t),o=ra(n,"afterFooter",this,t);let a=[];return a=$o(a,Wo(r)),a=$o(a,Wo(i)),a=$o(a,Wo(o)),a}_createItems(t){const e=this._active,n=this.chart.data,r=[],i=[],o=[];let a,s,u=[];for(a=0,s=e.length;a<s;++a)u.push(Ko(this.chart,e[a]));return t.filter&&(u=u.filter(((e,r,i)=>t.filter(e,r,i,n)))),t.itemSort&&(u=u.sort(((e,r)=>t.itemSort(e,r,n)))),rt(u,(e=>{const n=ea(t.callbacks,e);r.push(ra(n,"labelColor",this,e)),i.push(ra(n,"labelPointStyle",this,e)),o.push(ra(n,"labelTextColor",this,e))})),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=u,u}update(t,e){const n=this.options.setContext(this.getContext()),r=this._active;let i,o=[];if(r.length){const t=Ho[n.position].call(this,r,this._eventPosition);o=this._createItems(n),this.title=this.getTitle(o,n),this.beforeBody=this.getBeforeBody(o,n),this.body=this.getBody(o,n),this.afterBody=this.getAfterBody(o,n),this.footer=this.getFooter(o,n);const e=this._size=Yo(this,n),a=Object.assign({},t,e),s=Qo(this.chart,n,a),u=Jo(n,a,s,this.chart);this.xAlign=s.xAlign,this.yAlign=s.yAlign,i={opacity:1,x:u.x,y:u.y,width:e.width,height:e.height,caretX:t.x,caretY:t.y}}else 0!==this.opacity&&(i={opacity:0});this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,n,r){const i=this.getCaretPosition(t,n,r);e.lineTo(i.x1,i.y1),e.lineTo(i.x2,i.y2),e.lineTo(i.x3,i.y3)}getCaretPosition(t,e,n){const{xAlign:r,yAlign:i}=this,{caretSize:o,cornerRadius:a}=n,{topLeft:s,topRight:u,bottomLeft:c,bottomRight:l}=Be(a),{x:h,y:d}=t,{width:f,height:p}=e;let g,m,v,y,b,_;return"center"===i?(b=d+p/2,"left"===r?(g=h,m=g-o,y=b+o,_=b-o):(g=h+f,m=g+o,y=b-o,_=b+o),v=g):(m="left"===r?h+Math.max(s,c)+o:"right"===r?h+f-Math.max(u,l)-o:this.caretX,"top"===i?(y=d,b=y-o,g=m-o,v=m+o):(y=d+p,b=y+o,g=m+o,v=m-o),_=y),{x1:g,x2:m,x3:v,y1:y,y2:b,y3:_}}drawTitle(t,e,n){const r=this.title,i=r.length;let o,a,s;if(i){const u=Cn(n.rtl,this.x,this.width);for(t.x=Zo(this,n.titleAlign,n),e.textAlign=u.textAlign(n.titleAlign),e.textBaseline="middle",o=Ue(n.titleFont),a=n.titleSpacing,e.fillStyle=n.titleColor,e.font=o.string,s=0;s<i;++s)e.fillText(r[s],u.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,s+1===i&&(t.y+=n.titleMarginBottom-a)}}_drawColorBox(t,e,n,r,i){const o=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:s,boxWidth:u}=i,c=Ue(i.bodyFont),l=Zo(this,"left",i),h=r.x(l),d=s<c.lineHeight?(c.lineHeight-s)/2:0,f=e.y+d;if(i.usePointStyle){const e={radius:Math.min(u,s)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},n=r.leftForLtr(h,u)+u/2,c=f+s/2;t.strokeStyle=i.multiKeyBackground,t.fillStyle=i.multiKeyBackground,Se(t,e,n,c),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,Se(t,e,n,c)}else{t.lineWidth=Q(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const e=r.leftForLtr(h,u),n=r.leftForLtr(r.xPlus(h,1),u-2),a=Be(o.borderRadius);Object.values(a).some((t=>0!==t))?(t.beginPath(),t.fillStyle=i.multiKeyBackground,Re(t,{x:e,y:f,w:u,h:s,radius:a}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),Re(t,{x:n,y:f+1,w:u-2,h:s-2,radius:a}),t.fill()):(t.fillStyle=i.multiKeyBackground,t.fillRect(e,f,u,s),t.strokeRect(e,f,u,s),t.fillStyle=o.backgroundColor,t.fillRect(n,f+1,u-2,s-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,e,n){const{body:r}=this,{bodySpacing:i,bodyAlign:o,displayColors:a,boxHeight:s,boxWidth:u,boxPadding:c}=n,l=Ue(n.bodyFont);let h=l.lineHeight,d=0;const f=Cn(n.rtl,this.x,this.width),p=function(n){e.fillText(n,f.x(t.x+d),t.y+h/2),t.y+=h+i},g=f.textAlign(o);let m,v,y,b,_,w,S;for(e.textAlign=o,e.textBaseline="middle",e.font=l.string,t.x=Zo(this,g,n),e.fillStyle=n.bodyColor,rt(this.beforeBody,p),d=a&&"right"!==g?"center"===o?u/2+c:u+2+c:0,b=0,w=r.length;b<w;++b){for(m=r[b],v=this.labelTextColors[b],e.fillStyle=v,rt(m.before,p),y=m.lines,a&&y.length&&(this._drawColorBox(e,t,b,f,n),h=Math.max(l.lineHeight,s)),_=0,S=y.length;_<S;++_)p(y[_]),h=l.lineHeight;rt(m.after,p)}d=0,h=l.lineHeight,rt(this.afterBody,p),t.y-=i}drawFooter(t,e,n){const r=this.footer,i=r.length;let o,a;if(i){const s=Cn(n.rtl,this.x,this.width);for(t.x=Zo(this,n.footerAlign,n),t.y+=n.footerMarginTop,e.textAlign=s.textAlign(n.footerAlign),e.textBaseline="middle",o=Ue(n.footerFont),e.fillStyle=n.footerColor,e.font=o.string,a=0;a<i;++a)e.fillText(r[a],s.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+n.footerSpacing}}drawBackground(t,e,n,r){const{xAlign:i,yAlign:o}=this,{x:a,y:s}=t,{width:u,height:c}=n,{topLeft:l,topRight:h,bottomLeft:d,bottomRight:f}=Be(r.cornerRadius);e.fillStyle=r.backgroundColor,e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.beginPath(),e.moveTo(a+l,s),"top"===o&&this.drawCaret(t,e,n,r),e.lineTo(a+u-h,s),e.quadraticCurveTo(a+u,s,a+u,s+h),"center"===o&&"right"===i&&this.drawCaret(t,e,n,r),e.lineTo(a+u,s+c-f),e.quadraticCurveTo(a+u,s+c,a+u-f,s+c),"bottom"===o&&this.drawCaret(t,e,n,r),e.lineTo(a+d,s+c),e.quadraticCurveTo(a,s+c,a,s+c-d),"center"===o&&"left"===i&&this.drawCaret(t,e,n,r),e.lineTo(a,s+l),e.quadraticCurveTo(a,s,a+l,s),e.closePath(),e.fill(),r.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,n=this.$animations,r=n&&n.x,i=n&&n.y;if(r||i){const n=Ho[t.position].call(this,this._active,this._eventPosition);if(!n)return;const o=this._size=Yo(this,t),a=Object.assign({},n,this._size),s=Qo(e,t,a),u=Jo(t,a,s,e);r._to===u.x&&i._to===u.y||(this.xAlign=s.xAlign,this.yAlign=s.yAlign,this.width=o.width,this.height=o.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(e);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const o=Ge(e.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&a&&(t.save(),t.globalAlpha=n,this.drawBackground(i,t,r,e),Nn(t,e.textDirection),i.y+=o.top,this.drawTitle(i,t,e),this.drawBody(i,t,e),this.drawFooter(i,t,e),An(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const n=this._active,r=t.map((({datasetIndex:t,index:e})=>{const n=this.chart.getDatasetMeta(t);if(!n)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:n.data[e],index:e}})),i=!it(n,r),o=this._positionChanged(r,e);(i||o)&&(this._active=r,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,n=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],o=this._getActiveElements(t,i,e,n),a=this._positionChanged(o,t),s=e||!it(o,i)||a;return s&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),s}_getActiveElements(t,e,n,r){const i=this.options;if("mouseout"===t.type)return[];if(!r)return e.filter((t=>this.chart.data.datasets[t.datasetIndex]&&void 0!==this.chart.getDatasetMeta(t.datasetIndex).controller.getParsed(t.index)));const o=this.chart.getElementsAtEventForMode(t,i.mode,i,n);return i.reverse&&o.reverse(),o}_positionChanged(t,e){const{caretX:n,caretY:r,options:i}=this,o=Ho[i.position].call(this,t,e);return!1!==o&&(n!==o.x||r!==o.y)}}var oa={id:"tooltip",_element:ia,positioners:Ho,afterInit(t,e,n){n&&(t.tooltip=new ia({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(!1===t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0}))return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:na},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>"filter"!==t&&"itemSort"!==t&&"external"!==t,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},aa=Object.freeze({__proto__:null,Colors:mo,Decimation:bo,Filler:Lo,Legend:Go,SubTitle:zo,Title:Vo,Tooltip:oa});function sa(t,e,n,r){const i=t.indexOf(e);if(-1===i)return((t,e,n,r)=>("string"==typeof e?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n))(t,e,n,r);return i!==t.lastIndexOf(e)?n:i}function ua(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}function ca(t,e){const n=[],{bounds:r,step:i,min:o,max:a,precision:s,count:u,maxTicks:c,maxDigits:l,includeBounds:h}=t,d=i||1,f=c-1,{min:p,max:g}=e,m=!Y(o),v=!Y(a),y=!Y(u),b=(g-p)/(l+1);let _,w,S,T,x=Ct((g-p)/f/d)*d;if(x<1e-14&&!m&&!v)return[{value:p},{value:g}];T=Math.ceil(g/x)-Math.floor(p/x),T>f&&(x=Ct(T*x/f/d)*d),Y(s)||(_=Math.pow(10,s),x=Math.ceil(x*_)/_),"ticks"===r?(w=Math.floor(p/x)*x,S=Math.ceil(g/x)*x):(w=p,S=g),m&&v&&i&&function(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}((a-o)/i,x/1e3)?(T=Math.round(Math.min((a-o)/x,c)),x=(a-o)/T,w=o,S=a):y?(w=m?o:w,S=v?a:S,T=u-1,x=(S-w)/T):(T=(S-w)/x,T=Et(T,Math.round(T),x/1e3)?Math.round(T):Math.ceil(T));const I=Math.max(Dt(x),Dt(w));_=Math.pow(10,Y(s)?I:s),w=Math.round(w*_)/_,S=Math.round(S*_)/_;let k=0;for(m&&(h&&w!==o?(n.push({value:o}),w<o&&k++,Et(Math.round((w+k*x)*_)/_,o,la(o,b,t))&&k++):w<o&&k++);k<T;++k){const t=Math.round((w+k*x)*_)/_;if(v&&t>a)break;n.push({value:t})}return v&&h&&S!==a?n.length&&Et(n[n.length-1].value,a,la(a,b,t))?n[n.length-1].value=a:n.push({value:a}):v&&S!==a||n.push({value:S}),n}function la(t,e,{horizontal:n,minRotation:r}){const i=Pt(r),o=(n?Math.sin(i):Math.cos(i))||.001,a=.75*e*(""+t).length;return Math.min(e/o,a)}class ha extends ci{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return Y(t)||("number"==typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this;const o=t=>r=e?r:t,a=t=>i=n?i:t;if(t){const t=kt(r),e=kt(i);t<0&&e<0?a(0):t>0&&e>0&&o(0)}if(r===i){let e=0===i?1:Math.abs(.05*i);a(i+e),t||o(r-e)}this.min=r,this.max=i}getTickLimit(){const t=this.options.ticks;let e,{maxTicksLimit:n,stepSize:r}=t;return r?(e=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,e>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${e} ticks. Limiting to 1000.`),e=1e3)):(e=this.computeTickLimit(),n=n||11),n&&(e=Math.min(n,e)),e}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r=ca({maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this);return"ticks"===t.bounds&&At(r,this,"value"),t.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const t=this.ticks;let e=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const r=(n-e)/Math.max(t.length-1,1)/2;e-=r,n+=r}this._startValue=e,this._endValue=n,this._valueRange=n-e}getLabelForValue(t){return ce(t,this.chart.options.locale,this.options.ticks.format)}}class da extends ha{static id="linear";static defaults={ticks:{callback:he.formatters.numeric}};determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=J(t)?t:0,this.max=J(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,n=Pt(this.options.ticks.minRotation),r=(t?Math.sin(n):Math.cos(n))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,i.lineHeight/r))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const fa=t=>Math.floor(It(t)),pa=(t,e)=>Math.pow(10,fa(t)+e);function ga(t){return 1===t/Math.pow(10,fa(t))}function ma(t,e,n){const r=Math.pow(10,n),i=Math.floor(t/r);return Math.ceil(e/r)-i}function va(t,{min:e,max:n}){e=Z(t.min,e);const r=[],i=fa(e);let o=function(t,e){let n=fa(e-t);for(;ma(t,e,n)>10;)n++;for(;ma(t,e,n)<10;)n--;return Math.min(n,fa(t))}(e,n),a=o<0?Math.pow(10,Math.abs(o)):1;const s=Math.pow(10,o),u=i>o?Math.pow(10,i):0,c=Math.round((e-u)*a)/a,l=Math.floor((e-u)/s/10)*s*10;let h=Math.floor((c-l)/Math.pow(10,o)),d=Z(t.min,Math.round((u+l+h*Math.pow(10,o))*a)/a);for(;d<n;)r.push({value:d,major:ga(d),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(o++,h=2,a=o>=0?1:a),d=Math.round((u+l+h*Math.pow(10,o))*a)/a;const f=Z(t.max,d);return r.push({value:f,major:ga(f),significand:h}),r}class ya extends ci{static id="logarithmic";static defaults={ticks:{callback:he.formatters.logarithmic,major:{enabled:!0}}};constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const n=ha.prototype.parse.apply(this,[t,e]);if(0!==n)return J(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=J(t)?Math.max(0,t):null,this.max=J(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!J(this._userMin)&&(this.min=t===pa(this.min,0)?pa(this.min,-1):pa(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let n=this.min,r=this.max;const i=e=>n=t?n:e,o=t=>r=e?r:t;n===r&&(n<=0?(i(1),o(10)):(i(pa(n,-1)),o(pa(r,1)))),n<=0&&i(pa(r,-1)),r<=0&&o(pa(n,1)),this.min=n,this.max=r}buildTicks(){const t=this.options,e=va({min:this._userMin,max:this._userMax},this);return"ticks"===t.bounds&&At(e,this,"value"),t.reverse?(e.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),e}getLabelForValue(t){return void 0===t?"0":ce(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=It(t),this._valueRange=It(this.max)-It(t)}getPixelForValue(t){return void 0!==t&&0!==t||(t=this.min),null===t||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(It(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function ba(t){const e=t.ticks;if(e.display&&t.display){const t=Ge(e.backdropPadding);return tt(e.font&&e.font.size,ve.font.size)+t.height}return 0}function _a(t,e,n,r,i){return t===r||t===i?{start:e-n/2,end:e+n/2}:t<r||t>i?{start:e-n,end:e}:{start:e,end:e+n}}function wa(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),r=[],i=[],o=t._pointLabels.length,a=t.options.pointLabels,s=a.centerPointLabels?vt/o:0;for(let h=0;h<o;h++){const o=a.setContext(t.getPointLabelContext(h));i[h]=o.padding;const d=t.getPointPosition(h,t.drawingArea+i[h],s),f=Ue(o.font),p=(u=t.ctx,c=f,l=X(l=t._pointLabels[h])?l:[l],{w:be(u,c.string,l),h:l.length*c.lineHeight});r[h]=p;const g=Ft(t.getIndexAngle(h)+s),m=Math.round(Rt(g));Sa(n,e,g,_a(m,d.x,p.w,0,180),_a(m,d.y,p.h,90,270))}var u,c,l;t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=function(t,e,n){const r=[],i=t._pointLabels.length,o=t.options,{centerPointLabels:a,display:s}=o.pointLabels,u={extra:ba(o)/2,additionalAngle:a?vt/i:0};let c;for(let o=0;o<i;o++){u.padding=n[o],u.size=e[o];const i=Ta(t,o,u);r.push(i),"auto"===s&&(i.visible=xa(i,c),i.visible&&(c=i))}return r}(t,r,i)}function Sa(t,e,n,r,i){const o=Math.abs(Math.sin(n)),a=Math.abs(Math.cos(n));let s=0,u=0;r.start<e.l?(s=(e.l-r.start)/o,t.l=Math.min(t.l,e.l-s)):r.end>e.r&&(s=(r.end-e.r)/o,t.r=Math.max(t.r,e.r+s)),i.start<e.t?(u=(e.t-i.start)/a,t.t=Math.min(t.t,e.t-u)):i.end>e.b&&(u=(i.end-e.b)/a,t.b=Math.max(t.b,e.b+u))}function Ta(t,e,n){const r=t.drawingArea,{extra:i,additionalAngle:o,padding:a,size:s}=n,u=t.getPointPosition(e,r+i+a,o),c=Math.round(Rt(Ft(u.angle+St))),l=function(t,e,n){90===n||270===n?t-=e/2:(n>270||n<90)&&(t-=e);return t}(u.y,s.h,c),h=function(t){if(0===t||180===t)return"center";if(t<180)return"left";return"right"}(c),d=function(t,e,n){"right"===n?t-=e:"center"===n&&(t-=e/2);return t}(u.x,s.w,h);return{visible:!0,x:u.x,y:l,textAlign:h,left:d,top:l,right:d+s.w,bottom:l+s.h}}function xa(t,e){if(!e)return!0;const{left:n,top:r,right:i,bottom:o}=t;return!(xe({x:n,y:r},e)||xe({x:n,y:o},e)||xe({x:i,y:r},e)||xe({x:i,y:o},e))}function Ia(t,e,n){const{left:r,top:i,right:o,bottom:a}=n,{backdropColor:s}=e;if(!Y(s)){const n=Be(e.borderRadius),u=Ge(e.backdropPadding);t.fillStyle=s;const c=r-u.left,l=i-u.top,h=o-r+u.width,d=a-i+u.height;Object.values(n).some((t=>0!==t))?(t.beginPath(),Re(t,{x:c,y:l,w:h,h:d,radius:n}),t.fill()):t.fillRect(c,l,h,d)}}function ka(t,e,n,r){const{ctx:i}=t;if(n)i.arc(t.xCenter,t.yCenter,e,0,yt);else{let n=t.getPointPosition(0,e);i.moveTo(n.x,n.y);for(let o=1;o<r;o++)n=t.getPointPosition(o,e),i.lineTo(n.x,n.y)}}class Ea extends ha{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:he.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:t=>t,padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=Ge(ba(this.options)/2),e=this.width=this.maxWidth-t.width,n=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+n/2+t.top),this.drawingArea=Math.floor(Math.min(e,n)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=J(t)&&!isNaN(t)?t:0,this.max=J(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/ba(this.options))}generateTickLabels(t){ha.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map(((t,e)=>{const n=nt(this.options.pointLabels.callback,[t,e],this);return n||0===n?n:""})).filter(((t,e)=>this.chart.getDataVisibility(e)))}fit(){const t=this.options;t.display&&t.pointLabels.display?wa(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,n,r){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,n,r))}getIndexAngle(t){return Ft(t*(yt/(this._pointLabels.length||1))+Pt(this.options.startAngle||0))}getDistanceFromCenterForValue(t){if(Y(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(Y(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const n=e[t];return function(t,e,n){return qe(t,{label:n,index:e,type:"pointLabel"})}(this.getContext(),t,n)}}getPointPosition(t,e,n=0){const r=this.getIndexAngle(t)-St+n;return{x:Math.cos(r)*e+this.xCenter,y:Math.sin(r)*e+this.yCenter,angle:r}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:n,right:r,bottom:i}=this._pointLabelItems[t];return{left:e,top:n,right:r,bottom:i}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const n=this.ctx;n.save(),n.beginPath(),ka(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),n.closePath(),n.fillStyle=t,n.fill(),n.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:n,grid:r,border:i}=e,o=this._pointLabels.length;let a,s,u;if(e.pointLabels.display&&function(t,e){const{ctx:n,options:{pointLabels:r}}=t;for(let i=e-1;i>=0;i--){const e=t._pointLabelItems[i];if(!e.visible)continue;const o=r.setContext(t.getPointLabelContext(i));Ia(n,o,e);const a=Ue(o.font),{x:s,y:u,textAlign:c}=e;Pe(n,t._pointLabels[i],s,u+a.lineHeight/2,a,{color:o.color,textAlign:c,textBaseline:"middle"})}}(this,o),r.display&&this.ticks.forEach(((t,e)=>{if(0!==e||0===e&&this.min<0){s=this.getDistanceFromCenterForValue(t.value);const n=this.getContext(e),a=r.setContext(n),u=i.setContext(n);!function(t,e,n,r,i){const o=t.ctx,a=e.circular,{color:s,lineWidth:u}=e;!a&&!r||!s||!u||n<0||(o.save(),o.strokeStyle=s,o.lineWidth=u,o.setLineDash(i.dash),o.lineDashOffset=i.dashOffset,o.beginPath(),ka(t,n,a,r),o.closePath(),o.stroke(),o.restore())}(this,a,s,o,u)}})),n.display){for(t.save(),a=o-1;a>=0;a--){const r=n.setContext(this.getPointLabelContext(a)),{color:i,lineWidth:o}=r;o&&i&&(t.lineWidth=o,t.strokeStyle=i,t.setLineDash(r.borderDash),t.lineDashOffset=r.borderDashOffset,s=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),u=this.getPointPosition(a,s),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(u.x,u.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,n=e.ticks;if(!n.display)return;const r=this.getIndexAngle(0);let i,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(r),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach(((r,a)=>{if(0===a&&this.min>=0&&!e.reverse)return;const s=n.setContext(this.getContext(a)),u=Ue(s.font);if(i=this.getDistanceFromCenterForValue(this.ticks[a].value),s.showLabelBackdrop){t.font=u.string,o=t.measureText(r.label).width,t.fillStyle=s.backdropColor;const e=Ge(s.backdropPadding);t.fillRect(-o/2-e.left,-i-u.size/2-e.top,o+e.width,u.size+e.height)}Pe(t,r.label,0,-i,u,{color:s.color,strokeColor:s.textStrokeColor,strokeWidth:s.textStrokeWidth})})),t.restore()}drawTitle(){}}const Ca={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Na=Object.keys(Ca);function Aa(t,e){return t-e}function Pa(t,e){if(Y(e))return null;const n=t._adapter,{parser:r,round:i,isoWeekday:o}=t._parseOpts;let a=e;return"function"==typeof r&&(a=r(a)),J(a)||(a="string"==typeof r?n.parse(a,r):n.parse(a)),null===a?null:(i&&(a="week"!==i||!Nt(o)&&!0!==o?n.startOf(a,i):n.startOf(a,"isoWeek",o)),+a)}function Ra(t,e,n,r){const i=Na.length;for(let o=Na.indexOf(t);o<i-1;++o){const t=Ca[Na[o]],i=t.steps?t.steps:Number.MAX_SAFE_INTEGER;if(t.common&&Math.ceil((n-e)/(i*t.size))<=r)return Na[o]}return Na[i-1]}function Da(t,e,n){if(n){if(n.length){const{lo:r,hi:i}=Ut(n,e);t[n[r]>=e?n[r]:n[i]]=!0}}else t[e]=!0}function Ma(t,e,n){const r=[],i={},o=e.length;let a,s;for(a=0;a<o;++a)s=e[a],i[s]=a,r.push({value:s,major:!1});return 0!==o&&n?function(t,e,n,r){const i=t._adapter,o=+i.startOf(e[0].value,r),a=e[e.length-1].value;let s,u;for(s=o;s<=a;s=+i.add(s,1,r))u=n[s],u>=0&&(e[u].major=!0);return e}(t,r,i,n):r}class Oa extends ci{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const n=t.time||(t.time={}),r=this._adapter=new gr(t.adapters.date);r.init(e),ct(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return void 0===t?null:Pa(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,n=t.time.unit||"day";let{min:r,max:i,minDefined:o,maxDefined:a}=this.getUserBounds();function s(t){o||isNaN(t.min)||(r=Math.min(r,t.min)),a||isNaN(t.max)||(i=Math.max(i,t.max))}o&&a||(s(this._getLabelBounds()),"ticks"===t.bounds&&"labels"===t.ticks.source||s(this.getMinMax(!1))),r=J(r)&&!isNaN(r)?r:+e.startOf(Date.now(),n),i=J(i)&&!isNaN(i)?i:+e.endOf(Date.now(),n)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],n=t[t.length-1]),{min:e,max:n}}buildTicks(){const t=this.options,e=t.time,n=t.ticks,r="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===t.bounds&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,o=function(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}(r,i,this.max);return this._unit=e.unit||(n.autoSkip?Ra(e.minUnit,this.min,this.max,this._getLabelCapacity(i)):function(t,e,n,r,i){for(let o=Na.length-1;o>=Na.indexOf(n);o--){const n=Na[o];if(Ca[n].common&&t._adapter.diff(i,r,n)>=e-1)return n}return Na[n?Na.indexOf(n):0]}(this,o.length,e.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(t){for(let e=Na.indexOf(t)+1,n=Na.length;e<n;++e)if(Ca[Na[e]].common)return Na[e]}(this._unit):void 0,this.initOffsets(r),t.reverse&&o.reverse(),Ma(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((t=>+t.value)))}initOffsets(t=[]){let e,n,r=0,i=0;this.options.offset&&t.length&&(e=this.getDecimalForValue(t[0]),r=1===t.length?1-e:(this.getDecimalForValue(t[1])-e)/2,n=this.getDecimalForValue(t[t.length-1]),i=1===t.length?n:(n-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;r=Bt(r,0,o),i=Bt(i,0,o),this._offsets={start:r,end:i,factor:1/(r+1+i)}}_generate(){const t=this._adapter,e=this.min,n=this.max,r=this.options,i=r.time,o=i.unit||Ra(i.minUnit,e,n,this._getLabelCapacity(e)),a=tt(r.ticks.stepSize,1),s="week"===o&&i.isoWeekday,u=Nt(s)||!0===s,c={};let l,h,d=e;if(u&&(d=+t.startOf(d,"isoWeek",s)),d=+t.startOf(d,u?"day":o),t.diff(n,e,o)>1e5*a)throw new Error(e+" and "+n+" are too far apart with stepSize of "+a+" "+o);const f="data"===r.ticks.source&&this.getDataTimestamps();for(l=d,h=0;l<n;l=+t.add(l,a,o),h++)Da(c,l,f);return l!==n&&"ticks"!==r.bounds&&1!==h||Da(c,l,f),Object.keys(c).sort(Aa).map((t=>+t))}getLabelForValue(t){const e=this._adapter,n=this.options.time;return n.tooltipFormat?e.format(t,n.tooltipFormat):e.format(t,n.displayFormats.datetime)}format(t,e){const n=this.options.time.displayFormats,r=this._unit,i=e||n[r];return this._adapter.format(t,i)}_tickFormatFunction(t,e,n,r){const i=this.options,o=i.ticks.callback;if(o)return nt(o,[t,e,n],this);const a=i.time.displayFormats,s=this._unit,u=this._majorUnit,c=s&&a[s],l=u&&a[u],h=n[e],d=u&&l&&h&&h.major;return this._adapter.format(t,r||(d?l:c))}generateTickLabels(t){let e,n,r;for(e=0,n=t.length;e<n;++e)r=t[e],r.label=this._tickFormatFunction(r.value,e,t)}getDecimalForValue(t){return null===t?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+n)*e.factor)}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,n=this.ctx.measureText(t).width,r=Pt(this.isHorizontal()?e.maxRotation:e.minRotation),i=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:n*i+a*o,h:n*o+a*i}}_getLabelCapacity(t){const e=this.options.time,n=e.displayFormats,r=n[e.unit]||n.millisecond,i=this._tickFormatFunction(t,0,Ma(this,[t],this._majorUnit),r),o=this._getLabelSize(i),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t,e,n=this._cache.data||[];if(n.length)return n;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(t=0,e=r.length;t<e;++t)n=n.concat(r[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const t=this._cache.labels||[];let e,n;if(t.length)return t;const r=this.getLabels();for(e=0,n=r.length;e<n;++e)t.push(Pa(this,r[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return $t(t.sort(Aa))}}function La(t,e,n){let r,i,o,a,s=0,u=t.length-1;n?(e>=t[s].pos&&e<=t[u].pos&&({lo:s,hi:u}=Vt(t,"pos",e)),({pos:r,time:o}=t[s]),({pos:i,time:a}=t[u])):(e>=t[s].time&&e<=t[u].time&&({lo:s,hi:u}=Vt(t,"time",e)),({time:r,pos:o}=t[s]),({time:i,pos:a}=t[u]));const c=i-r;return c?o+(a-o)*(e-r)/c:o}var Fa=Object.freeze({__proto__:null,CategoryScale:class extends ci{static id="category";static defaults={ticks:{callback:ua}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const t=this.getLabels();for(const{index:n,label:r}of e)t[n]===r&&t.splice(n,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(Y(t))return null;const n=this.getLabels();return((t,e)=>null===t?null:Bt(Math.round(t),0,e))(e=isFinite(e)&&n[e]===t?e:sa(n,t,tt(e,t),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);"ticks"===this.options.bounds&&(t||(n=0),e||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const t=this.min,e=this.max,n=this.options.offset,r=[];let i=this.getLabels();i=0===t&&e===i.length-1?i:i.slice(t,e+1),this._valueRange=Math.max(i.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let n=t;n<=e;n++)r.push({value:n});return r}getLabelForValue(t){return ua.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!=typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}},LinearScale:da,LogarithmicScale:ya,RadialLinearScale:Ea,TimeScale:Oa,TimeSeriesScale:class extends Oa{static id="timeseries";static defaults=Oa.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=La(e,this.min),this._tableRange=La(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:n}=this,r=[],i=[];let o,a,s,u,c;for(o=0,a=t.length;o<a;++o)u=t[o],u>=e&&u<=n&&r.push(u);if(r.length<2)return[{time:e,pos:0},{time:n,pos:1}];for(o=0,a=r.length;o<a;++o)c=r[o+1],s=r[o-1],u=r[o],Math.round((c+s)/2)!==u&&i.push({time:u,pos:o/(a-1)});return i}_generate(){const t=this.min,e=this.max;let n=super.getDataTimestamps();return n.includes(t)&&n.length||n.splice(0,0,t),n.includes(e)&&1!==n.length||n.push(e),n.sort(((t,e)=>t-e))}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),n=this.getLabelTimestamps();return t=e.length&&n.length?this.normalize(e.concat(n)):e.length?e:n,t=this._cache.all=t,t}getDecimalForValue(t){return(La(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return La(this._table,n*this._tableRange+this._minPos,!0)}}});const ja=[dr,uo,aa,Fa];Gi.register(...ja);var Ba=n(7168),Ga=n.n(Ba);const Ua=t=>t&&t.enabled&&t.modifierKey,Va=(t,e)=>t&&e[t+"Key"],qa=(t,e)=>t&&!e[t+"Key"];function za(t,e,n){return void 0===t||("string"==typeof t?-1!==t.indexOf(e):"function"==typeof t&&-1!==t({chart:n}).indexOf(e))}function Ha(t,e){return"function"==typeof t&&(t=t({chart:e})),"string"==typeof t?{x:-1!==t.indexOf("x"),y:-1!==t.indexOf("y")}:{x:!1,y:!1}}function $a(t,e,n){const{mode:r="xy",scaleMode:i,overScaleMode:o}=t||{},a=function({x:t,y:e},n){const r=n.scales,i=Object.keys(r);for(let n=0;n<i.length;n++){const o=r[i[n]];if(e>=o.top&&e<=o.bottom&&t>=o.left&&t<=o.right)return o}return null}(e,n),s=Ha(r,n),u=Ha(i,n);if(o){const t=Ha(o,n);for(const e of["x","y"])t[e]&&(u[e]=s[e],s[e]=!1)}if(a&&u[a.axis])return[a];const c=[];return rt(n.scales,(function(t){s[t.axis]&&c.push(t)})),c}const Wa=new WeakMap;function Ka(t){let e=Wa.get(t);return e||(e={originalScaleLimits:{},updatedScaleLimits:{},handlers:{},panDelta:{}},Wa.set(t,e)),e}function Ya(t,e,n){const r=t.max-t.min,i=r*(e-1),o=t.isHorizontal()?n.x:n.y,a=Math.max(0,Math.min(1,(t.getValueForPixel(o)-t.min)/r||0));return{min:i*a,max:i*(1-a)}}function Xa(t,e,n,r,i){let o=n[r];if("original"===o){const n=t.originalScaleLimits[e.id][r];o=tt(n.options,n.scale)}return tt(o,i)}function Qa(t,{min:e,max:n},r,i=!1){const o=Ka(t.chart),{id:a,axis:s,options:u}=t,c=r&&(r[a]||r[s])||{},{minRange:l=0}=c,h=Xa(o,t,c,"min",-1/0),d=Xa(o,t,c,"max",1/0),f=i?Math.max(n-e,l):t.max-t.min,p=(f-n+e)/2;return n+=p,(e-=p)<h?(e=h,n=Math.min(h+f,d)):n>d&&(n=d,e=Math.max(d-f,h)),u.min=e,u.max=n,o.updatedScaleLimits[t.id]={min:e,max:n},t.parse(e)!==t.min||t.parse(n)!==t.max}const Ja=t=>0===t||isNaN(t)?0:t<0?Math.min(Math.round(t),-1):Math.max(Math.round(t),1);const Za={second:500,minute:3e4,hour:18e5,day:432e5,week:3024e5,month:1296e6,quarter:5184e6,year:157248e5};function ts(t,e,n,r=!1){const{min:i,max:o,options:a}=t,s=a.time&&a.time.round,u=Za[s]||0,c=t.getValueForPixel(t.getPixelForValue(i+u)-e),l=t.getValueForPixel(t.getPixelForValue(o+u)-e),{min:h=-1/0,max:d=1/0}=r&&n&&n[t.axis]||{};return!!(isNaN(c)||isNaN(l)||c<h||l>d)||Qa(t,{min:c,max:l},n,r)}function es(t,e,n){return ts(t,e,n,!0)}const ns={category:function(t,e,n,r){const i=Ya(t,e,n);return t.min===t.max&&e<1&&function(t){const e=t.getLabels().length-1;t.min>0&&(t.min-=1),t.max<e&&(t.max+=1)}(t),Qa(t,{min:t.min+Ja(i.min),max:t.max-Ja(i.max)},r,!0)},default:function(t,e,n,r){const i=Ya(t,e,n);return Qa(t,{min:t.min+i.min,max:t.max-i.max},r,!0)}},rs={default:function(t,e,n,r){Qa(t,function(t,e,n){const r=t.getValueForPixel(e),i=t.getValueForPixel(n);return{min:Math.min(r,i),max:Math.max(r,i)}}(t,e,n),r,!0)}},is={category:function(t,e,n){const r=t.getLabels().length-1;let{min:i,max:o}=t;const a=Math.max(o-i,1),s=Math.round(function(t){return t.isHorizontal()?t.width:t.height}(t)/Math.max(a,10)),u=Math.round(Math.abs(e/s));let c;return e<-s?(o=Math.min(o+u,r),i=1===a?o:o-a,c=o===r):e>s&&(i=Math.max(0,i-u),o=1===a?i:i+a,c=0===i),Qa(t,{min:i,max:o},n)||c},default:ts,logarithmic:es,timeseries:es};function os(t,e){rt(t,((n,r)=>{e[r]||delete t[r]}))}function as(t,e){const{scales:n}=t,{originalScaleLimits:r,updatedScaleLimits:i}=e;return rt(n,(function(t){(function(t,e,n){const{id:r,options:{min:i,max:o}}=t;if(!e[r]||!n[r])return!0;const a=n[r];return a.min!==i||a.max!==o})(t,r,i)&&(r[t.id]={min:{scale:t.min,options:t.options.min},max:{scale:t.max,options:t.options.max}})})),os(r,n),os(i,n),r}function ss(t,e,n,r){nt(ns[t.type]||ns.default,[t,e,n,r])}function us(t,e,n,r,i){nt(rs[t.type]||rs.default,[t,e,n,r,i])}function cs(t){const e=t.chartArea;return{x:(e.left+e.right)/2,y:(e.top+e.bottom)/2}}function ls(t,e,n="none"){const{x:r=1,y:i=1,focalPoint:o=cs(t)}="number"==typeof e?{x:e,y:e}:e,a=Ka(t),{options:{limits:s,zoom:u}}=a;as(t,a);const c=1!==r,l=1!==i;rt($a(u,o,t)||t.scales,(function(t){t.isHorizontal()&&c?ss(t,r,o,s):!t.isHorizontal()&&l&&ss(t,i,o,s)})),t.update(n),nt(u.onZoom,[{chart:t}])}function hs(t,e,n,r="none"){const i=Ka(t),{options:{limits:o,zoom:a}}=i,{mode:s="xy"}=a;as(t,i);const u=za(s,"x",t),c=za(s,"y",t);rt(t.scales,(function(t){t.isHorizontal()&&u?us(t,e.x,n.x,o):!t.isHorizontal()&&c&&us(t,e.y,n.y,o)})),t.update(r),nt(a.onZoom,[{chart:t}])}function ds(t){const e=Ka(t);let n=1,r=1;return rt(t.scales,(function(t){const i=function(t,e){const n=t.originalScaleLimits[e];if(!n)return;const{min:r,max:i}=n;return tt(i.options,i.scale)-tt(r.options,r.scale)}(e,t.id);if(i){const e=Math.round(i/(t.max-t.min)*100)/100;n=Math.min(n,e),r=Math.max(r,e)}})),n<1?n:r}function fs(t,e,n,r){const{panDelta:i}=r,o=i[t.id]||0;kt(o)===kt(e)&&(e+=o);nt(is[t.type]||is.default,[t,e,n])?i[t.id]=0:i[t.id]=e}function ps(t,e,n,r="none"){const{x:i=0,y:o=0}="number"==typeof e?{x:e,y:e}:e,a=Ka(t),{options:{pan:s,limits:u}}=a,{onPan:c}=s||{};as(t,a);const l=0!==i,h=0!==o;rt(n||t.scales,(function(t){t.isHorizontal()&&l?fs(t,i,u,a):!t.isHorizontal()&&h&&fs(t,o,u,a)})),t.update(r),nt(c,[{chart:t}])}function gs(t){const e=Ka(t);as(t,e);const n={};for(const r of Object.keys(t.scales)){const{min:t,max:i}=e.originalScaleLimits[r]||{min:{},max:{}};n[r]={min:t.scale,max:i.scale}}return n}function ms(t,e){const{handlers:n}=Ka(t),r=n[e];r&&r.target&&(r.target.removeEventListener(e,r),delete n[e])}function vs(t,e,n,r){const{handlers:i,options:o}=Ka(t),a=i[n];a&&a.target===e||(ms(t,n),i[n]=e=>r(t,e,o),i[n].target=e,e.addEventListener(n,i[n]))}function ys(t,e){const n=Ka(t);n.dragStart&&(n.dragging=!0,n.dragEnd=e,t.update("none"))}function bs(t,e){const n=Ka(t);n.dragStart&&"Escape"===e.key&&(ms(t,"keydown"),n.dragging=!1,n.dragStart=n.dragEnd=null,t.update("none"))}function _s(t,e,n){const{onZoomStart:r,onZoomRejected:i}=n;if(r){if(!1===nt(r,[{chart:t,event:e,point:bn(e,t)}]))return nt(i,[{chart:t,event:e}]),!1}}function ws(t,e){const n=Ka(t),{pan:r,zoom:i={}}=n.options;if(0!==e.button||Va(Ua(r),e)||qa(Ua(i.drag),e))return nt(i.onZoomRejected,[{chart:t,event:e}]);!1!==_s(t,e,i)&&(n.dragStart=e,vs(t,t.canvas,"mousemove",ys),vs(t,window.document,"keydown",bs))}function Ss(t,e,n,r){const i=za(e,"x",t),o=za(e,"y",t);let{top:a,left:s,right:u,bottom:c,width:l,height:h}=t.chartArea;const d=bn(n,t),f=bn(r,t);i&&(s=Math.min(d.x,f.x),u=Math.max(d.x,f.x)),o&&(a=Math.min(d.y,f.y),c=Math.max(d.y,f.y));const p=u-s,g=c-a;return{left:s,top:a,right:u,bottom:c,width:p,height:g,zoomX:i&&p?1+(l-p)/l:1,zoomY:o&&g?1+(h-g)/h:1}}function Ts(t,e){const n=Ka(t);if(!n.dragStart)return;ms(t,"mousemove");const{mode:r,onZoomComplete:i,drag:{threshold:o=0}}=n.options.zoom,a=Ss(t,r,n.dragStart,e),s=za(r,"x",t)?a.width:0,u=za(r,"y",t)?a.height:0,c=Math.sqrt(s*s+u*u);if(n.dragStart=n.dragEnd=null,c<=o)return n.dragging=!1,void t.update("none");hs(t,{x:a.left,y:a.top},{x:a.right,y:a.bottom},"zoom"),setTimeout((()=>n.dragging=!1),500),nt(i,[{chart:t}])}function xs(t,e){const{handlers:{onZoomComplete:n},options:{zoom:r}}=Ka(t);if(!function(t,e,n){if(qa(Ua(n.wheel),e))nt(n.onZoomRejected,[{chart:t,event:e}]);else if(!1!==_s(t,e,n)&&(e.cancelable&&e.preventDefault(),void 0!==e.deltaY))return!0}(t,e,r))return;const i=e.target.getBoundingClientRect(),o=1+(e.deltaY>=0?-r.wheel.speed:r.wheel.speed);ls(t,{x:o,y:o,focalPoint:{x:e.clientX-i.left,y:e.clientY-i.top}}),n&&n()}function Is(t,e,n,r){n&&(Ka(t).handlers[e]=function(t,e){let n;return function(){return clearTimeout(n),n=setTimeout(t,e),e}}((()=>nt(n,[{chart:t}])),r))}function ks(t,e){return function(n,r){const{pan:i,zoom:o={}}=e.options;if(!i||!i.enabled)return!1;const a=r&&r.srcEvent;return!a||(!(!e.panning&&"mouse"===r.pointerType&&(qa(Ua(i),a)||Va(Ua(o.drag),a)))||(nt(i.onPanRejected,[{chart:t,event:r}]),!1))}}function Es(t,e,n){if(e.scale){const{center:r,pointers:i}=n,o=1/e.scale*n.scale,a=n.target.getBoundingClientRect(),s=function(t,e){const n=Math.abs(t.clientX-e.clientX),r=Math.abs(t.clientY-e.clientY),i=n/r;let o,a;return i>.3&&i<1.7?o=a=!0:n>r?o=!0:a=!0,{x:o,y:a}}(i[0],i[1]),u=e.options.zoom.mode;ls(t,{x:s.x&&za(u,"x",t)?o:1,y:s.y&&za(u,"y",t)?o:1,focalPoint:{x:r.x-a.left,y:r.y-a.top}}),e.scale=n.scale}}function Cs(t,e,n){const r=e.delta;r&&(e.panning=!0,ps(t,{x:n.deltaX-r.x,y:n.deltaY-r.y},e.panScales),e.delta={x:n.deltaX,y:n.deltaY})}const Ns=new WeakMap;function As(t,e){const n=Ka(t),r=t.canvas,{pan:i,zoom:o}=e,a=new(Ga().Manager)(r);o&&o.pinch.enabled&&(a.add(new(Ga().Pinch)),a.on("pinchstart",(()=>function(t,e){e.options.zoom.pinch.enabled&&(e.scale=1)}(0,n))),a.on("pinch",(e=>Es(t,n,e))),a.on("pinchend",(e=>function(t,e,n){e.scale&&(Es(t,e,n),e.scale=null,nt(e.options.zoom.onZoomComplete,[{chart:t}]))}(t,n,e)))),i&&i.enabled&&(a.add(new(Ga().Pan)({threshold:i.threshold,enable:ks(t,n)})),a.on("panstart",(e=>function(t,e,n){const{enabled:r,onPanStart:i,onPanRejected:o}=e.options.pan;if(!r)return;const a=n.target.getBoundingClientRect(),s={x:n.center.x-a.left,y:n.center.y-a.top};if(!1===nt(i,[{chart:t,event:n,point:s}]))return nt(o,[{chart:t,event:n}]);e.panScales=$a(e.options.pan,s,t),e.delta={x:0,y:0},clearTimeout(e.panEndTimeout),Cs(t,e,n)}(t,n,e))),a.on("panmove",(e=>Cs(t,n,e))),a.on("panend",(()=>function(t,e){e.delta=null,e.panning&&(e.panEndTimeout=setTimeout((()=>e.panning=!1),500),nt(e.options.pan.onPanComplete,[{chart:t}]))}(t,n)))),Ns.set(t,a)}function Ps(t,e,n){const r=n.zoom.drag,{dragStart:i,dragEnd:o}=Ka(t);if(r.drawTime!==e||!o)return;const{left:a,top:s,width:u,height:c}=Ss(t,n.zoom.mode,i,o),l=t.ctx;l.save(),l.beginPath(),l.fillStyle=r.backgroundColor||"rgba(225,225,225,0.3)",l.fillRect(a,s,u,c),r.borderWidth>0&&(l.lineWidth=r.borderWidth,l.strokeStyle=r.borderColor||"rgba(225,225,225)",l.strokeRect(a,s,u,c)),l.restore()}var Rs={id:"zoom",version:"2.0.1",defaults:{pan:{enabled:!1,mode:"xy",threshold:10,modifierKey:null},zoom:{wheel:{enabled:!1,speed:.1,modifierKey:null},drag:{enabled:!1,drawTime:"beforeDatasetsDraw",modifierKey:null},pinch:{enabled:!1},mode:"xy"}},start:function(t,e,n){Ka(t).options=n,Object.prototype.hasOwnProperty.call(n.zoom,"enabled")&&console.warn("The option `zoom.enabled` is no longer supported. Please use `zoom.wheel.enabled`, `zoom.drag.enabled`, or `zoom.pinch.enabled`."),(Object.prototype.hasOwnProperty.call(n.zoom,"overScaleMode")||Object.prototype.hasOwnProperty.call(n.pan,"overScaleMode"))&&console.warn("The option `overScaleMode` is deprecated. Please use `scaleMode` instead (and update `mode` as desired)."),Ga()&&As(t,n),t.pan=(e,n,r)=>ps(t,e,n,r),t.zoom=(e,n)=>ls(t,e,n),t.zoomRect=(e,n,r)=>hs(t,e,n,r),t.zoomScale=(e,n,r)=>function(t,e,n,r="none"){as(t,Ka(t)),Qa(t.scales[e],n,void 0,!0),t.update(r)}(t,e,n,r),t.resetZoom=e=>function(t,e="default"){const n=Ka(t),r=as(t,n);rt(t.scales,(function(t){const e=t.options;r[t.id]?(e.min=r[t.id].min.options,e.max=r[t.id].max.options):(delete e.min,delete e.max)})),t.update(e),nt(n.options.zoom.onZoomComplete,[{chart:t}])}(t,e),t.getZoomLevel=()=>ds(t),t.getInitialScaleBounds=()=>gs(t),t.isZoomedOrPanned=()=>function(t){const e=gs(t);for(const n of Object.keys(t.scales)){const{min:r,max:i}=e[n];if(void 0!==r&&t.scales[n].min!==r)return!0;if(void 0!==i&&t.scales[n].max!==i)return!0}return!1}(t)},beforeEvent(t){const e=Ka(t);if(e.panning||e.dragging)return!1},beforeUpdate:function(t,e,n){Ka(t).options=n,function(t,e){const n=t.canvas,{wheel:r,drag:i,onZoomComplete:o}=e.zoom;r.enabled?(vs(t,n,"wheel",xs),Is(t,"onZoomComplete",o,250)):ms(t,"wheel"),i.enabled?(vs(t,n,"mousedown",ws),vs(t,n.ownerDocument,"mouseup",Ts)):(ms(t,"mousedown"),ms(t,"mousemove"),ms(t,"mouseup"),ms(t,"keydown"))}(t,n)},beforeDatasetsDraw(t,e,n){Ps(t,"beforeDatasetsDraw",n)},afterDatasetsDraw(t,e,n){Ps(t,"afterDatasetsDraw",n)},beforeDraw(t,e,n){Ps(t,"beforeDraw",n)},afterDraw(t,e,n){Ps(t,"afterDraw",n)},stop:function(t){!function(t){ms(t,"mousedown"),ms(t,"mousemove"),ms(t,"mouseup"),ms(t,"wheel"),ms(t,"click"),ms(t,"keydown")}(t),Ga()&&function(t){const e=Ns.get(t);e&&(e.remove("pinchstart"),e.remove("pinch"),e.remove("pinchend"),e.remove("panstart"),e.remove("pan"),e.remove("panend"),e.destroy(),Ns.delete(t))}(t),function(t){Wa.delete(t)}(t)},panFunctions:is,zoomFunctions:ns,zoomRectFunctions:rs};function Ds(t,e,n,r,i,o){const s=document.getElementById(e).getContext("2d");t.sort(((t,e)=>(0,a._U)((0,a.Dl)(t.id||h.Es))-(0,a._U)((0,a.Dl)(e.id||h.Es))));const u=t.map((t=>(0,a.Dl)(t.id||h.Es))),c=t.map((t=>t.value||0)),l=Math.min(...c),d=l-.1*l,f=Math.max(...c),p=f+.1*f,g=Math.max(0,u.length-10),m=u.length-1;new Gi(s,{type:n,data:{labels:u,datasets:[{label:r,data:c,backgroundColor:i,borderColor:o,borderWidth:2}]},options:{scales:{y:{beginAtZero:!1,min:d,suggestedMax:p,grid:{color:STRINGS.gridColor,borderColor:STRINGS.gridColor,borderWidth:1,drawBorder:!0,drawOnChartArea:!0}},x:{min:g,max:m,ticks:{autoSkip:!0,maxRotation:45,minRotation:45}}},plugins:{zoom:{pan:{enabled:!0,mode:"x"},zoom:{wheel:{enabled:!0},pinch:{enabled:!0},mode:"x"}}},responsive:!0,maintainAspectRatio:!1}});s.canvas.parentNode.style.overflow="auto"}Gi.register(Rs);var Ms=n(4861),Os=n(4684),Ls=n(3948);function Fs(t,e,n=""){return`\n        <p class="stat-p" ${n?`tip="${n}"`:""}>\n            <span class="stat-span">${t}: </span>\n            ${e}\n        </p>\n    `}async function js(){return new Promise(((t,e)=>{o.Qj.spotifyStatus[0]||e(),window.spotifyApi.getMe().then((e=>{const n={username:e.display_name,id:e.id};t(n)})).catch((()=>{e()}))})).then((t=>`\n            <div data-v-2c5139e0="" class="section row">\n                <div data-v-2c5139e0="" class="header">${STRINGS.spotifyAccount}</div>\n                <div data-v-2c5139e0="" class="options">\n                    <div>\n                        <p>${STRINGS.spotifyUsername}${t.username}</p>\n                        <p>${STRINGS.spotifyId}${t.id}</p>\n                    </div>\n                </div>\n            </div>\n        `)).catch((()=>`\n            <div data-v-2c5139e0="" class="section row">\n                <div data-v-2c5139e0="" class="header">${STRINGS.spotifyAccount}</div>\n                <div data-v-2c5139e0="" class="options">\n                    <p>${STRINGS.spotifyPromo}</p>\n                    <div class="lineSep"></div>\n                    <div id="spotifyLoginButton" class="spotifyLoginButton" onclick="window.location = STRINGS.spotifyAuthUrl">\n                        ${STRINGS.spotifyLogin}\n                        <i class="fa-brands fa-spotify"></i>\n                    </div>\n                </div>\n            </div>\n        `))}async function Bs(){$(SELECT.toolBox).length>0||(r.x.statistics?h.g>1?function(){const t=[getMetrics("xp").then((t=>t||{id:h.Es,value:0})).catch((()=>0)),getMetrics("kills").then((t=>t||{id:h.Es,value:0})).catch((()=>0)),getMetrics("game").then((t=>t||{id:h.Es,value:0})).catch((()=>0)),getMetrics("time").then((t=>t||{id:h.Es,value:0})).catch((()=>0)),getMetrics("mass").then((t=>t||{id:h.Es,value:0})).catch((()=>0))];Promise.all(t).then((async([t,e,n,r,i])=>{await Gs(!0),setTimeout((()=>{Ds(t,STRINGS.xpChartId,STRINGS.xpChartType,STRINGS.xpChartLabel,STRINGS.xpChartBackgroundColor,STRINGS.xpChartBorderColor),Ds(e,STRINGS.killsChartId,STRINGS.killsChartType,STRINGS.killsChartLabel,STRINGS.killsChartBackgroundColor,STRINGS.killsChartBorderColor),Ds(n,STRINGS.gameChartId,STRINGS.gameChartType,STRINGS.gameChartLabel,STRINGS.gameChartBackgroundColor,STRINGS.gameChartBorderColor),Ds(r,STRINGS.timeChartId,STRINGS.timeChartType,STRINGS.timeChartLabel,STRINGS.timeChartBackgroundColor,STRINGS.timeChartBorderColor),Ds(i,STRINGS.massChartId,STRINGS.massChartType,STRINGS.massChartLabel,STRINGS.massChartBackgroundColor,STRINGS.massChartBorderColor)}),500)})).catch((async t=>{console.error(t),await Gs(!1)}))}():await Gs(!1):fireTimedSwal(STRINGS.tooFastForOnixTitle,STRINGS.tooFastForOnixContent,STRINGS.errorSwalTime,STRINGS.okButton))}async function Gs(t){const e=`\n        <div class="stat-container">\n            ${function(){const t=0===$(SELECT.discordName).length?STRINGS.disconnected:STRINGS.connected,e=o.tG.emailVerified?STRINGS.yes:STRINGS.no,n=o.tG.uid,r=o.tG.email,i=o.tG.metadata.lastSignInTime,s=o.tG.metadata.creationTime,u=(0,a.rj)(i),c=(0,a.rj)(s);return`\n        <div data-v-2c5139e0="" class="section row">\n            <div data-v-2c5139e0="" class="header">Profil\n                <span data-v-22117250="" class="forceRight confidential silentUid" onclick="copySkin('${n}', STRINGS.copyUid)">\n                    ${secureHTML(n)}\n                </span>\n            </div>\n            <div data-v-2c5139e0="" class="options">\n                <p class="stat-p">\n                    ${t}\n                    <span class="stat-span"> ${STRINGS.toDiscord}\n                    <i class="fab fa-discord"></i>\n                    </span>\n                </p>\n                <p class="stat-p confidential">\n                    <span class="stat-span spanWithoutShadow">${STRINGS.accountEmail}</span>\n                    ${secureHTML(r)}\n                </p>\n                <p class="stat-p">\n                    <span class="stat-span spanWithoutShadow">${STRINGS.verifiedEmail}</span>\n                    ${e}\n                </p>\n                <div class="lineSep"></div>\n                <div class="resetPasswordButton" onclick="window.location = STRINGS.resetPasswordUrl">\n                    ${STRINGS.resetPasswordText}\n                    <i class="fal fa-lock"></i>\n                </div>\n                <p class="lostPasswordButton stat-p">\n                    <span class="stat-span spanWithoutShadow" onclick="fireTimedSwal(STRINGS.lostPasswordTitle, STRINGS.lostPasswordLabel, STRINGS.lostPasswordTime)">${STRINGS.lostPasswordText}</span>\n                </p>\n                <div class="lineSep"></div>\n                <p class="stat-p">\n                    <span class="stat-span spanWithoutShadow">${STRINGS.lastSignInDate}</span>\n                    ${secureHTML(u)}\n                </p>\n                <p class="stat-p">\n                    <span class="stat-span spanWithoutShadow">${STRINGS.creationDate}</span>\n                    ${secureHTML(c)}\n                </p>\n                <div class="lineSep"></div>\n                <p class="stat-p stat-p-token">${STRINGS.skinTokenText}</p>\n                <input class="inputSkinToken confidential" value="${secureHTML(SETTINGS.sa)}" onchange="localStorage.setItem('sa', (SETTINGS.sa = this.value))" data-v-c41b640a="" type="text" spellcheck="false" placeholder="${STRINGS.placeholderVanisToken}" maxlength="20" tip='${STRINGS.stepsVanisToken}'>\n            </div>\n        </div>\n    `}()}\n            ${await js()}\n            ${h.g>1&&t?`\n        <div data-v-2c5139e0="" class="section row">\n            <div data-v-2c5139e0="" class="header">${STRINGS.xpTitle}</div>\n            <div data-v-2c5139e0="" class="options">\n                <canvas id="xpChart" class="chartMetricItem" width="400" height="300"></canvas>\n            </div>\n        </div>\n        <div data-v-2c5139e0="" class="section row">\n            <div data-v-2c5139e0="" class="header">${STRINGS.killsTitle}</div>\n            <div data-v-2c5139e0="" class="options">\n                <canvas id="killsChart" class="chartMetricItem" width="400" height="300"></canvas>\n            </div>\n        </div>\n        <div data-v-2c5139e0="" class="section row">\n            <div data-v-2c5139e0="" class="header">${STRINGS.gamePlayedTitle}</div>\n            <div data-v-2c5139e0="" class="options">\n                <canvas id="gameChart" class="chartMetricItem" width="400" height="300"></canvas>\n            </div>\n        </div>\n        <div data-v-2c5139e0="" class="section row">\n            <div data-v-2c5139e0="" class="header">${STRINGS.timePlayedTitle}</div>\n            <div data-v-2c5139e0="" class="options">\n                <canvas id="timeChart" class="chartMetricItem" width="400" height="300"></canvas>\n            </div>\n        </div>\n        <div data-v-2c5139e0="" class="section row">\n            <div data-v-2c5139e0="" class="header">${STRINGS.massAteTitle}</div>\n            <div data-v-2c5139e0="" class="options">\n                <canvas id="massChart" class="chartMetricItem" width="400" height="300"></canvas>\n            </div>\n        </div>\n        <p class="resetAllStatistics" style="margin-bottom: 25px" tip="${STRINGS.chartSyncMessage}" onclick="fetchAllMetrics()">${STRINGS.syncAllMetrics} <i class="fal fa-cloud resetAllStatisticsIcon"></i></p>\n    `:""}\n            ${function(t){let e=t.sK,n=t.sG,r=t.sM,i=t.sT;h.g>1&&(e+=parseInt((0,Os.$)(STRINGS.typeStatKill,"0")),n+=parseInt((0,Os.$)(STRINGS.typeStatGame,"0")),r+=parseInt((0,Os.$)(STRINGS.typeStatMass,"0")),i+=parseInt((0,Os.$)(STRINGS.typeStatTime,"0")));const o=`\n        ${Fs(STRINGS.killSubTitle,e)}\n        ${Fs(STRINGS.deathSubTitle,n)}\n        ${Fs(STRINGS.kdaSubTitle,(e/n||0).toFixed(2),STRINGS.kdaExplanation)}\n        ${Fs(STRINGS.massEatenSubTitle,(0,a.nR)(r))}\n        ${Fs(STRINGS.massEatenGameSubTitle,(0,a.nR)(r/n||0))}\n        ${Fs(STRINGS.timePlayedSubTitle,(0,a.Y7)(i))}\n        ${Fs(STRINGS.timePlayedGameSubTitle,(0,a.Y7)(i/n||0))}\n    `;return`\n        <div data-v-2c5139e0="" class="section row">\n            <div data-v-2c5139e0="" class="header">${STRINGS.statisticsSectionTitle}   \n                <i class="fal fa-chart-bar headerIcon"></i>\n            </div>\n            <div data-v-2c5139e0="" class="options statisticsOptionsSection">\n                ${o}\n            </div>\n        </div>\n        <p class="resetAllStatistics" onclick="confirmResetStatistics()">${STRINGS.resetAllStatistics} <i class="fal fa-trash-can resetAllStatisticsIcon"></i></p>\n    `}(d.gS)}\n        </div>\n    `,n=`\n        <div class="divLogout" onclick="firebaseSignOut()">\n            <p>${STRINGS.logout}</p>\n            <i class="fal fa-sign-out-alt signOutButton"></i>\n        </div>\n    `;Js(e,STRINGS.profileAndStatsTitle,n)}window.confirmResetStatistics=function(){Swal.fire({title:STRINGS.confirmReset,text:STRINGS.permanentDeleteStatisticsAsk,showCancelButton:!0,confirmButtonText:STRINGS.yes,cancelButton:STRINGS.no}).then((t=>{!0===t.value&&((0,d.MR)({sK:0,sG:0,sM:0,sT:0}),Ms.tf.meStatistics.update(d.gS).then((()=>{(0,Ls.fQ)(),$(SELECT.statisticsOptionsSection).html(`\n        ${Fs(STRINGS.killSubTitle,0)}\n        ${Fs(STRINGS.deathSubTitle,0)}\n        ${Fs(STRINGS.kdaSubTitle,0,STRINGS.kdaExplanation)}\n        ${Fs(STRINGS.massEatenSubTitle,(0,a.nR)(0))}\n        ${Fs(STRINGS.massEatenGameSubTitle,(0,a.nR)(0))}\n        ${Fs(STRINGS.timePlayedSubTitle,(0,a.Y7)(0))}\n        ${Fs(STRINGS.timePlayedGameSubTitle,(0,a.Y7)(0))}\n    `),fireTimedSwal(STRINGS.success,STRINGS.statisticsSuccessfullyDeleted,STRINGS.shortSwalTime,!1)})).catch((t=>{fireTimedSwal(STRINGS.errorSwalTitle,STRINGS.deletingStatistics+t.message,STRINGS.errorSwalTime,STRINGS.okButton)})))}))};var Us=n(1799),Vs=n(1566);function qs(t,e){const n=function(t){if(!t)return{list:"",count:0};const e=parseJson(t);if(Object.keys(e).length>0){return{list:`<div class="listSkins">${e.map((t=>{const e=(0,s.$9)(t);if(""===e.type)return"";const n=`renderSkin('${encodeURIComponent(stringifierJson(e))}')`;return`<img src="${secureHTML(e.url)}" alt="" class="backupSkinItem beautifulSkin" tip="${secureHTML(e.url)}" onerror="this.src = '${IMAGES.transparentSkin}'" onclick="${n}">`})).join("")}</div>`,count:Object.keys(e).length}}return{list:"",count:0}}(t.skins),r=h.a3===t.m?'<p class="backupActual backupCard">Actual backup</p>':"",i=t.c?secureHTML(t.c):COLORS.defaultColor,o=t.n&&""!==t.n?`<p class="backupNickname backupCard" style="color: ${i}">${secureHTML(t.n)}</p>`:"",a=t.t?`<p class="backupTeamTag backupCard">Tag: ${t.t}</p>`:"",u=zs(t.hotkeys),c=zs(t.settings);return`\n        <div class="listItem backupItem" id="${secureHTML(e)}">\n            <div class="backupContent">\n                <div class="backupInformations">\n                    <p class="backupName">${secureHTML(t.m)}</p>\n                    <p class="backupDate">${secureHTML(t.d)}</p>\n                </div>\n                <div class="backupContentList">\n                    ${r}\n                    ${o}\n                    ${a}\n                    <p class="backupHotkeys backupCard">${u} hotkeys</p>\n                    <p class="backupSkins backupCard">${c} settings</p>\n                    <p class="backupSkins backupCard">${n.count} skins</p>\n                </div>\n                ${n.list}\n            </div>\n            <div class="backupAction">\n                <div class="backupGet backupActionButton" onclick="applyBackup('${e}')">\n                    <p class="backupActionButtonText">${STRINGS.applyButton}</p>\n                </div>\n                <div class="backupDelete backupActionButton" onclick="deleteBackup('${e}')">\n                    <p class="backupActionButtonText">${STRINGS.deleteButton}</p>\n                </div>\n            </div>\n        </div>\n    `}function zs(t){if(!t)return 0;const e=parseJson(t);return 0===Object.keys(e).length?0:Object.keys(e).filter((t=>""!==e[t])).length}function Hs(t){return Ws(t,STRINGS.dbBadge,STRINGS.perkTypePushBadge,STRINGS.functionPushBadgeName)}function $s(t){return Ws(t,STRINGS.dbHat,STRINGS.perkTypePushHat,STRINGS.functionPushHatName)}function Ws(t,e,n,r){let a=!1;const s=i.J[o.tG.uid],u=s?s[e]:null,c=!(!u||!u.u||u.i!==t.i)&&u.i;(t.o&&t.o[o.tG.uid]||t.e&&(t.e.t===STRINGS.perkTypeKill&&t.e.v<=d.gS.sK||t.e.t===STRINGS.perkTypeTime&&t.e.v<=d.gS.sT))&&(a=!0);const l=a?`onclick="${r}('${encodeURIComponent(stringifierJson(t))}')"`:"",h=t.i>=1e4&&t.i<=19999?"tricksplitHat":"",f=c?`${n}${STRINGS.perkSelected}`:`${n}${STRINGS.perkNotSelected}`,p=a?`${n}${STRINGS.perkOwner}`:`${n}${STRINGS.perkNotOwner}`;return`\n        <img ${n}Id="${secureHTML(t.i)}" class="${n}Item ${n}${secureHTML(t.i)} ${p} ${f} ${h}" src="${secureHTML(t.u)}" tip="${secureHTML(t.t)}" ${l} alt=""/>\n    `}async function Ks(){$(SELECT.toolBox).length>0||(await Promise.all([(0,Vs.Zv)(Ms.tf.allBadges,Vs.hc,!1,!1,!1,Vs.QO),(0,Vs.Zv)(Ms.tf.allHats,Vs.re,!1,!1,!1,Vs.yo),(0,Vs.Zv)(Ms.tf.meBackups,Vs.Gk,!1,!1,!1,Vs.et)]),function(){const t={backups:(0,Vs.nZ)(Vs.Gk,qs),badges:(0,Vs.nZ)(Vs.hc,Hs,[0,9999]),onixBadges:(0,Vs.nZ)(Vs.hc,Hs,[1e4,99999]),clanBadges:(0,Vs.nZ)(Vs.hc,Hs,[1e5,199999]),premiumBadges:(0,Vs.nZ)(Vs.hc,Hs,[2e5,299999]),hats:(0,Vs.nZ)(Vs.re,$s,[0,9999]),tricksplitHats:(0,Vs.nZ)(Vs.re,$s,[1e4,99999]),contributorsHats:(0,Vs.nZ)(Vs.re,$s,[1e5,199999]),premiumHats:(0,Vs.nZ)(Vs.re,$s,[2e5,299999])};Js(function(t){const e=Vs.Gk?Object.keys(Vs.Gk).length:0,n=o.Qj.gif.a===STRINGS.unchecked?STRINGS.hidden:"";return`\n        <div class="tool-container">\n            <div class="tool-section">\n                <div class="buttonTabContainer">\n                    <div class="buttonTab buttonTabDisabled toolsNavPerksTab" onclick="showPage(0, [SELECT.toolsPageButtonPerks, SELECT.toolsPageButtonSettings, SELECT.toolsPageButtonBackups], [SELECT.toolsPagePerks, SELECT.toolsPageSettings, SELECT.toolsPageBackups])">\n                        <p class="buttonTabText">${STRINGS.perksTabTitle}</p>\n                    </div>\n                    <div class="buttonTab buttonTabActive toolsNavBackupsTab" onclick="showPage(2, [SELECT.toolsPageButtonPerks, SELECT.toolsPageButtonSettings, SELECT.toolsPageButtonBackups], [SELECT.toolsPagePerks, SELECT.toolsPageSettings, SELECT.toolsPageBackups])">\n                        <p class="buttonTabText">${STRINGS.backupsTabTitle}</p>\n                    </div>\n                </div>\n                <div class="toolsPagePerks">\n                    <div data-v-2c5139e0="" class="section row">\n                        <div data-v-2c5139e0="" class="header">${STRINGS.coloredNameSectionTitle}</div>\n                        <div data-v-2c5139e0="" class="options">\n                            <p class="stat-p">${STRINGS.coloredNameSectionContent}</p>\n                            <div class="colorPickerContainer">\n                                <input type="text" id="colorPickerInput" value="${secureHTML(o.Qj.color)}" placeholder="${COLORS.defaultColor}" onchange="onColorChanged(this)">\n                                <div class="colorPickerGui">\n                                    <input type="color" id="colorPickerSelector" value="${secureHTML(o.Qj.color)}" onchange="onColorChanged(this)">\n                                </div>\n                            </div>\n                        </div> \n                    </div>\n                    <div data-v-2c5139e0="" class="section row">\n                        <div data-v-2c5139e0="" class="header">${STRINGS.gifSectionTitle}</div>\n                        <div data-v-2c5139e0="" class="options">\n                            <div data-v-3ddebeb3="" class="p-switch pretty" p-checkbox="">\n                                <input type="checkbox" ${o.Qj.gif.a}="" onchange="switchManager(STRINGS.typeGifActivated)"> \n                                <div class="state">\n                                    <label>${STRINGS.gifSectionSwitch}</label>\n                                </div>\n                            </div>\n                            <p class="stat-p">${STRINGS.gifSectionContent}</p>\n                            <div class="gifPickerContainer  ${n}">\n                                <input type="text" class="gifInputPath" id="gifInput" value="${secureHTML(o.Qj.gif.p)||""}" placeholder="${STRINGS.defaultGif}" onchange="onGifChanged(this, STRINGS.gifTypePath)">\n                                <input type="text" class="gifInputOther" id="gifInput" value="${secureHTML(o.Qj.gif.f)||""}" placeholder="${STRINGS.defaultGifMax}" onchange="onGifChanged(this, STRINGS.gifTypeFrames)">\n                                <input type="text" class="gifInputOther" id="gifInput" value="${secureHTML(o.Qj.gif.i)||""}" placeholder="${STRINGS.defaultGifTimer}" onchange="onGifChanged(this, STRINGS.gifTypeInterval)">\n                            </div>\n                        </div> \n                    </div>\n                    <div data-v-2c5139e0="" class="section row">\n                    <div data-v-2c5139e0="" class="header">${STRINGS.badgeSectionTitle}</div>\n                        <div data-v-2c5139e0="" class="options">\n                            <p>${STRINGS.badgeSectionContent}</p>\n                            <p class="perksSubtitleSub">${STRINGS.badgeSectionSubtitle}</p>\n                            <p class="perksSubtitle">${STRINGS.badgeSectionStatsTitle}</p>\n                            <p class="perksSubtitleSub">${STRINGS.badgeSectionStatsSubtitle}</p>\n                            <div class="badgeListPerks">\n                                ${t.badges}\n                            </div>\n                            <p class="perksSubtitle">${STRINGS.badgeSectionOnixTitle}</p>\n                            <p class="perksSubtitleSub">${STRINGS.badgeSectionOnixSubtitle}</p>\n                            <div class="badgeListPerks">\n                                ${t.onixBadges}\n                            </div>\n                            <p class="perksSubtitle">${STRINGS.badgeSectionClanTitle}</p>\n                            <p class="perksSubtitleSub">${STRINGS.badgeSectionClanSubtitle}</p>\n                            <div class="badgeListPerks">\n                                ${t.clanBadges}\n                            </div>\n                            <p class="perksSubtitle">${STRINGS.badgeSectionPremiumTitle}</p>\n                            <p class="perksSubtitleSub">${STRINGS.badgeSectionPremiumSubtitle}</p>\n                            <div class="badgeListPerks">\n                                ${t.premiumBadges}\n                            </div>\n                        </div> \n                    </div>\n                    <div data-v-2c5139e0="" class="section row">\n                    <div data-v-2c5139e0="" class="header">${STRINGS.hatsSectionTitle}</div>\n                        <div data-v-2c5139e0="" class="options">\n                            <p>${STRINGS.hatsSectionContent}</p>\n                            <p class="perksSubtitleSub">${STRINGS.hatsSectionSubtitle}</p>\n                            <p class="perksSubtitle">${STRINGS.hatsSectionStatisticsTitle}</p>\n                            <p class="perksSubtitleSub">${STRINGS.hatsSectionStatisticsSubtitle}</p>\n                            <div class="hatListPerks">\n                                ${t.hats}\n                            </div>\n                            <p class="perksSubtitle">${STRINGS.hatsSectionTricksplitTitle}</p>\n                            <p class="perksSubtitleSub">${STRINGS.hatsSectionTricksplitSubtitle}</p>\n                            <div class="hatListPerks">\n                                ${t.tricksplitHats}\n                            </div>\n                            <p class="perksSubtitle">${STRINGS.hatsSectionContributorsTitle}</p>\n                            <p class="perksSubtitleSub">${STRINGS.hatsSectionContributorsSubtitle}</p>\n                            <div class="hatListPerks">\n                                ${t.contributorsHats}\n                            </div>\n                            <p class="perksSubtitle">${STRINGS.hatsSectionPremiumTitle}</p>\n                            <p class="perksSubtitleSub">${STRINGS.hatsSectionPremiumSubtitle}</p>\n                            <div class="hatListPerks">\n                                ${t.premiumHats}\n                            </div>\n                        </div> \n                    </div>\n                </div>\n                <div class="toolsPageBackups hidden">\n                    <div data-v-2c5139e0="" class="section row">\n                        <div data-v-2c5139e0="" class="header">\n                            <p class="backupNumber">${e} backup${e>1?"s":""} saved</p>\n                        </div>\n                        <div data-v-2c5139e0="" class="options">\n                            ${t.backups}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    `}(t),STRINGS.titleToolsModal,"")}())}var Ys=n(3790);function Xs(){Qs(!0,"userIcon","fal fa-users",STRINGS.tipUserModal,c),Qs(!0,"statIcon","fal fa-user",STRINGS.tipProfileModal,Bs),Qs(!0,"leaderboardIcon","fal fa-trophy",STRINGS.tipOnixboardModal,Us.v),Qs(!0,"toolIcon","fal fa-wrench",STRINGS.tipPerksAndBackupsModal,Ks),Qs(!0,"skinsIcon","fal fa-images",STRINGS.tipGallerySkin,Ys.nL)}function Qs(t,e,n,r,i){const o=i||"";let a=$("<i>").addClass(n).attr({id:e,tip:r}).on("click",o);$(SELECT.mainContainer).append(a)}function Js(t,e,n,r,i){let o=i?'style="margin-left: -316px; width: 962px;"':"",a=r?`tip="${r}"`:"";$(SELECT.playerContainer).append(`\n        <div data-v-73ccaaca="" data-v-5190ae12="" class="modal" ${o}>\n            <div data-v-73ccaaca="" class="overlay"></div>\n            <i data-v-73ccaaca="" class="fal fa-times-circle close-button" onclick="$(this).closest(SELECT.modalHud).remove()"></i>\n            <div data-v-73ccaaca="" class="wrapper"><div data-v-73ccaaca="" class="content fade-box">\n                <div data-v-c41b640a="" data-v-5190ae12="" data-v-15c13b66="" class="container">\n                    <div class="customBoxHeader">\n                        <h2 data-v-f0eb8534="" class="player-list-title customBoxTitle" ${a}>${e}</h2>\n                        ${n||""}\n                    </div>\n                    ${t||""}\n                </div>\n            </div>\n        </div>\n    `)}},7009:()=>{window.renderSkin=function(t){const e=parseJson(decodeURIComponent(t)),n=function(t,e){const n=()=>{const t=e.id?STRINGS.skinId+secureHTML(e.id):STRINGS.noSkinId,n=e.url?`yoinkSkin('${secureHTML(e.url)}')`:`fireTimedSwal('${STRINGS.errorSwalTitle}', '${STRINGS.nothingToYoink}', '${STRINGS.errorSwalTime}', false)`,r=e.url?`copySkin('${secureHTML(e.url)}', '${STRINGS.skinCopyTitle}')`:`fireTimedSwal('${STRINGS.errorSwalTitle}', '${STRINGS.nothingToCopy}', '${STRINGS.errorSwalTime}', false)`;return`\n            <div class="skinItemNav skinItemNavId">\n                <p class="skinItemURL">${t}</p>\n            </div>\n            <div class="skinItemNav skinItemNavBtn" onclick="${n}">\n                <div class="skinItemYoink">\n                    <i class="fal fa-link"></i>\n                    <p class="skinItemTextButton">${STRINGS.yoinkText}</p>\n                </div>\n            </div>\n            <div class="skinItemNav skinItemNavBtn" onclick="${r}">\n                <div class="skinItemCopy">\n                    <i class="fal fa-copy"></i>\n                    <p class="skinItemTextButton">${STRINGS.copyText}</p>\n                </div>\n            </div>\n        `},r=()=>{const t=e.id&&e.frames&&e.interval?`applyGif('${secureHTML(e.id)}', '${secureHTML(e.frames)}', '${secureHTML(e.interval)}')`:`fireTimedSwal('${STRINGS.errorSwalTitle}', '${STRINGS.nothingToApply}', ${STRINGS.errorSwalTime}, false)`;return`\n            <div class="skinItemNav skinItemNavBtn">\n                <p class="skinItemURL">${"Frames: "+secureHTML(e.frames)}</p>\n            </div>\n            <div class="skinItemNav skinItemNavBtn">\n                <p class="skinItemURL">${"Interval: "+secureHTML(e.interval)}</p>\n            </div>\n            <div class="skinItemNav skinItemNavBtn" onclick="${t}">\n                <div class="skinItemYoink">\n                    <i class="fal fa-link"></i>\n                    <p class="skinItemTextButton">Apply</p>\n                </div>\n            </div>\n        `};return t!==STRINGS.gifType?n():r()}(e.type,e);$(SELECT.overlay).append(`\n        <div class="overlaySkin">\n            <i class="fal fa-times closeSkinItemModal" onclick="$(SELECT.overlaySkin).remove()"></i>\n            <div class="absoluteCenter">\n                <img class="skinItemModal beautifulSkin" src="${secureHTML(e.url)}" alt="" onerror="this.src = '${IMAGES.transparentSkin}'">\n                <div class="skinItemActions">\n                    ${n}\n                </div>\n            </div>\n        </div>\n    `)}},1799:(t,e,n)=>{"use strict";n.d(e,{v:()=>d});var r=n(9460),i=n(7576),o=n(4046),a=n(4861),s=n(3583),u=n(1566),c=n(3253),l=n(5543),h=n(6092);async function d(){$(SELECT.toolBox).length>0||(r.x.users?(Object.keys(i.c7).length<Object.keys(o.J).length&&await(0,u.Zv)(a.tf.allStatistics,i.c7,!0,!0,!1,null),await async function(){const t=[{id:0,text:STRINGS.kdaSubTitle,filter:"kda",class:"leaderbordKdaButton"},{id:1,text:STRINGS.killSubTitle,filter:"killTotal",class:"leaderbordKillsButton"},{id:2,text:STRINGS.deathSubTitle,filter:"gameTotal",class:"leaderbordGamesButton"},{id:3,text:STRINGS.massEatenSubTitle,filter:"massTotal",class:"leaderbordMassTotalButton"},{id:4,text:STRINGS.massEatenGameSubTitle,filter:"massAvg",class:"leaderbordMassAvgButton"},{id:5,text:STRINGS.timePlayedSubTitle,filter:"timeTotal",class:"leaderbordTimeButton"}],e=`\n        <div class="buttonTabContainer">${t.map((t=>`\n            <div class="${t.class} buttonTab ${0===t.id?"buttonTabDisabled":"buttonTabActive"}" onclick="leaderboardButtonClicked(${t.id}, '${t.filter}')">\n                <p class="buttonTabText">${t.text}</p>\n            </div>\n        `)).join("")}</div>\n        <div class="leaderboardList"></div>\n    `;(0,c.s)(e,STRINGS.onixBoardTitle,""),await f("kda")}()):fireTimedSwal(STRINGS.tooFastForOnixTitle,STRINGS.tooFastForOnixContent,STRINGS.errorSwalTime,STRINGS.okButton))}async function f(t){const e={kda:(t,e)=>(e.sG?e.sK/e.sG:0)-(t.sG?t.sK/t.sG:0),killTotal:(t,e)=>e.sK-t.sK,gameTotal:(t,e)=>e.sG-t.sG,massTotal:(t,e)=>e.sM-t.sM,timeTotal:(t,e)=>e.sT-t.sT,massAvg:(t,e)=>(e.sG?e.sM/e.sG:0)-(t.sG?t.sM/t.sG:0)},n=Object.values(i.c7).sort(e[t]||e.kda).slice(0,100),r=await Promise.all(n.map(((e,n)=>function(t,e,n){const r=t.u||null;if(!r)return"";if(!o.J[r])return(0,u.Zv)(a.tf.allUsers.child(r),o.J,!0,!0,!0).then((()=>p(r,t,n,e,!0)));return p(r,t,n,e)}(e,n+1,t)))),s=r.join("");$(SELECT.leaderboardList).html(s)}function p(t,e,n,r,i){const a=(0,l.WE)(o.J[t]);if(!a)return"";i&&(0,l.So)(a);let u=function(t,e){switch(e){case"killTotal":return t.sK;case"gameTotal":return t.sG;case"kda":default:return(t.sG?(t.sK/t.sG).toFixed(2)+" ":"0 ")+STRINGS.kdaSubTitle;case"massTotal":return(0,h.nR)(t.sM);case"massAvg":return t.sG?(0,h.nR)(t.sM/t.sG):"0";case"timeTotal":return(0,h.Y7)(t.sT,!1,!1,!1,!0,!0,!1)}}(e,n);const c=a.u===s.tG.uid?["leaderboardItemMe","leaderboardNicknameMe","leaderboardStatisticValueMe"]:["","",""],d=a.ba&&a.ba.u?`<img class="leaderboardBadgeDiv" alt="" src="${secureHTML(a.ba.u)}" tip="${secureHTML(a.ba.t)}">`:"",f=a.n===STRINGS.unnamed?COLORS.defaultColor:secureHTML(a.c);return`\n        <div class="leaderboardItem ${c[0]}">\n            <p class="leaderboardPosition">${r}. </p>\n            ${d}\n            <p class="leaderboardNickname ${c[1]}" style="color: ${f}">${secureHTML(a.n)}</p>\n            <p class="leaderboardStatisticValue ${c[2]}">${secureHTML(u)}</p>\n        </div>\n    `}window.leaderboardButtonClicked=async function(t,e){showPage(t,[SELECT.leaderbordKdaButton,SELECT.leaderbordKillsButton,SELECT.leaderbordGamesButton,SELECT.leaderbordMassTotalButton,SELECT.leaderbordMassAvgButton,SELECT.leaderbordTimeButton],null),await f(e)}},3790:(t,e,n)=>{"use strict";n.d(e,{AG:()=>c,He:()=>u,bn:()=>h,nL:()=>s,t0:()=>l});var r=n(3583),i=n(2886),o=n(3253),a=n(134);async function s(){if($(SELECT.skinBox).length>0)return;const t=`\n        <div class="">\n            <div class="buttonTabContainer skinsTab">\n                <div class="buttonTab buttonTabDisabled skinsVanisButton" onclick="showPage(0, [SELECT.skinsVanisButton, SELECT.skinsImgbbButton, SELECT.skinsGifButton], [SELECT.skinsVanisPage, SELECT.skinsImgbbPage, SELECT.skinsGifPage], showVanisPage)">\n                    <p class="buttonTabText">${STRINGS.vanisTabTitle}</p>\n                </div>\n                <div class="buttonTab buttonTabActive skinsImgbbButton" onclick="showPage(1, [SELECT.skinsVanisButton, SELECT.skinsImgbbButton, SELECT.skinsGifButton], [SELECT.skinsVanisPage, SELECT.skinsImgbbPage, SELECT.skinsGifPage], fetchImgbbSkins)">\n                    <p class="buttonTabText">${STRINGS.imgbbTabTitle}</p>\n                </div>\n                <div class="buttonTab buttonTabActive skinsGifButton" onclick="showPage(2, [SELECT.skinsVanisButton, SELECT.skinsImgbbButton, SELECT.skinsGifButton], [SELECT.skinsVanisPage, SELECT.skinsImgbbPage, SELECT.skinsGifPage], fetchGifSkins)">\n                    <p class="buttonTabText">${STRINGS.gifTabTitle}</p>\n                </div>\n            </div>\n            <div class="skinsVanisPage skinsLibraryList">\n                <div class="buttonTabContainer">\n                    <div class="buttonTab buttonTabDisabled skinsNavAllButton" onclick="showPage(0, [SELECT.skinsNavAllButton, SELECT.skinsNavMeButton, SELECT.skinsNavFavButton], [SELECT.skinsNavAllPage, SELECT.skinsNavMePage, SELECT.skinsNavFavPage], fetchAllSkins)">\n                        <p class="buttonTabText">${STRINGS.vanisTabPublicSkins}</p>\n                    </div>\n                    <div class="buttonTab buttonTabActive skinsNavMeButton" onclick="showPage(1, [SELECT.skinsNavAllButton, SELECT.skinsNavMeButton, SELECT.skinsNavFavButton], [SELECT.skinsNavAllPage, SELECT.skinsNavMePage, SELECT.skinsNavFavPage], fetchMySkins)">\n                        <p class="buttonTabText">${STRINGS.vanisTabMySkins}</p>\n                    </div>\n                    <div class="buttonTab buttonTabActive skinsNavFavButton" onclick="showPage(2, [SELECT.skinsNavAllButton, SELECT.skinsNavMeButton, SELECT.skinsNavFavButton], [SELECT.skinsNavAllPage, SELECT.skinsNavMePage, SELECT.skinsNavFavPage], fetchFavoriteSkins)">\n                        <p class="buttonTabText">${STRINGS.vanisTabFavSkins}</p>\n                    </div>\n                </div>\n                <div class="skinsNavAllPage skinsLibraryList"></div>\n                <div class="skinsNavMePage skinsLibraryList"></div>\n                <div class="skinsNavFavPage skinsLibraryList"></div>\n            </div>\n            <div class="skinsImgbbPage skinsLibraryList"></div>\n            <div class="skinsGifPage skinsLibraryList"></div>\n        </div>\n    `;(0,o.s)(t,STRINGS.skinGalleryTitle,"","",!0),await showVanisPage()}async function u(t,e,n,o){if($(SELECT.boxTitle).text(t),e.length>0&&r.Qj.skinAuth===SETTINGS.sa)return void l(e,o,STRINGS.vanisType);const a=await(0,i.b)(n);a&&(e.push(...a),a.forEach((t=>h(t,o,STRINGS.vanisType))))}function c(t,e,n){$(SELECT.boxTitle).text(t),e.forEach((t=>{$(t).addClass(STRINGS.hidden)})),$(n).removeClass(STRINGS.hidden)}function l(t,e,n){Array.isArray(t)&&0!==t.length&&$(e).find("img").length!==t.length&&t.forEach((t=>{h(t,e,n)}))}function h(t,e,n){let r;if(n===STRINGS.gifType)r={type:n,url:t.u,interval:t.i,frames:t.f,id:t.p};else{if(n===STRINGS.vanisType&&!t.id)return;r=(0,a.$9)(t.id||t.u)}const i=r.type===STRINGS.gifType?secureHTML(r.id):secureHTML(r.url);$(e).append(`\n        <img class="skinItemLibrary beautifulSkin" src="${secureHTML(r.url)}" alt="" tip="${i}" onclick="renderSkin('${encodeURIComponent(stringifierJson(r))}')">\n    `)}window.showVanisPage=async function(){$(SELECT.skinsVanisPage).removeClass(STRINGS.hidden),$(SELECT.skinsImgbbPage).addClass(STRINGS.hidden),$(SELECT.skinsGifPage).addClass(STRINGS.hidden),await fetchAllSkins()}},3973:(t,e,n)=>{"use strict";n.d(e,{D1:()=>u,Es:()=>o,a3:()=>a,g:()=>i,xv:()=>r,yS:()=>s});const r="11.2",i=function(){const t=window.location;if(t.pathname===STRINGS.pathDual)return 2;if(t.pathname===STRINGS.pathSingle)return 3;if(t.hash===STRINGS.pathTest)return 4;return 1}(),o=(new Date).toLocaleDateString(STRINGS.localTime).replaceAll("/",""),a=u(),s={resize:0,updated:null,versionMandatory:3e3};function u(){let t=localStorage.getItem("MachineId");return t||(t=crypto.randomUUID(),localStorage.setItem("MachineId",t)),t}},7356:()=>{window.COLORS={defaultColor:"#ffffff",onlineColor:"#32e34a",offlineColor:"#e33247"}},9726:()=>{window.IMAGES={anonymousSkin:"https://i.ibb.co/NtMpMBJ/i.png",transparentSkin:"https://i.ibb.co/g9Sj8gK/i.png",vanisSkin:"https://skins.vanis.io/s/vanis1",dualMode:"https://i.ibb.co/gSkk94N/i.png",singleMode:"https://i.ibb.co/Lr248FQ/i.png",vanillaMode:"https://i.ibb.co/BnCQYBY/i.png",testMode:"https://i.ibb.co/n6MRF89/i.png",undefMode:"https://i.ibb.co/g9Sj8gK/i.png",onixLogo:"https://i.ibb.co/PD00GGV/onix.png",imageAddVanis:"/img/skin-add.png"}},2125:()=>{window.LIBRARIES={css:"https://raw.githubusercontent.com/Fohz67/Onix-Dist/main/prod/vanilla/styles.css",onixDual:"https://vanis.io/onix-dual",onixSingle:"https://vanis.io/onix-single",fontAwesome6:"https://pro.fontawesome.com/releases/v6.0.0-beta3/css/all.css",urlMySkins:"https://cors-proxy.fringe.zone/https://skins.vanis.io/api/me/skins",urlFavoriteSkins:"https://cors-proxy.fringe.zone/https://skins.vanis.io/api/me/favorites"}},6432:()=>{window.STRINGS={onix:"Onix",onixLoginTitle:"Onix account",loginCreateAccount:"Log in or create your account",dataSafe:"Your data is safe and secured",passwordLength:"Your password must be at least 7 characters long",emailPlaceholder:"Email",logout:"Logout",passwordPlaceholder:"Password",resetPasswordText:"Reset password",resetPasswordUrl:"https://deltavanis.eu/reset/password",lostPasswordText:"I lost my password",lostPasswordTitle:"Lost password ?",lostPasswordLabel:"Please contact Fohz on Discord (username: fohz67) with your account's UUID to reset your password, he will send you an email to reset your password. Fohz is the exclusive administrator of Onix and the only person authorized to assist with password resets. Beware of fraud! Anyone else claiming to be able to act on your account is lying.",lostPasswordTime:2e4,buttonLogin:"Login/create (automatic)",tooShortPassword:"Password too short...",errorHasOccurred:"An error has occurred...",anErrorOccurred:"An error occurred: ",incorrectPassword:"Incorrect password...",loadingButton:"Loading...",bannedContent:"You've been banned from Onix by Fohz. Reason:",bannedMessage:"You know why.",bannedSuccessContent:"has been banned from Onix",onixUpdate:"Onix update",onixSubTitleUpdate:"For security reasons, it is mandatory to do this update",onixButtonUpdate:"Update Onix",badVersion:"Wrong version of Onix, please update immediately.",updateLink:"https://deltavanis.eu/install/script.user.js",kickedMessage:"KICKED_FORCE",kickedSuccessContent:"has been kicked from Onix",uidLength:28,supportDiscordLink:"https://discord.gg/cJByExsnub",discordInviteLink:"https://discord.gg/wthDcUb6nY",notEnoughLevel:"You must be at least level 5 to use Dual, otherwise the CAPTCHA blocks the connection",onixRiseMessage:"Onix Dual uses Rise, the original system created by Zimek",singleModeDetails:"Onix Single is a totally custom client with special features",defaultGif:"Folder",defaultGifMax:"Frames",defaultGifTimer:"Interval",userModalTitle:"Players list",anonymousDetails:"Hides all your profile informations",tooFastForOnixTitle:"Hooo !",tooFastForOnixContent:"You are too fast for Onix, wait for all data to be loaded",okButton:"OK",onlinePlayersTitle:"Online players",offlinePlayersTitle:"Offline players",meProfileTitle:"My profile",spectator:"Spectator",spectatorOn:"Spectator on ",onWord:" on ",online:"Online",offline:"Offline",now:"Now",anonymous:"Anonymous",unnamed:"Unnamed",lobby:"Lobby",lobbies:" Lobbies",defaultPid:0,defaultObject:"{}",defaultSkinAuth:"s5fKDiOD5hSR-DVZGs5u",localTime:"fr-FR",timeToOnline:6e5,onlineUsersTip:"Online users:",dailyOnlineUsersTip:"Last 2 hours users:",checked:"checked",unchecked:"unchecked",hidden:"hidden",defaultSwalTitle:"Onix info",defaultSwalContent:"Important information on discord, please check it now",defaultSwalIcon:"warning",errorSwalTitle:"Error",success:"Success",errorSwalTime:3e3,shortSwalTime:1e3,modeSingle:"Single",modeDual:"Dual",modeVanilla:"Vanilla",modeTest:"Test",modeSinglePage:"Onix - Single",modeDualPage:"Onix - Dual",modeVanillaPage:"Onix - Vanilla",modeTestPage:"Onix - Test",startVanisURL:"https://skins.vanis.io/s/",startImgbbURL:"https://i.ibb.co/",vanisType:"vanis",imgbbType:"imgbb",gifType:"gif",typeStatus:"status",typeTime:"time",typeGif:"gif",typeAnonymous:"anonymous",typeColor:"color",typeServer:"server",typePid:"pid",typePidDual:"pid2",typeSpectator:"spec",typeSkin:"skin",typeHotkeys:"hotkeys",typeSettings:"settings",typeSkins:"skins",typeGifActivated:"gifActivated",typeDualNickname:"dualNickname",typeDualSkin:"dualSkin",typeNickname:"nickname",typeSkinUrl:"skinUrl",typeSelectedIndex:"selectedSkinIndex",typeMachineId:"MachineId",dbStatus:"st",dbTime:"t",dbName:"n",dbNameDual:"n2",dbGif:"g",dbColor:"c",dbServer:"se",dbPid:"p",dbPid2:"p2",dbAnonymous:"a",dbSkinAuth:"sa",dbBadge:"ba",dbHat:"h",dbSkin:"s",dbMachineId:"m",dbSkinIndex:"ss",dbSkinGifActivated:"ga",idbXp:"xp",idbKill:"kills",idbTime:"time",idbMass:"mass",idbGame:"game",perkTypeKill:"kill",perkTypeTime:"time",perkTypePushBadge:"badge",perkTypePushHat:"hat",functionPushBadgeName:"pushBadge",functionPushHatName:"pushHat",perkSelected:"Selected",perkNotSelected:"NotSelected",perkOwner:"Owner",perkNotOwner:"NotOwner",snapshotNotExist:"Snapshot does not exist.",undefinedUser:"Undefined user or UID.",pathDual:"/onix-dual",pathSingle:"/onix-single",pathTest:"#test",skinId:"Skin ID: ",noSkinId:"No skin ID",defaultSkinArray:'["https://skins.vanis.io/s/Qkfih2","https://skins.vanis.io/s/Qkfih2"]',nothingToYoink:"Nothing to yoink",yoinkText:"Yoink",errorOccurredYoink:"An error occurred while yoinking the skin",skinYoinkedTitle:"Skin yoinked",skinYoinkedText:"The skin has been yoinked, need to refresh the page to save",nothingToCopy:"Nothing to copy",copyText:"Copy",skinCopiedText:"copied",skinCopyTitle:"Skin",copyUid:"Uid",skinHasBeenCopied:"has been copied to the clipboard",nothingToApply:"Nothing to apply",gifActivatedTitle:"GIF activated",gifActivatedText:"You can disable it or change the interval to manage the speed in settings",userDeleted:"This user does not exist or has been deleted",userNotFound:"User not found",userProfile:"User profile",userProfileMode:"Mode: ",userProfileLevel:"Vanis level: ",userProfileServer:"Server: ",zeroSecond:"0s",onixBoardTitle:"Onixboard top 100",profileAndStatsTitle:"Profile & stats",xpChartId:"xpChart",xpChartType:"line",xpChartLabel:"XP",xpChartBackgroundColor:"rgba(230,255,0,0.2)",xpChartBorderColor:"rgb(230,255,0)",killsChartId:"killsChart",killsChartType:"line",killsChartLabel:"Kills",killsChartBackgroundColor:"rgba(250,26,72,0.2)",killsChartBorderColor:"rgb(250,26,72)",gameChartId:"gameChart",gameChartType:"line",gameChartLabel:"Game played",gameChartBackgroundColor:"rgba(0,112,255,0.2)",gameChartBorderColor:"rgb(0,112,255)",timeChartId:"timeChart",timeChartType:"line",timeChartLabel:"Time (in seconds)",timeChartBackgroundColor:"rgba(185,14,255,0.2)",timeChartBorderColor:"rgb(185,14,255)",massChartId:"massChart",massChartType:"line",massChartLabel:"Mass",massChartBackgroundColor:"rgba(58,255,33,0.2)",massChartBorderColor:"rgb(58,255,33)",gridColor:"rgba(212,147,255,0.07)",chartSyncMessage:"If you have changed computers several days, or deleted your cookies or histories, you can synchronize your data from the database",syncAllMetrics:"Sync all metrics",resetAllStatistics:"Reset all statistics",metricsSyncing:"Metrics syncing",metricsSyncingMessage:"Please wait for your metrics to sync, the page will reload after...",metricsSyncingTime:99999,metricsError:"Metrics error",metricsErrorMessage:"You don't have any metrics to sync",eventDispatcherSyncMetrics:"metricsSync",connected:"Connected",disconnected:"Disconnected",toDiscord:"to Discord",accountEmail:"Account email :",verifiedEmail:"Verified email: ",lastSignInDate:"Last sign in date :",creationDate:"Creation date :",yes:"Yes",no:"No",stepsVanisToken:'Follow these steps to get your token:\n1: Go to https://skins.vanis.io\n2: Press F12\n3: Write in the console localStorage.getItem("sessionToken")\n4: Copy the result\n5: Past it here.\n\nIf the token does not work anymore, repeat the operation again.\n\nWarning: If this token is leaked, please immediately go to https://skins.vanis.io and log out and log back in, this will reset the token.',placeholderVanisToken:"Vanis skins token",skinTokenText:"Skin token",massAteTitle:"Mass ate metrics",timePlayedTitle:"Time played metrics",gamePlayedTitle:"Games played metrics",killsTitle:"Kills metrics",xpTitle:"XP metrics",statisticsSectionTitle:"Statistics",kdaExplanation:"The KDA represents the number of kills in relation to the number of deaths",kdaSubTitle:"K/D",massEatenSubTitle:"Mass eaten",massEatenGameSubTitle:"Mass eaten / game",timePlayedSubTitle:"Time played",timePlayedGameSubTitle:"Time played / game",deathSubTitle:"Deaths",killSubTitle:"Kills",typeStatKill:"sK",typeStatGame:"sG",typeStatMass:"sM",typeStatTime:"sT",permanentDeleteStatisticsAsk:"Do you want to permanently delete your statistics ?",confirmReset:"Confirm reset ?",deletingStatistics:"Deleting your statistics failed: ",statisticsSuccessfullyDeleted:"Your statistics have been successfully deleted",titleToolsModal:"Perks and back-ups",tipUserModal:"Onix users",tipProfileModal:"Account",tipOnixboardModal:"Onixboard",tipPerksAndBackupsModal:"Perks and back-ups",tipGallerySkin:"Skins gallery",perksTabTitle:"Perks",backupsTabTitle:"Backups",coloredNameSectionTitle:"Colored name",coloredNameSectionContent:"To have your official Vanis.io color, put #ffffff.",gifSectionTitle:"GIF Skin",gifSectionContent:"To have a GIF skin, send the GIF in DM to Fohz, the file must be less than 10MB.",gifSectionSwitch:"GIF activation",gifTypePath:"p",gifTypeFrames:"f",gifTypeInterval:"i",hatsSectionStatisticsTitle:"Statistics",hatsSectionStatisticsSubtitle:"Free for all, play to get them !",hatsSectionTricksplitTitle:"Tricksplit.io",hatsSectionTricksplitSubtitle:"$2 USD per hat.",hatsSectionContributorsTitle:"Contributors",hatsSectionContributorsSubtitle:"Only the elite have these hats... but who are they...?",hatsSectionPremiumTitle:"Premium",hatsSectionPremiumSubtitle:"$10 USD per full custom hat.",hatsSectionContent:"Click to toggle. You can't adjust the opacity now, soon yes.",hatsSectionTitle:"Hats",hatsSectionSubtitle:"You can now buy hats, contact @fohz67 on discord.",badgeSectionStatsTitle:"Statistics",badgeSectionStatsSubtitle:"Free for all, play to get them !",badgeSectionOnixTitle:"Onix",badgeSectionOnixSubtitle:"Official Onix badges, not obtainable.",badgeSectionClanTitle:"Clans",badgeSectionClanSubtitle:"Each clan can have its own badge.",badgeSectionPremiumTitle:"Premium",badgeSectionPremiumSubtitle:"$4 USD per full custom badge.",badgeSectionContent:"Click to toggle. Combined with the Vanis badge.",badgeSectionTitle:"Badges",badgeSectionSubtitle:"You can now buy badges, contact @fohz67 on discord.",badFolderFormat:"Bad folder format, use only letter or number",badFrameNumber:"The frames number must be higher than 1 and lower than 1001",badIntervalNumber:"The interval must be higher than 5 and lower than 1001",badColorSelected:"You must select a real color (e.g: #ffffff)",badColorSelectedTitle:"Bad color selected",folder:"folder",format:"format",badFormat:"Bad",frameNumber:"frames number",intervalNumber:"interval number",applyButton:"Apply",deleteButton:"Delete",confirmDeletion:"Are you sure ?",confirmContent:"By deleting this you will no longer be able to recover it",successDeletedBackup:"The backup have been successfully deleted",errorDeletedBackup:"You were unable to delete your backup, please try again",confirmApply:"Apply this backup ?",confirmApplyContent:"By applying this backup, your current data will be replaced by that of the backup. Do you want to continue?",backupUpdated:"Your current game configuration has been modified, the game will be restarted for synchronization",sorryCantPerform:"Sorry, you can't perform this action",actionBlocked:"Action blocked",invalidCommand:"The command is corrupted or invalid",commandNotExist:"This command not exist",errorIcon:"error",successIcon:"success",exempleAlertTitle:"Alert",exempleAlertContent:"This is an alert",titleSwalTestAlert:"[TEST]",alertSent:"Alert sent",alertSentContent:"All users will receive this alert in 5 seconds",commandAlert:"alert",commandTestAlert:"testalert",commandBan:"ban",commandKick:"kick",commandUid:"Bad or missing UUID",cantBanBotTitle:"Banning user failed",cantBanBotContent:"You cannot ban bot",cantKickBotTitle:"Kicking user failed",cantKickBotContent:"You cannot kick bot",loadingStart:"Starting...",skinGalleryTitle:"Skins gallery",vanisTabTitle:"Vanis",vanisTabPublicSkins:"Public skins",vanisTabFavSkins:"Favorites",vanisTabMySkins:"Your skins",imgbbTabTitle:"IMGBB",gifTabTitle:"GIFs",slash:"/",spotifyAuthUrl:`https://accounts.spotify.com/authorize?client_id=298ab95ec23140f6837a07c741289f9d&response_type=token&redirect_uri=${window.location}&scope=user-read-playback-state user-modify-playback-state`,spotifyPromo:"Connect your Spotify account to have the Spotify player in the game HUD while you're playing !",spotifyUsername:"Username: ",spotifyId:"Spotify ID: ",spotifyAccount:"Spotify account",spotifyLogin:"Login to Spotify"}},9460:(t,e,n)=>{"use strict";n.d(e,{x:()=>d,t:()=>f});var r=n(3973),i=n(4046),o=n(7576),a=n(4861),s=n(3583),u=n(5543),c=n(8196);var l=n(8944),h=n(206);const d={users:!1,statistics:!1,metrics:!1};async function f(){$(SELECT.loadingText).text("Fetching data...");try{await(0,i.h)(),function(){const t={a:null,ba:null,g:null,c:null,h:null,l:null,m:null,n:null,n2:null,p:null,s:null,s2:null,se:null,st:null,u:null};a.tf.allUsers.on("child_changed",(async e=>{if(!e.exists())return console.error(STRINGS.snapshotNotExist);const n=e.val(),o=e.key;if(!n||!o)return console.error(STRINGS.undefinedUser);n.u=o,(0,u.So)(n),r.g>1&&(0,c._)(n,i.J[o]||t),i.J[o]=n,o===s.tG.uid&&await(0,u.EV)(!1)}))}(),await(0,o.sz)(),r.g>1&&await(0,l.yE)(),a.tf.allBroadcasts.on("value",(t=>{if(!t.exists())return;const e=t.val();Object.keys(e).forEach((t=>{const n=e[t];n&&(0,h.C)(n.t,n.c,n.i,n.tm)}))}))}catch(t){console.error(t)}}},1566:(t,e,n)=>{"use strict";n.d(e,{Gk:()=>o,QO:()=>u,Zv:()=>a,et:()=>l,hc:()=>r,nZ:()=>s,re:()=>i,yo:()=>c});let r={},i={},o={};async function a(t,e,n=!1,r=!1,i=!1,o=null){function a(t,n){e[n]=t,e[n].u=n}if(0===Object.keys(e).length||r)try{const r=await t.once("value");if(!r.exists())return console.error(STRINGS.snapshotNotExist);n?function(t){const e=t.val();i?a(e,t.key):Object.keys(e).forEach((t=>{a(e[t],t)}))}(r):"function"==typeof o?o(r.val()):e=r.val()}catch(t){console.error(t)}}function s(t,e,n){return t?Object.entries(t).map((([t,r])=>n&&(r.i<n[0]||r.i>n[1])?"":e(r,t))).join(""):""}function u(t){r=t}function c(t){i=t}function l(t){o=t}},8944:(t,e,n)=>{"use strict";n.d(e,{Ej:()=>c,yE:()=>l});var r=n(4861),i=n(3973),o=n(9460),a=n(7492);let s={},u={g:0,k:0,m:0,t:0,x:0},c={g:0,k:0,m:0,t:0,x:0,d:0};function l(){return new Promise(((t,e)=>{r.tf.meMetrics.child(i.Es).once("value").then((async n=>{if(n.exists()){const e=n.val();Object.keys(e).forEach((t=>{const n=e[t];t===i.a3?s={g:Number(n.g||0)||0,k:Number(n.k||0)||0,m:Number(n.m||0)||0,t:Number(n.t||0)||0,x:Number(n.x||0)||0}:(u.g+=Number(n.g||0)||0,u.k+=Number(n.k||0)||0,u.m+=Number(n.m||0)||0,u.t+=Number(n.t||0)||0,u.x+=Number(n.x||0)||0)})),await h(),t()}else s={g:0,i:null,k:0,m:0,t:0,x:0},await h(),e(STRINGS.snapshotNotExist)})).catch((t=>{e(t)}))}))}async function h(){await async function(){const t=[getSpecificMetrics(STRINGS.idbXp,i.Es).then((t=>t||0)).catch((()=>0)),getSpecificMetrics(STRINGS.idbKill,i.Es).then((t=>t||0)).catch((()=>0)),getSpecificMetrics(STRINGS.idbTime,i.Es).then((t=>t||0)).catch((()=>0)),getSpecificMetrics(STRINGS.idbGame,i.Es).then((t=>t||0)).catch((()=>0)),getSpecificMetrics(STRINGS.idbMass,i.Es).then((t=>t||0)).catch((()=>0))];Promise.all(t).then((async([t,e,n,o,s])=>{await(0,a.Mh)(r.tf.meMetrics.child(i.Es).child(i.a3),{x:t,k:e,t:n,g:o,m:s},!1)})).catch((t=>{console.error(t)}))}(),o.x.metrics=!0}window.fetchAllMetrics=function(){return fireTimedSwal(STRINGS.metricsSyncing,STRINGS.metricsSyncingMessage,STRINGS.metricsSyncingTime,!1),new Promise(((t,e)=>{r.tf.meMetrics.once("value").then((t=>{if(!t.exists())return fireTimedSwal(STRINGS.metricsError,STRINGS.metricsErrorMessage,STRINGS.errorSwalTime,STRINGS.okButton);const e=t.val();Object.keys(e).forEach((t=>{if(t!==i.Es){const n=e[t];c={g:0,k:0,m:0,t:0,x:0,d:0},Object.keys(n).forEach((t=>{const e=n[t];c.g+=Number(e.g||0)||0,c.k+=Number(e.k||0)||0,c.m+=Number(e.m||0)||0,c.t+=Number(e.t||0)||0,c.x+=Number(e.x||0)||0})),c.d=t,window.dispatchEvent(new CustomEvent(STRINGS.eventDispatcherSyncMetrics))}})),setTimeout((()=>window.location.reload()),STRINGS.shortSwalTime)})).catch((t=>{e(t)}))}))}},134:(t,e,n)=>{"use strict";n.d(e,{$9:()=>s,TW:()=>l,sY:()=>u});var r=n(3973),i=n(4861),o=n(7492),a=n(4684);function s(t){if(t){if(t.includes(STRINGS.startVanisURL)){const e=t.split("/");return{type:STRINGS.vanisType,url:t,id:e[e.length-1]}}if(t.includes(STRINGS.startImgbbURL)){const e=t.split("/");return{type:STRINGS.imgbbType,url:t,id:e[e.length-2]}}return 6===t.length?{type:STRINGS.vanisType,url:STRINGS.startVanisURL+t,id:t}:{type:"",url:"",id:""}}return{type:"",url:"",id:""}}async function u(t,e){t===IMAGES.imageAddVanis&&1===r.g?await c(IMAGES.vanisSkin,e):function(t,e){const n=new Image;n.onload=async()=>{await c(t,e)},n.onerror=async()=>{await c(IMAGES.transparentSkin,e)},n.src=t}(t,e)}async function c(t,e){e&&await(0,o.p6)(i.tf.meUser,STRINGS.typeSkin),1===r.g&&$(SELECT.skinProfile).attr("src",secureHTML(t))}function l(){let t="[";$(SELECT.skinElem).each((function(){const e=$(this).attr("src");e&&e!==IMAGES.imageAddVanis&&("["!==t&&(t+=","),t+='"'+e+'"')})),t+="]",(0,a.n)(STRINGS.typeSkins,t)}window.copySkin=function(t,e){navigator.clipboard.writeText(t).then((()=>{fireTimedSwal(`${e} ${STRINGS.skinCopiedText}`,`${e} ${STRINGS.skinHasBeenCopied}`,STRINGS.shortSwalTime,!1)})).catch((t=>{fireTimedSwal(STRINGS.errorSwalTitle,STRINGS.anErrorOccurred+t.message,STRINGS.errorSwalTime,STRINGS.okButton)}))},window.yoinkSkin=function(t){const e=(0,a.$)(STRINGS.typeSkins,STRINGS.defaultSkinArray);let n=parseJson(e);Object.keys(n).length>0?(n.push(t),(0,a.n)(STRINGS.typeSkins,stringifierJson(n)),fireTimedSwal(STRINGS.skinYoinkedTitle,STRINGS.skinYoinkedText,STRINGS.shortSwalTime,!1)):fireTimedSwal(STRINGS.errorSwalTitle,STRINGS.errorOccurredYoink,STRINGS.errorSwalTime,STRINGS.okButton)}},8196:(t,e,n)=>{"use strict";n.d(e,{_:()=>h});var r=n(3583),i=n(1566),o=n(4861),a=n(4046),s=n(5543),u=n(134),c=n(7492);async function l(t,e,n,i,o){const s=parseJson(decodeURIComponent(t)),u=a.J[r.tG.uid];if(Object.keys(s).length>0){const t=$(`.${e+s.i}`),r=t.hasClass(`${e}${STRINGS.perkSelected}`);s.o&&(s.o=null),s.e&&(s.e=null),u[o]||(u[o]={}),r?(s.u&&(s.u=null),t.removeClass(`${e}${STRINGS.perkSelected}`).addClass(`${e}${STRINGS.perkNotSelected}`)):t.addClass(`${e}${STRINGS.perkSelected}`).removeClass(`${e}${STRINGS.perkNotSelected}`),u[o].u=s.u||null,Object.values(i).forEach((t=>{if(t.i!==s.i){$(`.${e}${t.i}`).removeClass(`${e}${STRINGS.perkSelected}`).addClass(`${e}${STRINGS.perkNotSelected}`)}})),await(0,c.Mh)(n,s,!1)}}function h(t,e){const n=(0,u.$9)(t.s),i=(0,u.$9)(t.s2);function o(e,n){currentColorsPlayersList[e]={u:t.u?t.u:null,c:t.c?t.c:null,ba:t.ba?t.ba:null,g:t.g?t.g:null,h:t.h?t.h:null,s:n.type===STRINGS.imgbbType?n.url:null}}function a(){t.p&&o(t.n.trim()+t.p,n),t.p2&&o(t.n2.trim()+t.p2,i)}-1!==e?function(t,e,n,i){let o=!1;const a=t.se===r.Qj.server&&r.Qj.server!==STRINGS.lobby,u=DELTA?.playerManager?.players?.get(t.p),c=DELTA?.playerManager?.players?.get(t.p2),l=(0,s.AN)(t.n,e.n),h=(0,s.AN)(t.n2,e.n2),d=(0,s.AN)(t.p,e.p),f=(0,s.AN)(t.p2,e.p2),p=(0,s.AN)(t.s,e.s),g=(0,s.AN)(t.s2,e.s2),m=(0,s.AN)(t.st,e.st),v=(0,s.AN)(t.c,e.c),y=(0,s.AN)(t.g,e.g),b=(0,s.xW)(t.ba,e.ba),_=(0,s.xW)(t.h,e.h);(l||d||m||v)&&(a&&u&&(u.nameFromServer===e.n||u.name===e.n)&&(u.setNameSprite(t.n,t.c),u.updateMinimapColor(parseInt(t.c.replaceAll("#",""),16),!0,t.p,t.n),u.name=u.nameFromServer=t.n),o=!0);(h||f||m||v)&&(a&&c&&(c.nameFromServer===e.n2||c.name===e.n2)&&(c.setNameSprite(t.n2,t.c),c.updateMinimapColor(parseInt(t.c.replaceAll("#",""),16),!0,t.p2,t.n2),c.name=c.nameFromServer=t.n2),o=!0);if(y){if(a&&u&&(u.nameFromServer===e.n||u.name===e.n))if(window.gifManager.stop(t.p),t.g&&t.g.a&&t.g.p&&t.g.f)gifManager.check(t.n,t.p,t.g);else{const e=(n.type===STRINGS.imgbbType?t.s:STRINGS.startVanisURL+t.s)||"";u.setSkin(e)}if(a&&c&&(c.nameFromServer===e.n2||c.name===e.n2))if(window.gifManager.stop(t.p2),t.g&&t.g.a&&t.g.p&&t.g.f)gifManager.check(t.n2,t.p2,t.g);else{const e=(i.type===STRINGS.imgbbType?t.s2:STRINGS.startVanisURL+t.s2)||"";c.setSkin(e)}o=!0}if(p||m){if((!t.g||t.g&&!t.g.p)&&a&&u&&(u.nameFromServer===e.n||u.name===e.n)){const e=(n.type===STRINGS.imgbbType?t.s:STRINGS.startVanisURL+t.s)||"";u.setSkin(e)}o=!0}if(g||m){if((!t.g||t.g&&!t.g.p)&&a&&c&&(c.nameFromServer===e.n2||c.name===e.n2)){const e=(i.type===STRINGS.imgbbType?t.s2:STRINGS.startVanisURL+t.s2)||"";c.setSkin(e)}o=!0}(b||_)&&(o=!0);return o}(t,e,n,i)&&a():a()}window.pushBadge=async function(t){await l(t,STRINGS.perkTypePushBadge,o.tf.meBadge,i.hc,STRINGS.dbBadge)},window.pushHat=async function(t){await l(t,STRINGS.perkTypePushHat,o.tf.meHat,i.re,STRINGS.dbHat)}},7492:(t,e,n)=>{"use strict";n.d(e,{Mh:()=>c,p6:()=>l,_s:()=>u,Hz:()=>s});var r=n(5350),i=n(3583),o=n(4861),a=n(134);async function s(){$(SELECT.loadingText).text("Pushing data..."),await async function(){const t=(0,a.$9)($(SELECT.skinUrl)?$(SELECT.skinUrl).val():null),e=(0,a.$9)(SETTINGS.s2),n=$(SELECT.level).length>0?$(SELECT.level).text().trim().match(/\d+/)[0]:"0",r={l:parseInt(n),m:i.Qj.mode,n:SETTINGS.n,n2:SETTINGS.n2,s:t.type===STRINGS.vanisType?t.id:t.url,s2:e.type===STRINGS.vanisType?e.id:e.url,se:i.Qj.server,st:(new Date).getTime()};window.discordId&&(r.d=window.discordId),await c(o.tf.meUser,r,!1)}(),await async function(){await c(o.tf.meBackupsItem,{skins:SETTINGS.skins,hotkeys:SETTINGS.hotkeys,settings:SETTINGS.settings,d:SETTINGS.d,m:SETTINGS.m,n:SETTINGS.n,n2:SETTINGS.n2,s:SETTINGS.s,s2:SETTINGS.s2,ss:SETTINGS.ss},!1)}()}async function u(t){if(r.A)try{await t.remove()}catch(t){console.error(t)}}async function c(t,e,n=!1){if(r.A)try{n?await t.set(e):await t.update(e)}catch(t){console.error(t)}}async function l(t,e){let n={};const r={status:STRINGS.dbStatus,time:STRINGS.dbTime,nickname:STRINGS.dbName,dualNickname:STRINGS.dbNameDual,color:STRINGS.dbColor,server:STRINGS.dbServer,pid:STRINGS.dbPid,pid2:STRINGS.dbPid2};if(e===STRINGS.typeStatus||e===STRINGS.typeTime)n[r[e]]=(new Date).getTime();else if(e===STRINGS.typeNickname||e===STRINGS.typeDualNickname)n[r[e]]=SETTINGS[r[e]];else if(e===STRINGS.typeGif)n.g=parseJson(stringifierJson(i.Qj.gif)),n.g.a=i.Qj.gif.a===STRINGS.checked?1:0;else if(e===STRINGS.typeServer||e===STRINGS.typePid||e===STRINGS.typePidDual||e===STRINGS.typeColor)n[r[e]]=i.Qj[e];else if(e===STRINGS.typeSpectator)n.se=STRINGS.spectatorOn+i.Qj.server;else if(e===STRINGS.typeSkin){const t=(0,a.$9)($(SELECT.skinUrl)?$(SELECT.skinUrl).val():null);n.s=t.type===STRINGS.vanisType?t.id:t.url}else if(e===STRINGS.typeDualSkin){const t=(0,a.$9)(SETTINGS.s2);n.s2=t.type===STRINGS.vanisType?t.id:t.url}await c(t,n,!1)}},2886:(t,e,n)=>{"use strict";n.d(e,{b:()=>a});var r=n(4861),i=n(3790);let o={all:[],me:[],fav:[],imgbb:[],gif:[]};async function a(t){try{const e=await fetch(t,{method:"GET",headers:{Authorization:"Vanis "+SETTINGS.sa,Origin:"https://skins.vanis.io/"}});return e.ok?await e.json():(console.error(e),null)}catch(t){return console.error(t),null}}async function s(t,e,n,r){if(n.length>0)return void(0,i.t0)(n,r,t);const o=await e.once("value");if(o.exists()){const e=o.val();Object.values(e).forEach((t=>n.push(t))),(0,i.t0)(n,r,t)}}window.fetchAllSkins=async function(){if($(SELECT.boxTitle).text(STRINGS.vanisTabPublicSkins),o.all.length>0)(0,i.t0)(o.all,SELECT.skinsNavAllPage,STRINGS.vanisType);else for(let t=0;t<=50;t++){const e=await a(`https://cors-proxy.fringe.zone/https://skins.vanis.io/api/public-skins?page=${t}`);e&&(o.all.push(...e),e.forEach((t=>(0,i.bn)(t,SELECT.skinsNavAllPage,STRINGS.vanisType))))}},window.fetchFavoriteSkins=async function(){await(0,i.He)(STRINGS.vanisTabFavSkins,o.fav,LIBRARIES.urlFavoriteSkins,SELECT.skinsNavFavPage)},window.fetchMySkins=async function(){await(0,i.He)(STRINGS.vanisTabMySkins,o.me,LIBRARIES.urlMySkins,SELECT.skinsNavMePage)},window.fetchImgbbSkins=async function(){(0,i.AG)(STRINGS.imgbbTabTitle,[SELECT.skinsVanisPage,SELECT.skinsGifPage],SELECT.skinsImgbbPage),await s(STRINGS.imgbbType,r.tf.allImgbb,o.imgbb,SELECT.skinsImgbbPage)},window.fetchGifSkins=async function(){(0,i.AG)(STRINGS.gifTabTitle,[SELECT.skinsVanisPage,SELECT.skinsImgbbPage],SELECT.skinsGifPage),await s(STRINGS.gifType,r.tf.allGifs,o.gif,SELECT.skinsGifPage)}},7576:(t,e,n)=>{"use strict";n.d(e,{DM:()=>l,MR:()=>h,c7:()=>u,gS:()=>s,sz:()=>c});var r=n(9460),i=n(4861),o=n(4684),a=n(3948);let s={},u={};function c(){return new Promise(((t,e)=>{let n=!1;i.tf.meStatistics.once("value").then((async r=>{if(r.exists()){const e=r.val();n=!!e.b,s={sT:n?0:(Number(e.sT||0)||0)+parseInt((0,o.$)(STRINGS.typeStatTime,"0")),sM:n?0:(Number(e.sM||0)||0)+parseInt((0,o.$)(STRINGS.typeStatMass,"0")),sK:n?0:(Number(e.sK||0)||0)+parseInt((0,o.$)(STRINGS.typeStatKill,"0")),sG:n?0:(Number(e.sG||0)||0)+parseInt((0,o.$)(STRINGS.typeStatGame,"0"))},await d(n),t()}else s={sT:0,sM:0,sK:0,sG:0},await d(n),e(STRINGS.snapshotNotExist)})).catch((t=>{e(t)}))}))}async function l(t){return i.tf.allStatistics.child(t).once("value").then((t=>t.exists()?t.val():null))}function h(t){s=t}async function d(t){await(0,a.ks)(t),r.x.statistics=!0}},3948:(t,e,n)=>{"use strict";n.d(e,{Zf:()=>l,fQ:()=>h,ks:()=>c});var r=n(4861),i=n(7576),o=n(3973),a=n(7492),s=n(4684),u=n(6092);async function c(t){t&&(i.gS.b=null),await(0,a.Mh)(r.tf.meStatistics,i.gS,!1),h()}function l(){const t=$(SELECT.statTime).length?(0,u.st)($(SELECT.statTime).text().split(": ")[1]):0,e=$(SELECT.statScore).length?(0,u.Cl)($(SELECT.statScore).text().split(": ")[1]):0,n=$(SELECT.statKills).length?parseInt($(SELECT.statKills).text().split(": ")[1],10):0;i.gS.sT+=t,i.gS.sM+=e,i.gS.sK+=n,i.gS.sG+=1,localStorage.setItem(STRINGS.typeStatTime,(parseInt((0,s.$)(STRINGS.typeStatTime,"0"))+t).toString()),localStorage.setItem(STRINGS.typeStatMass,(parseInt((0,s.$)(STRINGS.typeStatMass,"0"))+e).toString()),localStorage.setItem(STRINGS.typeStatKill,(parseInt((0,s.$)(STRINGS.typeStatKill,"0"))+n).toString()),localStorage.setItem(STRINGS.typeStatGame,(parseInt((0,s.$)(STRINGS.typeStatGame,"0"))+1).toString()),o.yS.updated=(new Date).getTime()}function h(){(0,s.n)(STRINGS.typeStatKill,0),(0,s.n)(STRINGS.typeStatTime,0),(0,s.n)(STRINGS.typeStatGame,0),(0,s.n)(STRINGS.typeStatMass,0)}},4046:(t,e,n)=>{"use strict";n.d(e,{J:()=>u,h:()=>c});var r=n(4861),i=n(3973),o=n(9460),a=n(5543),s=n(8196);let u={};function c(){return new Promise(((t,e)=>{const n=(new Date).getTime()-72e5;r.tf.allUsers.orderByChild(STRINGS.dbStatus).startAt(n).once("value").then((n=>{if(!n.exists())return e(STRINGS.snapshotNotExist);const r=n.val();Object.keys(r).forEach((t=>{const e=r[t];e&&(e.u=t,(0,a.So)(e),i.g>1&&(0,s._)(e,-1),u[t]=e)})),o.x.users=!0,t()})).catch((t=>{e(t)}))}))}},5543:(t,e,n)=>{"use strict";n.d(e,{xW:()=>m,AN:()=>g,_x:()=>p,WE:()=>d,EV:()=>f,So:()=>h});var r=n(4046),i=n(3583),o=n(4861),a=n(3973),s=n(7492),u=n(206),c=n(2649);function l(t){t===STRINGS.kickedMessage&&a.g>1?(DELTA.setText("You were kicked by Fohz, respawning..."),DELTA.actions.join(),setTimeout((()=>DELTA.setText("")),3e3)):(0,c.HN)(`${STRINGS.bannedContent} ${t}`)}function h(t){t.n||(t.n=STRINGS.unnamed),t.n2||(t.n2=STRINGS.unnamed),t.c&&t.c.includes("#")||(t.c=COLORS.defaultColor),t.p||(t.p=STRINGS.defaultPid),t.p2||(t.p2=STRINGS.defaultPid)}function d(t){if(1===t.a){const e=parseJson(stringifierJson(t));return e.ba=null,e.c=COLORS.defaultColor,e.g=null,e.h=null,e.l=0,e.m=STRINGS.anonymous,e.n=STRINGS.anonymous+" #"+Math.floor(1e3*Math.random()),e.n2=null,e.s=IMAGES.anonymousSkin,e.s2=null,e}return t}async function f(t){$(SELECT.loadingText).text("Validating user...");const e=parseJson(stringifierJson(r.J[i.tG.uid])),n=e?.b||!1;if(i.tG.isAdmin=e?.ia||!1,window.isAdmin=i.tG.isAdmin,t&&(i.Qj.color=e?.c||i.Qj.color,i.Qj.gif=e?.g||i.Qj.gif,i.Qj.anonymous=1===e?.a?STRINGS.checked:STRINGS.unchecked,i.Qj.gif.a=0===e?.g?.a?STRINGS.unchecked:STRINGS.checked),n&&!i.tG.isAdmin)return l(n);a.g>1&&DELTA.setText(""),e||await(0,s.p6)(o.tf.meUser,STRINGS.typeStatus)}function p(t,e=0){let n;switch(e){case 1:n=STRINGS.cantBanBotTitle;break;case 2:n=STRINGS.cantKickBotTitle;break;default:n=STRINGS.titleSwalTestAlert}return t.p[0]?((0,u.C)(n,STRINGS.cantBanBotContent,STRINGS.errorIcon,STRINGS.errorSwalTime),!1):t.p[1]&&t.p[1].length===STRINGS.uidLength||((0,u.C)(n,STRINGS.commandUid,STRINGS.errorIcon,STRINGS.errorSwalTime),!1)}function g(t,e){return null!=t&&(!(!t||e)||!(!t||!e)&&!(t===e))}function m(t,e){if(!t)return!1;if(t&&!e)return!0;if(t&&e){return JSON.stringify(t)!==JSON.stringify(e)}return!1}},4861:(t,e,n)=>{"use strict";n.d(e,{C3:()=>u,cX:()=>a,tf:()=>s});var r=n(5350),i=n(3583),o=n(3973);let a=null,s={};function u(){try{a=r.A.database(),s=function(t){const e=i.tG.uid,n=t;return{allUsers:n.ref("U"),allStatistics:n.ref("S"),allBadges:n.ref("B"),allHats:n.ref("H"),allBroadcasts:n.ref("Br"),allGifs:n.ref("Sk/g"),allImgbb:n.ref("Sk/i"),meUser:n.ref(`U/${e}`),meGif:n.ref(`U/${e}/g`),meBadge:n.ref(`U/${e}/ba`),meHat:n.ref(`U/${e}/h`),meStatistics:n.ref(`S/${e}`),meBackups:n.ref(`Ba/${e}`),meBackupsItem:n.ref(`Ba/${e}/${o.a3}`),meMetrics:n.ref(`Gr/${e}`)}}(a)}catch(t){throw new Error(t)}}},3374:(t,e,n)=>{"use strict";n.d(e,{S:()=>c});var r=n(5350),i=n(3112);let o=!1;function a(){!function(){const t=document.createElement("div");t.innerHTML=`\n        <div class="signIn">\n           <h2 class="signInTitle gradientTextAnim">${STRINGS.onixLoginTitle}</h2>\n           <h4 class="signInSubTitle">${STRINGS.loginCreateAccount}<br>${STRINGS.dataSafe} <i class="fal fa-lock"></i><br>${STRINGS.passwordLength} <i class="fal fa-key"></i></h4>\n           <form id="login-form" class="signInLoginForm">\n              <input type="email" id="email-input" class="signInLoginEmail" placeholder="${STRINGS.emailPlaceholder}">\n              <input type="password" id="password-input" class="signInLoginPassword" placeholder="${STRINGS.passwordPlaceholder}">\n              <div id="submit-account" class="signInLoginButton">\n                 <p id="submit-text" class="signInLoginButtonText">${STRINGS.buttonLogin}</p>\n              </div>\n           </form>\n        </div>\n    `,document.body.appendChild(t)}(),function(){const t=$(SELECT.submitButton),e={transform:"scale(0.92)",transition:"all 0.3s"},n={transform:"scale(1)",transition:"all 0.3s"},r=()=>{$(SELECT.submitText).text(STRINGS.buttonLogin),t.css("background-color","#caa443")};t.hover((()=>t.css(e)),(()=>t.css(n))),$(SELECT.emailInput).on("input",r),$(SELECT.passwordInput).on("input",r)}(),function(){const t=$(SELECT.submitButton),e=$(SELECT.submitText),n=$(SELECT.emailInput),i=$(SELECT.passwordInput),a=()=>{e.text(STRINGS.loadingButton),t.css("background-color","#584879")},s=n=>{e.text(n),t.css("background-color","#ee3652")},u=()=>{console.log("Successfully logged-in."),o?window.location.reload():$(SELECT.signIn).remove()},c=t=>{"auth/email-already-in-use"===t.code?r.A.auth().signInWithEmailAndPassword(n.val(),i.val()).then(u).catch((()=>s(STRINGS.incorrectPassword))):s(STRINGS.errorHasOccurred)};t.on("click",(()=>{i.val().length>6?(a(),r.A.auth().createUserWithEmailAndPassword(n.val(),i.val()).then(u).catch(c)):s(STRINGS.tooShortPassword)}))}(),(0,i.z)()}var s=n(3583),u=n(4861);async function c(){if($(SELECT.loadingText).text("Loading database..."),await async function(){const t={apiKey:"AIzaSyCc_St6TMlGM6fmeYre_gHjCXYriPc3wtM",authDomain:"delta-client.firebaseapp.com",projectId:"delta-client",storageBucket:"delta-client.appspot.com",messagingSenderId:"68762024822",appId:"1:68762024822:web:c4f0497b6b914ac9ce9857",measurementId:"G-G5YSMYFCXJ",databaseURL:"https://delta-client-default-rtdb.europe-west1.firebasedatabase.app"};if(void 0===r.A)throw new Error("Firebase undefined");await r.A.initializeApp(t)}(),await async function(){await new Promise(((t,e)=>{r.A.auth().onAuthStateChanged((e=>{e?((0,s.Qe)(e),(0,u.C3)(),t()):a()}),e)}))}(),r.A.apps.length<=0)throw new Error("Error with Firebase. Please contact Fohz")}window.firebaseSignOut=function(){r.A.auth().currentUser&&r.A.auth().signOut().then((()=>{o=!0,(0,s.LA)(null)})).catch((t=>console.error(t)))}},1822:(t,e,n)=>{"use strict";function r(){$(SELECT.loadingText).text("Init libraries...");let t=document.createElement("link");t.rel="stylesheet",t.href=LIBRARIES.fontAwesome6,t.crossOrigin="anonymous",document.getElementsByTagName("head")[0].appendChild(t)}function i(){const t=t=>{document.querySelectorAll("."+t).forEach((e=>{e.classList.remove(t),e.classList.add("fal")}))};t("fas"),t("far"),t("fa")}function o(){document.querySelectorAll(SELECT.topBarPlayerContainerButtons).forEach((t=>{t.addEventListener("click",i)}))}n.d(e,{HS:()=>i,Qt:()=>o,d4:()=>r})},7128:(t,e,n)=>{"use strict";n.d(e,{D:()=>o});var r=n(3583),i=n(4684);function o(){const t=n(3760);window.spotifyApi=new t,r.Qj.spotifyStatus[0]=new URLSearchParams(window.location.hash.substring(1)).get("access_token"),r.Qj.spotifyStatus[0]?((0,i.n)("spotify_access_token",r.Qj.spotifyStatus[0]),window.history.replaceState({},document.title,STRINGS.slash),window.spotifyApi.setAccessToken(r.Qj.spotifyStatus[0])):(r.Qj.spotifyStatus[0]=(0,i.$)("spotify_access_token",null),r.Qj.spotifyStatus[0]&&window.spotifyApi.setAccessToken(r.Qj.spotifyStatus[0]))}},206:(t,e,n)=>{"use strict";function r(t=STRINGS.defaultSwalTitle,e=STRINGS.defaultSwalContent,n=STRINGS.defaultSwalIcon,r=STRINGS.errorSwalTime){Swal.fire({position:"top",type:n,title:t,text:e,showConfirmButton:!1,timer:r,padding:"5px 5px 3px 5px",backdrop:!1,customClass:{popup:"alertSwal-popup",title:"alertSwal-title",header:"alertSwal-header",icon:"alertSwal-icon",content:"alertSwal-content"}})}n.d(e,{C:()=>r}),window.fireTimedSwal=function(t,e,n,r){Swal.fire({title:t,text:e,timer:n,showConfirmButton:r})}},1635:(t,e,n)=>{"use strict";n.r(e),n.d(e,{__addDisposableResource:()=>M,__assign:()=>o,__asyncDelegator:()=>I,__asyncGenerator:()=>x,__asyncValues:()=>k,__await:()=>T,__awaiter:()=>p,__classPrivateFieldGet:()=>P,__classPrivateFieldIn:()=>D,__classPrivateFieldSet:()=>R,__createBinding:()=>m,__decorate:()=>s,__disposeResources:()=>L,__esDecorate:()=>c,__exportStar:()=>v,__extends:()=>i,__generator:()=>g,__importDefault:()=>A,__importStar:()=>N,__makeTemplateObject:()=>E,__metadata:()=>f,__param:()=>u,__propKey:()=>h,__read:()=>b,__rest:()=>a,__runInitializers:()=>l,__setFunctionName:()=>d,__spread:()=>_,__spreadArray:()=>S,__spreadArrays:()=>w,__values:()=>y,default:()=>F});var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},o.apply(this,arguments)};function a(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function s(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function u(t,e){return function(n,r){e(n,r,t)}}function c(t,e,n,r,i,o){function a(t){if(void 0!==t&&"function"!=typeof t)throw new TypeError("Function expected");return t}for(var s,u=r.kind,c="getter"===u?"get":"setter"===u?"set":"value",l=!e&&t?r.static?t:t.prototype:null,h=e||(l?Object.getOwnPropertyDescriptor(l,r.name):{}),d=!1,f=n.length-1;f>=0;f--){var p={};for(var g in r)p[g]="access"===g?{}:r[g];for(var g in r.access)p.access[g]=r.access[g];p.addInitializer=function(t){if(d)throw new TypeError("Cannot add initializers after decoration has completed");o.push(a(t||null))};var m=(0,n[f])("accessor"===u?{get:h.get,set:h.set}:h[c],p);if("accessor"===u){if(void 0===m)continue;if(null===m||"object"!=typeof m)throw new TypeError("Object expected");(s=a(m.get))&&(h.get=s),(s=a(m.set))&&(h.set=s),(s=a(m.init))&&i.unshift(s)}else(s=a(m))&&("field"===u?i.unshift(s):h[c]=s)}l&&Object.defineProperty(l,r.name,h),d=!0}function l(t,e,n){for(var r=arguments.length>2,i=0;i<e.length;i++)n=r?e[i].call(t,n):e[i].call(t);return r?n:void 0}function h(t){return"symbol"==typeof t?t:"".concat(t)}function d(t,e,n){return"symbol"==typeof e&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function f(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function p(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function g(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}var m=Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]};function v(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||m(e,t,n)}function y(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function b(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function _(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(b(arguments[e]));return t}function w(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function S(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}function T(t){return this instanceof T?(this.v=t,this):new T(t)}function x(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(t){i[t]&&(r[t]=function(e){return new Promise((function(n,r){o.push([t,e,n,r])>1||s(t,e)}))})}function s(t,e){try{(n=i[t](e)).value instanceof T?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(t){l(o[0][3],t)}var n}function u(t){s("next",t)}function c(t){s("throw",t)}function l(t,e){t(e),o.shift(),o.length&&s(o[0][0],o[0][1])}}function I(t){var e,n;return e={},r("next"),r("throw",(function(t){throw t})),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:T(t[r](e)),done:!1}:i?i(e):e}:i}}function k(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=y(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise((function(r,i){(function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)})(r,i,(e=t[n](e)).done,e.value)}))}}}function E(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var C=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};function N(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&m(e,t,n);return C(e,t),e}function A(t){return t&&t.__esModule?t:{default:t}}function P(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)}function R(t,e,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(t,n):i?i.value=n:e.set(t,n),n}function D(t,e){if(null===e||"object"!=typeof e&&"function"!=typeof e)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof t?e===t:t.has(e)}function M(t,e,n){if(null!=e){if("object"!=typeof e&&"function"!=typeof e)throw new TypeError("Object expected.");var r;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(void 0===r){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose]}if("function"!=typeof r)throw new TypeError("Object not disposable.");t.stack.push({value:e,dispose:r,async:n})}else n&&t.stack.push({async:!0});return e}var O="function"==typeof SuppressedError?SuppressedError:function(t,e,n){var r=new Error(n);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function L(t){function e(e){t.error=t.hasError?new O(e,t.error,"An error was suppressed during disposal."):e,t.hasError=!0}return function n(){for(;t.stack.length;){var r=t.stack.pop();try{var i=r.dispose&&r.dispose.call(r.value);if(r.async)return Promise.resolve(i).then(n,(function(t){return e(t),n()}))}catch(t){e(t)}}if(t.hasError)throw t.error}()}const F={__extends:i,__assign:o,__rest:a,__decorate:s,__param:u,__metadata:f,__awaiter:p,__generator:g,__createBinding:m,__exportStar:v,__values:y,__read:b,__spread:_,__spreadArrays:w,__spreadArray:S,__await:T,__asyncGenerator:x,__asyncDelegator:I,__asyncValues:k,__makeTemplateObject:E,__importStar:N,__importDefault:A,__classPrivateFieldGet:P,__classPrivateFieldSet:R,__classPrivateFieldIn:D,__addDisposableResource:M,__disposeResources:L}}},o={};function a(t){var e=o[t];if(void 0!==e)return e.exports;var n=o[t]={id:t,loaded:!1,exports:{}};return i[t].call(n.exports,n,n.exports,a),n.loaded=!0,n.exports}t="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",e="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",r=t=>{t&&t.d<1&&(t.d=1,t.forEach((t=>t.r--)),t.forEach((t=>t.r--?t.r++:t())))},a.a=(i,o,a)=>{var s;a&&((s=[]).d=-1);var u,c,l,h=new Set,d=i.exports,f=new Promise(((t,e)=>{l=e,c=t}));f[e]=d,f[t]=t=>(s&&t(s),h.forEach(t),f.catch((t=>{}))),i.exports=f,o((i=>{var o;u=(i=>i.map((i=>{if(null!==i&&"object"==typeof i){if(i[t])return i;if(i.then){var o=[];o.d=0,i.then((t=>{a[e]=t,r(o)}),(t=>{a[n]=t,r(o)}));var a={};return a[t]=t=>t(o),a}}var s={};return s[t]=t=>{},s[e]=i,s})))(i);var a=()=>u.map((t=>{if(t[n])throw t[n];return t[e]})),c=new Promise((e=>{(o=()=>e(a)).r=0;var n=t=>t!==s&&!h.has(t)&&(h.add(t),t&&!t.d&&(o.r++,t.push(o)));u.map((e=>e[t](n)))}));return o.r?c:a()}),(t=>(t?l(f[n]=t):c(d),r(s)))),s&&s.d<0&&(s.d=0)},a.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return a.d(e,{a:e}),e},a.d=(t,e)=>{for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),a.hmd=t=>((t=Object.create(t)).children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t),a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),a.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.nc=void 0;a(44)})();